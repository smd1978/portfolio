"use strict";function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sxjefrb=function(){var t={doctypeStart:"<!DOCTYPE ",doctypeEnd:">",procInstStart:"<?",procInstEnd:"?>",tagOpenStart:"<",tagOpenEnd:">",tagCloseStart:"</",tagCloseEnd:">",tagShortStart:"<",tagShortEnd:"/>",attrValueStart:'="',attrValueEnd:'"',commentStart:"\x3c!--",commentEnd:"--\x3e",cdataStart:"<![CDATA[",cdataEnd:"]]>",textStart:"",textEnd:"",entities:{"&":"&amp;","'":"&apos;",'"':"&quot;",">":"&gt;","<":"&lt;"}};function e(n){if(this instanceof e==!1)return new e(n);this.opts=Object.assign(t,n)}function n(t){for(var e,n="",r=0;r<t.childNodes.length;r++)switch((e=t.childNodes[r]).nodeType){case 1:n+=this.elem(e);break;case 3:n+=this.text(e.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;"));break;case 4:n+=this.cdata(e.nodeValue);break;case 7:n+=this.processingInstruction(e.nodeValue);break;case 8:n+=this.comment(e.nodeValue);break;case 10:n+=this.doctype(e.nodeValue)}return n}return e.prototype.serializeToString=function(t,e){var r=n.call(this,t);return e||(r=r?this.opts.tagOpenStart+t.tagName+this.attrs(t)+this.opts.tagOpenEnd+r+this.opts.tagCloseStart+t.tagName+this.opts.tagCloseEnd:this.opts.tagShortStart+t.tagName+this.attrs(t)+this.opts.tagShortEnd),r},e.prototype.doctype=function(t){return this.opts.doctypeStart+t+this.opts.doctypeEnd},e.prototype.processingInstruction=function(t){return this.opts.procInstStart+t+this.opts.procInstEnd},e.prototype.cdata=function(t){return this.opts.cdataStart+t+this.opts.cdataEnd},e.prototype.comment=function(t){return this.opts.commentStart+t+this.opts.commentEnd},e.prototype.elem=function(t){return 0===t.childNodes.length?this.opts.tagShortStart+t.tagName+this.attrs(t)+this.opts.tagShortEnd:this.opts.tagOpenStart+t.tagName+this.attrs(t)+this.opts.tagOpenEnd+n.call(this,t)+this.opts.tagCloseStart+t.tagName+this.opts.tagCloseEnd},e.prototype.attrs=function(t){var e="";return Object.keys(t.attributes).forEach((function(n){var r=t.attributes[n];""!==r.value&&(e+=" "+r.name+this.opts.attrValueStart+r.value+this.opts.attrValueEnd)}),this),e},e.prototype.text=function(t){return this.opts.textStart+t+this.opts.textEnd},e}(),qpfy20c=function(){var t=require("css-what"),e=new Map,n=[];function r(i){if(this instanceof r==!1)return new r(i);e.has(i)?this.queries=e.get(i):(this.queries=t.parse(i,{xmlMode:!0}),n.length>100&&e.delete(n.shift()),e.set(i,this.queries),n.push(i))}return r.prototype.matches=function(t){var e=(this.queries||[]).length,n=!1;if(0===e)return!1;for(;e--;)if(r(this.queries[e],t)){n=!0;break}return n;function r(t,e){for(var n,r,o,a,s=t.length,c=!1;s--;){switch((n=t[s]).type){case"child":s--,r=e.parentNode,c=i(t[s],r);break;case"descendant":for(s--,r=e.parentNode;1===r.nodeType&&!1===c;)!1===(c=i(t[s],r))&&(r=r.parentNode);break;case"adjacent":s--,(a=(o=(r=e.parentNode).childNodes).indexOf(e))>0&&(a--,c=i(t[s],o[a]));break;case"sibling":for(s--,a=(o=(r=e.parentNode).childNodes).indexOf(e);a>0&&!1===c;)a--,c=i(t[s],o[a]);break;case"parent":break;default:c=i(n,e)}if(!1===c)break}return c}function i(t,e){var n,r,i=!1;if(!e||1!==e.nodeType)return!1;switch(t.type){case"universal":i=!0;break;case"tag":i=e.tagName===t.name;break;case"attribute":switch(t.action){case"exists":i=void 0!==e.attributes[t.name];break;case"equals":i=e.attributes[t.name]&&(n=e.attributes[t.name].value,r=t.value,String(n)===String(r));break;case"start":i=0===(e.attributes[t.name]&&e.attributes[t.name].value||"").indexOf(t.value);break;case"end":i=(e.attributes[t.name]&&e.attributes[t.name].value||"").slice(-t.value.length)===t.value;break;case"element":i=(e.attributes[t.name]&&e.attributes[t.name].value||"").indexOf(t.value)>-1}}return i}},r}(),c122nzw=function(){var t=qpfy20c,e=["id","fill","stroke","style","color","stop-color","flood-color","x","y","clip-path","stroke-width","transform","offset","xlink:href","href","class","opacity","fill-rule","fill-opacity","stroke-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","text-anchor","filter","mask","display","overflow"],n=["fill","stroke","color","stop-color","flood-color"],r={},i=n.map((function(t){return"["+t+"]"})).join(","),o=["stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"],a={},s=o.map((function(t){return"["+t+"]"})).join(","),c=["font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","text-anchor"],u={},l=c.map((function(t){return"["+t+"]"})).join(","),f=["style","color","fill-rule","fill-opacity","mask","xlink:href","href","fill","stroke","display","overflow"],d=["opacity","fill-opacity","stroke-opacity","stroke-width","fill-rule","stroke-linecap","stroke-linejoin","text-anchor","stroke-dashoffset","stroke-dasharray","stroke-miterlimit","font-size","font-weight","filter","font-family"];n.forEach((function(t){r[t]=n.filter((function(e){return e!==t}))})),o.forEach((function(t){a[t]=o.filter((function(e){return e!==t}))})),c.forEach((function(t){u[t]=c.filter((function(e){return e!==t}))}));var h={remove:function(t,e){(e=e||x(t))&&void 0===t._disable_cache&&(y(e,t).forEach((function(n){p(e,n,t)})),t.childNodes.forEach((function(t){h.remove(t,e)})))},removeAttr:function(t,n){var r;-1!==e.indexOf(n)&&(r=x(t))&&m(t,n,!0).forEach((function(e){p(r,e,t)}))},store:function(t,e){var n,r=0;if((e=e||x(t))&&void 0===t._disable_cache){for(e._cache=e._cache||{},n=y(e,t);r<n.length;r++)g(e,n[r],t);t.childNodes.forEach((function(t){h.store(t,e)}))}},storeAttr:function(t,n,r){var o,a,c;-1!==e.indexOf(n)&&(o=x(t))&&(a=m(t,n),void 0!==r&&(a.forEach((function(e){e!==i&&e!==s&&e!==l&&p(o,e,t)})),(c="["+n+'="'+r+'"]')!==i&&c!==s&&c!==l&&p(o,c,t)),a.forEach((function(e){g(o,e,t)})))},get:function(t,e){var n,r=x(t);return(n=r&&r._cache&&r._cache[e]?_toConsumableArray(r._cache[e].values()):[])&&n.sort((function(t,e){return t._id-e._id})),n},query:function(e,n){var r,o,a={},c=!1;if(h.isRoot(e))if(1===(r=new t(n).queries).length){if(1===r[0].length)if("attribute"===r[0][0].type){if("equals"===r[0][0].action)if(d.indexOf(r[0][0].name)>-1)a.result=h.get(e,n);else switch(r[0][0].name){case"id":case"fill":case"stroke":case"x":case"y":a.result=h.get(e,n);break;case"clip-path":r[0][0].value.startsWith("url(")&&(a.result=h.get(e,n))}else if("exists"===r[0][0].action)if(f.indexOf(r[0][0].name)>-1)a.result=h.get(e,n);else switch(r[0][0].name){case"xlink:href":case"href":a.result=h.get(e,n)}else if("element"===r[0][0].action&&"class"===r[0][0].name)a.result=h.get(e,n)}else"tag"===r[0][0].type&&(a.result=h.get(e,r[0][0].name));else if("svg text"===n)a.result=h.get(e,"text");else if("tag"===r[0][0].type&&"attribute"===r[0][1].type&&"exists"===r[0][1].action)if("g"===r[0][0].name)switch(r[0][1].name){case"fill":case"stroke":case"stroke-width":case"transform":a.result=h.get(e,n)}else if("stop"===r[0][0].name&&"offset"===r[0][1].name)a.result=h.get(e,n)}else(o=n.match(/\[fill="url\((.+?)\)"], *\[stroke="url\(\1\)"]|\[stroke="url\(\1\)"], *\[fill="url\(\1\)"]/))&&(a.result=h.get(e,'[fill="url('+o[1]+')"],[stroke="url('+o[1]+')"]'),c=!0),c||n!==i||(a.result=h.get(e,i),c=!0),c||n!==s||(a.result=h.get(e,s),c=!0),c||n!==l||(a.result=h.get(e,l),c=!0),c||"[xlink\\:href], [href]"!==n||(a.result=h.get(e,n),c=!0),c||(o=n.match(/\[(fill|stroke|color|stop-color|flood-color)=currentColor], *\[\1=currentcolor]/))&&(a.result=h.get(e,"["+o[1]+"=currentcolor]"),c=!0);return a},isRoot:function(t){var e,n=t.nodeType,r=!1;return 9===n||11===n?r=!0:(e=t.parentNode)&&(9!==(n=e.nodeType)&&11!==n||(r=!0)),r}},v={};function p(t,e,n){t._cache[e]&&t._cache[e].has(n._id)&&t._cache[e].delete(n._id)}function g(t,e,n){t._cache[e]=t._cache[e]||new Map,!1===t._cache[e].has(n._id)&&t._cache[e].set(n._id,n)}function m(t,e,h){var p,g=t.attributes,m=t.parentNode,y=[];switch(e){case"class":return m&&9!==m.nodeType&&g.class&&(p=g.class.value,void 0===v[p]&&(v[p]=[],p.split(" ").forEach((function(t){v[p].push("."+t)})))),v[p]||[];case"transform":return"g"===t.tagName?["g[transform]"]:y;case"stroke-linejoin":return m&&9!==m.nodeType&&(void 0!==g["stroke-linejoin"]&&y.push('[stroke-linejoin="'+g["stroke-linejoin"].value+'"]'),h&&a["stroke-linejoin"].some((function(t){return void 0!==g[t]}))||y.push(s)),y;case"stroke-linecap":return m&&9!==m.nodeType&&(void 0!==g["stroke-linecap"]&&y.push('[stroke-linecap="'+g["stroke-linecap"].value+'"]'),h&&a["stroke-linecap"].some((function(t){return void 0!==g[t]}))||y.push(s)),y;case"fill-opacity":return m&&9!==m.nodeType&&void 0!==g[e]&&(y=['[fill-opacity="'+g["fill-opacity"].value+'"]',"[fill-opacity]"]),y;case"stroke-opacity":return m&&9!==m.nodeType&&(void 0!==g["stroke-opacity"]&&y.push('[stroke-opacity="'+g[e].value+'"]'),h&&a["stroke-opacity"].some((function(t){return void 0!==g[t]}))||y.push(s)),y;case"stroke-width":return"g"===t.tagName&&y.push("g[stroke-width]"),m&&9!==m.nodeType&&(void 0!==g["stroke-width"]&&y.push('[stroke-width="'+g["stroke-width"].value+'"]'),h&&a["stroke-width"].some((function(t){return void 0!==g[t]}))||y.push(s)),y;case"x":case"y":return m&&9!==m.nodeType&&g[e]&&"0"===g[e].value&&y.push("["+e+'="0"]'),y;case"id":return g.id&&y.push("#"+g.id.value),y;case"fill":case"stroke":return"g"===t.tagName&&y.push("g["+e+"]"),void 0!==g[e]&&(p=g[e].value,y.push("["+e+'="'+p+'"]'),0===p.indexOf("url(")&&y.push('[fill="'+p+'"],[stroke="'+p+'"]'),"currentColor"===p&&y.push("["+e+"=currentcolor]")),m&&9!==m.nodeType&&(void 0!==g[e]&&y.push("["+e+"]"),h&&r[e].some((function(t){return void 0!==g[t]}))||y.push(i)),y;case"offset":return"stop"===t.tagName&&y.push("stop[offset]"),y;case"clip-path":return function(t,e){var n;t["clip-path"]&&0===(n=t["clip-path"].value).indexOf("url(")&&e.push('[clip-path="'+n+'"]')}(g,y),y;case"href":return g.href&&(y=["[href]","[xlink\\:href], [href]"]),y;case"xlink:href":return g["xlink:href"]&&(y=["[xlink\\:href]","[xlink\\:href], [href]"]),y;case"font-size":return m&&9!==m.nodeType&&(void 0!==g["font-size"]&&y.push('[font-size="'+g["font-size"].value+'"]'),h&&u["font-size"].some((function(t){return void 0!==g[t]}))||y.push(l)),y;case"text-anchor":return m&&9!==m.nodeType&&(void 0!==g["text-anchor"]&&y.push('[text-anchor="'+g["text-anchor"].value+'"]'),h&&u["text-anchor"].some((function(t){return void 0!==g[t]}))||y.push(l)),y}return d.indexOf(e)>-1?function(t,e,n,r){e[r]&&t&&9!==t.nodeType&&n.push("["+r+'="'+e[r].value+'"]')}(m,g,y,e):n.indexOf(e)>-1&&void 0!==g[e]&&("currentcolor"!==(p=g[e].value)&&"currentColor"!==p||y.push("["+e+"=currentcolor]")),m&&9!==m.nodeType&&(f.indexOf(e)>-1&&void 0!==g[e]&&y.push("["+e+"]"),n.indexOf(e)>-1?h&&r[e].some((function(t){return void 0!==g[t]}))||y.push(i):o.indexOf(e)>-1?h&&a[e].some((function(t){return void 0!==g[t]}))||y.push(s):c.indexOf(e)>-1&&(h&&u[e].some((function(t){return void 0!==g[t]}))||y.push(l))),y}function y(t,e){var r,a=[],u=e.attributes,h=e.parentNode,v=e.tagName,p=h&&9===h.nodeType;return void 0!==v&&a.push(v),Object.keys(u).forEach((function(t){switch(t){case"class":u.class.value.split(" ").forEach((function(t){a.push("."+t)}));break;case"id":a.push("#"+u.id.value);break;case"x":case"y":!p&&u[t]&&"0"===u[t].value&&a.push("["+t+'="0"]');break;case"offset":"stop"===v&&u[t]&&a.push("stop[offset]");break;case"clip-path":u[t]&&0===(r=u[t].value).indexOf("url(")&&a.push("["+t+'="'+r+'"]');break;case"xlink:href":u[t]&&(a.push("[xlink\\:href]"),a.push("[xlink\\:href], [href]"));break;case"href":u[t]&&(a.push("[href]"),a.push("[xlink\\:href], [href]"));break;case"fill":case"stroke":"g"===v&&u[t]&&a.push("g["+t+"]"),u[t]&&(r=u[t].value,a.push("["+t+'="'+r+'"]'),0===r.indexOf("url(")&&a.push('[fill="'+r+'"],[stroke="'+r+'"]'));break;case"stroke-width":case"transform":"g"===v&&u[t]&&a.push("g["+t+"]")}n.indexOf(t)>-1&&u[t]&&("currentColor"===(r=u[t].value)&&a.push("["+t+"=currentcolor]"),p||a.push(i)),d.indexOf(t)>-1&&u[t]&&h&&9!==h.nodeType&&a.push("["+t+'="'+u[t].value+'"]'),p||(o.indexOf(t)>-1&&u[t]&&a.push(s),c.indexOf(t)>-1&&u[t]&&a.push(l),f.indexOf(t)>-1&&u[t]&&a.push("["+t+"]"))})),a}function x(t){var e=t.nodeType;return 9===e||11===e?t:4===e?null:t.ownerDocument}return h}(),er6imm=function(){var t=sxjefrb,e=qpfy20c,n=c122nzw,r=0;function i(){this.i={attrs:{},childs:[]},this.style={},this.attributes=this.i.attrs}return i.prototype={hasAttributes:function(){return this.attributes.length>0},cloneNode:function(t){var e,n,r=o(this),i=0;if(t)for(e=this.childNodes.length;i<e;i++)n=this.childNodes[i].cloneNode(t),r.appendChild(n);return r;function o(t){var e;switch(t.constructor_name){case"Element":(e=new t.constructor(t.tagName)).attributes=Object.assign({},t.attributes),e.nodeValue=t.nodeValue,e.ownerDocument=t.ownerDocument;break;case"Text":(e=new t.constructor(t.nodeValue)).attributes=Object.assign({},t.attributes),e.ownerDocument=t.ownerDocument;break;case"INST":case"Comment":case"CDATA":e=new t.constructor(t.nodeValue)}return e.nodeType=t.nodeType,e}},appendChild:function(t){var e,i=0;if(11===t.nodeType){for(e=t.childNodes;i<e.length;i++)o(e[i],this);t.childNodes=[]}else o(t,this);return t;function o(t,e){var i=t.parentNode;i&&11!==i.nodeType&&i.removeChild(t),t.parentNode=e,void 0===t._id&&(t._id=r,r++),n.store(t),e.childNodes.push(t)}},removeChild:function(t){var e,r;return n.remove(t),t.parentNode=null,-1===(e=(r=this.childNodes).indexOf(t))?this:(r.splice(e,1),t)},insertBefore:function(t,e){var i,o=this.childNodes.indexOf(e),a=0;if(-1===o)return this.appendChild(t);if(11===t.nodeType){for(i=t.childNodes;a<i.length;++a)s(i[a],this,o),o++;return t.childNodes=[],this}return s(t,this,o);function s(t,e,i){var o=t.parentNode;return o&&11!==o.nodeType&&o.removeChild(t),t.parentNode=e,void 0===t._id&&(t._id=r,r++),n.store(t),e.childNodes.splice(i,0,t),t}},replaceChild:function(t,e){var n;return t.parentNode&&t.parentNode.removeChild(t),n=e.nextSibling,11===t.nodeType&&(t.childNodes[0]._id=e._id),1===t.nodeType&&(t._id=e._id),this.removeChild(e),this.insertBefore(t,n),e},replaceWith:function(){var t,e=this,n=e.parentNode,r=arguments.length;if(n&&0!==r)for(;r--;)"object"!==_typeof(t=arguments[r])?t=e.ownerDocument.createTextNode(t):t.parentNode&&t.parentNode.removeChild(t),0===r?n.replaceChild(t,e):n.insertBefore(t,e.previousSibling)},prepend:function(){var t=this,e=Array.prototype.slice.call(arguments),n=t.firstChild;e.forEach((function(e){var r=e instanceof i;t.insertBefore(r?e:t.ownerDocument.createTextNode(String(e)),n)}))},append:function(){var t=this,e=Array.prototype.slice.call(arguments);e.forEach((function(e){var n=e instanceof i;t.appendChild(n?e:t.ownerDocument.createTextNode(String(e)))}))},getElementById:function(t){var e=null,r=0,i=this.childNodes.length,o=n.query(this,"#"+t);if(o.result)return o.result.length>0?o.result[0]:null;for(;null===e&&r<i;)e=1===this.childNodes[r].nodeType&&this.childNodes[r].id===t?this.childNodes[r]:this.childNodes[r].getElementById(t),r++;return e},getElementsByTagName:function(t){var e=this,r=[],i=0,o=n.query(e,t),a=this.tagName;if(o.result)return o.result.filter((function(t){return t._id!==e._id}));if("use"===t&&"linearGradient"===a||"radialGradient"===a||"filter"===a)return[];for(;i<this.childNodes.length;i++)1===this.childNodes[i].nodeType&&this.childNodes[i].tagName===t&&r.push(this.childNodes[i]),this.childNodes[i].childNodes.length&&Array.prototype.push.apply(r,this.childNodes[i].getElementsByTagName(t));return r},getElementsByClassName:function(t){var e=n.query(this,"."+t);return e.result?e.result:this.childNodes.reduce((function(e,n){var r;return 1===n.nodeType&&(r=n.getAttribute("class"))&&r.indexOf(t)>-1&&e.push(n),Array.prototype.push.apply(e,n.getElementsByClassName(t)),e}),[])},matches:function(t){return e(t).matches(this)},querySelectorAll:function(t){var e=n.query(this,t);return e.result?e.result:this.childNodes.reduce((function(e,n){return 1===n.nodeType&&(n.matches(t)&&e.push(n),Array.prototype.push.apply(e,n.querySelectorAll(t,!0))),e}),[])},querySelector:function(t){var e=null,r=0,i=this.childNodes.length,o=n.query(this,t);if(o.result)return o.result.length>0?o.result[0]:null;for(;null===e&&r<i;)e=this.childNodes[r].matches(t)?this.childNodes[r]:this.childNodes[r].querySelector(t),r++;return e},closest:function(t){var e=this;do{if(e.matches(t))return e;e=e.parentNode||null}while(null!==e&&1===e.nodeType);return null},descend:function(){return this.childNodes.reduce((function(t,e){return 1===e.nodeType&&t.push(e),Array.prototype.push.apply(t,e.descend()),t}),[])}},Object.defineProperty(i.prototype,"innerHTML",{get:function(){return 3===this.nodeType?this.nodeValue:(new t).serializeToString(this,!0)},set:function(t){for(var e=t instanceof i,r=0;r<(this.i.childs||[]).length;r++)this.removeChild(this.i.childs[r]);e&&(t.parentNode=this,n.store(t)),this.i.childs=[e?t:this.ownerDocument.createTextNode(String(t))]}}),Object.defineProperty(i.prototype,"outerHTML",{get:function(){var e=this.nodeType;return 3===e?this.nodeValue:9===e||11===e?this.innerHTML:(new t).serializeToString(this)},set:function(){}}),Object.defineProperty(i.prototype,"textContent",{get:function(){return t=function t(e){var n=e.nodeType;return 3===n||4===n?e.nodeValue:e.childNodes.reduce((function(e,n){return e+t(n)}),"")}(this),e={"&amp;":"&","$lt;":"<","$gt;":">","&quot;":'"',"&apos;":"'"},Object.keys(e).forEach((function(n){t.indexOf(n)>-1&&(t=t.replace(new RegExp(n,"g"),e[n]))})),t;var t,e},set:function(t){var e=this;(this.i.childs||[]).forEach((function(t){e.removeChild(t)})),this.ownerDocument&&(this.i.childs=[this.ownerDocument.createTextNode(t)])}}),Object.defineProperty(i.prototype,"childNodes",{get:function(){return this.i.childs},set:function(t){this.i.childs=t}}),Object.defineProperty(i.prototype,"parentNode",{get:function(){return this.i.parentNode},set:function(t){var e;this.i.parentNode=t,null===t?this.ownerDocument=null:(e=t.nodeType,this.ownerDocument=9===e||11===e?t:t.ownerDocument)}}),Object.defineProperty(i.prototype,"lastChild",{get:function(){return this.i.childs[this.i.childs.length-1]||null}}),Object.defineProperty(i.prototype,"firstChild",{get:function(){return this.i.childs[0]||null}}),Object.defineProperty(i.prototype,"children",{get:function(){return this.i.childs.filter((function(t){return 1===t.nodeType}))}}),Object.defineProperty(i.prototype,"nextSibling",{get:function(){var t,e,n=this.i.parentNode;return n&&(t=n.childNodes.indexOf(this),e=n.childNodes[t+1]),e||null}}),Object.defineProperty(i.prototype,"previousSibling",{get:function(){var t,e,n=this.i.parentNode;return n&&(t=n.childNodes.indexOf(this),e=n.childNodes[t-1]),e||null}}),i}(),fkghwp=function(){var t=er6imm,e=c122nzw,n={"http://www.w3.org/1999/xlink":"xlink"};function r(e){t.call(this),this.tagName=e,this.nodeType=1}function i(t){return n[t]?n[t]+":":""}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.constructor_name="Element",r.prototype.getAttributeNames=function(){return Object.keys(this.i.attrs)},r.prototype.hasAttribute=function(t){return void 0!==this.i.attrs[t]},r.prototype.removeAttribute=function(t){e.removeAttr(this,t),delete this.i.attrs[t]},r.prototype.setAttribute=function(t,n){var r,i,o,a,s=t.indexOf(":")>-1?t.split(":"):[];s.length>1&&(r=s.shift(),i=s.join("")||""),t&&((a=this.i.attrs)[t]?(o=a[t].value,a[t].value=n,void 0===this._disable_cache&&e.storeAttr(this,t,o)):(a[t]={nodeType:2,local:i,name:t,value:n,prefix:r},void 0===this._disable_cache&&e.storeAttr(this,t)))},r.prototype.getAttribute=function(t){var e=this.i.attrs;return e&&void 0!==e[t]?e[t].value:""},r.prototype.createSVGLength=function(){var t={1:"px",5:"px",6:"cm",7:"mm",8:"in",9:"pt"},e={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1}};function n(){this.unitType=5,this.value=0,this.valueAsString="0",this.valueInSpecifiedUnits=0}return n.prototype={newValueSpecifiedUnits:function(n,r){var i=t[this.unitType],o=t[n];this.value=e[i][o]*r,this.unitType=n,"px"===o&&(o=""),this.valueAsString=r+(o||""),this.valueInSpecifiedUnits=r},convertToSpecifiedUnits:function(e){var n=t[e];"px"===n&&(n=""),this.unitType=e,this.valueAsString=this.value+(n||""),this.valueInSpecifiedUnits=this.value}},new n},r.prototype.hasAttributeNS=function(t,e){var n=i(t);return 0!==e.indexOf(n)&&(e=n+e),this.hasAttribute(e)},r.prototype.getAttributeNS=function(t,e){var n=i(t);return 0!==e.indexOf(n)&&(e=n+e),this.getAttribute(e)},r.prototype.setAttributeNS=function(t,e,n){var r=i(t);0!==e.indexOf(r)&&(e=r+e),this.setAttribute(e,n)},r.prototype.removeAttributeNS=function(t,e){this.removeAttribute(i(t)+e)},Object.defineProperty(r.prototype,"id",{get:function(){var t=this.i.attrs;return t&&t.id&&t.id.value?t.id.value:""},set:function(t){this.setAttribute("id",t)}}),Object.defineProperty(r.prototype,"nextElementSibling",{get:function(){var t,e,n,r=this.parentNode;if(r)for(e=(t=r.childNodes).indexOf(this)+1;e<t.length;e++)if(1===t[e].nodeType){n=t[e];break}return n||null}}),Object.defineProperty(r.prototype,"previousElementSibling",{get:function(){var t,e,n=this.parentNode;if(n)for(t=n.childNodes.indexOf(this)-1;t>=0;t--)if(1===n.childNodes[t].nodeType){e=n.childNodes[t];break}return e||null}}),Object.defineProperty(r.prototype,"childElementCount",{get:function(){for(var t,e=0,n=0,r=this.childNodes;t=r[e++];)1===t.nodeType&&n++;return n}}),r}(),kti89x=function(){var t=er6imm;function e(e){t.call(this),this.nodeType=3,this.nodeValue=e}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.constructor_name="Text",e}(),cfrujfk=function(){var t=er6imm;function e(e){t.call(this),this.nodeType=8,this.nodeValue=e}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.constructor_name="Comment",e}(),cvnn3w=function(){var t=er6imm;function e(e){t.call(this),this.nodeType=4,this.nodeValue=e}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.constructor_name="CDATA",e}(),o1xdv0=function(){var t=er6imm;function e(e){t.call(this),this.nodeType=7,this.nodeValue=e}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.constructor_name="INST",e}(),fgzl08f=function(){var t=er6imm,e=fkghwp,n=kti89x,r=cfrujfk,i=cvnn3w,o=o1xdv0;function a(){t.call(this),this.parentNode=null,this.nodeType=11}return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype.constructor_name="Fragment",a.prototype.createElement=function(t){return new e(t)},a.prototype.createElementNS=function(t,n){return new e(n)},a.prototype.createTextNode=function(t){return new n(t)},a.prototype.createCDATASection=function(t){return new i(t)},a.prototype.createDocumentFragment=function(){return new a},a.prototype.createProcessingInstruction=function(t){return new o(t)},a.prototype.createComment=function(t){return new r(t)},a}(),d6t2eck=function(){var t=er6imm,e=fkghwp,n=kti89x,r=fgzl08f,i=cfrujfk,o=cvnn3w,a=o1xdv0;function s(){t.call(this),this.parentNode=null,this.nodeType=9}return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype.constructor_name="Document",s.prototype.createElement=function(t){return new e(t)},s.prototype.createElementNS=function(t,n){return new e(n)},s.prototype.createTextNode=function(t){return new n(t)},s.prototype.createCDATASection=function(t){return new o(t)},s.prototype.createDocumentFragment=function(){return new r},s.prototype.createProcessingInstruction=function(t){return new a(t)},s.prototype.createComment=function(t){return new i(t)},s}(),y1ndxx=function(){var t=require("htmlparser2"),e=d6t2eck,n={xmlMode:!0,decodeEntities:!1,comment:!1,inst:!1,doctype:!1},r={"fill-opacity":"1","stroke-opacity":"1","stroke-width":"1","stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0",fill:"#000000",stroke:"none","fill-rule":"nonzero",opacity:"1",x:{altGlyph:"none",feBlend:"0%",feColorMatrix:"0%",feComponentTransfer:"0%",feComposite:"0%",feConvolveMatrix:"0%",feDiffuseLighting:"0%",feDisplacementMap:"0%",feDropShadow:"0%",feFlood:"0%",feFuncA:"0%",feFuncB:"0%",feFuncG:"0%",feFuncR:"0%",feGaussianBlur:"0%",feImage:"0%",feMerge:"0%",feMergeNode:"0%",feMorphology:"0%",feOffset:"0%",fePointLight:"0",feSpecularLighting:"0%",feSpotLight:"0",feTile:"0%",feTurbulence:"0%",filter:"-10%",foreignObject:"0",glyphRef:"0",image:"0",mask:"-10%",pattern:"0",rect:"0",svg:"0",text:"0",tref:"0",tspan:"none",use:"0"},y:{altGlyph:"none",feBlend:"0%",feColorMatrix:"0%",feComponentTransfer:"0%",feComposite:"0%",feConvolveMatrix:"0%",feDiffuseLighting:"0%",feDisplacementMap:"0%",feDropShadow:"0%",feFlood:"0%",feFuncA:"0%",feFuncB:"0%",feFuncG:"0%",feFuncR:"0%",feGaussianBlur:"0%",feImage:"0%",feMerge:"0%",feMergeNode:"0%",feMorphology:"0%",feOffset:"0%",fePointLight:"0",feSpecularLighting:"0%",feSpotLight:"0",feTile:"0%",feTurbulence:"0%",filter:"-10%",foreignObject:"0",glyphRef:"none",image:"0",mask:"-10%",pattern:"0",rect:"0",svg:"0",text:"0",tref:"0",tspan:"none",use:"0"},cx:{circle:"0",ellipse:"0",radialGradient:"50%"},cy:{circle:"0",ellipse:"0",radialGradient:"50%"},width:{feBlend:"100%",feColorMatrix:"100%",feComponentTransfer:"100%",feComposite:"100%",feConvolveMatrix:"100%",feDiffuseLighting:"100%",feDisplacementMap:"100%",feDropShadow:"100%",feFlood:"100%",feGaussianBlur:"100%",feImage:"100%",feMerge:"100%",feMorphology:"100%",feOffset:"100%",feSpecularLighting:"100%",feTile:"100%",feTurbulence:"100%",filter:"120%",foreignObject:"0",image:"auto",mask:"120%",pattern:"0",rect:"auto",svg:"auto",use:"auto"},height:{feBlend:"100%",feColorMatrix:"100%",feComponentTransfer:"100%",feComposite:"100%",feConvolveMatrix:"100%",feDiffuseLighting:"100%",feDisplacementMap:"100%",feDropShadow:"100%",feFlood:"100%",feGaussianBlur:"100%",feImage:"100%",feMerge:"100%",feMorphology:"100%",feOffset:"100%",feSpecularLighting:"100%",feTile:"100%",feTurbulence:"100%",filter:"120%",foreignObject:"0",image:"auto",mask:"120%",pattern:"0",rect:"auto",svg:"auto",use:"auto"},r:{circle:"0",radialGradient:"50%"},rx:{ellipse:"auto",rect:"auto"},ry:{ellipse:"auto",rect:"auto"},offset:"0","stop-opacity":"1","stop-color":"#000000","text-anchor":"start","text-rendering":"auto","text-decoration":"none","font-size":"medium","font-style":"normal","font-weight":"normal","font-variant":"normal","font-stretch":"normal"};function i(t){if(this instanceof i==!1)return new i(t);this.opts=Object.assign(n,t)}return i.prototype.parseFromString=function(n){var r,i=this,o=!1;return i.document=new e,i.current=i.document,i.stack=[],(r=new t.Parser({onopentag:function(t,e){var n=i.document.createElement(t);n._disable_cache=!0,Object.keys(e).forEach((function(t){var r=e[t];n.setAttribute(t,r)})),delete n._disable_cache,i.current.appendChild(n),i.current=n,i.stack.push(i.current)},onclosetag:function(){i.stack.pop(),i.current=i.stack[i.stack.length-1]},ontext:function(t){t&&i.current&&i.current!==i.document&&(o?i.current.appendChild(i.document.createCDATASection(t)):i.current.appendChild(i.document.createTextNode(t)))},oncdatastart:function(){o=!0},oncdataend:function(){o=!1},onerror:function(t){console.error(t)}},this.opts)).write(n),r.end(),i.document.childNodes[0].parentNode=i.document,i.document.documentElement=i.document.childNodes[0],i.document},{DOMParser:i,XMLSerializer:sxjefrb,DocumentFragment:fgzl08f,Node:er6imm,getComputedStyle:function(t){return{getPropertyValue:function(n){return e(t,n)}};function e(t,n){var i;return i=function(t,e){var n={val:"",important:!1};return(t.getAttribute("style")||"").split(/ *; */g).forEach((function(t){var r,i=t.split(":").map((function(t){return(t||"").trim()})),o=i[1];if(i[0]===e&&o)return r=o.indexOf("!important")>-1,(o=o.replace("!important","").trim())||(r=!1),n={val:o,important:r},!1})),n}(t,n),i.important?i.val:(i=function(t,e,n){var r={val:n,important:!1};return t.ownerDocument.getElementsByTagName("style").forEach((function(n){var i=function(t){var e,n,r,i,o,a=t.textContent.replace(/\s/g," ").replace(/^.*?CDATA\[*/,""),s=[],c=/}* *(.*?){(.*?)}/g,u=/([-\w]+) *: *([^;]+);*/g,l=/@import url\(["'](.*?)["']\)/g;for(;i=c.exec(a);){for(i[0]=i[0].replace(/@import url\("(.*?)"\);*/g,"").trim(),i[1]=i[1].replace(/@import url\("(.*?)"\);*/g,"").trim(),n={},r=0,"@font-face"===(e={type:1,cssText:i[0],selectorText:i[1].trim()}).selectorText&&(e.type=5);o=u.exec(i[2]);)n[r]=o[1],"src"===n[r]&&0===o[2].indexOf("url(")?n[o[1]]=i[2].match(/url\(['"]*.*['"]*\)/)[0]:n[o[1]]=o[2],r++;n.length=r,e.style=n,s.push(e)}for(;i=l.exec(a);)e={type:3,cssText:i[0].trim(),href:i[1].trim()},s.push(e);return s}(n);i.forEach((function(n){1===n.type&&t.matches(n.selectorText)&&Object.keys(n.style,(function(t){var i=n.style[t]||"",o=i.indexOf("!important")>-1;"length"!==t&&isNaN(t)&&((i=i.replace("!important","").trim())||(o=!1),t!==e||r.val&&!o||(r={val:i,important:o}))}))}))})),r}(t,n,i.val),i.val||(i.val=t.getAttribute(n)),!i.val&&t.parentNode&&1===t.parentNode.nodeType&&(i.val=e(t.parentNode,n)),String(i.val||function(t,e){var n,i=r[e];i&&"string"!=typeof i&&(n=t.tagName,i=i[n]);return i}(t,n)||null))}}}}(),b0w4l=function(){require("perf_hooks").performance;var t=require("request"),e=y1ndxx,n=e.DOMParser,r=e.XMLSerializer,i=e.DocumentFragment,o=e.getComputedStyle,a=e.Node,s={},c={},u={},l=function(){},f=function(e){return new Promise((function(n,r){t(e,(function(t,e,i){t?r(t):n(i)}))}))};s.ex={};var d=new function(){var t={};return{_$:function(){return u(this).el},_eq:function(t){return h(u(this).el[t])},_find:function(t){var e,n,r=u(this),i=0,o=[];if(t)for(;i<r.el.length;i++)for(n=r.el[i].querySelectorAll(t),e=0;e<n.length;e++)o.push(n[e]);return h(o)},_exists:function(t){var e=u(this),n=!1;return e.el.length>0&&(n=null!==e.el[0].querySelector(t)),n},_findID:function(t){var e,n,r=u(this),i=0,o=[];if(t)for(e=h.escape(t),e=/\d/.test(e[0])?'[id="'+e+'"]':"#"+e;i<r.el.length;i++)(n=r.el[i].querySelector(e))&&o.push(n);return h(o)},_findClass:function(t){var e,n,r,i=u(this),o=0,s=[];if(t)for(t.indexOf("\\")>-1&&(t=h.unEscClasses(t)),e=t.indexOf(",")>-1?a(t,","):[t];o<i.el.length;o++)e.forEach((function(t){for(n=i.el[o].getElementsByClassName(t),r=0;r<n.length;r++)s.push(n[r])}));return h(s)},_findTag:function(t){var e,n,r,i=u(this),o=0,s=[];if(t)for(e=t.indexOf(",")>-1?a(t,","):[t];o<i.el.length;o++)e.forEach((function(t){for(n=i.el[o].getElementsByTagName(t),r=0;r<n.length;r++)s.push(n[r])}));return h(s)},_childClass:function(t){var e,n,r,i=u(this),o=0,s=[];if(t)for(t.indexOf("\\")>-1&&(t=h.unEscClasses(t)),e=t.indexOf(",")>-1?a(t,","):[t];o<i.el.length;o++)e.forEach((function(t){for(n=i.el[o].getElementsByClassName(t),r=0;r<n.length;r++)n[r].parentNode===i.el[o]&&s.push(n[r])}));return h(s)},_hasClass:function(t){for(var n=u(this),r=0,i=!1;r<n.el.length&&!(i=n.el[r].classList?n.el[r].classList.contains(t):e(n.el[r],t));r++);return i},_addClass:function(t){var e=u(this);return t&&e.el.forEach((function(e){t.split(" ").forEach((function(t){t&&(e.classList?e.classList.add(t):function(t,e){var n;if(!t.getAttribute)return;-1===(n=(t.getAttribute("class")||"").split(" ")).indexOf(e)&&(n.push(e),t.setAttribute("class",n.join(" ").trim()))}(e,t))}))})),e},_removeClass:function(t){var e=u(this);return void 0===t?e._removeAttr("class"):e.el.forEach((function(e){e.classList?e.classList.remove.apply(e.classList,t.trim().split(" ")):function(t,e){var n;if(!t.getAttribute)return;n=(t.getAttribute("class")||"").split(" "),e.split(" ").forEach((function(t){for(var e=n.length;e>=0;e--)n[e]===t&&n.splice(e,1)})),0===n.length?t.removeAttribute("class"):t.setAttribute("class",n.join(" ").trim())}(e,t)})),e},_toggleClass:function(t){var e=u(this);return t&&e.el.forEach((function(e){t.trim().split(" ").forEach((function(t){e.classList?e.classList.toggle(t):function(t,e){var n;if(!t.getAttribute)return;(n=(t.getAttribute("class")||"").split(" ")).indexOf(e)?n.splice(n.indexOf(e),1):n.push(e);t.setAttribute("class",n)}(e,t)}))})),e},_matches:function(t){var e=u(this).el.filter((function(e){return e.matches(t)}));return h(e)},_has:function(t){return u(this).el.some((function(e){return e.matches(t)}))},_children:function(t){var e,n,r=u(this),i=[],o=0;if(void 0===t)for(;o<r.el.length;o++)for(e=r.el[o].children,n=0;n<e.length;n++)i.push(e[n]);else for(;o<r.el.length;o++)for(e=r.el[o].children,n=0;n<e.length;n++)e[n].matches(t)&&i.push(e[n]);return h(i)},_siblings:function(t){for(var e,n,r,i=u(this),o=[],a=0;a<i.el.length;a++)for(n=i.el[a].parentElement.children,r=0;r<n.length;r++)e=n[r],i.el[a]===e||void 0!==t&&!e.matches(t)||o.push(e);return h(o)},_childCount:function(){for(var t=u(this),e=0,n=0;e<t.el.length;e++)n+=t.el[e].childElementCount;return n},_parent:function(){for(var t=u(this),e=[],n=0;n<t.el.length;n++)t.el[n].parentNode&&e.push(t.el[n].parentNode);return h(e)},_parentsUntil:function(t){for(var e,n=u(this),r="string"==typeof t,i=[],o=0;o<n.el.length;o++)for(e=n.el[o].parentNode;e&&(r?!1===e.matches(t):e._id!==t._id);)i.push(e),e=e.parentNode;return h(i)},_remove:function(){for(var t=u(this),e=0;e<t.el.length;e++)t.el[e].parentNode&&t.el[e].parentNode.removeChild(t.el[e]);return t},_clone:function(){for(var t=u(this),e=0,n=[];e<t.el.length;e++)n.push(t.el[e].cloneNode(!0));return new h(n)},_hasAttr:function(t){var e=u(this);return e.el[0]&&e.el[0].hasAttribute(t)},_attr:function(t,e){var n,r,i,o,a,s,c=u(this);if(void 0===e&&"object"!==_typeof(t))c.el.length>0?(r=c.el[0],o=h.attr(r,t)):o=null;else{for(i in void 0!==e&&(i=t,(t={})[i]=e),t)for(n=0;n<c.el.length;n++)!1!==(r=c.el[n]).hasAttribute(i)&&(a=r.getAttribute(i),s=t[i],String(a)===String(s))||(null===t[i]?r.removeAttribute(i):r.setAttribute(i,t[i]));o=c}return o},_removeAttr:function(t){for(var e=u(this),n=a(t),r=0;r<e.el.length;r++)n.forEach((function(t){e.el[r].removeAttribute(t)}));return e},_css:function(t,e){var n,r,i,a,s,c=u(this);if(void 0===e&&"object"!==_typeof(t))c.el.length>0?(""===(s=(r=c.el[0]).style[t]||"")&&(s=o(r).getPropertyValue(t).replace(/"/g,"")||null),null!==s&&(s=s.replace("px",""),s=h.isNumeric(s)?parseFloat(s):s)):s=null;else{for(i in void 0!==e&&(i=t,(t={})[i]=e),t)for(a=t[i]+(h.isNumeric(t[i])&&"stroke-opacity"!==i?"px":""),n=0;n<c.el.length;n++)(r=c.el[n]).style[i]!==a&&(r.style[i]=a);s=c}return s},_show:function(){return u(this)._each((function(t){t._css("display",""),"none"===t._css("display")&&t._css("display","block")}))},_hide:function(){return u(this)._each((function(t){t._css("display","none")}))},_html:function(t){var e=u(this),n=0;if(void 0!==t){for(;n<e.el.length;n++)e.el[n].innerHTML=t;return e}return e.el.length>0?e.el[0].innerHTML:null},_scrollLeft:function(t){return r(this,t,"scrollLeft")},_scrollTop:function(t){return r(this,t,"scrollTop")},_offset:function(t){var e,n,r=u(this);return void 0===t?n=r.el.length>0?{top:(n=r.el[0].getBoundingClientRect()).top+document.body.scrollTop,left:n.left+document.body.scrollLeft}:null:(e={top:document.body.scrollTop,left:document.body.scrollLeft},r._each((function(n){n._css({left:t.left-e.left,top:t.top-e.top})})),n=r),n},_val:function(t){var e,n=u(this),r=0;if(void 0===t)e=n.el.length>0?n.el[0].value||"":null;else{for(;r<n.el.length;r++)n.el[r].value=t;e=n}return e},_each:function(t){var e=u(this),n=0;if(t)for(;n<e.el.length&&0!=t(e._eq(n),n);n++);return e},_filter:function(t){var e=u(this),n=[];return t&&e._each((function(e,r){t(e,r)&&n.push(e.el[0])})),h(n)},_text:function(t){var e=u(this),n="",r=0;if(void 0===t)for(;r<e.el.length;r++)n+=e.el[r].textContent;else{for(;r<e.el.length;r++)[1,11,9].indexOf(e.el[r].nodeType)>-1&&(e.el[r].textContent=t);n=e}return n},_empty:function(){for(var t=u(this),e=0;e<t.el.length;e++)for(;t.el[e].firstChild;)t.el[e].removeChild(t.el[e].firstChild);return t},_focused:function(){for(var t=u(this),e=0,n=document.activeElement,r=!1;e<t.el.length;e++)if(t.el[e]===n){r=!0;break}return r},_visible:function(){for(var t=u(this),e=0,n=!1;e<t.el.length;e++)!1===n&&0!==t.el[e].offsetHeight&&(n=!0);return n},_last:function(){var t=u(this);return t._eq(t.el.length-1)},_first:function(){return u(this)._eq(0)},_blur:function(){for(var t=u(this),e=0;e<t.el.length;e++)t.el[e].blur();return t},_focus:function(){for(var t=u(this),e=0;e<t.el.length;e++)t.el[e].focus();return t},_closest:function(t){var e,n=u(this);return n.el.length>0&&(e=n.el[0].closest(t)),h(e)},_prev:function(){var t=u(this);return h(t.el.length>0?t.el[0].previousElementSibling:null)},_next:function(){var t=u(this);return h(t.el.length>0?t.el[0].nextElementSibling:null)},_after:function(t){var e=u(this),n=c();return"string"==typeof t&&(t=h.parseHTML(t)),u(t)._each((function(t){n.append(t.el[0])})),e.el.length>0&&e.el[0].parentNode.insertBefore(n,e.el[0].nextSibling),e},_before:function(t){var e=u(this);return"string"==typeof t&&(t=h.parseHTML(t)),e.el.length>0&&u(t).el.forEach((function(t){e.el[0].parentNode.insertBefore(t,e.el[0])})),e},_outerHeight:function(){return n(this,"offsetHeight")},_outerWidth:function(){return n(this,"offsetWidth")},_innerHeight:function(){return n(this,"clientHeight")},_innerWidth:function(){return n(this,"clientWidth")},_position:function(){var t=u(this);return t.el.length>0?{left:t.el[0].offsetLeft,top:t.el[0].offsetTop}:null},_replaceWith:function(t){var e=u(this),n=c();return"string"==typeof t&&(t=h.parseHTML(t)),n.append.apply(n,u(t).el),e.el.length>0&&e.el[0].replaceWith(n),e},_prepend:function(t){var e=u(this),n=c();return"string"==typeof t&&(t=h.parseHTML(t)),n.append.apply(n,u(t).el),e.el.length>0&&e.el[0].prepend(n),e},_append:function(t){var e=u(this),n=c();return"string"==typeof t&&(t=h.parseHTML(t)),n.append.apply(n,u(t).el),e.el.length>0&&e.el[0].append(n),e},_index:function(){var t,e=u(this),n=null;if(e.el.length>0)for(n=0,t=e.el[0];t=t.previousElementSibling;)++n;return n},_is:function(t){var e,n=u(this);return 0!==n.el.length&&(0!==(e=u(t)).el.length&&n.el[0]._id===e.el[0]._id)},_on:function(e,n){var r=u(this);return t[e]=n,r.el.forEach((function(t){t.addEventListener(e,n)})),this},_off:function(e){return u(this).el.forEach((function(n){n.removeEventListener(e,t[e])})),delete t[e],this},_once:function(t,e){return u(this).el.forEach((function(n){n.addEventListener(t,e,{once:!0})})),this},_trigger:function(t,e){u(this).el.forEach((function(n){n.dispatchEvent(new CustomEvent(t,{target:n,data:e}))}))}};function e(t,e){return!!t.getAttribute&&(t.getAttribute("class")||"").split(" ").indexOf(e)>-1}function n(t,e){var n=u(t);return n.el.length>0?n.el[0][e]:null}function r(t,e,n){var r,i=u(t),o=0;if(void 0===e)r=i.el.length>0?i.el[0][n]:null;else{for(;o<i.el.length;o++)i.el[o][n]=e;r=i}return r}function a(t,e){return t.split(e||" ").reduce((function(t,e){var n=e.trim();return n&&t.push(n),t}),[])}function c(){return new i}function u(t){return t instanceof s.Nodes?t:t instanceof l?h(t.get()):void 0!==t.$||void 0!==t.v?h(t.$[0]):h(t)}};s.Nodes=function(t){t?t instanceof s.Nodes?this.el=t.el:"string"==typeof t?this.el=Array.prototype.slice.call(document.querySelectorAll(t)):t.v?this.el=[t[0]]:h.isArray(t)&&(h.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList||void 0!==window.jQuery&&t instanceof l)?this.el=Array.prototype.slice.call(t):this.el=[t]:this.el=[],this.length=this.el.length};var h=c._=c._||function(t){return new s.Nodes(t)};h.extend=function(){for(var t=1;t<arguments.length;t++)arguments[0]=e(arguments[0],arguments[t]);return arguments[0];function e(t,n){var r;for(r in n)null===n[r]||null===t[r]||"object"!==_typeof(n[r])||void 0!==a&&n[r]instanceof a||!1===h.isPlainObject(n[r])&&!1===h.isArray(n[r])?t[r]=n[r]:(void 0===t[r]&&(t[r]=n[r]instanceof Array?[]:{}),t[r]!==n[r]&&(t[r]=e(t[r],n[r])));return t}},h.extend(s.Nodes.prototype,d),h.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},h.concat=function(t,e){var n=[];return Array.prototype.push.apply(n,t),Array.prototype.push.apply(n,e),n},h.parseHTML=function(t){var e;return e=(new n).parseFromString(t),h(e)._children()},h.parseSVG=function(t,e){var r,i,o=t.indexOf("&")>-1,a=t.indexOf("@import")>-1,c=["textPath","text","tref","tspan"],u=[{regex:/&(?!#)/g,entity:"&amp;",char:"&",entity_regex:/&amp;/g},{regex:/>/g,entity:"&gt;",char:">",entity_regex:/&gt;/g},{regex:/</g,entity:"&lt;",char:"<",entity_regex:/&lt;/g}],l=[];return!0!==e&&l.push('data *- * \\w+=".*?"'),"<?xml"===t.substr(0,5)&&(t=t.substring(t.indexOf("<svg"))),l.push("(?=\x3c!--)[\\s\\S]*?--\x3e"),t=t.replace(/[\t\n\r]/gm," "),l.push(' xmlns=".+?"| xmlns:v=".+?"| xmlns:xlink=".+?"'),l.push("^\\s+"),t=(t=(t=t.replace(new RegExp(l.join("|"),"gm"),"")).replace(/^<(.+?)( |>)/g,'<$1 xmlns="'+s.CONST.XMLNS+'" xmlns:v="'+s.CONST.VNS+'" xmlns:xlink="'+s.CONST.XLINK+'" $2')).replace(/&nbsp;/g,"Â "),o&&(i=(t=t.replace(/& /g,"&amp; ")).match(/"(http|www).+?"/g)||[]).forEach((function(e){e=e.replace(/&amp;/g,"&"),t=t.replace(e,e.replace(/&/g,"&amp;"))})),t=function(t){return c.forEach((function(e){var n,r,i;if(t.indexOf(e)>-1)for(n=new RegExp("<"+e+"[^\\/]*?>(?!<"+e+"[ >].*?>)(.*?)</"+e+">","g");r=n.exec(t);)!1===/<\w+[^/]*?\/>/.test(r[1])&&!1===/<\w+[^/]*?>(.*?)<\/\w+>/.test(r[1])&&!1===/<\w+[^/]*?>/.test(r[1])&&(i=r[1],u.forEach((function(e){i.indexOf(e.char)>-1&&(i=i.replace(e.regex,e.entity),t=t.replace(r[0],r[0].replace(r[1],i)))})))})),t}(t),r=h((new n).parseFromString(t,"image/svg+xml").documentElement),t.indexOf("v:")>-1&&function t(e){for(var n,r,i=e.el[0].attributes,o=i.length-1;o>=0;o--)0===i[o].name.indexOf("v:")&&(n=i[o].name,r=i[o].value,e._removeAttr(n)._attr(n,r));e._children()._each((function(e){t(e)}))}(r),i&&i.length>0&&o&&(a&&r._find("style")._each((function(t){t.el[0].textContent=t.el[0].textContent.replace(/&amp;/g,"&")})),r._find("[xlink\\:href], [href], style")._each((function(t){var e=t._attr("href"),n=t._attr("xlink:href");f(e)&&t._attr("href",e.replace(/&amp;/g,"&")),f(n)&&t._attr("xlink:href",n.replace(/&amp;/g,"&"))})),r._findTag(c.join(","))._each((function(t){var e;0===t._children().length&&(e=t._text(),u.forEach((function(t){e=e.replace(t.entity_regex,t.char)})),t._text(e))}))),r._removeAttr("xmlns")._removeAttr("xmlns:v")._removeAttr("xmlns:xlink"),r;function f(t){return t&&("http"===t.substr(0,4)||"www"===t.substr(0,3))}},h.serialize=function(t,e){var n,o,a,c,u="http://www.w3.org/2000/xmlns/",l=/unicode="(.*?)"/g;for(t instanceof s.Nodes&&(t=t.el[0]),o=(new i).createElement("div"),("use"===t.tagName||"textPath"===t.tagName||"image"===t.tagName||h(t)._findTag("use, textpath, image").length)&&("defs"!==(t=t.cloneNode(!0)).tagName?f(t):"defs"===t.tagName&&h(t)._findTag("use, textpath, image")._each((function(t){f(t.el[0])}))),a=c=(c=(new r).serializeToString(t)).replace(/&(?!\w*;)/g,"&amp;");n=l.exec(c);)"\\u"!==n[1].substring(0,2)&&(o.innerHTML=n[1],a=a.replace(n[0],'unicode="'+s.fn.unicode(o.childNodes[0].nodeValue)+'"'));return c=a,e||(c=c.replace(/ xmlns="http:\/\/www\.w3\.org\/2000\/svg"| xmlns="http:\/\/www.w3.org\/1999\/xhtml"/gm,"").replace(/ xmlns:xlink="http:\/\/www.w3.org\/1999\/xlink"/gm,"").replace(/ xmlns:v="http:\/\/vecta.io"/gm,"").replace(/ xmlns:NS\d+=""\sNS\d+:/gm,"")),c.replace(/\r|\n/g,"").replace(/>\s*?</g,"><");function f(t){t.removeAttribute("xmlns"),t.removeAttribute("xmlns:xlink"),t.hasAttribute("xmlns")||t.setAttributeNS(u,"xmlns",s.CONST.XMLNS),t.hasAttribute("xmlns:xlink")||t.setAttributeNS(u,"xmlns:xlink",s.CONST.XLINK)}},h.getOrMake=function(t,e,n,r,i){var o=t._children(e),a="";if(0===o.length){switch(e.charAt(0)){case"#":a=' id="'+h.unEscape(e)+'"';break;case".":a=' class="'+h.unEscape(e)+'"'}switch(n){case"div":case"span":case"ul":case"li":o=h.parseHTML("<"+n+a+"></"+n+">");break;default:o=h.parseSVG("<"+n+a+"></"+n+">")}r&&h.attr(o.el[0],r),t._append(o)}else r&&i&&h.attr(o.el[0],r);return o},h.each=function(t,e){var n,r;if(t)if(r=t,h.isArray(r)||r&&"object"===_typeof(r)&&"number"==typeof r.length&&(0===r.length||r.length>0&&r.length-1 in r))for(n=0;n<t.length&&!1!==e(t[n],n);n++);else for(n in t)if(!1===e(t[n],n))break},h.isFunction=function(t){return"function"==typeof t},h.isEmpty=function(t){return null==t||(t instanceof Array?0===t.length:0===Object.keys(t).length)},h.isObject=function(t){return"function"!=typeof t&&!1===Array.isArray(t)&&t===Object(t)},h.isPlainObject=function(t){var e,n=!1;return t&&"object"===_typeof(t)&&(n="function"==typeof Object.getPrototypeOf?(e=Object.getPrototypeOf(t))===Object.prototype||null===e:"[object Object]"===Object.prototype.toString.call(t)),n},h.unEscape=function(t){var e;return"#"!==(e=(t+="").substr(0,1))&&"."!==e||(t=t.substr(1)),t.replace(/\\/g,"")},h.escape=function(t){return function(t){return t.replace(/( |!|"|#|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|]|\^|`|\{|\||}|~)/g,"\\$1")}(h.unEscape(t))},h.unEscClasses=function(t){var e=t.indexOf(",")>-1?",":" ";return t.split(e).map((function(t){return h.unEscape(t.trim())})).join(e)},h.escClasses=function(t){var e=t.indexOf(",")>-1?",":" ";return t.split(e).map((function(t){return"."+h.escape(t.trim())})).join(e)},h.sequence=function(t,e,n){var r=[];return 0===t.length?Promise.resolve():n?(t.forEach((function(t,n){r.push(e(t,n))})),Promise.all(r)):function n(r){var i=e(t[r],r);if(i instanceof Promise)return i.then((function(){if(r<t.length-1)return n(r+1)}));if(r<t.length-1)return n(r+1)}(0)},h.attr=function(t,e,n,r){var i;if((t.$||t.jquery)&&t[0]&&(t=t[0]),void 0===n&&"object"!==_typeof(e)){switch(e){case"fill-opacity":"image"===t.tagName&&(e="opacity"),n=t.getAttribute(e);break;case"href":n=!0===t.hasAttribute(e)?t.getAttribute(e):t.getAttributeNS(s.CONST.XLINK,e);break;case"xlink:href":n=!0===t.hasAttribute("href")?t.getAttribute("href"):t.getAttributeNS(s.CONST.XLINK,"href");break;default:n=t.getAttribute(e)}return"v:name"===e?""===n?null:n:""===n?null:h.isNumeric(n)?parseFloat(n):n}for(i in void 0!==n&&(i=e,(e={})[i]=n),e)if(!1===t.hasAttribute(i)||t.getAttribute(i)!=e[i])if(null===e[i])t.removeAttribute("image"===t.tagName&&"fill-opacity"===i?"opacity":i);else switch(i){case"xlink:href":case"href":t.setAttributeNS(s.CONST.XLINK,i,e[i]);break;case"fill-opacity":t.setAttribute("image"===t.tagName&&"fill-opacity"===i?"opacity":i,e[i]);break;default:t.setAttribute(i,e[i])}return r||this},h.isArray=Array.isArray,s.CONST=h.extend(s.CONST||{},{XMLNS:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink"}),h.post=function(t,e,n){var r=[];return(n=n||{}).method="POST",e&&(n.form?(n.headers=n.headers||{},n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",Object.keys(e).map((function(t){Array.isArray(e[t])?e[t].forEach((function(e){r.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e))})):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]))})),n.body=r.join("&")):n.body=e),fetch(t,n).then((function(t){return t.json().then((function(e){return 200===t.status?e:Promise.reject(e)}))}))},h.get=function(t,e,n){return(n=n||{}).method="GET",e&&(t+=t.indexOf("?")>-1?"&":"?",t+=Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")),fetch(t,n).then((function(t){return t.json().then((function(e){return 200===t.status?e:Promise.reject(e)}))}))},s.go=s.go||{},s.go.ajax={arrayBuffer:function(t,e){return s.go.isbase64(t)?Promise.resolve(t):f({url:t,encoding:null,requestTimeout:6e4}).then((function(t){return function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r<t.length;++r)n[r]=t[r];return e}(t)}))},post:function(t,e){return e&&e.indexOf("app_")>-1&&-1===e.indexOf(".php")&&(e=s.config.project.domain+e+".php"),e=e||s.config.project.domain+"/app/app.php",t?void 0===t.token&&s.user&&s.user.id?s.db?s.db.auth.getIdToken().then((function(n){return t.token=n,$.post(e,t).catch((function(t){console.error(t)}))})):s.fdb.auth().currentUser.getIdToken().then((function(n){return t.token=n,$.post(e,t).catch((function(t){console.error(t)}))})):$.post(e,t).catch((function(t){console.error(t)})):$.post(e).catch((function(t){console.error(t)}))},proxy:function(t){var e=s.local?s.config.project.domain+"/app/app_proxy.php":"/app/app_proxy.php";return t?$.post(e,t).catch((function(t){console.error(t)})):$.post(e).catch((function(t){console.error(t)}))},get:function(t,e){return e=e||"json",$.ajax({url:t,dataType:e}).catch((function(t){if(200===t.status){if("parsererror"===t.statusText)return t.responseText;if("OK"===t.statusText&&t.responseText.indexOf("<svg")>-1)return t.responseText}}))}},s.go.isbase64=function(t){return new RegExp("^(data:\\w+.*?;base64,)?(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$","gi").test(t)},s.CONST=h.extend(s.CONST||{},{VNS:"http://vecta.io",CFURL:"",DOCSEARCH:"docSearch",PLUGSEARCH:"plugSearch",OWNER:0,READ:1,WRITE:2,COMMENTER:3,FILE:0,FOLDER:1,TFILE:3,TFOLDER:4,TEAM:5,TTEAM:6,HTFILE:7,HTFOLDER:8,HTTEAM:9,STENCIL:10,SYMBOL:11,TEMPLATE:12,PLUGIN:13,SHORTCUT:14,TSHORTCUT:15,HTSHORTCUT:16,RESOURCE:17,TRESOURCE:18,HTRESOURCE:19,PRIVATE:0,PUBLIC_VIEW:1,PUBLIC_EDIT:2,PUBLIC_COMMENT:3,PRIVATE_STENCIL:0,PUBLIC_STENCIL:1,PRIVATE_PLUGIN:0,PUBLIC_PLUGIN:1,SYMBOL_PENDING:1,SYMBOL_ACCEPTED:2,SYMBOL_REJECTED:3,SINGLE:5,MANY:6,LINE_SPACE:1.2,PADDING:2,DEFAULT_CONN_CURVE:"6 px",DEFAULT_KEY_INCRE:"5 px",DEFAULT_KEY_INCRE_TYPE:"auto",MIN_NUDGE:7,PAPER_SIZE:{A5:{width:"210mm",height:"148mm",cat:"METRIC_ISO"},A4:{width:"297mm",height:"210mm",cat:"METRIC_ISO"},A3:{width:"420mm",height:"297mm",cat:"METRIC_ISO"},A2:{width:"594mm",height:"420mm",cat:"METRIC_ISO"},A1:{width:"841mm",height:"594mm",cat:"METRIC_ISO"},A0:{width:"1189mm",height:"841mm",cat:"METRIC_ISO"},LETTER:{width:"11in",height:"8.5in",cat:"STANDARD"},FOLIO:{width:"13in",height:"8.5in",cat:"STANDARD"},LEGAL:{width:"14in",height:"8.5in",cat:"STANDARD"},LEDGER:{width:"17in",height:"11in",cat:"STANDARD"},TABLET_7IN:{width:960,height:600,cat:"MOBILE"},TABLET_9IN:{width:1024,height:768,cat:"MOBILE"},SURFACE_PRO3:{width:2160,height:1440,cat:"MOBILE"},SURFACE_PRO4:{width:2736,height:1824,cat:"MOBILE"},SAMSUNG_TAB10:{width:1280,height:800,cat:"MOBILE"},SAMSUNG_S9:{width:2960,height:1440,cat:"MOBILE"},NEXUS7:{width:1920,height:1200,cat:"MOBILE"},NEXUS9:{width:2048,height:1536,cat:"MOBILE"},ANDROID_1080P:{width:1920,height:1080,cat:"MOBILE"},APPLE_WATCH_38MM:{width:340,height:272,cat:"MOBILE"},APPLE_WATCH_42MM:{width:390,height:312,cat:"MOBILE"},IPAD_MINI:{width:1024,height:768,cat:"MOBILE"},IPAD_AIR:{width:2048,height:1536,cat:"MOBILE"},IPAD_PRO:{width:2732,height:2048,cat:"MOBILE"},IPHONE5:{width:1136,height:640,cat:"MOBILE"},IPHONE6_PLUS:{width:1920,height:1080,cat:"MOBILE"},IPHONE6:{width:1334,height:750,cat:"MOBILE"},MOBILE_COMMON:{width:640,height:360,cat:"MOBILE"},WEB_1280X800:{width:1280,height:800,cat:"WEB"},WEB_1440X900:{width:1440,height:900,cat:"WEB"},WEB_1920X1080:{width:1920,height:1080,cat:"WEB"},IMAC_27:{width:2560,height:1440,cat:"WEB"},MACBOOK_PRO13:{width:2560,height:1600,cat:"WEB"},MACBOOK_PRO15:{width:2880,height:1800,cat:"WEB"},WEB_COMMON:{width:1366,height:768,cat:"WEB"},WEB_MIN:{width:1024,height:768,cat:"WEB"},TWITTER_200X200:{width:200,height:200,cat:"SOCIAL_MEDIA"},TWITTER_1500X500:{width:1500,height:500,cat:"SOCIAL_MEDIA"},GOOGLE_250X250:{width:250,height:250,cat:"SOCIAL_MEDIA"},GOOGLE_1080X608:{width:1080,height:608,cat:"SOCIAL_MEDIA"},FACEBOOK_180X180:{width:180,height:180,cat:"SOCIAL_MEDIA"},FACEBOOK_1200X630:{width:1200,height:630,cat:"SOCIAL_MEDIA"},BANNER_180X150:{width:180,height:150,cat:"BANNER"},BANNER_200X200:{width:200,height:200,cat:"BANNER"},BANNER_250X250:{width:250,height:250,cat:"BANNER"},BANNER_250X360:{width:250,height:360,cat:"BANNER"},BANNER_300X250:{width:300,height:250,cat:"BANNER"},BANNER_300X50:{width:300,height:50,cat:"BANNER"},BANNER_320X250:{width:320,height:250,cat:"BANNER"},BANNER_320X100:{width:320,height:100,cat:"BANNER"},BANNER_336X280:{width:336,height:280,cat:"BANNER"},BANNER_580X400:{width:580,height:400,cat:"BANNER"},BANNER_120X600:{width:120,height:600,cat:"BANNER"},BANNER_160X600:{width:160,height:600,cat:"BANNER"},BANNER_300X1050:{width:300,height:1050,cat:"BANNER"},BANNER_120X240:{width:120,height:240,cat:"BANNER"},BANNER_240X400:{width:240,height:400,cat:"BANNER"},BANNER_300X600:{width:300,height:600,cat:"BANNER"},BANNER_468X60:{width:468,height:60,cat:"BANNER"},BANNER_728X90:{width:728,height:90,cat:"BANNER"},BANNER_930X180:{width:930,height:180,cat:"BANNER"},BANNER_970X90:{width:970,height:90,cat:"BANNER"},BANNER_970X250:{width:970,height:250,cat:"BANNER"},BANNER_980X120:{width:980,height:120,cat:"BANNER"}},ORIENT:{LANDSCAPE:0,PORTRAIT:1},CUSTOM:"CUSTOM",THUMB_SIZE:6,SUB_MENU:'<svg viewBox="0 0 10 24" class="SubMaster.cls"><use xlink:href="#sub_master.sym"/></svg>',IDEAS:{"-KtVJn-_3eM4edmEMttd":1,"-KtVI9chotpemNg2kTfr":1,"-KtVIaQMSIhTyPm8Ohh1":1,"-Klwm5N-tLsAk-75Vq-V":1,"-KrE9PEJSF1fbKNG0QZm":1,"-KkKUqwk8M4gNacX53lV":1,"-KtUpXeIUzhn0SqaMSge":1,"-Kgr4Di_Ilb0ra0SiI0y":1,"-KkKYaWeChn_ulNK08az":1,"-Kaa4ON5sxmdq8ALw6Aw":1,"-KafcCndPcfQrsubhP7I":1,"-Ka_AI-GyBwC0r5oQEbx":1,"-KbD4S9c3pNAU7SuPDrN":1,"-KavryH1kBfPPFnquBws":1,"-L8FLgH3A3LwMkGAw6O1":1,"-L8FT2XKBQY1zqoa5SSe":1,"-L81O38cPfz_mY4HOaiZ":1,"-LAfG2D-LWkomKzni2as":1,"-L9nFveLETRF6sxk1PkL":1,"-LARxNykvy8M8Orxqak2":1,"-LET_W23E6D7Z46XKbij":1,"-LBi64Z9_7rQiQHiUMnU":1,"-LESAyM9R_tF64uBLZwG":1,"-LLgRSAQbKVjmxP-jGK2":1,"-LNJCWp4M9WjpOi9vNIJ":1,"-LNKD5bYWkDczRBhFTix":1,"-MqchySM7YHop_46AZAe":1,"-MqckDOZ8RbKWHYrq5-9":1,"-MqX2ZPfFS8zQtVMcj6r":1,"-MqX46R-dPajyqZUp4_D":1,"-MqX5cPvVnQyL9_QmSC1":1,"-MqX63XkPMzlPabTaV8u":1,"-MqX6WMyZ0A1VMkkhIMb":1,"-MqqwW5x9R8E3pGU19mL":1},MINISCULE:1e-13,PRODUCT_HUNT:"-KofNr4X0gv202206zKt",INFINITY:999999999999,TOLERANCE:1e-6,REGEX_NUM:/-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?/g,FONTS:{GOOGLE_URL:"https://fonts.googleapis.com",DEFAULT:["Roboto+Condensed","Roboto","Cousine","Anonymous+Pro","Lato","Open+Sans"],STYLES:["400","400i","700","700i"],SAFE:["Arial","Helvetica","Times New Roman","Times","Courier New","Courier","Verdana","Georgia","Palatino","Garamond","Bookman","Comic Sans MS","Trebuchet MS","Arial Black","Impact","Tahoma"]},TIP_DELAY:600,SCROLL_SIZE:15,GHOST_CONST:9,GHOST_CLASS:".Ghost\\.cls, .Guide_Ghost\\.cls",GHOST_CLASS_UNESC:"Ghost.cls,Guide_Ghost.cls",IGNORED_CLASSES:["Selected.cls","Guide_Selected.cls","ConnPts_Selected.cls","HiLite.cls","NoPointer.cls","Ignore.cls"],POLYFILL:{BYCLASSNAME:"",QUERYSELECT:"",QUERYSELECTALL:""},RADICA_TEAM:"",DEFAULT_LAYER:"default",PRELOADS:{CTA:["create-team","invite-members","share-drawing","save-symbols"],NEW:["metrics","duplicate","shape-properties","shortcuts","guide","find-replace","search"]},CONN_PT:{USE_SELECTED:"ConnPts_Selected.cls",ID:"connection.sym",CLASS:"ConnPts.cls",SELECTOR:".ConnPts\\.cls"},DEMO:{demo:1,"demo-1":1,"demo-2":1,"demo-3":1,"demo-4":1},VALID_COLORS:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},UNFURL:{width:1200,height:620},TRANS_MATRIX:1,TRANS_TRANSLATE:2,TRANS_SCALE:3,TRANS_ROTATE:4,TRANS_SKEWX:5,TRANS_SKEWY:6,BLUR_EFFECT:".Blur\\.eff",SHADOW_EFFECT:".Shadow\\.eff",BEVEL_EFFECT:".Bevel\\.eff",GLOW_EFFECT:".Glow\\.eff",ANIMATE:["animate","animateColor","animateMotion","animateTransform","set"],BT:{TOKENIZATION_KEY:"",PAYMENT_INSTRUMENT:{credit_card:"Credit card",paypal_account:"Paypal"}},EMAIL_SIGNIN:"signin_for_email",DEFAULT_DXF_STROKE:"0.2px",GOOGLE:{DOC:"application/vnd.google-apps.document",SPREADSHEET:"application/vnd.google-apps.spreadsheet",SLIDES:"application/vnd.google-apps.presentation",OWNER:"owner",READER:"reader",WRITER:"writer"},COMPRESS_IMG:0,COMPRESS_OBJ:1,COMPRESS_INLINE:2});var v=s.CONST,p=s.CONST.MODE,g=s.go;Promise.series=function(t){return t.reduce((function(t,e){return t.then((function(t){return e().then(Array.prototype.concat.bind(t))}))}),Promise.resolve([]))},s.utils=function(){var t;return{slack:{getChannelMembers:function(t,e){return m.slack.getTeamToken(t).then((function(t){var n="https://slack.com/api/conversations.members?pretty=1&token="+t+"&channel="+e;return Promise.all([$.ajax({url:n,method:"POST"}),m.slack.getTeamMembers(t)]).then((function(t){var e={};return t[0]&&t[0].members&&t[1]&&t[1].members&&t[0].members.forEach((function(n){var r;t[1].members.forEach((function(t){t.id===n&&(r=t)})),r&&!1===r.is_bot&&!1===r.deleted&&"slackbot"!==r.name&&r.profile.email!==s.user.email&&(e[r.profile.email]=n)})),e}))}))},getTeamToken:function(t){return st.slack.read("teams").then((function(e){return e[t].token}))},getTeamMembers:function(t){var e="https://slack.com/api/users.list?token="+t+"&presence=false&pretty=1";return $.ajax({url:e,method:"POST"})},getChannels:function(){return st.slack.read("teams").then((function(t){var e=[];return!!t&&(Object.keys(t).forEach((function(n){var r;e.push((r=t[n].token,h.get("https://slack.com/api/conversations.list",{token:r,exclude_archived:!0,limit:500,types:"public_channel, private_channel"})))})),Promise.all(e).then((function(e){var n={};return Object.keys(t).forEach((function(r,i){n[r]=t[r],n[r].channels=e[i].channels})),n})))}))},integrateSlackTeam:function(t,e,n,r){m.slack.getChannelMembers(r,n).then((function(i){if(!1===h.isEmpty(i))return s.db.team.new(e).then((function(e){s.db.mfid(e.fid).update("slack/",{channel:n,team:r,name:t}),u.trigger("_sendInvites.Vecta",{fid:e.fid,name:e.name,slack_team:r,mode:"slack",list:i,access:v.WRITE,is_team:!0,type:v.TEAM,error:function(){g.hideMessage()},success:function(){g.hideMessage(),st.dash.write("fid",e.fid),g.redirect("app/dashboard")}})}))}))},buildChannelList:function(t){var e="";return Object.keys(t).forEach((function(n){e+="<li>"+t[n].name+"</li>",$.each(t[n].channels,(function(t,r){e+='<li id="'+r.id+'" data-team="'+n+'" data-name="'+r.name+'" ><span>#'+r.name+"</span></li>"}))})),e},auth:function(t,e){var n="https://slack.com/oauth/authorize?&client_id="+s.config.slack.client_id+"&scope=channels:read,chat:write:bot,groups:read,im:read,links:read,links:write,users:read,users:read.email,bot",r="slack+"+Date.now(),i=[];i.push(st.slack.write("state",r)),t&&i.push(st.slack.write("redirect",e||window.location.pathname.replace("/",""))),n+="&redirect_uri="+(s.local?window.location.protocol+"//"+location.hostname+"/app/integrate":s.config.project.domain+"/app/integrate"),Promise.all(i).then((function(){window.open(n+"&state="+r,"_self")}))},checkAuth:function(){var t=g.queryString("state"),e=g.queryString("code");return new Promise((function(t,e){s.lang?n(t,e):u.once("_langLoaded.Vecta",(function(){n(t,e)}))}));function n(n,r){g.showMessage(s.lang.mssg.loading+"...",!0),g.queryString("oauth")?m.slack.auth(!1):t&&e?st.read("slack").then((function(i){var o=i?i.state:null,a=i&&i.redirect?i.redirect:"app/dashboard";g.hideMessage(),"slack"!==t.split("+")[0]?r({err:"diff_integration",redirect:a}):(o||r({err:s.lang.slack.code_invalid,redirect:a}),o!==t&&r({err:s.lang.ui.mismatched_code,redirect:a}),o===t&&g.ajax.post({mode:"slack",op:"register",code:e}).then((function(t){t.ok&&!0===t.ok?(st.slack.delete("redirect"),st.slack.delete("state"),i&&(delete i.redirect,delete i.state),n({settings:i,auth:t,redirect:a}),setTimeout((function(){g.redirect(a)}),1e4)):r({err:s.lang.slack.sending_failed,redirect:a})})))})):g.redirect("app/dashboard")}}},attr:function(t,e,n,r){var i;if((t.$||t.jquery)&&t[0]&&(t=t[0]),void 0===n&&"object"!==_typeof(e)){switch(e){case"fill-opacity":"image"===t.tagName&&(e="opacity"),n=t.getAttribute(e);break;case"href":n=!0===t.hasAttribute(e)?t.getAttribute(e):t.getAttributeNS(v.XLINK,e);break;case"xlink:href":n=!0===t.hasAttribute("href")?t.getAttribute("href"):t.getAttributeNS(v.XLINK,"href");break;default:n=t.getAttribute(e)}return"v:name"===e?""===n?null:n:""===n?null:h.isNumeric(n)?parseFloat(n):n}for(i in void 0!==n&&(i=e,(e={})[i]=n),e)if(!1===t.hasAttribute(i)||t.getAttribute(i)!==e[i])if(null===e[i])t.removeAttribute("image"===t.tagName&&"fill-opacity"===i?"opacity":i);else switch(i){case"xlink:href":case"href":t.setAttributeNS(v.XLINK,i,e[i]);break;case"fill-opacity":t.setAttribute("image"===t.tagName&&"fill-opacity"===i?"opacity":i,e[i]);break;default:t.setAttribute(i,e[i])}if(r)return r},CDATA:function(t){return t=t.replace("<style>","").replace("</style>","").replace("<![CDATA[","").replace("]]>",""),$.parseXML("<svg></svg>").createCDATASection(t)},buildTime:function(t){var e=Date.now()-t,n=Math.round(e/1e3),r=Math.round(e/6e4),i=Math.round(e/36e5),o=Math.round(e/864e5);return n<=0?s.lang.noti.moment_ago:n>=1&&n<=59?n+" "+s.lang.noti[1===n?"second_ago":"seconds_ago"]:r>=1&&r<=59?r+" "+s.lang.noti[1===r?"minute_ago":"minutes_ago"]:i>=1&&i<=23?i+" "+s.lang.noti[1===i?"hour_ago":"hours_ago"]:o>=1&&o<=364?o+" "+s.lang.noti[1===o?"day_ago":"days_ago"]:g.toLocaleDate(s.lang.ui.locale,new Date(Number(t)),{show_time:!1})},email:function(t,e,n,r){var i=s.local?"https://sizzling-heat-5814.appspot.com/app/ajax.php":"/app/ajax.php";return s.local&&v.COMPASS&&(i="/app/ajax.php"),new Promise((function(o,a){s.db.auth.getIdToken().then((function(c){$.post(i,{mode:"send",emails:h.isArray(t)?t:[t],names:h.isArray(e)?e:[e],url_links:h.isArray(n)?n:[n],subjects:[r.subject],headers:[r.header||s.lang.email.slogan],titles:[r.title],messages:[r.message||""],instructions:[r.instruction],buttons:[r.button],token:c}).done((function(t){o(t)})).fail((function(t){a(t)}))}))}))},randomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},keys:function(t){var e={};switch(t.which){case 8:e.backspace=!0;break;case 13:e.enter=!0;break;case 16:e.shift=!0;break;case 17:case 224:case 91:case 93:e.ctrl=!0;break;case 18:e.alt=!0;break;case 27:e.esc=!0;break;case 46:e.delete=!0;break;case 37:e.left=!0;break;case 38:e.up=!0;break;case 39:e.right=!0;break;case 40:e.down=!0;break;case 65:n(t)&&!t.altKey?e.select_all=!0:t.altKey&&(e.draw_textblock=!0);break;case 66:n(t)&&(e.bold=!0);break;case 68:n(t)&&!t.altKey?e.clone=!0:t.altKey&&(e.difference=!0);break;case 69:t.altKey&&(t.preventDefault(),t.stopPropagation(),e.open_hyperlink=!0);break;case 71:n(t)?t.shiftKey?e.ungroup=!0:e.group=!0:t.altKey?(t.preventDefault(),t.stopPropagation(),e.ungroup=!0):(s.mode===p.EDIT||s.mode===p.ICON||s.mode===p.NANO)&&u.selection.length()>1&&(e.group=!0);break;case 72:t.altKey&&(t.preventDefault(),e.flip_horiz=!0);break;case 73:n(t)&&!t.altKey?e.italic=!0:t.altKey&&(e.intersect=!0);break;case 74:n(t)&&!t.altKey?e.join=!0:s.mode!==p.EDIT&&s.mode!==p.ICON&&s.mode!==p.NANO||(t.altKey?e.trim=!0:u.selection.length()>1&&(e.join=!0));break;case 76:t.altKey?e.flatten=!0:n(t)&&(e.edit_hyperlink=!0);break;case 77:n(t)&&(e.trim=!0);break;case 79:n(t)&&(e.open_drawing=!0);break;case 82:!n(t)&&t.altKey&&(e.repeat_trans=!0);break;case 83:n(t)&&(t.shiftKey?e.save_as=!0:e.save=!0);break;case 85:n(t)&&!t.altKey?e.underline=!0:t.altKey&&(e.union=!0);break;case 86:t.altKey&&(t.preventDefault(),e.flip_verti=!0);break;case 89:n(t)&&(e.redo=!0);break;case 90:n(t)&&(e.undo=!0);break;case 49:t.altKey&&(e.cursor=!0);break;case 50:t.altKey&&(e.draw_rect_ellipse=!0);break;case 51:t.altKey&&(e.draw_path=!0);break;case 52:t.altKey&&(e.draw_connector=!0);break;case 53:t.altKey&&(e.format_painter=!0);break;case 70:n(t)&&!t.altKey?e.find=!0:t.altKey&&(t.preventDefault(),t.stopPropagation(),e.fragment=!0);break;case 81:n(t)&&(e.fit=!0);break;case 113:e.f2=!0;break;case 188:n(t)&&(e.back=!0);break;case 190:n(t)&&(e.front=!0);break;case 219:n(t)&&(t.shiftKey?e.back=!0:e.backward=!0);break;case 221:n(t)&&(t.shiftKey?e.front=!0:e.forward=!0);break;case 32:e.space=!0;break;case 33:e.page_up=!0;break;case 34:e.page_down=!0}return e;function n(t){return t.ctrlKey||t.metaKey}},dxf2svg:function(t,e){var n,r,i,o,a,c=0,l={},f=g("g");return e.dxf_dimensions=void 0===e.dxf_dimensions?1:e.dxf_dimensions,e.join_shapes=void 0===e.join_shapes?1:e.join_shapes,n=function(t,e){for(var n,r={doc_unit:e.default_unit&&"auto"!==e.default_unit?e.default_unit:"mm",scale:1},i={},o=t.split("\n"),a=["LTYPE","LAYER"],c=new u.Length(1+r.doc_unit).px()/r.scale,l=0;l<o.length;l++)if(n=o[l].trim(),l%2==0)i.code=parseInt(n);else switch(i.code){case 0:switch(n){case"SECTION":i.section="";break;case"ENDSEC":i.ent&&f(r,i,i.ent),i.section=void 0,i.ent=void 0;break;case"TABLE":i.table="";break;case"ENDTAB":a.indexOf(i.table)>-1&&(i.layer&&h(r,i,i.layer),i.ltype&&h(r,i,i.ltype)),i.table=void 0,i.layer=void 0,i.ltype=void 0;break;case"BLOCK":i.block={};break;case"ENDBLK":i.ent&&f(r,i,i.ent),i.block&&d(r,i,i.block),i.block=void 0,i.ent=void 0;break;case"LTYPE":i.ltype&&h(r,i,i.ltype),i.ltype={};break;case"LAYER":i.layer&&h(r,i,i.layer),i.layer={};break;case"LWPOLYLINE":case"LEADER":i.ent&&f(r,i,i.ent),i.ent={type:n,vertices:[]};break;case"VERTEX":i.ent&&!i.ent.vertices&&(i.ent.vertices=[]);break;case"SEQEND":default:i.ent&&f(r,i,i.ent),i.ent=void 0;break;case"LINE":case"ARC":case"POLYLINE":case"ELLIPSE":case"CIRCLE":case"MTEXT":case"TEXT":case"SOLID":case"SPLINE":case"INSERT":case"DIMENSION":case"ATTRIB":i.ent&&f(r,i,i.ent),i.ent={type:n};break;case"ACAD_TABLE":i.ent&&f(r,i,i.ent),i.ent={type:n,cells:[],rows:[],cols:[]}}break;case 1:if(i.ent)switch(i.ent.type){case"DIMENSION":break;case"ATTRIB":i.ent.text=n;break;case"ACAD_TABLE":i.ent.cells[i.ent.cells.length-1].text=n;break;default:i.ent.text=i.ent.text||"",i.ent.text+=n}break;case 2:if(i.layer)i.layer.name=v(n);else if(i.ltype)i.ltype.name=n;else if(""===i.table)i.table=n;else if(i.ent)switch(i.ent.type){case"INSERT":case"DIMENSION":i.ent.block=n}else i.block?void 0===i.block.name&&(i.block.name=n):""===i.section&&(i.section=n);break;case 3:i.ltype&&(i.ltype.add_text=n),i.ent&&(i.ent.text=i.ent.text||"",i.ent.text+=n);break;case 6:i.layer&&(i.layer.line_type=n);break;case 8:i.ent&&(i.ent.layer=v(n));break;case 9:if("HEADER"===i.section)switch(n){case"$MEASUREMENT":e.default_unit=e.default_unit||"auto",e.default_unit&&"auto"===e.default_unit&&(r.doc_unit="0"===g(o,"70")?"in":"mm",c=new u.Length(1+r.doc_unit).px()/r.scale);break;case"$DIMSCALE":r.scale=parseFloat(g(o,"40")),0!==r.scale&&(c=new u.Length(1+r.doc_unit).px()/r.scale)}break;case 10:if(i.ent)switch(i.ent.type){case"DIMENSION":i.ent.x=0;break;case"SPLINE":i.ent.controls=i.ent.controls||[],i.ent.controls.push({x:p(parseFloat(n))});break;case"LWPOLYLINE":case"POLYLINE":case"LEADER":i.ent.vertices&&i.ent.vertices.push({x:p(parseFloat(n))});break;case"ARC":case"ELLIPSE":case"CIRCLE":i.ent.cx=p(parseFloat(n));break;case"TEXT":i.ent.x=p(parseFloat(n)),i.ent.justify=0;break;case"ACAD_TABLE":i.ent&&(i.ent.x=p(parseFloat(n)));break;default:void 0===i.ent.embedded&&(i.ent.x=p(parseFloat(n)))}else i.block&&void 0===i.block.x&&(i.block.x=p(parseFloat(n)));break;case 11:if(i.ent)switch(i.ent.type){case"DIMENSION":break;case"ELLIPSE":i.ent.dx=p(parseFloat(n));break;case"TEXT":case"MTEXT":void 0===i.ent.embedded&&(i.ent.x_vector=p(parseFloat(n)));break;default:i.ent.x1=p(parseFloat(n))}break;case 12:i.ent&&(i.ent.x2=p(parseFloat(n)));break;case 13:if(i.ent)if("DIMENSION"===i.ent.type);else i.ent.x3=p(parseFloat(n));break;case 20:if(i.ent)switch(i.ent.type){case"DIMENSION":i.ent.y=0;break;case"SPLINE":i.ent.controls[i.ent.controls.length-1].y=p(0-parseFloat(n));break;case"LWPOLYLINE":case"POLYLINE":case"LEADER":i.ent.vertices&&(i.ent.vertices[i.ent.vertices.length-1].y=p(0-parseFloat(n)));break;case"ARC":case"ELLIPSE":case"CIRCLE":i.ent.cy=p(0-parseFloat(n));break;case"ACAD_TABLE":i.ent&&(i.ent.y=p(0-parseFloat(n)));break;default:void 0===i.ent.embedded&&(i.ent.y=p(0-parseFloat(n)))}else i.block&&void 0===i.block.y&&(i.block.y=p(0-parseFloat(n)));break;case 21:if(i.ent)switch(i.ent.type){case"DIMENSION":break;case"ELLIPSE":i.ent.dy=p(0-parseFloat(n));break;case"TEXT":case"MTEXT":void 0===i.ent.embedded&&(i.ent.y_vector=p(0-parseFloat(n)));break;case"ATTRIB":i.ent.align_y=p(0-parseFloat(n));break;default:i.ent.y1=p(0-parseFloat(n))}break;case 22:i.ent&&("ATTRIB"===i.ent.type?i.ent.align_z=p(parseFloat(n)):i.ent.y2=p(0-parseFloat(n)));break;case 23:if(i.ent)if("DIMENSION"===i.ent.type);else i.ent.y3=p(0-parseFloat(n));break;case 40:if(i.ltype&&(i.ltype.pattern_length=parseFloat(n)),i.ent)switch(i.ent.type){case"ELLIPSE":i.ent.ratio=parseFloat(n);break;case"MTEXT":case"TEXT":case"LEADER":case"ATTRIB":void 0===i.ent.embedded&&(i.ent.text_height=p(parseFloat(n)));break;case"SPLINE":i.ent.knots=i.ent.knots||[],i.ent.knots.push(parseFloat(n));break;default:i.ent.r=p(parseFloat(n))}break;case 41:if(i.ent)switch(i.ent.type){case"MTEXT":case"TEXT":case"LEADER":case"ATTRIB":i.ent.rect_width=p(parseFloat(n));break;case"INSERT":i.ent.x_scale=parseFloat(n);break;default:i.ent.start_rad=parseFloat(n)}break;case 42:if(i.ent)switch(i.ent.type){case"SPLINE":case"DIMENSION":break;case"INSERT":i.ent.y_scale=parseFloat(n);break;default:i.ent.stop_rad=parseFloat(n)}break;case 46:i.ent&&(i.ent.scale=parseFloat(n));break;case 49:i.ltype&&(void 0===i.ltype.dash_space?i.ltype.dash_space=p(Math.abs(parseFloat(n))):i.ltype.dash_space+=" "+p(Math.abs(parseFloat(n))));break;case 50:if(i.ent)switch(i.ent.type){case"INSERT":i.ent.rotation=s.math.normalizeAngle(360-parseFloat(n));break;case"TEXT":case"MTEXT":case"ATTRIB":i.ent.rotation_angle=s.math.normalizeAngle(360-parseFloat(n));break;default:i.ent.start_angle=s.math.normalizeAngle(360-parseFloat(n))}break;case 51:i.ent&&(i.ent.stop_angle=s.math.normalizeAngle(360-parseFloat(n)));break;case 62:i.layer&&(i.layer.color=parseInt(n)),i.ent&&(i.ent.color=parseInt(n));break;case 67:i.ent&&(i.ent.paper_space=parseInt(n));break;case 70:if(i.ent)switch(i.ent.type){case"SPLINE":case"DIMENSION":break;default:i.ent.polyline=parseInt(n)}break;case 71:if(i.ent)switch(i.ent.type){case"SPLINE":i.ent.degree=parseFloat(n);break;case"LEADER":i.ent.arrow_head=parseFloat(n);break;default:i.ent.attach_point=parseFloat(n)}break;case 72:if(i.ltype&&(i.ltype.drawing_dir=parseFloat(n)),i.ent)switch(i.ent.type){case"SPLINE":break;case"LEADER":i.ent.path_type=parseFloat(n);break;case"TEXT":case"ATTRIB":i.ent.justify=parseFloat(n);break;default:i.ent.drawing_dir=parseFloat(n)}break;case 73:if(i.ent&&"LEADER"===i.ent.type)i.ent.creation=parseFloat(n);break;case 74:if(i.ent&&"LEADER"===i.ent.type)i.ent.hook_dir=parseFloat(n);break;case 75:if(i.ent&&"LEADER"===i.ent.type)i.ent.hook=parseFloat(n);break;case 101:i.ent&&"MTEXT"===i.ent.type&&(i.ent.embedded=!0);break;case 140:if(i.ent&&"ACAD_TABLE"===i.ent.type)i.ent.text_height=p(parseFloat(n));break;case 141:if(i.ent&&"ACAD_TABLE"===i.ent.type)i.ent.rows.push(p(parseFloat(n)));break;case 142:if(i.ent&&"ACAD_TABLE"===i.ent.type)i.ent.cols.push(p(parseFloat(n)));break;case 173:if(i.ent&&"ACAD_TABLE"===i.ent.type)"1"===n&&(i.ent.cells[i.ent.cells.length-1].merge=!0);break;case 210:if(i.ent)if("SPLINE"===i.ent.type);else i.ent.dir_x=parseFloat(n);break;case 220:if(i.ent)if("SPLINE"===i.ent.type);else i.ent.dir_y=parseFloat(n);break;case 230:if(i.ent)if("SPLINE"===i.ent.type);else i.ent.dir_z=parseFloat(n);break;case 301:if(i.ent&&"ACAD_TABLE"===i.ent.type)i.ent.cells.push({});break;case 330:i.ent&&(i.ent.pointer_id=n),i.block&&(i.block.pointer_id=n);break;case 370:i.layer&&(i.layer.line_weight=parseFloat(n))}return r;function f(t,e,n){var r;"ENTITIES"===e.section?(r=n.layer||"none",t[e.section]=t[e.section]||{},t[e.section][r]=t[e.section][r]||[],t[e.section][r].push(n)):"BLOCKS"===e.section&&(t[e.section]=t[e.section]||{},t[e.section][e.block.name]=t[e.section][e.block.name]||e.block,t[e.section][e.block.name].ENTITIES=t[e.section][e.block.name].ENTITIES||[],t[e.section][e.block.name].ENTITIES.push(n))}function d(t,e,n){t[e.section]=t[e.section]||{},t[e.section][e.block.name]=t[e.section][e.block.name]||n}function h(t,e,n){t[e.section]=t[e.section]||{},t[e.section][e.table]=t[e.section][e.table]||[],t[e.section][e.table].push(n)}function v(t){return"DXF_"+t.replace(/ |\+|@/g,"")}function p(t){return s.math.round(t*c,6)}function g(t,e){var n=null;return t[l+1].trim()===e&&(n=t[l+2].trim(),l+=2),n}}(t,e),n.BLOCKS&&(r=(n.BLOCKS["*Paper_space"]||n.BLOCKS["*PAPER_SPACE"]||n.BLOCKS["*Paper_Space"]||n.BLOCKS["*paper_space"]||{}).pointer_id),n=function(t){return Object.keys(t.BLOCKS||[]).forEach((function(n){var r=t.BLOCKS[n];r.ENTITIES&&e(r.ENTITIES)})),Object.keys(t.ENTITIES).forEach((function(n){e(t.ENTITIES[n])})),t;function e(t){function e(t){return t.dir_y&&0!==t.dir_y||t.dir_x&&0!==t.dir_x}(t||[]).forEach((function(t,n){if(!t.paper_space)switch(v.DEBUG_DXF&&(t.ori_type=t.type+""),t.type){case"SOLID":!function(t,e){t.type="PATH",t.list=[{type:"M",x:t.x,y:t.y},{type:"L",x:t.x1,y:t.y1}],t.x2&&(t.list.push({type:"L",x:t.x2,y:t.y2}),delete t.x2,delete t.y2);t.list.push({type:"Z"}),t.index=e,delete t.x,delete t.y,delete t.x1,delete t.y1}(t,n);break;case"SPLINE":!function(t,e){t.controls&&(t.list=n(t,o(t.degree+1,t.controls,t.knots)),t.list.length&&(t.type="PATH",t.index=e,delete t.controls,delete t.knots));function n(t,e){var n,i,o=t.degree+1,a=o,s=0,c=0,u=[];if(o>2)for(;a<e.knots.length-o+1;)i=r(e.knots,a),n=e.controls.slice(s,s+o),4===o?(0===u.length&&u.push({type:"M",x:n[0].x,y:n[0].y}),u.push({type:"C",x1:n[1].x,y1:n[1].y,x2:n[2].x,y2:n[2].y,x:n[3].x,y:n[3].y})):3===o&&(0===u.length&&u.push({type:"M",x:n[0].x,y:n[0].y}),u.push({type:"Q",x1:n[1].x,y1:n[1].y,x:n[2].x,y:n[2].y})),s+=i,a+=i;else for(;c<t.controls.length;c++)u.push({type:0===c?"M":"L",x:t.controls[c].x,y:t.controls[c].y});return u}function r(t,e){for(var n=1,r=e+1;r<t.length&&t[r]===t[e];++r)++n;return n}function i(t,e){for(var n,i,o,a=[],s=t;s<e.length-t;){for(n=e[s],i=r(e,s),o=0;o<t-i-1;++o)a.push(n);s+=i}return a}function o(t,e,n){return i(t,n).reduce((function(e,n){return a(t,e.controls,e.knots,n)}),{controls:e,knots:n})}function a(t,e,n,r){for(var i,o=0,a=0,s=[],c=[],u=!1;a<e.length+t;a++)if(r>n[a]&&r<=n[a+1]){o=a,u=!0;break}for(u||console.error("Invalid knot"),a=0;a<e.length+t+1;a++)s[a]=a<=o?n[a]:a===o+1?r:n[a-1];for(a=0;a<e.length+1;a++)i=a<=o-t+1?1:o-t+2<=a&&a<=o?n[a+t-1]-n[a]==0?0:(r-n[a])/(n[a+t-1]-n[a]):0,c[a]=0===i?e[a-1]:1===i?e[a]:{x:(1-i)*e[a-1].x+i*e[a].x,y:(1-i)*e[a-1].y+i*e[a].y};return{controls:c,knots:s}}}(t,n);break;case"LWPOLYLINE":case"POLYLINE":case"LEADER":!function(t,e){t.vertices&&(t.type="PATH",t.list=t.vertices.map((function(t,e){return t.type=0===e?"M":"L",t})),1===t.polyline&&t.list.push({type:"Z"}),t.index=e,delete t.polyline,delete t.vertices)}(t,n);break;case"LINE":!function(t,e){t.type="PATH",t.list=[{type:"M",x:t.x,y:t.y},{type:"L",x:t.x1,y:t.y1}],t.index=e,delete t.x,delete t.y,delete t.x1,delete t.y1}(t,n);break;case"ARC":!function(t,n){var r,i,o,a;if(e(t))return;-1===t.dir_z&&(t.cx=0-t.cx,o=t.start_angle,t.start_angle=t.stop_angle,t.stop_angle=o,t.start_angle=s.math.normalizeAngle(180-t.start_angle),t.stop_angle=s.math.normalizeAngle(180-t.stop_angle));r=s.math.rad(t.start_angle),i=s.math.rad(t.stop_angle),a="M "+(t.cx+t.r*Math.cos(r))+" "+(t.cy+t.r*Math.sin(r))+" A "+t.r+" "+t.r+"  0 "+(s.math.normalizeAngle(t.start_angle-t.stop_angle)<=180?0:1)+" 0 "+(t.cx+t.r*Math.cos(i))+" "+(t.cy+t.r*Math.sin(i)),t.type="PATH",t.list=s.fn.path.str2List(a),t.index=n,delete t.start_angle,delete t.stop_angle,delete t.cx,delete t.cy,delete t.r}(t,n);break;case"ELLIPSE":!function(t,e){var n,r,i;if(t.dx=-0===t.dx?0:t.dx,0===t.dx&&0===t.dy)return;(n={}).ry=s.math.length(t.cx,t.cy,t.cx+t.dx,t.cy+t.dy),n.rx=t.ratio*n.ry,n.angle=s.math.angle(t.dx,t.dy,0,0),r=s.fn.type2List("ellipse",t.cx-n.rx,t.cy-n.ry,2*n.rx,2*n.ry),r=s.fn.path.rotate(r,t.cx,t.cy,n.angle),0===t.start_rad&&Math.abs(t.stop_rad-6.283185307179586)<=1e-4||(i=o(r,t,n))&&(r=i);function o(t,e,n){var r,i,o,a,c={},u={res:[]},l=10,f={start:s.math.deg(Math.atan2(Math.sin(e.start_rad)*e.ratio,Math.cos(e.start_rad))),stop:s.math.deg(Math.atan2(Math.sin(e.stop_rad)*e.ratio,Math.cos(e.stop_rad)))},d=n.rx>n.ry?n.rx:n.ry,h={x:e.cx,y:e.cy-d-10},v=0;for(e.dir_z>0&&(o=p(f.start),f.start=p(f.stop),f.stop=o),c.start=s.math.rotatePoint(h.x,h.y,e.cx,e.cy,f.start+n.angle),c.stop=s.math.rotatePoint(h.x,h.y,e.cx,e.cy,f.stop+n.angle),u.start=[{type:"M",x:e.cx,y:e.cy},{type:"L",x:c.start.x,y:c.start.y}],u.start=s.math.matrix.list(u.start,{a:l,b:0,c:0,d:l,e:0,f:0}),u.stop=[{type:"M",x:e.cx,y:e.cy},{type:"L",x:c.stop.x,y:c.stop.y}],u.stop=s.math.matrix.list(u.stop,{a:l,b:0,c:0,d:l,e:0,f:0}),r=s.fn.path.segmentize(s.math.matrix.list(t,{a:l,b:0,c:0,d:l,e:0,f:0}));v<4;v++)if((i=s.math.intersect(r[v],u.start)).pts.length>0){u.res=s.fn.path.split(r[v],i.ts[0])[1],a=v;break}if(void 0===a)return null;do{v===a?(i=s.math.intersect(u.res,u.stop)).pts.length>0&&(u.res=s.fn.path.split(u.res,i.ts[0])[0]):(i=s.math.intersect(r[v],u.stop)).pts.length>0?u.res.push(s.fn.path.split(r[v],i.ts[0])[0][1]):v!==a&&u.res.push(r[v][1]),++v>=4&&(v=0)}while(0===i.pts.length&&v!==a);return u.res=s.math.matrix.list(u.res,{a:1/l,b:0,c:0,d:1/l,e:0,f:0}),u.res}t.type="PATH",t.list=r,t.index=e,delete t.start_rad,delete t.stop_rad,delete t.cx,delete t.cy,delete t.dx,delete t.dy,delete t.ratio}(t,n);break;case"CIRCLE":!function(t,n){if(e(t))return;-1===t.dir_z&&(t.cx=-t.cx);t.type="PATH",t.list=s.fn.type2List("ellipse",t.cx-t.r,t.cy-t.r,2*t.r,2*t.r),t.index=n,delete t.cx,delete t.cy,delete t.r}(t,n)}}))}}(n),e.join_shapes&&(n=function(t){return Object.keys(t.BLOCKS||[]).forEach((function(n){var r=t.BLOCKS[n];r.ENTITIES&&e(r.ENTITIES,n)})),Object.keys(t.ENTITIES).forEach((function(n){e(t.ENTITIES[n],n)})),t=d(t);function e(t,e){var n={};function r(t,e,n,a){var c,u,l,f;if("PATH"===t.type&&"Z"!==t.list[t.list.length-1].type){if(c=o(t,"begin"),u=o(t,"end"),(l={bb:n[a].begin[c],be:n[a].begin[u],eb:n[a].end[c],ee:n[a].end[u]}).bb&&l.bb.index!==t.index)return f=l.bb,t.list=s.fn.path.reverse(t.list),f.list.shift(),f.list=i(h.concat(t.list,f.list)),t.type="DELETE",delete n[a].begin[c],delete n[a].end[o(f,"end")],void r(f,f.index,n,a);if(l.be&&l.be.index!==t.index)return(f=l.be).list.shift(),f.list=i(h.concat(t.list,f.list)),t.type="DELETE",delete n[a].begin[u],delete n[a].end[o(f,"end")],void r(f,f.index,n,a);if(l.eb&&l.eb.index!==t.index)return f=l.eb,t.list.shift(),f.list=i(h.concat(f.list,t.list)),t.type="DELETE",delete n[a].end[c],delete n[a].begin[o(f,"begin")],void r(f,f.index,n,a);if(l.ee&&l.ee.index!==t.index)return f=l.ee,t.list=s.fn.path.reverse(t.list),t.list.shift(),f.list=i(h.concat(f.list,t.list)),t.type="DELETE",delete n[a].end[u],delete n[a].begin[o(f,"begin")],void r(f,f.index,n,a);void 0===l.bb&&void 0===l.be&&void 0===l.eb&&void 0===l.ee&&(n[a].begin[c]=t,n[a].end[u]=t)}}function i(t){var e=t.length;return"L"===t[e-1].type&&"L"===t[e-2].type&&s.math.round(s.math.angle(t[e-2].x,t[e-2].y,t[e-1].x,t[e-1].y))===s.math.round(s.math.angle(t[e-3].x,t[e-3].y,t[e-2].x,t[e-2].y))&&(t.splice(e-2,1),t=i(t)),t}function o(t,e){var n=1e4,r="begin"===e?t.list[0].x:t.list[t.list.length-1].x,i="begin"===e?t.list[0].y:t.list[t.list.length-1].y;return Math.round(r*n)/n+"x"+Math.round(i*n)/n}(t||[]).forEach((function(t,i){n[e]=n[e]||{},n[e].begin=n[e].begin||{},n[e].end=n[e].end||{},r(t,i,n,e)}))}}(n),n=function(t){var e={},n=4,r=20;return Object.keys(t.ENTITIES).forEach((function(r){t.ENTITIES[r].forEach((function(t){var r,o,a;"PATH"===t.type&&(t.box=s.math.getPathBox(t.list),a={a:1,b:0,c:0,d:1,e:0-t.box.x,f:0-t.box.y},r=s.math.roundList(s.math.matrix.list(t.list,a),n),i(t),o=JSON.stringify(r),e[o]=e[o]||[],e[o].push({ent:t,list:r}))}))})),Object.keys(e).forEach((function(t){1===e[t].length?delete e[t]:(e.len=e.len||{},e.len[e[t].length]=e.len[e[t].length]||[],e.len[e[t].length].push(e[t]))})),Object.keys(e.len||{}).forEach((function(t){var i,o,a,c,u,l,f;if(e.len[t].length>1)for(i=0;i<e.len[t].length-1;i++)for(a=e.len[t][i],u=!1,o=i+1;o<e.len[t].length&&(c=e.len[t][o],f={},l=[],a.forEach((function(t,e){var i,o;c.forEach((function(a,c){var u,d,h;d=t.ent.box.x>a.ent.box.x?a.ent.box.x:t.ent.box.x,(t.ent.box.x>a.ent.box.x?t.ent.box.x:a.ent.box.x)-d<r&&(h=t.ent.box.y>a.ent.box.y?a.ent.box.y:t.ent.box.y,(t.ent.box.y>a.ent.box.y?t.ent.box.y:a.ent.box.y)-h<r&&-1===l.indexOf(c)&&(u=s.math.round(s.math.length(t.ent.box.x,t.ent.box.y,a.ent.box.x,a.ent.box.y),n),(void 0===i||u<i)&&(f[i=u]=f[i]||[],f[i].push({cur:e,next:c}),o=c)))})),void 0!==o&&l.push(o),void 0!==i&&f[i].length===a.length&&i<r&&(f[i].forEach((function(t){var e=a[t.cur],n=c[t.next];n.ent.box=s.math.mergeBoxes([e.ent.box,n.ent.box]),n.ent.list=h.concat(n.ent.list,e.ent.list),n.ent.merged=!0,v.DEBUG_DXF&&(n.ent.color="rgba(0, 255, 0, 0.9)"),e.ent.type="DELETE"})),u=!0)})),!u);o++);})),t;function i(t){5===t.list.length&&"MLLLL"===t.list.map((function(t){return t.type})).join("")&&5===t.list.filter((function(e){return 0===e.x||Math.abs(e.x-t.box.width)<1e-4})).length&&5===t.list.filter((function(e){return 0===e.y||Math.abs(e.y-t.box.height)<1e-4})).length&&(t.list=[{type:"M",x:t.box.x,y:t.box.y},{type:"L",x:t.box.x+t.box.width,y:t.box.y},{type:"L",x:t.box.x+t.box.width,y:t.box.y+t.box.height},{type:"L",x:t.box.x,y:t.box.y+t.box.height},{type:"Z"}])}}(n),n=function(t){var e={x:{},y:{}},n=3;return Object.keys(t.ENTITIES).forEach((function(r){t.ENTITIES[r].forEach((function(t){var r;"PATH"===t.type&&(t.cen={x:t.box.x+.5*t.box.width,y:t.box.y+.5*t.box.height},r=t.cen.x.toFixed(n),e.x[r]=e.x[r]||[],e.x[r].push(t),r=t.cen.y.toFixed(n),e.y[r]=e.y[r]||[],e.y[r].push(t))}))})),r(e.x),r(e.y),t=d(t);function r(t){Object.keys(t).forEach((function(e){var n,r,i,o,a=0,c=20;if(t[e].length>1)for(;a<t[e].length-1;a++)if("DELETE"!==(r=t[e][a]).type)for(n=a+1,o=!1;n<t[e].length&&("DELETE"===(i=t[e][n]).type||(s.math.length(r.cen.x,r.cen.y,i.cen.x,i.cen.y)<c&&(i.list=h.concat(i.list,r.list),i.box=s.math.mergeBoxes([r.box,i.box]),i.cen={x:i.box.x+.5*i.box.width,y:i.box.y+.5*i.box.height},r.type="DELETE",o=!0),!o));n++);}))}}(n)),i=function(t,e){var n={};t.TABLES&&t.TABLES.LAYER&&t.TABLES.LAYER.forEach((function(t){n[t.name]=t,n[t.name].group=g("g",e),n[t.name].group.attrs["v:layer"]=t.name}));return n.none={name:"none",color:7,group:g("g",e)},n.none.group.attrs["v:layer"]="none",n}(n,f),o=function(t){var e={};t.TABLES&&t.TABLES.LTYPE&&t.TABLES.LTYPE.forEach((function(t){e[t.name]=t}));return e}(n),Object.keys(n.ENTITIES).forEach((function(t){void 0===i[t]&&(i[t]=i.none),i[t].color>0&&n.ENTITIES[t].forEach((function(a){!function(t,e,n,i,o,a,c){var u,l,f,d;e[n]||(n="none");switch(o.type){case"DIMENSION":t.dxf_dimensions&&p(o,c,e,n,!0);break;case"INSERT":p(o,c,e,n,!0);break;case"PATH":u=g("path",e[n].group),d=s.math.roundList(o.list,6),u.attrs.d=s.fn.path.list2Str(d),u.attrs.fill="none";break;case"TEXT":case"ATTRIB":u=m(o,e[n].group,e,n);break;case"MTEXT":u=x(o,e[n].group,e,n);break;case"ACAD_TABLE":y(o,e[n].group,e,n)}u&&(l=w(u,d),"text"!==u.tag&&(f="path"===u.tag?{width:l.width,height:l.height}:{width:0,height:0},a.right=a.right||l.x+f.width,a.bottom=a.bottom||l.y+f.height),("text"!==u.tag||"text"===u.tag&&u.text)&&(void 0===a.x&&(a.x=l.x),void 0===a.y&&(a.y=l.y),l.x<a.x&&(a.x=l.x),l.y<a.y&&(a.y=l.y)),"text"!==u.tag&&(a.right<l.x+f.width&&(a.right=l.x+f.width),a.bottom<l.y+f.height&&(a.bottom=l.y+f.height)),k(u,o,t,e,n,i),v.DEBUG_DXF&&(u.attrs["v:json"]=JSON.stringify({index:o.index,type:o.ori_type,ori:o.ori}).replace(/"/g,"&quot;")));function p(e,n,o,a,c,u){var l=h.extend({},e),f=n.BLOCKS[l.block];function d(t,e){var n,r={},i=[];return(t.ENTITIES||[]).forEach((function(t){if("PATH"===t.type)n=e[t.layer].color,void 0===r[n]?(i.push(t),r[n]=i.length-1):i[r[n]].list=i[r[n]].list.concat(t.list);else i.push(t)})),t.merged=!0,i}l.pointer_id!==r&&(u?(l.x_scale=(l.x_scale||1)*(u.x_scale||1),l.y_scale=(l.y_scale||1)*(u.y_scale||1),l.x=u.x+l.x-(f.x*(l.x_scale||1)||0),l.y=u.y+l.y-(f.y*(l.y_scale||1)||0)):(l.x=l.x-(f.x*(l.x_scale||1)||0),l.y=l.y-(f.y*(l.y_scale||1)||0)),c&&void 0===f.merged&&(f.ENTITIES=d(f,o)),(f.ENTITIES||[]).forEach((function(e){var r,c,u;if(!(o[e.layer]&&o[e.layer].color<0)){switch(e.type){case"DIMENSION":t.dxf_dimensions&&(e.x=l.x,e.y=l.y,p(e,n,o,a,!0,l));break;case"INSERT":p(e,n,o,a,!0,l);break;case"TEXT":(u=h.extend({},e)).x=u.x*(l.x_scale||1)+l.x,u.y=u.y*(l.y_scale||1)+l.y,u.text_height*=l.y_scale||1,c=m(u,o[a].group,o,a);break;case"ACAD_TABLE":(u=h.extend({},e)).x=u.x*(l.x_scale||1)+l.x,u.y=u.y*(l.y_scale||1)+l.y,u.text_height=(u.text_height||14)*(l.y_scale||1),u.cols=u.cols.map((function(t){return t*(l.y_scale||1)})),u.rows=u.rows.map((function(t){return t*(l.x_scale||1)})),y(u,o[a].group);break;case"MTEXT":(u=h.extend({},e)).x=u.x*(l.x_scale||1)+l.x,u.y=u.y*(l.y_scale||1)+l.y,u.text_height=(u.text_height||14)*(l.y_scale||1),c=x(u,o[a].group,o,a);break;case"PATH":r=e.list,r=s.math.matrix.list(r,{a:l.x_scale||1,b:0,c:0,d:l.y_scale||1,e:l.x,f:l.y}),r=s.fn.path.rotate(r,l.x,l.y,l.rotation||0),(c=g("path",o[a].group)).attrs.d=s.fn.path.list2Str(s.math.roundList(r,6)),k(c,e,t,o,a,i)}v.DEBUG_DXF&&c&&(c.attrs["v:json"]=JSON.stringify({index:e.index,type:e.ori_type,insert:!0,ori:e.ori}).replace(/"/g,"&quot;"))}})))}function m(t,e,n,r){var i,o,a;if(t.x&&t.y){if(a=g("g",e),(i=g("text",a)).attrs["font-fill"]=v.DXF_COLORS[t.color]||v.DXF_COLORS[n[r].color]||"#000000",t.text.match("%%u")&&(t.text=t.text.replace("%%u",""),i.attrs["text-decoration"]="underline"),i.text=t.text,i.attrs.x=t.x,i.attrs.y=t.y,"ATTRIB"===t.type&&t.text_height){switch(t.attach_point){case 2:case 5:case 8:o="middle";break;case 3:case 6:case 9:o="end";break;default:o="start"}i.attrs["text-anchor"]=o,t.align_y&&(i.attrs.y=t.align_y)}else if(1===t.justify)i.attrs.x+=t.text_height*(i.text.length/2),i.attrs["text-anchor"]="middle";else i.attrs["text-anchor"]="start";return t.text_height&&(i.attrs["font-size"]=t.text_height+"px"),t.rotation_angle&&(i.attrs.transform="rotate("+t.rotation_angle+" "+t.x+" "+t.y+" )"),i}}function y(t,e){var n=g("g",e);function r(t){var e=[],n={x:t.x,y:t.y,cell:0};t.rows.forEach((function(r){var i=!1;n.x=t.x,t.cols.forEach((function(o){var a=t.cells[n.cell];i?(e[e.length-1].width+=o,i=!1):e.push({text:a.text,x:n.x,y:n.y,width:o,height:r}),a.merge&&(i=!0),n.x+=o,n.cell++})),n.y+=r})),t.cells=e}r(t),t.cells.forEach((function(r){var i,o=g("rect",e);o.attrs.x=r.x,o.attrs.y=r.y,o.attrs.width=r.width,o.attrs.height=r.height,r.text&&r.text.length>0&&((i=g("text",n)).text=b(r.text),i.attrs.x=r.x+r.width/2,i.attrs.y=r.y+t.text_height+t.text_height/2,i.attrs["text-anchor"]="middle",i.attrs["font-size"]=t.text_height)}))}function x(t,e,n,r){var i,o=g("g",e),a=t.text_height||14,c=v.DXF_COLORS[t.color]||v.DXF_COLORS[n[r].color]||"#000000",u=0;switch(t.attach_point){case 2:case 5:case 8:i="middle";break;case 3:case 6:case 9:i="end";break;default:i="start"}switch(t.attach_point){case 4:case 5:case 6:t.y+=t.text_height||7;break;case 1:case 2:case 3:t.y+=t.text_height||14}return t.text.split("\\P").forEach((function(e){var n=3,r="",i=[],o=b(e);t.rect_width?(o.split(" ").forEach((function(e){""!==r&&(r.length+e.length)*n>t.rect_width&&(i.push(r.substr(0,r.length-1)),r=""),r+=e+" "})),""!==r&&i.push(r.substr(0,r.length-1)),i.forEach((function(t){l(t,u),u++}))):(l(e,u),u++)})),void 0!==t.x_vector&&void 0!==t.y_vector&&(o.attrs.transform="rotate("+s.math.deg(Math.atan2(t.y_vector,t.x_vector))+" "+t.x+" "+t.y+" )"),o;function l(e,n){var r,s=b(e),u=(s.length-s.trimStart().length)*a,l=e.match(/\\H(.*?)(?=\\|}|$)/g);null!==l&&l.forEach((function(s){var l=s.match(/H(.*?;)/g)[0],f=s.match(/;(.*$)/g)[0];l=l.substr(1,l.length-2),f=f.substr(1),"x"===l.charAt(l.length-1)&&(l=l.replace("x",""),l=parseFloat(l)*a),(r=g("text",o)).text=f,r.attrs.x=t.x+u,r.attrs.y=t.y+l*v.LINE_SPACE*n,r.attrs["text-anchor"]=i,r.attrs["font-fill"]=c,r.attrs["font-size"]=l,u+=f.length*l,e=e.replace(s,"")})),""!==(s=b(e))&&(r=g("text",o),s.match(/\\L/gm)&&(s=s.replace(s.match(/\\L/gm),""),r.attrs["text-decoration"]="underline"),r.text=s,r.attrs.x=t.x+u,r.attrs.y=t.y+a*v.LINE_SPACE*n,r.attrs["text-anchor"]=i,r.attrs["font-size"]=a,r.attrs["font-fill"]=c)}}function k(t,e,n,r,i,o){var a,s,c={};"MTEXT"!==e.type&&"TEXT"!==e.type&&(c["stroke-width"]=n.dxf_stroke,c.stroke=v.DXF_COLORS[e.color]||v.DXF_COLORS[r[i].color],c.fill="none",""!==(s=o[a=e.line_type||r[i].line_type]&&o[a].dash_space?o[a].dash_space:"")&&(c["stroke-dasharray"]=s),Object.keys(c).forEach((function(e){t.attrs[e]=c[e]})))}function w(t,e){switch(t.tag){case"g":return s.fn.getTranslate(t.attrs.transform||"");case"text":return{x:t.attrs.x,y:t.attrs.y};case"path":return s.math.getPathBox(e||s.fn.path.str2List(t.attrs.d))}}function b(t){return t.replace(/\$/g,"\\$1").replace(/\\(.*?);/g,"").replace(/\{|}/g,"").replace(/%%c|%%C/g,"â").replace(/\\U\+(.\S\S\S)/g,(function(t){return String.fromCharCode(parseInt(t.substr(2),16))})).replace("ï¿½","Â±")}}(e,i,t,o,a,l,n)}))})),v.DEBUG_DXF&&(console.log(n),console.log(Object.keys(n.ENTITIES).reduce((function(t,e){return t+n.ENTITIES[e].length}),0))),f.attrs.transform="translate("+(0-l.x)+","+(0-l.y)+")",a=function(t,e,n){return['<svg width="'+e+'" height="'+n+'">',s.fn.toSVG(t),"</svg>"].join("")}(f,l.right-l.x,l.bottom-l.y),e.string?a:s.wrap(h.parseSVG(a));function d(t){return Object.keys(t.BLOCKS||[]).forEach((function(e){var n,r=t.BLOCKS[e];if(r.ENTITIES)for(n=r.ENTITIES.length-1;n>=0;n--)"DELETE"===r.ENTITIES[n].type&&r.ENTITIES.splice(n,1)})),Object.keys(t.ENTITIES).forEach((function(e){for(var n=t.ENTITIES[e].length-1;n>=0;n--)"DELETE"===t.ENTITIES[e][n].type&&t.ENTITIES[e].splice(n,1)})),t}function p(t){return s.math.normalizeAngle(360-t)}function g(t,e){var n={tag:t,attrs:{id:(+new Date).toString(36)+(c++).toString(36)},children:[]};return e&&e.children.push(n),n}},shapes2dxf:function(t){var e,n=require("makerjs"),r={},i={fontSize:2,layerOptions:{}};return t.filter((function(t){return"image"===t.type()})).length>0&&g.notify(s.lang.ui.dxf_no_image,"warn"),e=s.fn.getBox(t),Object.keys(e).forEach((function(t){e[t]=o(e[t])})),e.middle=e.height/2,function t(i,a){var c=[],u=s.fn.getFontNode(s.doc)._text(),l={family:[],subset:{},urls:s.fn.readImports(u),faces:m.readFontFaces(u)};return h.sequence(i,(function(e){var r,i,u,l,h,v=s.math.normalizeAngle(360-s.math.angleToGlobal(e)),m=s.wrap(e);if(e.hidden()||!e.isGroup()&&null===m.prim())return Promise.resolve();if("g"===e.type())return t(e.shapes(),a).then((function(t){return c=c.concat(t),d(e,v)}));if(h=m.box(),r=e.sizeU("mm"),e.isChild()){if("none"===e.stroke()&&""===e.text()&&"none"===e.fill())return Promise.resolve();u={x:h.x+h.width/2,y:h.y+h.height/2},u={x:o((u=e.parent().globalize(u.x,u.y)).x),y:o(u.y)}}else u={x:o(h.x+h.width/2),y:o(h.y+h.height/2)};switch(u.y=g(u.y),l={x:u.x-r.width/2,y:u.y-r.height/2},e.type()){case"rect":"none"!==e.stroke()&&0!==e.strokeWidth()&&((i=new n.models.Rectangle(r.width,r.height)).origin=[l.x,l.y]);break;case"ellipse":(i=new n.models.Ellipse(r.width/2,r.height/2)).origin=[u.x,u.y];break;case"path":!function(t,e){var n=s.wrap(e);function r(e,n,r,i){var o,a;r&&(o=s.wrap(n._findClass("begin"===i?"BeginArrow.cls":"EndArrow.cls")),a={x:parseFloat(o._attr("x")),y:parseFloat(o._attr("y"))},s.doc._findID(r+".end")._children()._each((function(n){var r,i,c=s.wrap(n);r="path"===c.type()?c.list():s.fn.prim2List(c),r=s.fn.path.offset(r,a.x,a.y),r=s.fn.path.globalize(r,o),i={paths:f(e,r,{x:0,y:0},{x:0,y:0},0)},t.push(i)})))}r(e,n,e.beginArrow(),"begin"),r(e,n,e.endArrow(),"end")}(c,e),function(t,e){var n,r,i,o,a,c,u,l,d=s.wrap(e).prim(),h=e.angle(),v=d._attr("marker-mid"),p=/url\(#(.*?)\)/g;v&&(v=p.exec(v)[1],o=s.doc._findID(v),n=s.wrap(o._find("use")),a=s.doc.getMaster(n.attr("xlink:href")),r=n.scale(),c=a.prim(),i=s.fn.path.globalize(s.fn.path.str2List(d._attr("d")),d),l={x:parseFloat(o._attr("refX")),y:parseFloat(o._attr("refY"))},u="path"===c.type()?c.list():s.fn.prim2List(c),u=s.math.matrix.list(u,{a:r.x,b:0,c:0,d:r.y,e:0,f:0}),u=s.fn.path.offset(u,-l.x,-l.y),i.forEach((function(n,r){var o,a;"M"!==n.type&&r<i.length-1&&(o=s.fn.path.offset(u,n.x,n.y),o=s.fn.path.rotate(o,n.x,n.y,s.math.getVectorAngle(i[r-1],n,i[r+1])/2+h),a={paths:f(e,o,{x:0,y:0},{x:0,y:0},h)},t.push(a))})))}(c,e),i={paths:f(e,e.pathList(),l,u,v,r.height)}}return i&&n.model.rotate(i,v,[u.x,u.y]),p(e,i),d(e,v)})).then((function(){return c}));function f(t,e,r,i,a,s){var c,u,l,f,d=[],h=0;for(e.forEach((function(t,n){Object.keys(t).forEach((function(t){"type"!==t&&(e[n][t]=o(e[n][t]),"y"!==t&&"y1"!==t&&"y2"!==t||(e[n][t]=void 0===s?g(e[n][t]):g(e[n][t],s/2)))}))}));h<e.length;h++)if("M"===e[h].type&&(f=h),void 0!==(l=e[h+1]))switch(l.type){case"Q":case"C":c="Q"===l.type?[[e[h].x,e[h].y],[l.x1,l.y1],[l.x,l.y]]:[[e[h].x,e[h].y],[l.x1,l.y1],[l.x2,l.y2],[l.x,l.y]],(u=new n.models.BezierCurve(c,.01)).origin=[r.x,r.y],n.model.rotate(u,a,[i.x,i.y]),p(t,u);break;case"M":break;case"Z":l=e[f];default:u={type:"line",origin:[r.x+e[h].x,r.y+e[h].y],end:[r.x+l.x,r.y+l.y]},d.push(u)}return d}function d(t,e){return""!==t.text()&&!1===t.textHidden()?function(t){var e=t.fontFamily(),n=t.fontWeight(),i=t.fontStyle(),o=e+n+i,a=e;return r[o]?Promise.resolve(r[o]):(a+="normal"===n?":400":":700",c(a+="italic"===i?"i":""));function c(e){return s.fn.getWoffURL([v.FONTS.GOOGLE_URL+"/css?family="+e+"&subset=all"],!0).then((function(e){var r=[];return s.fn.parseWoffURL(e[0],r),r[0]?n(r[0].src):l.faces[t.fontFamily()]?n(l.faces[t.fontFamily()]):c("Roboto")}));function n(t){return new Promise((function(e,n){opentype.load(t,(function(t,i){t?n(t):(r[o]=i,e(i))}))}))}}}(t).then((function(r){var i,a,c;void 0!==(a=s.wrap(t).getTextBlock())&&(c=a._findTag("text")._attr("text-anchor"),a._findTag("tspan")._each((function(u){var l,f=s.wrap(u),d=u.el[0].getComputedTextLength(),h=f.move(),v=0;switch(h=a.toGlobal(h.x,h.y),c){case"end":v=d,h.x-=d;break;case null:v=d/2,h.x-=v}(h={x:o(h.x),y:o(h.y)}).y=g(h.y),(i=new n.models.Text(r,(l=f.text(),$("<div>").text(l).html().replace(/&nbsp;/g," ")),o(t.fontSize()))).origin=[h.x,h.y],n.model.rotate(i,e-t.txtAngle(),[h.x+o(v),h.y]),p(t,i,!0)})))})):Promise.resolve()}function p(t,e,n){var r,i,s,u=t.fontSize(),l=n?t.fontFill():t.stroke(),f=t.strokeDashArray();e&&(0!==(r=v.DXF_COLORS.indexOf(l.toUpperCase()))&&-1!==r||(r=255),u=(u=.75*o(u)).toFixed(3),i=t.layer().id.toUpperCase()+"_"+r+"_"+String(u).replace(/\./g,"_"),"none"!==f&&"NaN"!==f&&(i+="_"+(f=f.split(" ").map((function(t){return parseFloat(t)}))).map((function(t){return parseInt(t)})).join("_").slice(0,3)),a.layerOptions[i]={fontSize:u,color:r},"none"!==f&&"NaN"!==f&&f.length&&(s=Math.max.apply(null,f),a.layerOptions[i].dashArray=f.map((function(t,e){return(0===t&&0===s?0:o(2*t/s))*(e%2==0?-1:1)}),[])),e.layer=i,c.push(e))}function g(t,n){return void 0===n&&(n=e.middle),n-(t-n)}}(t,i).then((function(t){var e={models:t};return function(t){for(var e=0,n=0,r=t.split("\n");n<r.length;n++)if("HEADER"===r[n]){e=n+1;break}e&&r.splice(e,0,"9","$MEASUREMENT","70","1");return r.join("\n")}(n.exporter.toDXF(e,i))}));function o(t){return s.math.round(new u.Length(t).mm())}},status:function(t){$("#status\\.id").html(t)},showDrop:function(t,e){var n,r={id:t[0].id,$target:t,drop_id:t[0].id.replace(".icon",".drop"),toggle_icon:!0,originalEvent:e,show:!0},i=h(document);function o(t,e,n){var r;m.show(t._$(),n.toggle_icon?e:void 0),m.moveDropdown(t._$(),e,n.x,n.y),(r=t._children(".VScroll\\.cls")).el.length>0&&s.mode===p.EDIT&&u.trigger("_refreshScroll.Scroll",{id:"#"+h.escape(r._prev().el[0].id)}),s.drop.unshift({$drop:t._$(),$icon:e})}t.addClass("Active.cls"),u.trigger("_beforeShowDrop.Vecta",r),r.show&&(n=h("#"+h.escape(r.drop_id)),t.hasClass("SubMenu.cls")&&(n._addClass("SubMenu.cls"),i._findClass("SubMenu.cls Menu.cls Active.cls")._removeClass("Active.cls"),i._findClass("SubMenu.cls Menu_Active.cls")._removeClass("Menu_Active.cls")),n._hasClass("Active.cls")?0!==s.drop.length&&t[0].id!==s.drop[0].$icon[0].id?(m.hide(s.drop[0].$drop,r.toggle_icon?s.drop[0].$icon:void 0),n._hasClass("Active.cls")||o(n,t,r)):m.hide(n._$(),r.toggle_icon?t:void 0):o(n,t,r))},show:function(t,e,n){var r,i,o;function a(n){var r,i,o=$(n.target),a=o.closest([".Radio\\.cls",".IconRadio\\.cls",".CheckBox\\.cls",".Icon\\.cls",".Drop\\.cls","[data-value]",".Tabs\\.cls",".Menu\\.cls",".MenuItem\\.cls",".OK\\.cls",".Cancel\\.cls",".Expand\\.cls",".Collapse\\.cls","button",'input[type="checkbox"]'].join(",")),u={},f=a.hasClass("HRange.cls")||a.hasClass("CRange.cls")||a.hasClass("VRange.cls");if(a.hasClass("Menu.cls"))return Controls.iconMenu(n,a),void n.originalEvent.stopPropagation();if(0===a.length||f)t[0].id===o[0].id||f||n.stopPropagation();else if(u.originalEvent=n,u.id=a[0].id,u.class=a[0].className,u.target=a,void 0!==(r=a.attr("data-value"))&&(u.id=e?e[0].id.replace(".icon",".drop"):t[0].id,u.value=r,u.hideDropdown=!0),!a.hasClass("Radio.cls")||"click"!==n.type)if(a.hasClass("Expand.cls")||a.hasClass("Collapse.cls"))!1===a.hasClass("Stencil.cls")&&function(t){var e=t.hasClass("Expand.cls");1===o.closest("svg").length?t.removeClass(e?"Expand.cls":"Collapse.cls").addClass(e?"Collapse.cls":"Expand.cls"):(t.closest(".Content\\.cls").find("ul .Selected\\.cls").removeClass("Selected.cls"),t.addClass("Selected.cls"))}(a);else{if(a.hasClass("MenuItem.cls")&&void 0===r&&(u.id=e?e[0].id.replace(".icon",".drop"):t[0].id,u.value="",u.hideDropdown=!0),a.hasClass("IconRadio.cls")&&(u.prev_id=s.fn.setIconID(a.attr("id"))),a.hasClass("Drop.cls")&&(a.addClass("Active.cls"),u.drop_id=u.id.replace(".icon",".drop"),u.toggle_icon=!0,u.show_dropdown=!0),a.hasClass("Tabs.cls")){if($(n.target).hasClass("Tabs.cls"))return;-1===(i=$(n.target).parentsUntil(".Tabs\\.cls").last().index())&&(i=$(n.target).index()),a.children().removeClass("Selected.cls").eq(i).addClass("Selected.cls"),a.siblings("div").hide().eq(i).show(),u.id=a[0].id,u.tabIndex=i}a.hasClass("OK.cls")&&(u.id=t.hasClass("Modal.cls")?t[0].id:e[0].id.replace(".icon",".drop"),u.button=s.lang.ui.ok),a.hasClass("Cancel.cls")&&(u.id=t[0].id,u.button=s.lang.ui.cancel),c(u),a.hasClass("Drop.cls")&&u.show_dropdown&&m.showDrop(a,u),0===t.find(".Invalid\\.cls").length?t.find(".OK\\.cls").show():t.find(".OK\\.cls").hide(),l(u)}}function c(t,e){n&&(t.data=n),e=e||"_controlClicked.Vecta",u.trigger(e,t)}function l(n){void 0!==s.lang.ui&&(n.button===s.lang.ui.cancel||n.button===s.lang.ui.ok||n.hideDropdown&&void 0!==n.value)&&m.hide(t,e)}!function(){var e,n=h.unEscape(t[0].id);if(void 0!==s.lang.dialog&&void 0!==s.lang.dialog[n]){for(e in s.lang.dialog[n])e.indexOf(".cls")>=0&&r(t.find("."+e.replace(/\./g,"\\.")),s.lang.dialog[n][e]),e.indexOf(".id")>=0&&r(t.find("#"+e.replace(/\./g,"\\.")),s.lang.dialog[n][e]);r(t.find(".OK\\.cls"),s.lang.ui.ok),r(t.find(".Cancel\\.cls"),s.lang.ui.cancel)}function r(t,e){t.each((function(t,n){n.innerHTML!==e&&(n.innerHTML=e)}))}}(),t.addClass("Active.cls"),isLivePreviewDrop(t[0].id)&&u.trigger("_startLivePreview.Vecta"),t.find(".Radio\\.cls").each((function(t,e){var n=$(e);n.on("mousedown.Radio",(function(t){if(0===t.button){var e=n.closest(".RadioGroup\\.cls");0===e.length&&(e=n.parent()),e.find(".Radio\\.cls").removeClass("Active.cls"),n.addClass("Active.cls"),a(t)}}))})),buildRange(t),0!==(r=t.find(".Tabs\\.cls")).length&&0===r.children(".Selected\\.cls").length&&(r.children().eq(0).addClass("Selected.cls"),r.siblings("div").hide().eq(0).show()),t.hasClass("Modal.cls")&&(i=t.find(".Dialog\\.cls"),t.find(".Invalid\\.cls").removeClass("Invalid.cls"),i.css({left:Math.round(.5*(s.$win.width()-i.outerWidth())),top:Math.round(.5*(s.$win.height()-i.outerHeight()))}),s.drop.unshift({$drop:t}),u.trigger("_modalShown.Vecta",{id:t[0].id})),t.find("select").on("change.UI",(function(t){var e=$(t.target);c({originalEvent:t,value:e.val(),id:e[0].id,class:e[0].className,target:e})})),t.on("click.UI",a),t.hasClass("Dropdown.cls")&&setTimeout((function(){u.on("click."+t[0].id,(function(n){0===$(n.target).closest("#"+h.escape(t[0].id)).length&&(!1!==t.data("hide")?m.hide(t,e):t.data("hide",!0))}))})),(t.hasClass("Dropdown.cls")||t.hasClass("Modal.cls"))&&(u.trigger("_keyPush.Vecta",{id:t[0].id,keyDown:function(n){var r=m.keys(n),i={},o="";r.esc&&(0!==t.find(".Cancel\\.cls:visible").length&&(i.originalEvent=n,i.id=t[0].id,i.button=s.lang.ui.cancel,c(i)),m.hide(t,e,!0)),r.enter&&(0!==t.find(".OK\\.cls:visible").length&&(o=s.lang.ui.ok),""!==o&&(i.originalEvent=n,i.id=t.hasClass("Modal.cls")?t[0].id:e[0].id.replace(".icon",".drop"),i.button=o,c(i),l(i)))}}),(o=t.find("input")).length>0&&o.on("input."+t[0].id,(function(e){var n={};n.originalEvent=e,n.validated=!0,n.id=e.target.id,c(n,"_inputChanged.Vecta"),n.validated?$(e.target).removeClass("Invalid.cls"):$(e.target).addClass("Invalid.cls"),!1===o.hasClass("Invalid.cls")?t.find(".OK\\.cls").show():t.find(".OK\\.cls").hide()}))),Controls.toolTip(t)},hide:function(t,e,n){var r=0,i={};if(t.hasClass("Dropdown.cls")&&(i.esc=n,i.$menu=t,i.$icon=e,u.trigger("_beforeHideMenu.Vecta",i)),e&&e.removeClass("Active.cls"),u.off("click."+t[0].id),t.removeClass("Active.cls"),isLivePreviewDrop(t[0].id)&&u.trigger("_stopLivePreview.Vecta"),t.off(".UI"),t.find("select").off(".UI"),t.find("input").off("."&t[0].id),u.trigger("_keyPop.Vecta",{id:t[0].id}),t.off(".Tips"),t.find(".Radio\\.cls").each((function(t,e){$(e).off("mousedown.Radio")})),t.find(".HRange\\.cls").each((function(t,e){o(e,".HRThumb\\.cls","HRange",t)})),t.find(".VRange\\.cls").each((function(t,e){o(e,".VRThumb\\.cls","VRange",t)})),t.find(".CRange\\.cls").each((function(t,e){o(e,".CRThumb\\.cls","CRange",t)})),1===s.drop.length)s.drop=[];else for(;r<s.drop.length;r++)if(s.drop[r].$drop[0].id===t[0].id){s.drop.splice(r,1);break}function o(t,e,n,r){var i=$(t),o=i.find("svg");i.find(e).off("mousedown."+n),o.off("mousedown."+n),rangeContainer(o).off("mousemove."+n+r),u.off("mouseup."+n+r)}t.hasClass("Dropdown.cls")&&u.trigger("_dropdownHidden.Vecta",{id:t[0].id}),t.hasClass("Modal.cls")&&u.trigger("_modalHidden.Vecta",{id:t[0].id})},moveDropdown:function(t,e,n,r){var i,o=void 0===r?e.outerHeight(!0):0,a=void 0===r?e.offset():{left:n,top:r},c=s.$win.height(),u=s.$win.width();t.offset({top:0,left:0}),i={width:t.outerWidth(!0),height:t.outerHeight(!0)},a.top+o+i.height>c?a.top-=i.height+18:a.top+=o+1,a.left+i.width>u-15&&(a.left=u-i.width-18),t.offset(a)},getUse:function(t){return t.tagName?t:t.correspondingUseElement},getURL:function(){var t=window.location.pathname;return("/"==t.substring(0,1)?t.substring(1):t)+encodeURIComponent(window.location.search)},subset:function(t,e,n,r,i){var o,a=[10],s=["-regular","-italic","-bold","-bolditalic"][["normalnormal","normalitalic","boldnormal","bolditalic"].indexOf(n+r)];e&&-1===v.FONTS.SAFE.indexOf(e.replace("+"," "))&&(s=void 0===s?e+"-"+n+"-"+r:e+s,void 0===t.family&&(t.family=[]),-1===t.family.indexOf(e)&&t.family.push(e),void 0===t.subset&&(t.subset={}),void 0===t.subset[s]?(t.subset[s]={family:e,weight:n,style:r},o=[]):o=t.subset[s].unicodes,i.split("").forEach((function(t){t=t.charCodeAt(0),-1===o.indexOf(t)&&-1===a.indexOf(t)&&o.push(t)})),t.subset[s].unicodes=o.sort((function(t,e){return t-e})))},getDocClone:function(t,e){var n,r=[];return new Promise((function(i){if(s.mode===p.DASH)return s.db.file.activePage(t).then((function(e){e&&"0"!==e?s.db.file.drawing(t,e,!0).then((function(t){i(t)})):i(null)}));e?(u.activeDoc.pages().forEach((function(t){r.push(u.activeDoc.loadPage(t.id,{active:!1}))})),Promise.all(r).then((function(){n=s.doc.$.clone(),Object.keys(s.pages).forEach((function(t){var e=n.children("svg#"+h.escape(t));e.attr("index",s.pages[t].index),["zoom","x","y"].forEach((function(t){e.removeAttr(t)}))})),n.find(v.GHOST_CLASS).remove(),i(n)}))):((n=s.doc.$.clone()).find(v.GHOST_CLASS).remove(),i(n))}))},getImageBlob:function(t,e,n,r){var i,o=t.children("svg"),a=t.find('style[type="text/css"]').text(),c={family:[],subset:{},urls:s.fn.readImports(a)};return h(t)._findClass("Guide.cls")._remove(),h.attr(t[0],"overflow","hidden"),h.attr(o[0],{x:"1",width:"100%",height:"100%"}),"jpg"===n&&t.css("background-color","white"),i=function(t,e,n){var r;t=t.replace("<svg ",'<svg xmlns="'+v.XMLNS+'" xmlns:xlink="'+v.XLINK+'" xmlns:v="'+v.VNS+'" height="'+e.height+'" width="'+e.width+'" '),n&&(r=t.match(/CDATA.*?stroke-width:0.75pt.*?]]/),t=r?t.replace(r[0],r[0].replace("stroke-width:0.75pt","stroke-width:2pt")):t.replace("CDATA[#draw\\.id {","CDATA[#draw\\.id {stroke-width:2.5px;"));return t.replace(/draw\.id/g,"draw").replace(/draw\\\.id/g,"draw")}(h.serialize(t[0]),e,r),function(t,e){var n=t.find("text"),r=[],i=[];n.length>0&&n.each((function(t,n){var r=$(n),i=r.text();""!==i&&m.subset(e,(r.css("font-family")||"Roboto").replace(/['"]/g,""),o(r.css("font-weight")||"normal"),r.css("font-style")||"normal",i)}));return $.each(e.subset,(function(t,n){var o=n.family.replace(/\s/g,"+");e.urls[o]&&e.urls[o].url?r.push(e.urls[o].url):i.push(t)})),i.forEach((function(t){delete e.subset[t]})),s.fn.getWoffURL(r).then((function(t){var n=[];return t.forEach((function(t){s.fn.parseWoffURL(t,n)})),$.each(e.subset,(function(t,r){e.subset[t].urls=[],n=n.filter((function(n){return!((r.family||[]).split(/ *, */g).indexOf(n["font-family"])>-1&&o(n["font-weight"])===o(r.weight)&&n["font-style"]===r.style)||(n.src&&e.subset[t].urls.push(n.src),!1)}))})),e}));function o(t){return{400:"normal",700:"bold"}[t]||t}}(t,c).then((function(t){return s.getFonts(t,!0).then((function(t){return i=i.replace(/<style>@import.*?<\/style>|<style type="text\/css">@import.*?<\/style>/,"<style>"+t+"</style>"),s.fn.image.replaceBase64(i).then((function(t){return g.getBlob(t,e,n)}))}))}))},loadSVGDocument:function(t,e,n){var r,i,o,a,c=$(t).clone(),l=c.children("svg"),f=s.doc,d=0;function y(t,e){return void 0===e||t===e}function x(t,e){function n(t,e){var n=$(t);function r(t){return t.replace(/url\(#ver_|url\(#|#ver_|#/,"").replace(/\)$/,"")}$.each(w(t),(function(i,o){var a;"xlink:href"!==i&&"href"!==i||"use"!==t.tagName||(o=r(o),(a=e.find("#"+h.escape("ver_"+o))).length>0&&a.attr("id",o),n.attr("href","#"+o)),o.indexOf("url(#")>-1&&(o=r(o),(a=e.find("#"+h.escape("ver_"+o))).length>0&&a.attr("id",o),n.attr(i,"url(#"+o+")"))}))}n(t,e),$(t).children().each((function(t,r){n(r,e),r.id&&"g"===r.tagName&&x(r,e)}))}function k(t,e){$.each(w(t[0]),(function(t,n){e.attr(t)!==n&&e.attr(t,n)})),$.each(w(e[0]),(function(n){t.attr(n)||e.attr(n,null)}))}function w(t){for(var e,n=0,r={};n<t.attributes.length;n++)"id"!==(e=t.attributes.item(n)).name&&(r[e.name]=e.value);return r}function b(t){var e,n=s.wrap(t);n.$.children().length>0?((e=n.prim())&&n.makeGhost(e),n.allSubs(!0,"node").forEach((function(t){b(t)}))):n.$.remove()}u.trigger("_loadingSVGDocument.Vecta",{revert_version:void 0!==n}),u.selection.clear(),g.showMessage(s.lang.mssg.loading+"...",!0),c.removeClass("HideGuides.cls"),(o=c.children("style").html())!==v.CDATA&&(o=v.CDATA),f.$.children("style").html(m.CDATA(o)),l.each((function(t,e){var i,o;o=(a=$(e)).attr("id"),y((r=s.doc.$.find("svg#"+o))[0].id,n)&&(s.pages[o].index=t,k(a,r),i=h(r)._find("g[id]"),d<=i.length&&(d=i.length),r.empty())})),i=1e3*Math.ceil(d/200),setTimeout((function(){var t,i,o=f.$.children("defs"),d=s.doc.$.children("svg"),w=[];!function(t,e){var n,r,i,o,a,c=t.children("defs"),u=e.children("defs");c.children().each((function(t,e){if("style"===e.tagName)n=s.fn.readImports(h(e)._text()),r=m.readFontFaces(h(e)._text()),i=u.children("style"),a=i.text().trim(),o=s.fn.readImports(a),Object.keys(n).forEach((function(t){o[t]||(a+='@import url("'+n[t].url+'");')})),Object.keys(r).forEach((function(t){a+='@font-face{font-family:"'+t+'"; src: url("'+r[t]+'");}'})),i.text(a);else e.id&&0===u.children("#"+h.escape(e.id)).length&&u[0].appendChild(e)}))}(c,f.$),k(c,f.$),l.each((function(e,i){a=$(i),y((r=d.filter("#"+a.attr("id")))[0].id,n)&&(t=r.attr("v:setup"),a.children().each((function(t,e){s.wrap(e).isShape()&&(x(e,o),s.mode===p.EDIT&&(w.push(function(t){var e=$(t),n=[];return e.find("image").each((function(t,e){var r,i=$(e),o=h.attr(i[0],"href"),a=s.wrap(i.closest("g[id]")[0]),c=!1;o||(h.each(e.attributes,(function(t){t.name.indexOf("xmlns")>-1&&(i.removeAttr(t.name),i.attr("xmlns:xlink",v.XLINK),c=!0)})),h.each(e.attributes,(function(t){t.name.indexOf("href")>-1&&(i.removeAttr(t.name),i.attr("xlink:href",t.value),c=!0)})),c&&(o=h.attr(i[0],"href"),a=s.wrap(i.closest("g[id]")[0]))),o&&o.indexOf("data:image")>-1&&(r=s.storage.getImageGUID(o),n.push(s.storage.upload64(s.config.bucket.images,r.name,o,r.type).then((function(t){t&&(h.attr(i[0],"xlink:href",t.downloadURL),i.attr({"v:image":r.guid,"v:img_url":null}),s.fn.makeRim(a,s.wrap(e)))}))))})),Promise.all(n)}(e)),b(e)),new u.Shape(e).increment()&&u.trigger("_disableIncrement.Vecta",e.id))})))})),Promise.all(w).then((function(){return d.each((function(t,e){y((r=$(e))[0].id,n)&&r.html(l.filter("#"+r.attr("id")).children())})),(i=new u.Page(s.page)).orientation(i.orientation()),(t=s.page.json("v:setup")).paper===v.CUSTOM?i.width(t.width).height(t.height):i.paperType(t.paper),t.scale&&i.scale(t.scale.from,t.scale.to),function(t){var e=l.filter((function(e,n){return!!y(n.id,t)&&s.doc._findID(n.id)._children().length>0})).length;return new Promise((function(t){e>0?u.on("shapesAdded.Vecta.Import",(function(){0===--e&&(u.off("shapesAdded.Vecta.Import"),t())})):t()}))}(n).then((function(){var n=o.children("style").text(),r=m.readFontFaces(n);s.fn.uploadFonts(r),u.trigger("_refreshLayers.Vecta").trigger("_loadedSVGDocument.Vecta",[t.unit]),s.indexPages(),g.hideMessage(),e&&$.isFunction(e)&&e()}))}))}),i)},preload:new function(){var t="preloading";return{set:n,push:function(r){var i,o=e();if(h.isArray(r)||(r=[r]),i=o.slice(o.length-r.length),(r=r.reverse())&&i.toString()!==r.toString())return r.forEach((function(t){var e=o.indexOf(t);e>-1&&o.splice(e,1)})),o=o.concat(r),st.general.write(t,o).then((function(){return n(o)}))},pop:function(r){var i=e(),o=i[i.length-1];if(!r||r===o)return i.pop(),st.general.write(t,i).then((function(){return n(i)}))}};function e(){var e=g.getCookie(t);return e?JSON.parse(e.pop()):[]}function n(e){var n,r=new Date;e&&e.length?(r.setTime(r.getTime()+31536e6),e=JSON.stringify(e)):(r.setTime(r.getTime()-1e3),e=""),n="; expires="+r.toUTCString(),document.cookie=t+"="+e+n+"; path=/"}},error:function(t){g.hideMessage(),u.trigger("_showModal.Vecta",{title:s.lang.ui.error,content:t,class:"Error.cls",open:function(t){t.$dialog.find(".Default\\.cls").html(s.lang.ui.return_dash)},close:function(){g.redirect("app/dashboard")}})},readFontFaces:function(t){for(var e,n,r,i=/@font-face *{(.*?)}/g,o=/font-family: *["'](.*)["'];/g,a=/src: *url\((.*)\)/g,s={};null!==(e=i.exec(t));)for(;null!==(n=o.exec(e[1]));)if(n=n[1])for(;null!==(r=a.exec(e[1]));)(r=r[1])&&(s[n]=r.replace(/"/g,""));return s},codeEditor:function(e,n){var r,i="javascript";return st.read("theme").then((function(o){return new Promise((function(a,c){u.trigger("_listenDialog.Vecta",{$dialog:$("#code_editor\\.dialog"),movable:!0,enter:!1,esc:!1,open:function(a){var c,l=a.$dialog,f=l.find(".Title\\.cls"),d=l.find(".Content\\.cls"),h=d.children("label"),v=l.find(".Button\\.cls"),p=d.find("#code_editor\\.id"),g=l.find(".Dialog\\.cls");if(u.on("_windowResized.Vecta.CodeEditor",m),l.on("mousedown",(function(t){function e(t,e,n,r){var i=parseFloat(c.css(t))+n;r.min<=i&&i<=r.max&&(c.css(t,i+"px"),g.css(e,parseFloat(g.css(e))-.5*n+"px"))}t.target.closest("svg[id=codeeditor_resize\\.id]")&&(l.on("mousemove",(function(t){var n=t.originalEvent.movementX,r=t.originalEvent.movementY;n&&e("width","left",n,{min:400,max:s.$win.width()-24}),r&&e("height","top",r,{min:10,max:s.$win.height()-125})})),l.one("mouseup",(function(){l.off("mousemove"),r={width:parseFloat(c.css("width"))/s.$win.width(),height:parseFloat(c.css("height"))/s.$win.height()}})))})),n=n||{},f.text(n.title||s.lang.ui.edit_code),n.label&&h.text(n.label),t&&(r=t.ratio,p.next().remove(),t.off("keyup")),n.mode=n.mode||i,n.gutters=[],n.mode===i)n.lint=!0,n.gutters.push("CodeMirror-lint-markers"),n.hint=CodeMirror.hint.javascript;function m(){["width","height"].forEach((function(t){r&&r[t]&&c.css(t,s.$win[t]()*r[t]+"px")}))}n.lineNumbers=n.lineNumbers||!0,n.lineWrapping=n.lineWrapping||!0,n.indentUnit=n.indentUnit||4,n.theme="idea","dark"===o&&(n.theme="darcula"),n.scrollbarStyle="overlay",n.matchBrackets=!0,n.autoCloseBrackets=!0,p.text(e||""),t=CodeMirror.fromTextArea(p[0],n),n.mode===i&&t.on("keyup",(function(t,e){!t.state.completionActive&&e.keyCode>64&&e.keyCode<91&&CodeMirror.commands.autocomplete(t,null,{completeSingle:!1})})),n.readOnly?(v.find(".Default\\.cls").addClass("Hide.cls"),v.find(".Cancel\\.cls").text(s.lang.access.close)):n.action&&v.find(".Inform\\.cls").removeClass("Hide.cls"),n.buttons&&n.buttons.default&&v.find(".Default\\.cls").text(n.buttons.default),setTimeout((function(){t.refresh(),t.focus()})),c=l.find(".CodeMirror"),m()},click:function(e){e.$target.hasClass("Inform.cls")&&n.action&&n.action(t.getValue())},close:function(e){var n=e.$dialog,r=n.find(".Content\\.cls").children("label"),i=n.find(".Button\\.cls");r.text(""),i.find(".Inform\\.cls").text(s.lang.drop.run_script).addClass("Hide.cls"),u.off("_windowResized.Vecta.CodeEditor"),n.off("mousedown"),t.ratio={width:parseFloat(n.find(".CodeMirror").css("width"))/s.$win.width(),height:parseFloat(n.find(".CodeMirror").css("height"))/s.$win.height()},e.$target.hasClass("Default.cls")?a(t.getValue()):(i.find(".Default\\.cls").removeClass("Hide.cls"),i.find(".Cancel\\.cls").text(s.lang.ui.cancel),c())}})}))}))},shapes2DOM:function(t,e,n,r){var i=[],o={},a=s.wrap(n),c=h(document.createDocumentFragment()),u={shapes:[],ConnLine:[],ConnVerti:[]};return t&&Object.keys(t).forEach((function(n){var r=t[n];r.id=n,r.index=e[r.id],r.prim&&(r.parent&&t[r.parent]||v.COMPASS&&r.$parent?(o[r.parent]=o[r.parent]||[],o[r.parent].push(r)):i.push(r))})),i.sort(f).forEach((function(t){l(t,o,c,r,u)})),v.COMPASS&&h.each(o,(function(t,e){o[e].sort(f).forEach((function(t){t.$parent&&l(t,o,h(t.$parent[0]),r,u)}))})),a._append(c),u;function l(t,e,n,r,i){var o,a=function(t,e,n,r){var i,o,a=new s.Group(null,t.el[0]).id(e.id),c=e.attrs&&void 0!==e.attrs.class&&e.attrs.class.indexOf("Group.cls")>-1;c&&void 0===e.prim&&(e.prim={attrs:{class:"Prim.cls"},tag:"g"});e&&e.attrs&&e.attrs.class&&(e.attrs.class.indexOf("ConnLine.cls")>-1?(e.attrs.class=e.attrs.class.replace("ConnLine.cls","CLine.cls"),r.ConnLine.push({id:e.id,klass:e.attrs.class})):e.attrs.class.indexOf("ConnVerti.cls")>-1&&(e.attrs.class=e.attrs.class.replace("ConnVerti.cls","CVerti.cls"),r.ConnVerti.push({id:e.id,klass:e.attrs.class})));a.attr(e.attrs),e.prim&&u(a,e,c,"prim",n);Object.keys(e).forEach((function(t){switch(t){case"svg":case"id":case"index":case"attrs":case"prim":case"parent":case"text":case"defs":case"conn":case"$parent":break;default:u(a,e,c,t,n)}})),e.defs&&(o=h.parseSVG(e.defs).el[0],a.append(o),s.wrap(o)._children()._each((function(t){switch((t=s.wrap(t)).type()){case"clippath":c?a._children(".Prim\\.cls")._attr({"clip-path":"url(#"+e.id+".clip)"}):a.prim().attr({"clip-path":"url(#"+e.id+".clip)"});break;case"filter":-1===t.id().indexOf(".txt")&&(c?a._children(".Prim\\.cls")._attr({filter:"url(#"+e.id+".flt)"}):a.prim().attr({filter:"url(#"+e.id+".flt)"}))}})));e.text&&a.append(h.parseSVG(e.text).el[0]);e.svg&&a._children("svg")._append(h.parseSVG("<svg>"+e.svg+"</svg>")._children());e.conn&&s.Group&&s.Use&&(i=new s.Group(null,a).attr({id:null,class:v.CONN_PT.CLASS}),Object.keys(e.conn).forEach((function(t){var n=e.conn[t];n.id=t,new s.Use(null,i).attr(n).link(v.CONN_PT.ID)})));return a;function u(t,e,n,r,i){var o,a;if(void 0!==e[r].tag){if("Ele"===(a=s.fn.getMethod(e[r].tag)))o=new s[a](null,e[r].tag,t);else o=new s[a](null,t);o.id(null),e[r]&&e[r].attrs&&e[r].attrs.filter&&delete e[r].attrs.filter,o.attr(e[r].attrs),"prim"!==r||n||i||t.makeGhost(o,e.attrs&&e.attrs.class&&e.attrs.class.indexOf("Guide.cls")>-1?"Guide_Ghost.cls":void 0)}}}(n,t,r,i),c=n._hasClass("Group.cls");i.shapes.push(t.id),c?n._children(".Prim\\.cls")._append(a):n._append(a),(o=e[t.id])&&o.sort(f).forEach((function(t){l(t,e,h(a[0]),r,i)}))}function f(t,e){return t.index-e.index}},autoCompleteCat:function(t){var e,n;n={str:e=t.$target.val()},u.trigger("_formatEmail.Vecta",n),e=e.replace(new RegExp(n.str+"$"),t.value),","!==(e=$.map(e.split(","),(function(t){return $.trim(t)})).join(", ")).substring(e.length-1,e.length)&&(e+=", "),t.$target.val(e).change()},getOwner:function(t){return s.db.muid().once("files/"+t+"/team").then((function(t){if(t)return t.exists()?t.val():s.user.id}))},newLinkDrawing:function(t){s.db.file.new({access:v.OWNER}).then((function(e){g.redirect("app/edit/"+e.fid+"?src="+t)})).catch((function(t){console.error(t)}))},getEditorSVG:function(t){var e=[],n=u.activePage.id();return t||g.showMessage(s.lang.mssg.download_drawing+"...",!0),u.activeDoc.pages().forEach((function(t){t.id!==n&&e.push(u.activeDoc.loadPage(t.id,{active:!1}))})),Promise.all(e).then((function(){var t,e=s.doc.$.clone(),n=[];return Object.keys(s.pages).sort((function(t,e){return s.pages[t].index-s.pages[e].index})).forEach((function(t,n){var r=e.children("svg").eq(n);r[0].id!==t&&r.before(e.children("#"+t))})),e.attr("v:stencils",JSON.stringify((t=u.activeDoc.stencils().filter((function(t){return-1===t.id().indexOf("search")})),h.extend({},t.map((function(t){var e=h(t[0]);return{id:t.id(),expand:e._hasClass("Expand.cls")?1:0,show_name:e._hasClass("Names.cls")?1:0}})))))),e.find(".Selected\\.cls").removeClass("Selected.cls"),e.find(v.GHOST_CLASS).remove(),e.attr("xmlns:v",v.VNS),e.find("g[id] >image").each((function(t,e){var r=$(e),i=h.attr(r,"href");n.push(s.fn.image.getBase64(i).then((function(t){t?h.attr(r,"href",t.base64):console.error("Meta not exist")})))})),Promise.all(n).then((function(){return h.serialize(e[0],!0)}))}))},readInputFile:function(t){var e=$('<input type="file" accept="'+(t||"*")+'">');return new Promise((function(t){e.change((function(){var n=e[0].files[0];m.readFile(n,"text").then((function(e){t(m.convert2Obj(e.result,e.ext))})),e.off("change")})),$(window).one("focus",(function(){setTimeout((function(){t()}),500)})),e.click()}))},getUploadedFonts:function(){return m.getTeam(g.queryID()).then((function(t){var e={};return t?s.db.mfid(t).once("fonts/").then((function(t){return t=t.val()||{},Object.keys(t).forEach((function(n){e[n]=t[n],e[n].is_team=!0})),e})):s.db.once("users/"+s.user.id+"/fonts").then((function(t){return t=t.val()||{},Object.keys(t).forEach((function(n){e[n]=t[n]})),e}))}))},uploadFont:function(t,e){var n=g.queryID();return void 0===e&&g.showMessage(s.lang.drop.upload_fonts,!0),m.getTeam(n).then((function(e){var n=s.db.push("files").key,r="font/woff";return s.storage.uploadBlob(s.config.bucket.fonts,n+".woff",new Blob([t.ab],{type:r}),null,r).then((function(r){var i=r.downloadURL,o=t.name;return o=o.replace(/(\.[a-zA-Z]+)|[^a-zA-Z0-9]+/g,""),e?s.db.mfid(e).update("fonts/"+n,{name:o,url:i}).then((function(){return{id:n,name:o,url:i,is_team:!0}})):s.db.update("users/"+s.user.id+"/fonts/"+n,{name:o,url:i}).then((function(){return{id:n,name:o,url:i}}))}))})).catch((function(t){console.error(t),g.hideMessage(),g.notify(s.lang.ui.upload_font_fail,"warn")}))},getTeam:function(t){return s.db.muid(s.user.id).once("files/"+t+"/team").then((function(t){return t.val()}))},promiseRead:function(t){var e=t.name.split(".").pop();return["woff","ttf","otf","eot"].indexOf(e)>-1?m.readFile(t,"arrayBuffer"):"image/svg+xml"===t.type||"application/json"===t.type||""===t.type?m.readFile(t,"text"):m.readFile(t,"dataURL")},convertFile:function(t,e,n,r){return e.split(".")[1]&&(e=e.split(".")[0]),e=g.queryID()+"/"+e,s.storage.uploadFile(s.config.bucket.convert,t,e+"."+n).then((function(){return g.ajax.post({name:e,input:n,output:r},s.config.cf.url+"cloudConvert").then((function(t){return s.storage.getURL(s.config.bucket.convert,e+"."+r).then((function(e){return t.url=e,t}))}))}))},getStencilSymbols:function(t,e){var n,r=[];t.start=1;do{void 0===t.limit||r.length<t.limit?(n=i(t))&&r.push(e?h.parseSVG(n):n):n=void 0}while(n);return r;function i(t){var e,n,r,i=t.str.indexOf("<svg",t.start),o=t.str.indexOf("</svg>",t.start),a="</svg>".length;if(i>-1&&o>-1){e=t.str.substring(i,o+a),t.start=o+a;do{n=e.match(/<svg/g),r=e.match(/<\/svg>/g),n.length!==r.length&&(o=t.str.indexOf("</svg>",o+a),t.start=o+a,e=t.str.substring(i,o+a))}while(n.length!==r.length)}return e}},parseStencil:function(t){var e,n;return e=m.getStencilSymbols(t,!0),n=h.parseSVG(t.str.slice(0,t.str.indexOf("<svg",1))+"</svg>"),e.forEach((function(t){n._append(t)})),n},exportImg:function(t,e,n,r){var i,o={};return 1===t.length?m.export.getShapes(o,t[0]).then((function(){return s.fn.getPageArea(o),o.download=!0,o.name=e,a(null,o)})):(i=new JSZip,o.download=!1,o.silent=!0,t.reduce((function(t,e){return t.then((function(){return a(e,o).then((function(t){var r=e.name(),a=e.index()+1;r!==s.lang.ui.page+" "+a&&(r=s.lang.ui.page+"-"+a+"-"+r),r=g.exportName(r),r+=o.ratio.width>1?"@"+o.ratio.width+"x":"",i.file(r+"."+n,t)}))}))}),Promise.resolve()).then((function(){return g.showMessage(s.lang.ui.generating_zip+"...",!0),i.generateAsync({type:"blob"}).then((function(t){g.download({name:g.exportName(e)+".zip",blob:t}),g.hideMessage()}))})));function a(t,e){return new Promise((function(i){setTimeout((function(){t&&(g.showMessage(s.lang.ui.exporting+" "+t.name()+"...",!0),e.shapes=t.shapes(),e.name=t.name(),e.width=Math.ceil(t.widthU()),e.height=Math.ceil(t.heightU()),e.vb={width:Math.ceil(t.widthU()*t.scale()+.5),height:Math.ceil(t.heightU()*t.scale()+.5)},e.offset={x:-.5,y:-.5}),e.ratio=r,e.ratio={width:e.ratio,height:e.ratio},e.compress=!1,e.ext=n,e.subset=!1,e=m.export.adjustDrawingSize(e),m.export.adjustWaterMark(e),m.export.generate(e).then(i)}),100)}))}},export:{wrapStr:function(t,e,n,r,i){var o=h.extend({},u.activeDoc.json(),(i||u.activePage).json());return e=e.replace(/ ?translate\(0 0\) ?/g,"").replace(/ ?transform=""/g,"").replace(/ ?(Group|Selected|CLine|CVerti|CJump)\.cls ?/g,"").replace(/ ?class=""/g,"").replace(/rgb\(.*?\)/g,(function(t){return s.fn.hex6(t)})).replace(/ id=".*?"/g,"").replace(/v:name="(.*?)"/g,(function(t,e){return e.indexOf("&quot;")>-1&&(e=e.replace(/&quot;/g,"&amp;quot;")),'id="'+e+'"'})).replace(/ ?v:[a-zA-Z0-9-_]*?=".*?"/g,(function(t){return/ ?v:(json|layer_json|layer_name)*?=".*?"/.test(t)?t:""})).replace(/ ?xmlns:v="http:\/\/vecta\.io"/g,"").replace(/&quot;/g,'"').replace(/<defs>(.*?)<\/defs>/,""),e='<svg xmlns="'+v.XMLNS+'" xmlns:xlink="'+v.XLINK+'" xmlns:v="'+v.VNS+'" '+(r.id?'id="'+r.id+'" ':"")+'width="'+r.width+'" height="'+r.height+'" viewBox="0 0 '+r.vb.width+" "+r.vb.height+'"'+(h.isEmpty(o)?"":' v:json="'+JSON.stringify(o)+'"')+"><style>"+function(t){return t.$.children("style").html().replace(/#draw\\.id/g,"svg").replace(/\n/g," ")}(t)+"</style>"+(""!==n?"<defs>"+n+"</defs>":"")+e+(r.mark?r.mark:"")+"</svg>",e=(e=e.replace(/ ?id="(.*?)" ?/g,(function(t,e){return t.replace(e,e.replace(/&amp;quot;/g,"&quot;"))}))).replace(/ ?v:[json|layer_json]*?="{(.*?)}" ?/g,(function(t,e){return t.replace(e,e.replace(/"/g,"&quot;"))}))},processDefs:function(t,e,n){var r,i="",o={};return n.family.length>0&&(n.family.forEach((function(t){t=t.replace(/\s/g,"+"),n.urls[t]&&(i+='@import url("'+n.urls[t].url+'");'),n.faces&&n.faces[t]&&(i+=" @font-face{font-family: '"+t+"'; src: url("+n.faces[t].replace(/&/g,"&amp;")+");}")})),i="<style>"+i+"</style>"),(r=e.match(/url\(.+?\)/g))&&r.forEach((function(n){var r,a=h.escape(n.replace(/url\(|\)/g,""));o[a]||((r=t._find("defs #"+a)).length>0?(i+=h.serialize(r.el[0]),o[a]=!0):(r=t._find("#"+a)).length>0&&(i+=h.serialize(r.el[0]),e=e.replace(h.serialize(r.el[0]),""),o[a]=!0))})),(r=e.match(/(?:xlink:)*href="#.*?"/g))&&r.forEach((function(e){var n,r=h.escape(e.replace(/(?:xlink:)*href="|"/g,""));r&&!o[r]&&(n=t._find("defs #"+r)).length>0&&(i+=h.serialize(n.el[0]),o[r]=!0)})),{defs:i,str:e}},processShapes:function(t,e,n){var r="",i=[],o=[];return t.shapes.forEach((function(t){var e,n=s.wrap(t);""!==n._html()?(function(t){var e=t.attr("v:events");e&&JSON.parse(e).forEach((function(e){t.attr(e.event,e.code)}));t._find("[v\\:events]")._each((function(t){JSON.parse(t._attr("v:events")).forEach((function(e){t._attr(e.event,e.code)}))}))}(e=s.wrap(n._clone())),o.push(e)):n._remove()})),o.forEach((function(i){var o,c=i.moveU(),u=n?i.links():null,l="";0===t.offset.x&&0===t.offset.y||(i.attr("v:formula",null),i.move(c.x-t.offset.x,c.y-t.offset.y)),!1===i._hasClass("NoPrint.cls")&&(a(t,i,e,!1,n),i._hasClass("Group.cls")?i.allSubs().forEach((function(r){a(t,s.wrap(r),e,!0,n)})):i=function(t){var e=t[0].attributes,n=t._children();if(n.length>1)return t;return Object.keys(e).forEach((function(t){var r=e[t].name,i=e[t].value;h.attr(n.el[0],r,i)})),t._replaceWith(n),s.wrap(n)}(i),u?(null===i[0].hasAttribute("fill")&&i[0].setAttribute("fill","#fff"),l+=h.serialize(i[0]),(o=u[0]).desc&&(l="<title>"+o.desc+"</title>"+l),o.url&&(l=o.type?'<a target="_'+o.type+'" xlink:href="'+o.url+'">'+l+"</a>":'<a xlink:href="'+o.url+'">'+l+"</a>")):l+=h.serialize(i[0]),r+=l)})),r=function(t,e){t.length>0&&(e=e.replace(new RegExp(t.map((function(t){return' id="'+t+'"'})).join("|"),"g"),(function(t){return t+' display="none"'})),e='<rect id="'+t[0]+'_main" x="0" y="0" width="100%" height="100%" stroke="none" fill="rgba(255, 255, 255, 0)">'+t.map((function(e){return'<animate xlink:href="#'+e+'" attributeName="display" from="none" to="none" dur="0.01" begin="'+t[0]+'_main.click" fill="freeze" />'})).join("")+"</rect>"+e);return e}(i,r),r;function a(t,e,n,r,o){var a,c,l,f,d,h,p="",g=e.prim();function y(t){var n=t.json();n&&e[0].setAttribute("v:layer_json",JSON.stringify(n))}e._findClass(v.GHOST_CLASS)._remove(),e._findClass(v.CONN_PT.SELECTOR)._remove(),e._findClass("NoPrint.cls")._remove(),e[0].hasAttribute("v:anim")&&(i=i.concat(s.fn.createAnim(e,t.vb,!1).menu)),r&&(c=e.links())&&(f=e._parent(),null===e[0].hasAttribute("fill")&&e[0].setAttribute("fill","#fff"),c[0].url&&((l=new s.Link(null,f))[0].removeAttribute("id"),l[0].setAttribute("fill","none"),c[0].type&&l[0].setAttribute("target","_"+c[0].type),l[0].setAttribute("xlink:href",c[0].url),e._before(l),l._append(e)),c[0].desc&&e._before(new s.Title(f).attr({id:null}).text(c[0].desc))),e[0].hasAttribute("class")?e[0].getAttribute("class").split(" ").forEach((function(t){if(t.indexOf(".lay")>-1){var n=t.split(".lay")[0];h=new u.Layer(n),e[0].setAttribute("v:layer_name",h.name()),o&&y(h)}else h=new u.Layer("default"),o&&y(h)})):(h=new u.Layer("default"),o&&y(h)),(a=e.getTextBlock())&&((d=a._children("text")).length>0&&(p=s.fn.getText(d)),""===p?a.delete():new u.Shape(e).getStyledText().forEach((function(t){t.styles=t.styles||{},m.subset(n,t.styles["font-family"]||u.activeDoc.styles("font-family"),t.styles["font-weight"]||u.activeDoc.styles("font-weight"),t.styles["font-style"]||u.activeDoc.styles("font-style"),t.text)}))),null!==e.getTextPath()&&g[0].setAttribute("v:name",g.id())}},adjustWaterMark:function(t,n){var r,i;if(s.license.isAcademic())return i=s.license.getPlan()===s.config.license.serial.plan.ec_hob_pro?new u.Shape($("#hobby_watermark_svg\\.id > g").clone()[0]):new u.Shape($("#edu_watermark_svg\\.id > g").clone()[0]),n&&(s.wrap(i).attr("visibility","hidden"),s.page.append(i),i.stroke("#969696").strokeWidth(1),t.full_page&&((r=new u.Selection(u.activePage.shapes()).box()).height>t.height&&(t.height=r.height,t.vb.height=r.height,t.offset.y=r.y),r.width>t.width&&(t.width=r.width,t.vb.width=r.width,t.offset.x=r.x))),e(i,t),t.shapes.push(i),i},getShapes:function(t,e){var n;return s.mode===p.DASH?(t.shapes=r(e),t.full_page=!0,Promise.resolve()):(n=0===u.selection.length())?(t.shapes=r(e),t.full_page=n,Promise.resolve()):st.general.read("export_selection").then((function(n){n?(t.shapes=r(e),t.full_page=!0):(t.shapes=h.extend([],u.selection.shapes()),t.full_page=!1)}));function r(t){return t.shapes().filter((function(t){var e=t.layer();return!1===e.hidden()&&!0===e.print()}))}},generate:function(t,e){var n,r,i,o=s.fn.getFontNode(s.doc)._text(),a={family:[],subset:{},urls:s.fn.readImports(o),faces:m.readFontFaces(o)};return r=m.export.processShapes(t,a,!1),t.id="draw",i=m.export.processDefs(s.doc,r,a),r=m.export.wrapStr(s.doc,i.str,i.defs,t),t.silent||g.showMessage(s.lang.ui.compressing_svg,!0),s.nano.compress({str:r,compress:t.compress,subset:t.subset}).then((function(i){return t.silent||g.hideMessage(),"opaque"!==$("#background\\.id option:selected").val()&&"jpg"!==t.ext&&"pdf"!==t.ext||(n=!0),i&&(r=s.nano.stringify(i)),t.silent||g.showMessage(s.lang.ui.to_base64+"...",!0),s.fn.image.replaceBase64(r).then((function(r){return t.silent||g.hideMessage(),g.getBlob(r,t,"pdf"===t.ext?"jpg":t.ext,n).then((function(n){var r;if(null===n.b64)g.notify(s.lang.mssg.unable_export,"error");else if(e)e.setPage(t.page+1),e.addImage(n.b64,"JPG",0,0,t.pdf.width,t.pdf.height);else{if(r=g.exportName(t.name),r+=t.ratio.width>1?"@"+t.ratio.width+"x":"",!t.download)return t.retB64?n.b64:n.blob;g.download({blob:n.blob,name:r+"."+t.ext})}}))}))}))},adjustDrawingSize:function(t){var e,n=t.ratio.width?t.width*t.ratio.width:t.width,r=t.ratio.height?t.height*t.ratio.height:t.height,i=32e3,o=32e3;return(e=n*r/268435e3)>1?(e=Math.sqrt(e),t.width/=e,t.height/=e):(n>i||r>o)&&(n>r?(e=n/i,t.width=i,t.height/=e):(e=r/o,t.height=o,t.width/=e)),t}},insertWatermark:function(t){var n,r,i,o=!1;0!==(i=h(s.canvas.$[0])._find("#grid\\.id"+t.id())).length&&(n=i._find("#watermark_grid"),r=new s.SVG(i._$()).sizeU(),0===n.length?(o=!0,(n=s.license.getPlan()===s.config.license.serial.plan.ec_hob_pro?new s.SVG($("#hobby_watermark_svg\\.id").clone()[0],i._$()):new s.SVG($("#edu_watermark_svg\\.id").clone()[0],i._$())).attr({id:"watermark_grid"})):n=new s.SVG(n._$()),e(n,{width:r.width,height:r.height,vb:{width:r.width,height:r.height},offset:{x:0,y:0}}),o&&i._append(n))},exportNativePdf:function(t,e,n,r){var i=new PDFDocument({autoFirstPage:!1,compress:!1}),o={},a=document.createElement("canvas").getContext("2d"),c=i.pipe(blobStream()),l={},f=s.fn.getFontNode(s.doc)._text(),d={family:[],subset:{},urls:s.fn.readImports(f),faces:m.readFontFaces(f)};return n=n||3.125,g.showMessage(s.lang.ui.exporting+"...",!0),h.sequence(t,(function(t){return g.showMessage(s.lang.ui.exporting+" "+t.name()+"...",!0),function(t,e){var r={};return new Promise((function(o){setTimeout((function(){m.export.getShapes(r,t).then((function(){return r.ext="pdf",r.ratio={width:n,height:n},s.fn.getPageArea(r,t),m.export.adjustWaterMark(r),r.pdf={width:new u.Length(Math.ceil(r.width)).pt(),height:new u.Length(Math.ceil(r.height)).pt()},(r=m.export.adjustDrawingSize(r)).compress=!1,r.full_page?(r.offset.x=0,r.offset.y=0):(r.pdf.height=r.pdf.height+3,r.pdf.width=r.pdf.width+3,r.offset.x=r.offset.x-2,r.offset.y=r.offset.y-2),i.addPage({size:[r.pdf.width,r.pdf.height],margin:0}),i.addNamedDestination(t.id()),p(r.shapes,i,r.offset,t,r.full_page,e).then((function(t){o(t)}))}))}))}))}(t,l)})).then((function(){i.end(),g.hideMessage(),c.on("finish",(function(){var t,n,i,o=c.toBlob("application/pdf"),a=h("iframe#print\\.id");r?(a.length>0&&(URL.revokeObjectURL(a._attr("src")),a._remove()),t=window.URL.createObjectURL(o),(n=document.createElement("iframe")).id="print.id",g.isOffline()?(i=h("#print_preview\\.dialog"),u.trigger("_listenDialog.Vecta",{$dialog:i._$(),content:n,close:function(){i._findClass("Content.cls")._empty()}})):(document.body.appendChild(n),n.style.display="none",n.onload=function(){setTimeout((function(){n.focus(),n.contentWindow.print(),u.once("mouseover.Vecta",(function(){URL.revokeObjectURL(t),document.body.removeChild(n)}))}),1e3)}),n.src=t):g.download({name:e+".pdf",blob:o})}))}));function p(t,e,n,r,i,c){var l=r.scale();return h.sequence(t,(function(t){var o,a,d,h,v,g,y,b,M,_,F,E=t.parent(),A=s.wrap(t),S=t.links(),T=[];if(t.hidden()||A._hasClass("NoPrint.cls")||!t.isGroup()&&null===A.prim())return Promise.resolve();if(v=s.math.normalizeAngle(360-s.math.angleToGlobal(t)),g=A.box(),d=t.sizeU("px"),h={width:new u.Length(d.width).pt(),height:new u.Length(d.height).pt()},E?(a={x:g.x+d.width/2,y:g.y+d.height/2},a=t.parent().globalize(a.x,a.y,r),o={x:(a={x:new u.Length(a.x).pt(),y:new u.Length(a.y).pt()}).x-h.width/2,y:a.y-h.height/2}):o={x:(a={x:new u.Length(g.x).pt()+h.width/2,y:new u.Length(g.y).pt()+h.height/2}).x-h.width/2,y:a.y-h.height/2},n&&(o.x-=new u.Length(n.x).pt(),o.y-=new u.Length(n.y).pt(),a.x-=new u.Length(n.x).pt(),a.y-=new u.Length(n.y).pt()),i&&l&&1!==l&&(h.width/=l,h.height/=l,o.x/=l,o.y/=l,a.x/=l,a.y/=l),function(t,e,n){var r,i;if(t.id().indexOf("watermark")>-1)return!1;if("svg"===t.type())return!1;if(-1!==t.fill().indexOf("url(#R")&&Math.abs(n.width-n.height)>10)return!1;if(i=s.math.normalizeAngle(360-s.math.angleToGlobal(t)),e.hasClip()&&i)return!1;if((r=e._findTag("tspan")).el.some((function(t,e){var n=s.wrap(r._eq(e)).style("text-stroke");return n&&"none"!==n})))return!1;if(0!==e._findTag("filter").length)return!1;return 0===e._findTag("textPath").length}(t,A,h)){if(A.hasClip()&&"image"!==t.type()&&(o=(y=w(e,t,o,h,a,g,l,n)).move,h=y.size,a=y.center),"g"===t.type())return S&&f(t,e,S,o,h),p(t.shapes(),e,n,r,i,c).then((function(){return A.hasClip()&&e.restore(),k(t,e,r,n,i,c)}));switch(t.type()){case"rect":v=s.math.normalizeAngle(360-s.math.angleToGlobal(t)),("none"!==t.fill()||"none"!==t.stroke()&&0!==t.strokeWidth())&&h.width&&h.height&&(v&&e.save().rotate(-v,{origin:[a.x,a.y]}),t.rounded()?(F=new u.Length(t.rounded()).pt(),i&&l&&1!==l&&(F/=l),e.roundedRect(o.x,o.y,h.width,h.height,F)):e.rect(o.x,o.y,h.width,h.height),x(t,o,h,e,l,i),v&&e.restore(),A.hasClip()&&e.restore());break;case"ellipse":v=s.math.normalizeAngle(360-s.math.angleToGlobal(t)),("none"!==t.fill()||"none"!==t.stroke()&&0!==t.strokeWidth())&&(v&&e.save().rotate(-v,{origin:[a.x,a.y]}),e.ellipse(a.x,a.y,h.width/2,h.height/2),x(t,o,h,e,l,i),v&&e.restore(),A.hasClip()&&e.restore());break;case"path":("none"!==t.fill()||"none"!==t.stroke()&&0!==t.strokeWidth())&&(_=A._find(".BeginArrow\\.cls, .EndArrow\\.cls"),M=A.prim()._attr("d"),b=s.fn.path.str2List(M),b=s.fn.path.globalize(b,A,r),n&&(b=s.fn.path.offset(b,-n.x,-n.y)),b.forEach((function(t){Object.keys(t).forEach((function(e){"type"!==e&&(i&&l&&1!==l&&(t[e]=t[e]/l),t[e]=new u.Length(t[e]).pt())}))})),(2!==b.length||"L"!==b[1].type||"none"!==t.stroke()&&0!==t.strokeWidth())&&(M=s.fn.path.list2Str(b),e.path(M),x(t,o,h,e,l,i)),_.length>0&&_._each((function(t){!function(t,e,i,o){var a,c,l,f,d,h,v,p,g,m;a=s.doc.getMaster(t._attr("href")),l={x:parseFloat(t._attr("x")),y:parseFloat(t._attr("y"))},c=t._attr("transform"),f=(f=c.match(/scale\((.*?)\)/))?parseFloat(f[1]):1,a&&a._children()._each((function(a){switch(s.wrap(a).type()){case"ellipse":case"rect":g=s.fn.prim2List(s.wrap(a));break;case"path":p=a._attr("d"),g=s.fn.path.str2List(p)}g=s.fn.path.offset(g,l.x,l.y),g=s.fn.path.globalize(g,s.wrap(t),r),n&&(g=s.fn.path.offset(g,-n.x,-n.y)),g.forEach((function(t){Object.keys(t).forEach((function(e){"type"!==e&&(o&&i&&1!==i&&(t[e]=t[e]/i),t[e]=new u.Length(t[e]).pt())}))})),d=a._attr("fill")?a._attr("fill"):t._attr("fill"),h=(a._attr("stroke")?a._attr("stroke"):t._attr("stroke"))||"#000000",v=new u.Length(t._attr("stroke-width")*f).pt(),o&&i&&1!==i&&(v/=i),m=s.fn.path.list2Str(g),e.path(m),e.save(),e.lineWidth(v),"none"!==d&&"none"!==h?e.fillAndStroke(d,h):("none"!==d&&e.fill(d),"none"!==h&&e.stroke(h)),e.restore()}))}(t,e,l,i)})),A.prim()._attr("marker-mid")&&function(t,e,i,o){var a,c,l,f,d,h=/url\((.*?)\)/g,v=s.doc._findID(h.exec(t.prim()._attr("marker-mid"))[1]),p=v._findTag("use"),g=s.doc.getMaster(p._attr("xlink:href")),m=g.prim(),y=parseFloat(v._attr("refX")),x=parseFloat(v._attr("refY")),k=t.prim(),w=s.fn.path.str2List(k._attr("d")),b=s.fn.path.globalize(w,t,r),M=m._attr("fill")||p._attr("fill")||"none",_=p._attr("stroke")||"#000000";if(g){switch(f=s.wrap(p).scale(),d=new u.Length(p._attr("stroke-width")*f.x).pt(),m.type()){case"ellipse":a=s.fn.prim2List(m);break;case"path":a=s.fn.path.str2List(m._attr("d"))}a=s.math.matrix.list(a,{a:f.x,b:0,c:0,d:f.y,e:0,f:0}),a=s.fn.path.offset(a,-y,-x),w.forEach((function(f,h){"M"!==f.type&&h!==w.length-1&&(c=s.fn.path.offset(a,f.x,f.y),c=s.fn.path.globalize(c,t,r),c=s.fn.path.rotate(c,b[h].x,b[h].y,s.math.getVectorAngle(w[h-1],f,w[h+1])/2),n&&(c=s.fn.path.offset(c,-n.x,-n.y)),c.forEach((function(t){Object.keys(t).forEach((function(e){"type"!==e&&(o&&i&&1!==i&&(t[e]=t[e]/i),t[e]=new u.Length(t[e]).pt())}))})),l=s.fn.path.list2Str(c),e.save(),e.lineWidth(d),e.path(l),"none"!==M&&"none"!==_?e.fillAndStroke(M,_):"none"!==_&&e.stroke(_),e.restore())}))}}(A,e,l,i),A.hasClip()&&e.restore());break;case"image":v=s.math.normalizeAngle(360-s.math.angleToGlobal(t)),T.push(function(t,e,r,i,o,a,c){var u=s.wrap(t),f=s.wrap(u._children("image"))._attr("xlink:href");return 0===i.width||0===i.height?Promise.resolve():s.fn.image.getBase64(f).then((function(s){var f;if(s){(f=u.hasClip())&&(o=w(e,t,r,i,a,u.box(),l,n),r=o.move,i=o.size,a=o.center);try{c&&e.save().rotate(-c,{origin:[a.x,a.y]}),e.image(s.base64,r.x,r.y,{width:i.width,height:i.height}).stroke()}catch(t){console.error(t)}"none"!==t.stroke()&&(e.rect(r.x,r.y,i.width,i.height),x(t,r,i,e,l)),c&&e.restore(),f&&e.restore()}}))}(t,e,o,h,y,a,v))}S&&f(t,e,S,o,h),T.push(k(t,e,r,n,i,c))}else T.push(function(t,e,n,r,o){var a,c,l,f,d={full_page:!1,shapes:[e]};s.fn.getPageArea(d,n),d.ratio=3.125,d.ratio={width:d.ratio,height:d.ratio},d.compress=!1,d.subset=!1,d.ext="png",d.name="image",d.retB64=!0,d.silent=!0,d=m.export.adjustDrawingSize(d),a=d.offset.x,c=d.offset.y,l=d.width,f=d.height,i&&r&&1!==r?(a=d.offset.x/r,c=d.offset.y/r,l=d.width/r,f=d.height/r):o&&(a=d.offset.x-o.x,c=d.offset.y-o.y);return m.export.generate(d).then((function(e){try{t.image(e,new u.Length(a).pt(),new u.Length(c).pt(),{width:new u.Length(l).pt(),height:new u.Length(f).pt()})}catch(t){console.error(t)}}))}(e,t,r,l,n));return Promise.all(T)})).then((function(){return e}));function f(t,e,n,r,i){var o,a=i.width,s=i.height,c=n[0].url,u=n[0].sub_url;i.height<1&&(s=5),i.width<1&&(a=5),c?e.link(r.x,r.y,a,s,c):(u.indexOf("/")>0&&(o=u.split("/")[1],e.addNamedDestination(t.id(),"XYZ",r.x-30,r.y-30,0),u=o),e.goTo(r.x,r.y,a,s,u))}function y(t,e,n,r){var i,o,a,c=null;return 0!==(i=s.doc._findID(/url\((.*?)\)/g.exec(e)[1])).length&&("lineargradient"!==(a=(i=s.wrap(i)).type())&&"radialgradient"!==a||("lineargradient"===a?(o={x1:n.x+parseFloat(i._attr("x1"))*r.width/100,y1:n.y+parseFloat(i._attr("y1"))*r.height/100,x2:n.x+parseFloat(i._attr("x2"))*r.width/100,y2:n.y+parseFloat(i._attr("y2"))*r.height/100},c=t.linearGradient(o.x1,o.y1,o.x2,o.y2)):(o={x1:n.x+parseFloat(i._attr("fx")||i._attr("cx"))*r.width/100,y1:n.y+parseFloat(i._attr("fy")||i._attr("cy"))*r.height/100,x2:n.x+parseFloat(i._attr("cx"))*r.width/100,y2:n.y+parseFloat(i._attr("cy"))*r.height/100,inner_radius:0,outer_radius:parseFloat(i._attr("r"))*(r.width>r.height?r.width:r.height)/100},c=t.radialGradient(o.x1,o.y1,o.inner_radius,o.x2,o.y2,o.outer_radius)),i.stops().forEach((function(t){c.stop(parseFloat(t.offset)/100,t.color,parseFloat(t.opacity))})))),c}function x(t,e,n,i,o,a){var c,l,f=t.fill()||"#FFFFFF",d=t.stroke()||"#000000",h=t.strokeWidth(),v=Number(s.wrap(t).prim()._attr("opacity"))||0,p=isNaN(parseFloat(t.strokeOpacity()))?1:t.strokeOpacity(),g=isNaN(parseFloat(t.fillOpacity()))?1:t.fillOpacity(),m=t.strokeDashArray()||"none",x=t.strokeLineCap()||"round",k=t.strokeLineJoin()||"round";i.save(),null!=h&&""!==h||(h=1),-1!==f.indexOf("url(")?null===(f=y(i,f,e,n))&&(f="none"):-1===f.indexOf("rgb(")&&-1===f.indexOf("cmyk(")||(f=f.replace("rgb(","").replace("cmyk(","").replace(")","").split(", ")).forEach((function(t,e,n){n[e]=Number(t)})),-1!==d.indexOf("url(")?null===(d=y(i,d,e,n))&&(d="#ffffff"):-1===d.indexOf("rgb(")&&-1===d.indexOf("cmyk(")||(d=d.replace("rgb(","").replace("cmyk(","").replace(")","").split(", ")).forEach((function(t,e,n){n[e]=Number(t)})),l=h,u.activePage.scale()>1&&(h*=u.activePage.scale()),a&&o&&o>1&&(h/=o),m&&"none"!==m&&(c=(c=(c="string"==typeof m&&m.split(" ").length>1?m.split(" "):[m,m]).map((function(t){return t*=l,r.id()===u.activePage.id()&&1===l&&(t/=o),0===t&&(t=.01),new u.Length(t).pt()}))).filter((function(t){return 0!==t&&null!=t}))).length>0&&i.dash(c),h=new u.Length(h).pt(),i.lineWidth(h).fillOpacity(g).strokeOpacity(p).lineCap(x).lineJoin(k),v&&i.opacity(v),"none"!==f&&"none"!==d&&h?i.fillAndStroke(f,d,"even-odd"):("none"!==f&&i.fill(f,"even-odd"),"none"!==d&&h&&i.stroke(d)),i.restore()}function k(t,e,n,r,i,c){var l,f,h,p=n.scale(),m=s.wrap(t),x=m.getTextBlock(),k=m.getText(),w=[];if(!1===t.textHidden())return x&&!x._hasClass("Hide.cls")&&"none"!==t.txtFill()&&function(t,e,r,o,a){var c,l=s.math.normalizeAngle(360-s.math.angleToGlobal(a)),f=t.txtSizeU("pt"),d=t.txtCenterU(),h=t.txtRounded(),v=t.txtFill();(d=t.globalize(d.x,d.y,n)).x=new u.Length(d.x).pt(),d.y=new u.Length(d.y).pt(),r&&(d.x-=new u.Length(r.x).pt(),d.y-=new u.Length(r.y).pt());i&&o&&1!==o&&(f.width/=o,f.height/=o,d.x/=o,d.y/=o);c={x:d.x-f.width/2,y:d.y-f.height/2},e.save(),0!==l&&e.rotate(-l,{origin:[d.x,d.y]});h?(h=new u.Length(h).pt(),i&&o&&1!==o&&(h/=o),e.roundedRect(c.x,c.y,f.width,f.height,h)):e.rect(c.x,c.y,f.width,f.height);-1!==v.indexOf("url(")?null===(v=y(e,v,c,f))&&(v="none"):-1===v.indexOf("rgb(")&&-1===v.indexOf("cmyk(")||(v=v.replace("rgb(","").replace("cmyk(","").replace(")","").split(", ")).forEach((function(t,e,n){n[e]=Number(t)}));e.fill(v).restore()}(t,e,r,p,x),""===t.text()||k._hasClass("Hide.cls")?Promise.resolve():(l=k._attr("text-anchor"),f=s.math.normalizeAngle(360-s.math.angleToGlobal(x)),h=t.lineSpacing(),w=[],x._findTag("tspan")._each((function(t){w.push(function(t,c,l){var m=s.wrap(t);return k(m).then((function(t){var o,s,d,v,g=new u.Length(m.style("font-size")),k=g.pt(),b=g.px(),M={},_=m.style("font-fill"),F=0,E=m.text();if(i&&p&&1!==p&&(k/=p),""!==E&&"none"!==_){switch(s=function(t,e,n){var r=t.style("font-family")||"Roboto",i=t.style("font-weight")||"normal",o=t.style("font-style");return a.font=i+" "+o+" "+e+"px "+r,a.measureText(n).width}(m,b,E),(o=m.move()).y-=.95*b,c){case"end":o.x-=s;break;case null:o.x-=.5*s}o=x.toGlobal(o.x,o.y,n),r&&(o.x-=r.x,o.y-=r.y),i&&p&&1!==p&&(o.x/=p,o.y/=p,s/=p,b/=p),o={x:new u.Length(o.x).pt(),y:new u.Length(o.y).pt()},M.width=new u.Length(s).pt(),M.height=k,-1!==_.indexOf("url(")&&(_=y(e,_,o,M)),d=m.style("font-opacity"),w([t.sign],l)&&e.font(t.font),e.save().fillColor(_).fontSize(k).opacity(d),0!==f&&e.rotate(-f,{origin:[o.x+F,o.y]}),"underline"===m.style("text-decoration")&&(v=new u.Length(b/20).pt(),b=new u.Length(.9*b).pt(),e.lineWidth(v).moveTo(o.x,o.y+h*b-v).lineTo(o.x+e.widthOfString(E),o.y+h*b-v).stroke(_)),e.text(E,o.x,o.y,{lineBreak:!1}),e.restore()}}));function k(t){var e=t.style("font-family")||"Roboto",n=t.style("font-weight")||"normal",r=t.style("font-style"),i=e+n+r,a=e,c=d.urls[e];return e=e.split(",")[0],o[i]?Promise.resolve({font:o[i],sign:i}):(v.FONTS.DEFAULT.indexOf(e)>-1?(a+="normal"===n?":400":":700",a+="italic"===r?"i":""):c&&(a+=":"+c.styles[0]),u(a,e).then((function(t){return{font:t,sign:i}})));function u(t,e){return s.fn.getWoffURL([v.FONTS.GOOGLE_URL+"/css?family="+t+"&subset=all"],!0).then((function(t){var r=[];return""!==t[0]?(s.fn.parseWoffURL(t[0],r),r[0]?n(r[0].src):u("Roboto")):e&&d.faces[e]?n(d.faces[e]):u(e?e+":400":"Roboto")}));function n(t){return g.ajax.arrayBuffer(t).then((function(t){return o[i]=t,t}))}}}function w(t,e){var n=JSON.stringify(t),r=!1;return n!==e.current&&(e.current=n,r=!0),r}}(t,l,c))})),Promise.all(w))}function w(t,e,n,o,a,c,l,f){var d,h,v=s.wrap(e),p=v.getClipPath().allPrim()[0],g=s.fn.translate(p);switch(p.type()){case"rect":t.save().rect(n.x,n.y,o.width,o.height).clip();break;case"ellipse":t.save().ellipse(a.x,a.y,o.width/2,o.height/2).clip();break;case"path":h=p._attr("d"),d=s.fn.path.str2List(h),d=s.fn.path.globalize(d,v,r),f&&(d=s.fn.path.offset(d,-f.x,-f.y)),d.forEach((function(t){Object.keys(t).forEach((function(e){"type"!==e&&(i&&l&&1!==l&&(t[e]=t[e]/l),t[e]=new u.Length(t[e]).pt())}))})),h=s.fn.path.list2Str(d),t.save().path(h).clip()}return i&&l&&1!==l&&(c.width/=l,c.height/=l,g.x/=l,g.y/=l),{move:n={x:n.x-new u.Length(g.x).pt(),y:n.y-new u.Length(g.y).pt()},size:o={width:new u.Length(c.width).pt(),height:new u.Length(c.height).pt()},center:a={x:n.x+o.width/2,y:n.y+o.height/2}}}}},isVectaDoc:function(t){return t.indexOf('id="draw.id"')>-1&&t.indexOf("v:ver=")>-1&&t.indexOf('xmlns:v="http://vecta.io"')>-1},readFile:function(t,e){return new Promise((function(n,r){var i=new FileReader;switch(i.onload=function(e){n({file:t,result:e.target.result,ext:void 0===t.name||null===t.name?"":t.name.split(".").pop().toLowerCase()})},i.onerror=function(t){r(t)},e){case"arrayBuffer":i.readAsArrayBuffer(t);break;case"binaryString":i.readAsBinaryString(t);break;case"dataURL":i.readAsDataURL(t);break;case"text":i.readAsText(t);break;default:r("Invalid type")}}))},convert2Obj:function(t,e){var n=[],r=[],i={},o="";if(["tsv","csv","json"].indexOf(e)<0)return null;switch(e){case"tsv":o="\t";break;case"csv":o=","}return i.ext=e,"json"===e?(i.data=JSON.parse(t),i.header=Object.keys(i.data[0])):(t.split("\n").forEach((function(t,e){var i={};t.indexOf('"')>-1&&(t=t.replace(new RegExp("(^|"+o+')"(.*?[^"])"($|'+o+")","gm"),(function(t,e,n,r){var i=n;return e+(i=(i=i.replace(/""/g,'"')).replace(new RegExp(o,"g"),"||"))+r}))),t.split(o).forEach((function(t,r){(t=t.trim()).indexOf("||")>-1&&(t=t.replace(/\|\|/g,o)),0===e?""!==t&&n.push(t):i[n[r]]=t})),e&&r.push(i)})),i.header=n,i.data=r),i},setToolTipPosition:function(t,e){var n=t._offset(),r=t.el[0].getBoundingClientRect(),i={},o={};i.width=e.outerWidth(),i.height=e.outerHeight(),n.top-=s.$win.scrollTop(),n.left-=s.$win.scrollLeft(),o.x=n.left,o.x+i.width>s.$win.width()&&(o.x=n.left+r.width-i.width),o.x<0&&(o.x=n.left),o.y=n.top+r.height+5,o.y+i.height>s.$win.height()&&(o.y=n.top-i.height-5),e.css({left:o.x,top:o.y})},getEulaVersion:function(){return $.ajax({url:Agreement.getURL("/json/terms.json"),dataType:"json"}).then((function(t){if(t&&t.eula)return Object.keys(t.eula.versions).sort((function(t,e){return parseInt(e)-parseInt(t)}))[0]})).catch((function(t){console.error(t)}))}};function e(t,e){var n=t.sizeU();n.width/e.width>=n.height/e.height?(n.result_w=.9*e.width,n.result_h=n.result_w/n.width*n.height):(n.result_h=.9*e.height,n.result_w=n.result_h/n.height*n.width),t.size(n.result_w,n.result_h),t.move(e.vb.width/2-n.result_w/2+e.offset.x,e.vb.height/1.5-n.result_h/2+e.offset.y)}}();var m=s.utils;function y(t){this instanceof y&&(this.limit=t||50,this.store={},this.index={},this.count=0)}function x(t){this instanceof x&&(this.limit=t||10,this.store={},this.index=[])}Math.hypot=Math.hypot||function(t,e){for(var n=0,r=0,i=0;i<arguments.length;i+=1){var o=Math.abs(Number(arguments[i]));o>n&&(r*=n/o*(n/o),n=o),r+=0===o&&0===n?0:o/n*(o/n)}return n===1/0?1/0:n*Math.sqrt(r)},y.prototype={set:function(t,e){var n,r=this;return t&&void 0===r.store[t]&&(void 0===e?r.store[t]="undefined":"object"===_typeof(e)?r.store[t]=h.extend(h.isArray(e)?[]:{},e):r.store[t]=e,0===r.count?(r.first=t,r.last=t,r.index[t]={prev:null,next:null}):(r.index[r.first].prev=t,r.index[t]={prev:null,next:r.first},r.first=t),r.count++,r.count>r.limit&&(delete r.store[r.last],n=r.last,r.last=r.index[n].prev,delete r.index[n],r.count--)),r},get:function(t){var e,n=this,r=n.store[t];return void 0!==r&&(n.first===t||(n.last===t?(n.index[n.first].prev=t,n.last=n.index[n.last].prev,n.index[t].next=n.first,n.first=t):(e=n.index[t],n.index[e.prev].next=e.next,n.index[e.next].prev=e.prev,n.index[n.first].prev=t,n.index[t].next=n.first,n.first=t))),"undefined"===r?r=void 0:"object"===_typeof(r)&&(r=h.extend(h.isArray(r)?[]:{},r)),r}},x.prototype={set:function(t,e){var n,r=this;void 0===r.store[t]&&(r.store[t]=e,r.index.push(t),r.index.length>r.limit&&(n=r.index.shift(),delete r.store[n]))},get:function(t){var e=this,n=e.store[t];return void 0!==n&&e.index[e.index.length-1]!==t&&(e.index.splice(e.index.indexOf(t),1),e.index.push(t)),n}};var k,w,b,M=new y(10),_=new x(50),F={},E={};s.CONST=s.CONST||{},s.CONST.ELEMENTS={rect:"Rect",ellipse:"Ellipse",circle:"Circle",path:"Path",text:"Text",tspan:"Tspan",textpath:"TextPath",line:"Line",use:"Use",clippath:"Clip",pattern:"Pattern",symbol:"Symbol",filter:"Filter",image:"Image",defs:"Defs",title:"Title",desc:"Desc",g:"Group",lineargradient:"Linear",radialgradient:"Radial",fegaussianblur:"Blur",fespecularlighting:"Specular",fediffuselighting:"Diffuse",femorphology:"Morph",femerge:"Merge",feoffset:"Offset",fecomposite:"Composite",feflood:"Flood",feblend:"Blend",svg:"SVG",a:"Link",animate:"Anim",animatetransform:"AnimTrans"},s.CONST.PROP={CONTROL:"control",CONNECT:"connect",GUIDE:"guide",SHAPE:"shape",TXT_SINGLE:"txt_single",TXT_PATH:"text_path",PATH:"path",PATH_DUAL:"path_dual",SHAPE_MULTI:"shape_multiple"},s.CONST.DXF_COLORS=["#000000","#00FFFF","#0000FF","#FF00FF","#FF0000","#FFFF00","#00FF00","#000000","#BEBEBE","#7F7F7F","#00FFFF","#005555","#42FFFF","#428181","#7EFFFF","#7EA9A9","#97FFFF","#97BABA","#B0FFFF","#B0CACA","#00C0FF","#004055","#42D1FF","#427281","#7EE0FF","#7E9FA9","#97E6FF","#97B1BA","#B0ECFF","#B0C4CA","#0080FF","#002B55","#42A1FF","#426281","#7EBFFF","#7E94A9","#97CBFF","#97A9BA","#B0D8FF","#B0BDCA","#0040FF","#001555","#4272FF","#425281","#7E9FFF","#7E89A9","#97B1FF","#97A0BA","#B0C4FF","#B0B6CA","#0000FF","#000055","#4242FF","#424281","#7E7EFF","#7E7EA9","#9797FF","#9797BA","#B0B0FF","#B0B0CA","#4000FF","#150055","#7242FF","#524281","#9F7EFF","#897EA9","#B197FF","#A097BA","#C4B0FF","#B6B0CA","#8000FF","#2B0055","#A142FF","#624281","#BF7EFF","#947EA9","#CB97FF","#A997BA","#D8B0FF","#BDB0CA","#C000FF","#400055","#D142FF","#724281","#E07EFF","#9F7EA9","#E697FF","#B197BA","#ECB0FF","#C4B0CA","#FF00FF","#550055","#FF42FF","#814281","#FF7EFF","#A97EA9","#FF97FF","#BA97BA","#FFB0FF","#CAB0CA","#FF00C0","#550040","#FF42D1","#814272","#FF7EE0","#A97E9F","#FF97E6","#BA97B1","#FFB0EC","#CAB0C4","#FF0080","#55002B","#FF42A1","#814262","#FF7EBF","#A97E94","#FF97CB","#BA97A9","#FFB0D8","#CAB0BD","#FF0040","#550015","#FF4272","#814252","#FF7E9F","#A97E89","#FF97B1","#BA97A0","#FFB0C4","#CAB0B6","#FF0000","#550000","#FF4242","#814242","#FF7E7E","#A97E7E","#FF9797","#BA9797","#FFB0B0","#CAB0B0","#FF4000","#551500","#FF7242","#815242","#FF9F7E","#A9897E","#FFB197","#BAA097","#FFC4B0","#CAB6B0","#FF8000","#552B00","#FFA142","#816242","#FFBF7E","#A9947E","#FFCB97","#BAA997","#FFD8B0","#CABDB0","#FFC000","#554000","#FFD142","#817242","#FFE07E","#A99F7E","#FFE697","#BAB197","#FFECB0","#CAC4B0","#FFFF00","#555500","#FFFF42","#818142","#FFFF7E","#A9A97E","#FFFF97","#BABA97","#FFFFB0","#CACAB0","#C0FF00","#405500","#D1FF42","#728142","#E0FF7E","#9FA97E","#E6FF97","#B1BA97","#ECFFB0","#C4CAB0","#80FF00","#2B5500","#A1FF42","#628142","#BFFF7E","#94A97E","#CBFF97","#A9BA97","#D8FFB0","#BDCAB0","#40FF00","#155500","#72FF42","#528142","#9FFF7E","#89A97E","#B1FF97","#A0BA97","#C4FFB0","#B6CAB0","#00FF00","#005500","#42FF42","#428142","#7EFF7E","#7EA97E","#97FF97","#97BA97","#B0FFB0","#B0CAB0","#00FF40","#005515","#42FF72","#428152","#7EFF9F","#7EA989","#97FFB1","#97BAA0","#B0FFC4","#B0CAB6","#00FF80","#00552B","#42FFA1","#428162","#7EFFBF","#7EA994","#97FFCB","#97BAA9","#B0FFD8","#B0CABD","#00FFC0","#005540","#42FFD1","#428172","#7EFFE0","#7EA99F","#97FFE6","#97BAB1","#B0FFEC","#B0CAC4","#CCCCCC","#AFAFAF","#969696","#7D7D7D","#414141","#000000"],s.CONST.CDATA="<style><![CDATA[#draw\\.id{stroke:#000;stroke-linecap:round;stroke-linejoin:round;fill:#fff;fill-rule:evenodd;font-family:Roboto;font-size:14px;text-anchor:middle}#draw\\.id text{paint-order:stroke;white-space:pre}#draw\\.id .Text\\.cls{stroke:none}]]></style>",s.CONST.RADIO_SVG='<svg width="20" height="20"><circle class="RAThumb.cls" cx="9" cy="9" r="8"></circle><circle class="RAActive.cls" cx="9" cy="9" r="4"></circle></svg>',s.CONST.TEXT_STYLES=["text-anchor","text-align","font-family","font-size","font-fill","font-opacity","font-weight","font-style","text-decoration","text-stroke","text-stroke-opacity","text-stroke-width"],s.CONST.TYPE2UNIT={1:"px",5:"px",6:"cm",7:"mm",8:"in",9:"pt",11:"m",12:"po",13:"tum"},s.CONST.UNIT2TYPE={px:5,cm:6,mm:7,in:8,pt:9,m:11,po:12,tum:13},s.CONST.UNITS=["px","pt","in","mm","cm","m","tum","po"],s.CONST.PAGE_UNITS=["m","in","cm","mm","px"],s.CONST.TO_SVG_UNIT={tum:"in",po:"in",m:"cm"},s.CONST.ARROW_IDS={thick:"thick.end",thin:"thin.end",thickline:"thick_l.end",thinline:"thin_l.end",square:"square.end",dot:"dot.end",sharp:"sharp.end",rev_sharp:"rev_sharp.end",one:"one.end",one_one:"one_one.end",many:"many.end",many_one:"many_one.end",zero_one:"zero_one.end",zero_many:"zero_many.end",iec_left:"iec_left.end",iec_right:"iec_right.end"},s.CONST.MARKER_IDS={dual_slash:{id:"dual_slash.mkr",spacing:80,pattern:'<path d="M 2 22 L 12 2 M 12 22 L 22 2"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"24",markerHeight:"24",refX:"12",refY:"12",orient:"auto"}},black_dot:{id:"black_dot.mkr",spacing:50,pattern:'<ellipse cx="6" cy="6" rx="4.5" ry="4.5" stroke="none"></ellipse>',marker_attrs:{markerWidth:"12",markerHeight:"12",refX:"6",refY:"6",orient:"0"}},white_dot:{id:"white_dot.mkr",spacing:50,pattern:'<ellipse cx="6" cy="6" rx="4" ry="4" fill="#fff"></ellipse>',marker_attrs:{markerWidth:"12",markerHeight:"12",refX:"6",refY:"6",orient:"0"}},straight_l:{id:"straight_l.mkr",spacing:80,pattern:'<path d="M 2 2 L 2 21 L 13 21" fill="none"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"15",markerHeight:"25",refX:"2",refY:"11",orient:"auto"}},slanted_l:{id:"slanted_l.mkr",spacing:80,pattern:'<path d="M 14 22 L 2 22 L 14 2" fill="none"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"16",markerHeight:"24",refX:"8",refY:"12",orient:"auto"}},cross:{id:"cross.mkr",spacing:80,pattern:'<path d="M 2 22 L 14 2 M 14 22 L 2 2" />',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"18",markerHeight:"24",refX:"8",refY:"12",orient:"auto"}},s_curve:{id:"s_curve.mkr",spacing:80,pattern:'<path d="M 2 10 C 1.5 0.75 12 0.75 12 10 C 12 19.25 22 19.25 22 10" fill="none"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"26",markerHeight:"22",refX:"12",refY:"10",orient:"auto"}},c_line:{id:"c_line.mkr",spacing:80,pattern:'<path d="M 22 2 L 14 2 L 2 22 L 10 22" fill="none"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"26",markerHeight:"26",refX:"12",refY:"12",orient:"auto"}},caret:{id:"caret.mkr",spacing:80,pattern:'<path d="M 2 22 L 12 2 L 22 22" fill="none"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"26",markerHeight:"26",refX:"12",refY:"12",orient:"auto"}},tri_slash:{id:"tri_slash.mkr",spacing:80,pattern:'<path d="M 2 22 L 12 2 M 12 22 L 22 2 M 22 22 L 32 2"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"36",markerHeight:"26",refX:"17",refY:"12",orient:"auto"}},internal:{id:"internal.mkr",spacing:80,pattern:'<path d="M 9 8 L 2 26 M 9 2 L 22 2 L 22 8 L 9 8 Z" fill="none"/>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"26",markerHeight:"30",refX:"12",refY:"14",orient:"auto"}},arrow:{id:"arrow.mkr",spacing:80,pattern:'<g><path d="M 2 26 L 12 6 M 12 26 L 22 6"/><path d="M 14 2 L 6.5 7.5 L 14 11.25 Z M 24 2 L 16.5 7.5 L 24 11.25 Z" stroke-linecap="butt" stroke="none"/></g>',marker_attrs:{markerUnits:"userSpaceOnUse",markerWidth:"26",markerHeight:"30",refX:"12",refY:"14",orient:"auto"}}},s.fn={getID:function(){return C.getID()},getNode:function(t){return C.getNode(t)},xyFromTo:function(t,e,n,r,i){var o,a,c=C.getNode(n),u=C.getNode(r),l={x:t,y:e};return!1===(a=c===F.src_node&&u===F.tgt_node)&&(F.src_node=c,F.tgt_node=u,F._src=h(F.src_node),F._tgt=h(F.tgt_node),F._src_svg=F._src._closest("svg"),F._tgt_svg=F._tgt._closest("svg")),F._src_svg._is(F._tgt_svg)?(!1===a&&(F.$src_pars=F._src._$().parentsUntil("svg","g[id]"),"svg"!==F._src.el[0].tagName&&(F.$src_pars=F.$src_pars.add(F._src.el[0]))),F.$src_pars.get().reverse().forEach((function(t){l=T.transformPoint(l.x,l.y,s.wrap(t))})),!1===a&&(F.$tgt_pars=F._tgt._$().parentsUntil("svg","g[id]"),"svg"!==F._tgt.el[0].tagName&&(F.$tgt_pars=F.$tgt_pars.add(F._tgt.el[0]))),F.$tgt_pars.each((function(t,e){l=T.transformPoint(l.x,l.y,s.wrap(e),!0)}))):(o=f(0,0,i=i||r,i),(l=f(t,e,n,r)).x-=o.x,l.y-=o.y),l;function f(t,e,n,r){var i=s.canvas[0].createSVGPoint();return i.x=t||i.x,i.y=e||i.y,{x:(i=(i=i.matrixTransform(O.getScreenCTM.call(n))).matrixTransform(O.getScreenCTM.call(r).inverse())).x,y:i.y}}},clonePath:function(t,e){var n=t.$.clone();return e=e||t.list(),n.attr("d",S.list2Str(e).trim()),n[0]},formatValue:function(t,e){var n,r,i;return void 0===e||null===(n=e.match(/(\d+\.?\d*)?(.*)/))?i=t:void 0===n[1]?i=t+n[2]:(r=n[1].split("."),i=t.toFixed(r[1]?r[1].length:0)+n[2]),i},getTranslate:function(t){var e,n,r=t.match(/translate\((-?\d+\.?\d*e?-?\d*)(|px|mm) ?[, ] ?(-?\d+\.?\d*e?-?\d*)?(|px|mm)\)/);return null===r||r.length<=1?(n={x:0,y:0},null!==(r=t.match(/matrix\((-?\d+\.?\d*e?-?\d*)[, ]?(-?\d+\.?\d*e?-?\d*)[, ]?(-?\d+\.?\d*e?-?\d*)[, ]?(-?\d+\.?\d*e?-?\d*)[, ]?(-?\d+\.?\d*e?-?\d*)[, ]?(-?\d+\.?\d*e?-?\d*)?\)/))&&7===r.length?n={x:parseFloat(r[5]),y:parseFloat(r[6])}:(null!==(r=t.match(/translateX\((-?\d+\.?\d*e?-?\d*)(|px|mm)\)/))&&r.length>1&&(n.x=parseFloat(r[1])),null!==(r=t.match(/translateY\((-?\d+\.?\d*e?-?\d*)(|px|mm)\)/))&&r.length>1&&(n.y=parseFloat(r[1])))):(n={x:parseFloat(r[1])},r[3]?n.y=parseFloat(r[3]):n.y=n.x,(e=r[2])&&"px"!==e&&(n.x=new u.Length(n.x+e).px(),n.y=new u.Length(n.y+e).px())),n},getVPortBox:function(){var t,e=s._vport._offset(),n={left:e.left+15,top:e.top+15,right:e.left+s._vport._css("width")-15,bottom:e.top+s._vport._css("height")-15};return t=A.getGrid(n.left,n.top,s.page.getScreenCTM().inverse()),n.left=t.x,n.top=t.y,t=A.getGrid(n.right,n.bottom,s.page.getScreenCTM().inverse()),n.right=t.x,n.bottom=t.y,n},getGrid:function(t,e,n){var r=n.a*t+n.e,i=n.d*e+n.f,o=s.zoom.subvir;return{x:Math.round(r/o)*o,y:Math.round(i/o)*o}},focusHidden:function(t){if(void 0===k&&(k=h("#hidden_input\\.id")),k.length>0){if(t)return void e();setTimeout((function(){var t;0===s.$editor[0].offsetHeight&&(0===(t=h("input:focus")).length||"help_search.id"===t.el[0].id&&!h("#help\\.menu")._hasClass("Menu_Active.cls")||t._closest(".Stack\\.cls, .StickyTop\\.cls, .StickyBottom\\.cls").length>0)&&e()}))}function e(){g.mobile()?k._addClass("Focused.cls"):(k._val(" "),k.el[0].focus(),k.el[0].select())}},rgb:function(t,e){var n,r,i,o,a;if(void 0!==t){if(null!==(n=t.match(/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i)))return r=parseInt(n[1]+n[1],16),i=parseInt(n[2]+n[2],16),o=parseInt(n[3]+n[3],16),void 0!==e&&(e.valid=!0,e.format="hex3",e.r=r,e.g=i,e.b=o),["rgb(",r,", ",i,", ",o,")"].join("");if(null!==(n=t.match(/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i)))return r=parseInt(n[1],16),i=parseInt(n[2],16),o=parseInt(n[3],16),void 0!==e&&(e.valid=!0,e.format="hex6",e.r=r,e.g=i,e.b=o),["rgb(",r,", ",i,", ",o,")"].join("");if(null!==(n=t.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)))return r=parseInt(n[1]),i=parseInt(n[2]),o=parseInt(n[3]),void 0!==e&&(e.valid=!0,e.format="rgb",e.r=r,e.g=i,e.b=o),["rgb(",r,", ",i,", ",o,")"].join("");if(null!==(n=t.match(/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+(?:\.\d+)?)\s*\)$/i)))return r=parseInt(n[1]),i=parseInt(n[2]),o=parseInt(n[3]),a=parseFloat(n[4]),void 0!==e&&(e.valid=!0,e.format="rgba",e.r=r,e.g=i,e.b=o,e.a=a),["rgba(",r,", ",i,", ",o,")"].join("");void 0!==e&&(e.valid=!1)}return t},hex6:function(t,e){var n;return null!==(n=t.match(/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i))?(void 0!==e&&(e.valid=!0,e.format="hex3"),["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("")):null!==(n=t.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))?(void 0!==e&&(e.valid=!0,e.format="rgb"),["#",A.dec2Hex(n[1]),A.dec2Hex(n[2]),A.dec2Hex(n[3])].join("")):null!==(n=t.match(/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+(?:\.\d+)?)\s*\)$/i))?(void 0!==e&&(e.valid=!0,e.format="rgba",e.r=n[1],e.g=n[2],e.b=n[3],e.a=n[4]),["#",A.dec2Hex(n[1]),A.dec2Hex(n[2]),A.dec2Hex(n[3])].join("")):null!==(n=t.match(/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i))?(void 0!==e&&(e.valid=!0,e.format="hex6"),t):void 0!==s.CONST.VALID_COLORS[t]?(void 0!==e&&(e.valid=!0,e.format="defined"),s.CONST.VALID_COLORS[t]):null!==(n=t.match(/url\(#.*\)/))?(void 0!==e&&(e.valid=!0,e.format="url"),t):"none"===t?(void 0!==e&&(e.valid=!0,e.format="none"),t):(void 0!==e&&(e.valid=!1),t)},hex2Hsl:function(t){var e,n,r,i,o,a,s,c,u;if(4===t.length&&(t=A.hex3ToHex6(t)),e=parseInt(t.substr(1,2),16),n=parseInt(t.substr(3,2),16),r=parseInt(t.substr(5,2),16),e/=255,n/=255,r/=255,i=Math.min(e,n,r),c=((o=Math.max(e,n,r))+i)/2,o===i)a=s=0;else{switch(u=o-i,s=c>.5?u/(2-o-i):u/(o+i),o){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;case r:a=(e-n)/u+4}a/=6}return{h:360*a,s:s,l:c}},hex3ToHex6:function(t){var e;return e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,"#"+t.replace(e,(function(t,e,n,r){return e+e+n+n+r+r}))},hex2Cmyk:function(t){var e,n,r,i,o=0,a=0,s=0,c=0;if(4===t.length&&(t=A.hex3ToHex6(t)),6===(t="#"===t.charAt(0)?t.substring(1,7):t).length){if(!0===/[0-9a-f]{6}/i.test(t))return e=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16),0===e&&0===n&&0===r?{c:0,m:0,y:0,k:100}:(a=1-n/255,s=1-r/255,o=((o=1-e/255)-(i=Math.min(o,Math.min(a,s))))/(1-i),a=(a-i)/(1-i),s=(s-i)/(1-i),c=i,{c:o=Math.round(100*o),m:a=Math.round(100*a),y:s=Math.round(100*s),k:c=Math.round(100*c)});console.error("Invalid digits in the input hex value!")}else console.error("Invalid length of the input hex value!")},hex2Pantone:function(t){},hex2Rgb:function(t){4===t.length&&(t=A.hex3ToHex6(t));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},cmyk2Hex:function(t){var e;return e=A.cmyk2Rgb(t),A.rgb2Hex(e)},cmyk2Rgb:function(t){var e=Number(t.c),n=Number(t.m),r=Number(t.y),i=Number(t.k);return{r:Math.round(255*(1-e/100)*(1-i/100)),g:Math.round(255*(1-n/100)*(1-i/100)),b:Math.round(255*(1-r/100)*(1-i/100))}},rgb2Hex:function(t){return"#"+e(t.r)+e(t.g)+e(t.b);function e(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},hsl2Hex:function(t){var e,n,r,i,o,a=t.h/360;return 0===t.s?e=n=r=t.l:(i=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s,e=s(o=2*t.l-i,i,a+1/3),n=s(o,i,a),r=s(o,i,a-1/3)),"#"+A.dec2Hex(Math.round(255*e))+A.dec2Hex(Math.round(255*n))+A.dec2Hex(Math.round(255*r));function s(t,e,n){return(n=n<0?n+1:n>1?n-1:n)<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}},dec2Hex:function(t){var e=Number(t).toString(16);return 1===e.length&&(e=["0",e].join("")),e},isURL:function(t){return"url"===t.substr(0,3)},url2ID:function(t){return t.replace(/url\(|\)/g,"").replace(/"/g,"")},refreshCoords:function(t){var e,n,r=s.wrap(t),i=r.box(),o=r.moveU(),a={},c={},u=A.controls.save(t);i.x===o.x&&i.y===o.y||(a.x=o.x-i.x,a.y=o.y-i.y,r.move(o.x-a.x,o.y-a.y),r.subs().forEach((function(t){n=t.moveU(),s.wrap(t).move(n.x+a.x,n.y+a.y)}))),(e=r.angleEX())&&(c.x=o.x+e.cx,c.y=o.y+e.cy,r.angle(e.angle),n=T.getCenXY(t),n=T.rotatePoint(n.x,n.y,c.x,c.y,e.angle),n=T.getXY(t,n.x,n.y),r.move(n.x,n.y)),A.controls.reset(t,u)},prim2Ghost:function(t,e){if(e)switch(t.type()){case"rect":e.attr({x:t.attr("x"),y:t.attr("y"),width:t.attr("width"),height:t.attr("height")});break;case"ellipse":e.attr({cx:t.attr("cx"),cy:t.attr("cy"),rx:t.attr("rx"),ry:t.attr("ry")});break;case"path":e.attr("d",t.attr("d"))}},resetIconID:function(){w=void 0},getIconID:function(){var t;return void 0===w&&(t=h('[data-group="draw"].Active\\.cls'),w=t._hasClass("Drop.cls")?t._find('[id$=".icon"]:not(.Hide\\.cls)').el[0].id:(t.el[0]||{}).id),w},setIconID:function(t){var e=h("#bar_top\\.id"),n=h("#expand\\.menu"),r=A.getIconID(),i=e._findID(t),o=i._attr("data-group");return o&&(e._find('[data-group="'+o+'"].Active\\.cls')._removeClass("Active.cls"),n._find('[data-group="'+o+'"].Selected\\.cls')._removeClass("Selected.cls")),i._addClass("Active.cls"),n._findID(t)._addClass("Selected.cls"),w=void 0,r},type2List:function(t,e,n,r,i,o){var a,s,c=[[0,1,1,0],[-1,0,0,1],[0,-1,-1,0],[1,0,0,-1]],u=.446,l=[{x:e,y:n},{x:e+r,y:n},{x:e+r,y:n+i},{x:e,y:n+i}],f=[],d=0;if("ellipse"===t)a=.5*r,s=.5*i;else a=o||0,s=o||0;for(;d<4;d++)0===d&&f.push({type:"M",x:l[0].x,y:l[0].y+s}),a>0&&f.push({type:"C",x1:l[d].x+c[d][0]*a*u,y1:l[d].y+c[d][1]*s*u,x2:l[d].x+c[d][2]*a*u,y2:l[d].y+c[d][3]*s*u,x:l[d].x+c[d][2]*a,y:l[d].y+c[d][3]*s}),d<3?"rect"!==t&&"image"!==t&&"svg"!==t||f.push({type:"L",x:l[d+1].x+c[d+1][0]*a,y:l[d+1].y+c[d+1][1]*s}):f.push({type:"Z"});return f},prim2List:function(t){var e=t.type(),n=t.moveU(),r=t.sizeU(),i=0;return"rect"===e&&(i=new u.Length(null===t.attr("rx")?t.attr("ry")||"0":t.attr("rx")).px()),A.type2List(e,n.x,n.y,r.width,r.height,i)},isAllLocked:function(t){return t.reduce((function(t,e){return t=t&&e.locked()}),!0)},checkCommenterAccess:function(t){return!s.CONST.IS_COMMENTER||t.layer().id==="comments_"+(s.user&&s.user.id?s.user.id:"anonymous")},refreshID:function(t,e,n){var r,i,o,a,c={},l=t.id?t.id():null,f=t.isShape();l&&(e||s.doc._findID("#"+l).length>0)&&(a=C.getID(),f?(i=new u.Shape(t),"g"===t.type()&&((o=t.getFilter())&&(o.id(a+".flt"),t._hasClass("Group.cls")?s.wrap(t._childClass("Prim.cls")).filterAttr(null).filterAttr(a):t.prim().filterAttr(null).filterAttr(a)),t.hasClip()&&(t.getClipPath().id(a+".clip"),t.clipAttr(a+".clip")),t.getTextPath()&&(t.getTextPath()._attr("xlink:href","#"+a+".path"),t.prim().id(a+".path")),function(t,e,n){var r=t._children("defs"),i=t._hasClass("Group.cls")?s.wrap(t._childClass("Prim.cls")):t.prim();t._hasClass("Group.cls")||t.ghost();r.length>0&&r._children("marker")._each((function(t){t._attr("id",t._attr("id").replace(e,n))}));function o(t,e,n){var r;null!==(r=i.attr("marker-"+t))&&(r=r.replace(e,n),i.attr("marker-"+t,r))}o("start",e,n),o("mid",e,n),o("end",e,n)}(t,l,a),t._children("svg")._each((function(e){var n=A.replaceImportedIDS(h.serialize(e));e._remove(),e=h.parseSVG(n),t._prepend(e),e._findTag("style")._each((function(t){!function(t,e,n,r){var i=e._text();A.readStyles(i).forEach((function(e){var o;e.selectorText.split(",").forEach((function(e){var a,s,c,u;"."!==(s=e.charAt(0))&&"#"!==s||(o=function(t,e,n){return-1===t.indexOf(n)?e+"_"+t:t.replace(n,e)}(e.substr(1),n,r),i=i.replace(e,s+o),a=h.escape(e),u=t._find(s+a),c="."===s?"class":"id",u._each((function(t){t._attr(c,t._attr(c).replace(a,o))})))}))})),e._text(i)}(e,t,a,l)}))}))),t.id(a),r=A.shapeName(i),A.shapeName(i,r,!0),t._children("."+h.escape(s.CONST.CONN_PT.CLASS))._children().el.forEach((function(t){var e=s.wrap(t),n=e.id();e.id(C.getID()),c[n]=new u.Connect(t)})),s.id_changed=s.id_changed||{},s.id_changed[a]={obj:i,old_id:l,old_name:r,page:n},(i.isConnector()||t.attr("v:connect"))&&(s.conn_changed=s.conn_changed||{},s.conn_changed[l]={shape:i,conns:c})):t.id(a)),f&&t.subs().forEach((function(t){A.refreshID(s.wrap(t),e,n)}))},shapeName:function(t,e,n){var r,i=s.wrap(t),o=i.attr("v:name");return void 0===e?o:(e?(e=(e+"").trim(),s.page._find('g[v\\:name="'+h.escape(e)+'"]')._filter((function(e){return"blacky.id"!==e.el[0].id&&e.el[0]!==t[0]})).length>0&&(r=e.substr(0,e.lastIndexOf(".")),e=(r||e)+"."+i.id())):e=null,i.attr({"v:name":e}),n||o===e||null===e||function(t,e){var n=s.wrap(t).json("v:dep"),r={},i=t.id(),o=[],a=[];function c(t){var e,n,r,o="";return""===(n=(e=t.split(".")).shift())&&(n=i),(r=n.indexOf("!"))>-1&&(o=n.substr(0,r),n=n.substr(r+1)),"c"===e[0]&&(n=[n,e.shift(),e.shift()].join(".")),{d_field:e.join("."),d_id:n,pg_id:o}}h.each(n,(function(t){t.forEach((function(t){var e;o[t]=c(t),""!==(e=o[t].pg_id)&&(r[e]=r[e]||[],r[e].push(o[t].d_id))}))})),h.each(r,(function(t,e){a.push(u.activeDoc.loadPage(e,{active:!1}))})),Promise.all(a).then((function(){h.each(n,(function(n){n.forEach((function(n){var r,i,a,s=o[n].d_id,c=o[n].d_field;(r=A.getVecta(s))&&(i=r.formula(),a=new RegExp("'"+e+"'","g"),void 0!==i[c]&&(i[c]=i[c].replace(a,"'"+t.name()+"'"),r.formula(c,i[c])))}))}))}))}(t,o),e)},escapeAttr:function(t){return t.replace(/-/g,"_")},idExist:function(t,e){return t.map((function(t){return t.id()})).indexOf(e)>=0},getLinkedNodes:function(t){var e=[];return t.isGroup()?s.wrap(t).allSubs().forEach((function(t){n(t,e)})):n(t,e),e;function n(t,e){["stroke","fill","font-fill","begin","end","marker-mid"].forEach((function(n){var r,i=t.style(n);switch(n){case"begin":case"end":null!==i&&(i=v.ARROW_IDS[i],r=s.doc._findID(i));break;case"marker-mid":null!==i&&(i+=".mkr",r=s.doc._findID(i));break;default:A.isURL(i)&&(r=s.doc._findID(A.url2ID(i)))}r&&(0!==r.length?e.push(r.el[0]):console.error("Unable to find linked nodes"))}))}},readStyles:function(t){var e,n=[];return t=t.replace(/&lt;!\[CDATA\[(.*)\]\]&gt;/g,"$1"),(e=s.parseCSS(function(t){for(var e=[["amp","&"],["apos","'"],["#x27","'"],["#x2F","/"],["#39","'"],["#47","/"],["lt","<"],["gt",">"],["nbsp"," "],["quot",'"']],n=0,r=e.length;n<r;++n)t=t.replace(new RegExp("&"+e[n][0]+";","g"),e[n][1]);return t}(t),{silent:!0}))[e.type]&&(e[e.type].rules||[]).forEach((function(t){!function(t){var e={},r={rule:1,import:3,"font-face":5,media:4,keyframes:7};switch(t.type){case"rule":case"font-face":case"media":case"keyframes":e.type=r[t.type],e.style=o(t),"media"===t.type?(e.cssText="@media"+t.media+"{",t.rules.forEach((function(t){e.cssText+=i(t)})),e.cssText+="}"):e.cssText=i(t),t.selectors?e.selectorText=t.selectors.join(","):e.selectorText="@"+t.type,n.push(e);break;case"import":e.type=3,e.cssText="@"+t.type+" "+t.import,e.href=t.import.replace(/^url\(("*|'*)/,"").replace(/("*|'*)\)$/,""),n.push(e)}function i(t){var e,n="";return e=t.selectors?t.selectors.join(","):"@"+t.type,"keyframes"===t.type&&(e+=" "+t.name,t.keyframes?t.keyframes.forEach((function(t){n+=i(t)})):e=""),"keyframe"===t.type&&(e=t.values.join(",")),t.declarations&&t.declarations.forEach((function(e,r){var i=r===t.declarations.length-1;e.property&&(n+=[e.property,":",e.value].join("")+(i?"":";"))})),n&&(n="{"+n+"}"),e+n}function o(t){var e={},n=0;return t.declarations&&(t.declarations.forEach((function(t,r){t.property&&(e[r]=t.property,e[t.property]=t.value,n++)})),e.length=n),e}}(t)})),n},readFonts:function(t){var e={},n=t.split("?")[1];return n&&n.split("&").forEach((function(n){var r=n.split("=");"family"===r[0]&&r[1]&&r[1].split("|").forEach((function(n){var r,i;t.indexOf("css2")>-1?(n=n.split(":"),r=n[0],i=(n[1]||"").split("@"),e[r]=[],2===i.length?i[1].split(";").forEach((function(t){var n=i[0].split(",");1===(t=t.split(",")).length?n[0].indexOf("ital")>-1?"0"===t[0]?e[r].push("400"):e[r].push("i"):n[0].indexOf("wght")>-1&&e[r].push(t[0]):"1"===t[0]?"400"===t[0]?e[r].push("i"):e[r].push(t[1]+"i"):e[r].push(t[1])})):e[r].push("400")):(n=n.split(":"),r=n[0],i=n[1],e[r]=(i||"").split(/ *, */g))}))})),e},readImports:function(t){for(var e,n,r=/@import *url\('*"*(.*?)'*"*\)/g,i={};null!==(e=r.exec(t));)n=A.readFonts(e[1]),$.each(n,(function(t,n){i[t]={styles:n,url:e[1]}}));return i},getUsedFonts:function(t,e){var n=A.getFontNode(s.doc)._text(),r=A.readImports(n),i=s.utils.readFontFaces(n),o=[];return t.isGroup()?s.wrap(t).allSubs().forEach((function(t){a(t,o)})):a(t,o),o;function a(t,n){var o=t.fontFamily().replace(/\s/g,"+");e&&s.CONST.FONTS.DEFAULT.indexOf(o)>-1||(void 0!==r[o]&&-1===n.indexOf(r[o].url)&&n.push(r[o].url),void 0!==i[o]&&n.indexOf(i[o].url)&&n.push(i[o]))}},getWoffURL:function(t,e){var n=[];return n=t.map((function(t){return new Promise((function(e){f({method:"GET",url:t.replace(/\s/g,"+").replace(/^\/\//,"https://"),headers:{"user-agent":"Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko","cache-control":"no-cache"}}).then((function(t){return void 0===t||t.indexOf("<!DOCTYPE html>")>-1?e(""):e(t),t})).catch((function(t){console.error(t),e("")}))}))})),Promise.all(n)},parseWoffURL:function(t,e){var n,r=/@font-face *\{(.*?)\}/g,i=["font-family","font-style","font-weight","src"];for(t=t.replace(/\s+/g," ");n=r.exec(t||"");){var o,a={},s=n[1].split(";").reduce((function(t,e){return(e=e.trim())&&t.push(e),t}),[]),c=[];s.forEach((function(t){var e=t.split(/ *: */g).map((function(t){return t&&t.trim().replace(/^['"]/,"").replace(/['"]$/,"")})),n=e.shift();i.indexOf(n)>-1&&(a[n]=e.join(":")),a.src&&-1===i.indexOf(n)&&c.push(";"+t)})),a.src&&(c.length&&(a.src=a.src+c.join("")),(o=/url\("*'*(.*?)"*'*\)/g.exec(a.src))&&(a.src=o[1])),h.isEmpty(a)||e.push(a)}},globalStyle:function(t){var e,n=s.style,r=new u.Length(n.stroke_width).px(),i=u.activePage.scale(),o={"stroke-width":r*i,"stroke-dasharray":n.stroke_dasharray,stroke:n.stroke,"stroke-opacity":n.stroke_opacity,fill:n.fill,"fill-opacity":n.fill_opacity,"stroke-linecap":n.stroke_linecap,"stroke-linejoin":n.stroke_linejoin},a=t.v?t:s.wrap(t).prim(),c=!1;1===r&&1===i||"none"===n.stroke_dasharray||(o["stroke-dasharray"]=A.setDashArray(n.stroke_dasharray,r,i)),"path"===a.type()&&!1===a.closed()&&(o.fill="none",c=!0),"rect"===a.type()&&"0"!==n.rx&&"0px"!==n.rx&&(o.rx=n.rx,e=new u.Length(n.rx),!1===A.isSvgUnit(e.unit)&&(o.rx=e.toSvgUnit())),a.style(o),c&&void 0===t.v&&(n.begin||n.end)&&(n.begin&&(t.beginArrow(n.begin),t.beginSize(n.begin_size)),n.end&&(t.endArrow(n.end),t.endSize(n.end_size)))},setVLayer:function(t,e){function n(t,e){var n=A.getLayerID(t);n&&void 0!==e[n]&&n!==s.CONST.DEFAULT_LAYER&&t.json("v:layer",e[n])}n(t,e=e||s.doc.json("v:layers")),t._hasClass("Group.cls")&&t.allSubs(!1,"wrap").forEach((function(t){n(t,e)}))},getVLayer:function(t){var e={};return n(t),t.allSubs(!1,"wrap").forEach((function(t){n(t)})),e;function n(t){var n,r=t.attr("v:layer"),i=t.attr("class");r&&i&&((n=i.split(" ").reduce((function(t,e){return e.indexOf(".lay")>-1&&(t=e),t}),""))&&n!==s.CONST.DEFAULT_LAYER&&(e[n]=JSON.parse(r)),t._removeAttr("v:layer"))}},getLayerID:function(t){var e,n,r=t.$.attr("class");return r&&r.indexOf(".lay")&&(e=r.match(/\w+\.lay/))&&(n=e[0].replace(".lay","")),n},dropSVG:function(t,e,n){var r,i,o,a,c,l=-1!==t.indexOf("http://schemas.microsoft.com/visio"),f=-1!==t.indexOf("\x3c!-- Generator: Adobe Illustrator ");return t=s.nano.clean({str:t}),f&&(t=function(t){var e=h.parseSVG(t),n=e._children("g");n.el.length>0&&n._each((function(t){var e=t.el[0].id;t._find("path, rect, circle, ellipse, line, polyline, polygon, text, tspan, image")._each((function(t){t._attr("v:layer",e)}))}));return h.serialize(e)}(t)),t=A.replaceImportedIDS(t),r=h.parseSVG(t),s.mode===s.CONST.MODE.EDIT&&u.trigger("_actionMode.Vecta","import_svg"),r._addClass("Ignore.cls"),u.trigger("_mutationDisable.Vecta"),u.trigger("_getZoom.Vecta",(function(t){c=t})),u.activePage.zoomTo(100),s.page._append(r),(i=s.wrap(r)).attr("width")||(i._hasAttr("viewBox")?(a=i.viewBox(),i.size(a.width,a.height)):i.size(300,150)),o=i.sizeU(),void 0!==e&&i.move(e.x-.5*o.width,e.y-.5*o.height),["stroke","stroke-linecap","stroke-linejoin","fill","text-anchor","fill-rule"].forEach((function(t){i.attr(t)||i.style(t,"initial")})),A.image.replaceBase64(i).then((function(t){return function(t){return new Promise((function(e){var o={size:t.sizeU(),move:t.moveU(),vb:t.viewBox()},f={},h=t._clone();o.aspect={width:o.size.width/o.vb.width,height:o.size.height/o.vb.height},o.aspect.min=o.aspect.width<o.aspect.height?o.aspect.width:o.aspect.height,o.offset={x:.5*(o.vb.width*o.aspect.min-o.size.width),y:.5*(o.vb.height*o.aspect.min-o.size.height)},t._find("[style]")._each((function(t){y((t=s.wrap(t)).attr("style"),t)})),m(t),i(t),c(t),a(t,f),k(t),d(t),p(t),v(t),!1===l&&!1===r(t)?(t._removeClass("Ignore.cls"),t._remove(),h=s.wrap(h),f.shape=u.activePage.drawSVG(h,o.move.x,o.move.y),f.grads&&delete f.grads,x(h,f.shape.id()),f.shape.delete(),e(f)):n(t,o).then((function(t){f.shape=t,e(f)}))}));function n(t,e){var n,r,i=[],o={},a=0,c="mask, defs, pattern",l=[];return t._find("text")._each((function(t){var e=s.wrap(t);e[0].childNodes.length!==e._children("tspan").length&&e[0].childNodes.forEach((function(t){var e=h(t);void 0===t.tagName&&e._replaceWith(h.parseSVG("<tspan>"+e._text()+"</tspan>"))}))})),t._find("tspan")._each((function(t){var e,n,r,i,o=s.wrap(t),a=o.move();"string"!=typeof a.x&&"string"!=typeof a.y||(n={x:(a.x+"").split(" "),y:(a.y+"").split(" ")},e=o.text().split(""),r=n.x.length>n.y.length?"x":"y",i="y"===r?"x":"y",n[r].forEach((function(o,a){var c=new s.Tspan(null,t._parent()),u={};u[r]=o,u[i]=n[i][a]||n[i][0],c.move(u.x,u.y).text(e[a])})),t._remove())})),t._find("path, rect, circle, ellipse, line, polyline, polygon, text, tspan, image")._each((function(t){var e,n=s.wrap(t);0===n._closest(c).length&&!1===d(n.$)&&(e=n._prev(),"text"===n.type()&&(""===n._text().trim()||n._children("tspan").length>0||e.length>0&&"rect"===s.wrap(e).type())||"tspan"===n.type()&&n._children("tspan").length>0||l.push(v(n)))})),Promise.all(l).then((function(o){var a={},c={},l=[];return o.forEach((function(t){var e,n;null!==t&&(e=d(t))&&((n=t.$[0].clip_index)?(c[n]=c[n]||{clippers:[],clippies:[]},t.$[0].clipper?c[n].clippers.push(e):c[n].clippies.push(e)):i.push(e))})),h.each(c,(function(t){t.clippers.length>0&&t.clippies.length>0&&l.push(v(t))})),Promise.all(l).then((function(o){return 0===(i=i.concat(o)).length?null:(n=1===i.length?i[0]:u.selection.clear().add(i).group(),t._remove(),r=n.sizeU(),n.move(e.move.x+.5*e.size.width-.5*r.width,e.move.y+.5*e.size.height-.5*r.height),n.delete(),n)}));function d(t){var e,n=t.attr("v:layer");return t._removeAttr("v:layer"),s.page.append(t),e=new u.Shape(t),f&&n&&(a[n]||(new u.Layer(n).name(n),a[n]=n),e.layer(a[n])),void 0!==t.data&&(e.fill("none"),h.each(t.data,(function(t,n){if(h.isObject(t)){if("size"===n)e[n](t.width,t.height)}else e[n](t)})),delete t.data),e}function v(t){var e,n,r,i,o,a;return e=t.clippers.length>1?new u.Selection(t.clippers).union():Promise.resolve(t.clippers),t.clippies.length>1?(n=(r=h(t.clippies[0].$))._parent(),o=r._index(),a=u.selection.clear().add(t.clippies).group(),0===o?n._prepend(a.$):(i=n._children()._eq(o-1)).length>0?i._after(a.$):n._append(a.$)):a=t.clippies[0],e.then((function(e){var n;if(e=e[0])return n=S.globalize(e.pathList(),s.wrap(e)),T.matrix.list(n,{a:10,b:0,c:0,d:10,e:0,f:0}),(a.isGroup()?a.shapes():[a]).every((function(t){var e;return"path"===t.type()&&(e=S.globalize(t.pathList(),s.wrap(t)),T.matrix.list(e,{a:10,b:0,c:0,d:10,e:0,f:0}),S.isInside(e,n))}))?e.delete():e.clip(a),a;t.clippies.forEach((function(t){t.delete()}))}))}}));function d(t){var e="none"===t.attr("display"),n=t.parent();return!e&&n.length>0&&(e=d(n)),e}function v(t){return new Promise((function(e){setTimeout((function(){var n,r;(n=p(t))._removeAttr("transform"),"path"===n.type()?0!==(r=n.list()).length?(t&&(r=S.globalize(r,t)),n.list(r),e(n)):e(null):e(n)}))}))}function p(t){var e,n,r,i,c,l,f,d=[{x:0,y:0},{x:1,y:1}],v=t._attr("v:layer"),p=new u.Length(t._css("stroke-width")).px();switch(t.type()){case"image":return e=t,f=s.storage.getImageGUID(e.attr("href")),e.attr("v:image",f.guid),e.attr("class",null),k(e,A.prim2List(t)),e;case"polygon":case"polyline":e=x(S.list2Str(S.poly2List(t)));break;case"line":e=x("M"+t.attr("x1")+" "+t.attr("y1")+" L"+t.attr("x2")+" "+t.attr("y2"));break;case"circle":e=s.wrap(h.parseSVG("<ellipse />")).attr({cx:t.attr("cx"),cy:t.attr("cy"),rx:t.attr("r"),ry:t.attr("r")}),e=x(S.list2Str(A.prim2List(e)));break;case"path":e=x(S.list2Str(S.str2List(t.attr("d"))));break;case"text":case"tspan":e=y(t);break;default:m(t),e=x(S.list2Str(A.prim2List(t)))}return d[0]=t.toLocal(d[0].x,d[0].y),d[1]=t.toLocal(d[1].x,d[1].y),n=t._css("opacity"),(r=t._$().parents("g")).length>0&&r.each((function(t,e){i=s.wrap($(e)),n*=i._css("opacity")})),c=p*Math.sqrt(2)/Math.sqrt(Math.pow(d[1].x-d[0].x,2)+Math.pow(d[1].y-d[0].y,2)),(l=t._css("stroke-dasharray"))&&"none"!==l&&((l=l.toString().split(/ *, +| +|,/g)).forEach((function(t,e){l[e]=new u.Length(t.replace(" ","")).px()*(c/p)})),l=l.join(",")),e.style({stroke:A.hex6(t._css("stroke")),"stroke-linejoin":t._css("stroke-linejoin"),"stroke-dasharray":l,"stroke-linecap":t._css("stroke-linecap"),"stroke-opacity":t._css("stroke-opacity"),fill:A.hex6(t._css("fill")),"fill-opacity":t._css("fill-opacity"),opacity:n,"fill-rule":t._css("fill-rule"),"stroke-width":c}),["collapse","hidden"].indexOf(t._css("visibility"))>-1&&e._attr("visibility",t._css("visibility")),e._removeAttr("class style id v:rectContext white-space"),v&&e._attr("v:layer",v),t[0].clip_index&&g(e[0],t[0].clip_index,t[0].clipper),e;function m(t){var e,n,r,i={rect:["x","y","rx","ry","width","height"],ellipse:["cx","cy","rx","ry"],circle:["cx","cy","r"],line:["x1","y1","x2","y2"]},o=t.type();void 0!==i[o]&&i[o].forEach((function(i){if(2===t[0][i].baseVal.unitType)switch(void 0===e&&(e=new s.Svg(t._closest("svg").el[0]),n=e.viewBox(),r={width:n.width-n.x,height:n.height-n.y}),i){case"x":case"rx":case"cx":case"width":case"x1":case"x2":case"r":t.attr(i,t[0][i].baseVal.valueInSpecifiedUnits*r.width/100);break;case"y":case"ry":case"cy":case"height":case"y1":case"y2":t.attr(i,t[0][i].baseVal.valueInSpecifiedUnits*r.height/100)}}))}function y(t){var e,n,r=s.CONST.PADDING+2,i=s.wrap(h.parseSVG("<rect />")),c=t[0].getCTM(),l=x(t),f=t._parent(),d=t._css("text-anchor"),v=y(t,l),p={x:t.$[0].x.baseVal.length>0?t.$[0].x.baseVal.getItem(0).valueInSpecifiedUnits:0,y:t.$[0].y.baseVal.length>0?t.$[0].y.baseVal.getItem(0).valueInSpecifiedUnits:0},g={width:v.width+2*r,height:.6*v.height},m=.77711*v.height;switch(k(f,t,p,m),(e=u.activePage.$[0].createSVGPoint()).x=p.x-r/2,e.y=p.y,p=e.matrixTransform(c),d){case"middle":l?(p=T.rotatePoint(p.x,p.y-g.height/2,p.x,p.y,l)).y-=.5*g.height:p.y-=g.height,p.x-=.5*g.width;break;case"end":l?((p=T.rotatePoint(p.x-g.width/2,p.y-g.height/2,p.x,p.y,l)).y-=.5*g.height,p.x-=.5*g.width):(p.y-=g.height,p.x-=g.width);break;default:l?((p=T.rotatePoint(p.x+g.width/2,p.y-g.height/2,p.x,p.y,l)).y-=.5*g.height,p.x-=.5*g.width):p.y-=g.height}return i.move(p.x,p.y).size(g.width,g.height),n="underline"===(n="underline"===(n=t._css("text-decoration-line"))?n:f._css("text-decoration-line"))?n:"none",i.data={text:t._text(),fontSize:m,fontFamily:t._css("font-family"),fontWeight:400===t._css("font-weight")?"normal":"bold",fontStyle:t._css("font-style"),fontFill:t._css("fill"),textDecoration:n,angle:l},i;function y(t,e){var n,r,i,o;return isNaN(e)||0===e?r=t[0].getBoundingClientRect():(o=(n=t.$.closest("text")).attr("transform"),n.attr("transform",null),0!==(e=x(t))&&(i=e>0?-e:0-e,i-=a(o),n.attr("transform","rotate("+i+")")),r=t[0].getBoundingClientRect(),n.attr("transform",o)),r;function a(t){var e,n,r=0;return t&&(t.indexOf("rotate")>-1&&(e=t.match(/rotate\((.*?\))/))&&e[1]&&(r=parseInt(e[1])),t.indexOf("matrix")>-1&&(e=t.match(/matrix\((.*?)\)/))&&e[1]&&(n=e[1].split(" "))[0]&&n[1]&&(r=T.deg(Math.atan2(n[1],n[0])))),r}}function x(t){var e=t[0].getCTM();return T.deg(Math.atan2(e.b,e.a))}function k(t,e,n,r){var i=t._attr("id"),s=e._attr("dx"),c=e._attr("dy");function l(t,e,n,r,i,a){var s="d"+e;t?(o[n][s]=o[n][s]||0,t.indexOf("em")>-1?(t=parseFloat(t.replace("em",""))*a,o[n][s]+=parseFloat(t)):o[n][s]+=new u.Length(t).px(),i[e]+=o[n][s]):!r._attr(e)&&o[n][e]&&(i[e]=o[n][e])}!e._attr("x")&&t._attr("x")&&(n.x+=new u.Length(t._attr("x")).px()),!e._attr("y")&&t._attr("y")&&(n.y+=new u.Length(t._attr("y")).px()),i||(i="dropSVGTXT_"+a,t._attr("id",i),a++),o[i]=o[i]||{},l(s,"x",i,e,n,r),l(c,"y",i,e,n,r),o[i].x=n.x+e[0].getComputedTextLength(),o[i].y=n.y}}function x(t){return s.wrap(h.parseSVG("<path />")).attr("d",t)}function k(t,e){var n,r,i=[],o=[],a={},s={},c=t[0].transform.baseVal.consolidate(),u={};(e=S.globalize(e,t)).forEach((function(t){t.x&&i.push(t.x),t.y&&o.push(t.y)})),a.x=Math.min.apply(null,i),a.y=Math.min.apply(null,o),u.x=Math.max.apply(null,i),u.y=Math.max.apply(null,o),s.width=u.x===a.x?u.x:u.x-a.x,s.height=u.y===a.y?parseFloat(t.$.attr("height")):u.y-a.y,t.move(a.x,a.y),t.size(s.width,s.height),c&&((n=c.matrix).a<0&&(n.e=s.width),n.d<0&&(n.f=s.height),r="matrix(",r+=["a","b","c","d","e","f"].map((function(t){return n[t]})).join(" "),r+=")",t._attr("transform",r))}}}function r(t){var e=t._findTag("defs, svg, symbol, clipPath, mask"),n=e.length;return e._each((function(t){0===t._children().length&&(t._remove(),n--)})),(n+=t._findTag("animate, animateTransform, animateMotion, style").length)<=0}function i(t){var e={};function n(r){var i,o,a,c=s.wrap(r),u=t._findID(c.link())._clone(),l=c.moveU(),f="";u.length>0?(a=u.el[0].id,e[a]=!0,c.attr("id")?u._attr("id",c.attr("id")):u._removeAttr("id"),o=c.attr("transform"),null===l.x&&null===l.y||(f="translate("+(l.x||0)+", "+(l.y||0)+")"),["fill","stroke","opacity","class","stroke-width"].forEach((function(t){c.attr(t)&&u._attr(t,c.style(t))})),(i=c.attr("clip-path"))&&u._attr("clip-path",i),(o||f)&&u._attr("transform",(o||"")+f+(u._attr("transform")||"")),c._replaceWith(u),u._findTag("use")._each((function(t){t._attr("xlink:href")!=="#"+a&&n(t)}))):c.delete()}t._findTag("use")._each((function(t){n(t)})),h.each(e,(function(e,n){var r=t._findID(n);r._closest("defs").length>0&&r._remove()})),0===t._children("defs")._children().length&&t._children("defs")._remove()}function o(t){var e,n,r,i={a:1,b:0,c:0,d:1,e:0,f:0},o=0,a=[];for((n=s.wrap(t)).attr("transform")&&a.push(n[0].transform.baseVal.consolidate().matrix),r=n.$.parentsUntil("svg"),e=0;e<r.length;e++)r[e]=s.wrap(r[e]),r[e].attr("transform")&&r[e][0].transform&&a.push(r[e][0].transform.baseVal.consolidate().matrix);if(a.length>0)for(e=a.length-1;e>=0;e--)0!==a[e].b&&(o=Math.asin(a[e].b)),i=T.matrix.multiply(i,a[e]);return{mat:i,angle:o}}function a(t,n){var r=t.viewBox();function i(t,e,n){var r=t.attr(e);return null===r?"r"===e?n:.5*n:r}function a(t){t._findTag("linearGradient, radialGradient")._each((function(e){(e=s.wrap(e.el[0])).attr("xlink:href")&&c(t,e.attr("id"))}))}function c(t,e){t._findID(e)._each((function(e){e=s.wrap(e.el[0]),t._findID(e.attr("xlink:href"))._each((function(n){(n=s.wrap(n.el[0])).attr("xlink:href")&&c(t,n.attr("id")),"lineargradient"===e.type()?(n.attr("x1")&&void 0===e.attr("x1")&&e.attr("x1",n.attr("x1")),n.attr("x2")&&void 0===e.attr("x2")&&e.attr("x2",n.attr("x2")),n.attr("y1")&&void 0===e.attr("y1")&&e.attr("y1",n.attr("y1")),n.attr("y2")&&void 0===e.attr("y2")&&e.attr("y2",n.attr("y2")),n.attr("gradientTransform")&&void 0===e.attr("gradientTransform")&&e.attr("gradientTransform",n.attr("gradientTransform")),n.attr("gradientUnits")&&!e.attr("gradientUnits")&&e.attr("gradientUnits",n.attr("gradientUnits")),0===e._findTag("stop").length&&n._findTag("stop")._each((function(t){t=s.wrap(t.el[0]),e._append(t._clone())}))):(n.attr("cx")&&void 0===e.attr("cx")&&e.attr("cx",n.attr("cx")),n.attr("cy")&&void 0===e.attr("cy")&&e.attr("cy",n.attr("cy")),n.attr("r")&&void 0===e.attr("r")&&e.attr("r",n.attr("r")),n.attr("fx")&&void 0===e.attr("fx")&&e.attr("fx",n.attr("fx")),n.attr("fy")&&void 0===e.attr("fy")&&e.attr("fy",n.attr("fy")),n.attr("fr")&&void 0===e.attr("fr")&&e.attr("fr",n.attr("fr")),n.attr("gradientTransform")&&void 0===e.attr("gradientTransform")&&e.attr("gradientTransform",n.attr("gradientTransform")),n.attr("gradientUnits")&&!e.attr("gradientUnits")&&e.attr("gradientUnits",n.attr("gradientUnits")),0===e._findTag("stop").length&&n._findTag("stop")._each((function(t){t=s.wrap(t.el[0]),e._append(t._clone())})))}))}))}function u(t,e){var n,r=Math.random();return t=s.wrap(t),e=s.wrap(e),n=t._clone(),t._after(n),(n=s.wrap(n)).attr("id",r),e.attr("fill","url(#"+r+")"),n}function l(t,e,n){var i,a,c,u=r,l=o(t),f=l.angle;return i=l.mat,"path"===t.type()&&(i.a<0||i.d<0||0!==i.b||0!==i.c)?(c=s.wrap(t[0]).list(),c=T.matrix.list(c,i),u=T.getPathBox(c),a=T.matrix.point({x:n.begin.x,y:n.begin.y},i),n.begin.x=a.x,n.begin.y=a.y,a=T.matrix.point({x:n.end.x,y:n.end.y},i),n.end.x=a.x,n.end.y=a.y,a=T.rotatePoint(n.begin.x,n.begin.y,.5*(n.begin.x+n.end.x),.5*(n.begin.y+n.end.y),-T.deg(f)),n.begin.x=a.x,n.begin.y=a.y,a=T.rotatePoint(n.end.x,n.end.y,.5*(n.begin.x+n.end.x),.5*(n.begin.y+n.end.y),-T.deg(f)),n.end.x=a.x,n.end.y=a.y):(u=t[0].getBBox(),a=T.matrix.point({x:u.x,y:u.y},i),u.x=a.x,u.y=a.y,u.width*=Math.abs(i.a),u.height*=Math.abs(i.d),a=T.matrix.point({x:n.begin.x,y:n.begin.y},i),n.begin.x=a.x,n.begin.y=a.y,a=T.matrix.point({x:n.end.x,y:n.end.y},i),n.end.x=a.x,n.end.y=a.y),{box:u,pts:n}}function f(t,e){var n,i,a,c,u,l,f,d,h,v={cx:0,cy:0,fx:0,fy:0};return a=o(c=s.wrap(t)).mat,"path"===c.type()&&(a.a<0||a.d<0||0!==a.b||0!==a.c)?(f=s.wrap(c[0]).list(),f=T.matrix.list(f,a),u=T.getPathBox(f)):(u=c[0].getBBox(),n=T.matrix.point({x:u.x,y:u.y},a),u.x=n.x,u.y=n.y,u.width=u.width*Math.abs(a.a),u.height=u.height*Math.abs(a.d)),e.attr("gradientTransform")&&(i=e[0].gradientTransform.baseVal.consolidate().matrix,a=T.matrix.multiply(a,i)),v.cx=e.attr("cx"),v.cy=e.attr("cy"),n=T.matrix.point({x:v.cx,y:v.cy},a),v.cx=n.x,v.cy=n.y,v.fx=e.attr("fx")?e.attr("fx"):e.attr("cx"),v.fy=e.attr("fy")?e.attr("fy"):e.attr("cy"),n=T.matrix.point({x:v.fx,y:v.fy},a),v.fx=n.x,v.fy=n.y,d=Math.atan2(a.d,a.a),n=T.matrix.point({x:e.attr("r")*Math.cos(d),y:e.attr("r")*Math.sin(d)},a),h=T.matrix.point({x:0,y:0},a),l=T.length(h.x,h.y,n.x,n.y),0===r.x&&0===r.y||(v.cx=v.cx-r.x,v.cy=v.cy-r.y,v.fx=v.fx-r.x,v.fy=v.fy-r.y,u.x=u.x-r.x,u.y=u.y-r.y),{box:u,pts:v,r:l}}function d(t,r,i){var a,c,l,f,d,p,g,m,y=0;for(c=(r=s.wrap(r))._children();y<c.length;y++)l=s.wrap(c.el[y]),a=y<c.length-1?u(t,l):t,f=i.pts,d=l.toLocal(f.cx,f.cy,s.wrap(l._parent().el[0])),f.cx=d.x,f.cy=d.y,g=o(r,t).mat,p=l[0].getBBox(),e=T.matrix.point({x:p.x,y:p.y},g),p.x=e.x,p.y=e.y,p.width=p.width*Math.abs(g.a),p.height=p.height*Math.abs(g.d),i.pts=f,i.box=p,m=a._findTag("stop"),h(a,i),v(m,a,n)}function h(t,e){var n=e.box||0,r=e.r||0,i=e.pts||0;"lineargradient"===t.type()?(t.attr("x1",((i.begin.x>n.x?1:-1)*T.length(n.x,i.begin.y,i.begin.x,i.begin.y)/n.width*100).toFixed(2)+"%"),t.attr("y1",((i.begin.y>n.y?1:-1)*T.length(i.begin.x,n.y,i.begin.x,i.begin.y)/n.height*100).toFixed(2)+"%"),t.attr("x2",((i.end.x>n.x?1:-1)*T.length(n.x,i.end.y,i.end.x,i.end.y)/n.width*100).toFixed(2)+"%"),t.attr("y2",((i.end.y>n.y?1:-1)*T.length(i.end.x,n.y,i.end.x,i.end.y)/n.height*100).toFixed(2)+"%")):(t.attr("cx",(i.cx>n.x?1:-1)*Math.round(T.length(n.x,n.y,i.cx,n.y)/n.width*100)+"%"),t.attr("cy",(i.cy>n.y?1:-1)*Math.round(T.length(n.x,n.y,n.x,i.cy)/n.height*100)+"%"),t.attr("fx",(i.fx>n.x?1:-1)*Math.round(T.length(n.x,n.y,i.fx,n.y)/n.width*100)+"%"),t.attr("fy",(i.fy>n.y?1:-1)*Math.round(T.length(n.x,n.y,n.x,i.fy)/n.height*100)+"%"),t.attr("r",Math.round(r/((n.height+n.width)/2)*100)+"%"))}function v(t,e,n){t._each((function(t){var e=s.wrap(t),n=e.attr("offset"),r=e.attr("stop-color"),i=e.attr("stop-opacity");r&&e.attr("stop-color",A.hex6(r)),-1===(n+"").indexOf("%")&&e.attr("offset",100*n+"%"),i&&e.attr("stop-opacity",i)})),e._removeAttr("gradientUnits")._removeAttr("gradientTransform")._removeAttr("xlink:href")._removeAttr("href"),e._remove(),n.grads=n.grads||[],n.grads.push(e)}a(t),t._findTag("linearGradient")._each((function(e){var i,o,a,c,f,d,p,g=e._findTag("stop"),m={a:1,b:0,c:0,d:1,e:0,f:0};if(-1===((i=s.wrap(e.el[0])).attr("x1")+"").indexOf("%"))if(f=A.applyLinearTransform(e,m),"userSpaceOnUse"===i.attr("gradientUnits"))if(i.attr("gradientTransform")&&(m=i[0].gradientTransform.baseVal.consolidate().matrix),(a=t._find('[fill="url(#'+i.attr("id")+')"], [stroke="url(#'+i.attr("id")+')"]')).length>1)for(o=0;o<a.length;o++)0!==(d=l(p=s.wrap(a.el[o]),c=o<a.length-1?s.wrap(u(i,p)):i,f)).box.width&&0!==d.box.height?(g=c._findTag("stop"),h(c,d),v(g,c,n)):c._remove();else 0!==a.length&&0!==(d=l(s.wrap(a.el[0]),i,f)).box.width&&0!==d.box.height?(h(i,d),v(g,i,n)):i._remove();else i.attr("x1",Math.round(100*f.x1/r.width)+"%"),i.attr("y1",Math.round(100*f.y1/r.height)+"%"),i.attr("x2",Math.round(100*f.x2/r.width)+"%"),i.attr("y2",Math.round(100*f.y2/r.height)+"%");else v(g,i,n)})),t._findTag("radialGradient")._each((function(e){var o,a,c,l,p,g,m=e._findTag("stop");if("userSpaceOnUse"===(a=s.wrap(e.el[0])).attr("gradientUnits"))if((p=t._find('[fill="url(#'+a.attr("id")+')"], [stroke="url(#'+a.attr("id")+')"]')).length>1)for(l=0;l<p.length;l++)o=f(c=s.wrap(p.el[l]),g=l<p.length-1?s.wrap(u(a,c)):a),"g"===c[0].tagName?d(a,c,o):(m=g._findTag("stop"),0!==o.box.width&&0!==o.box.height&&(h(g,o),v(m,g,n)));else 0!==p.length&&(o=f(c=s.wrap(p.el[0]),a),"g"===c[0].tagName?d(a,c,o):0!==o.box.width&&0!==o.box.height&&(h(a,o),v(m,a,n)));else["r","fx","fy","cx","cy"].forEach((function(t){-1===(a.attr(t)+"").indexOf("%")&&("cx"===t||"fx"===t?a.attr(t,Math.round(100*i(a,t,r.width)/r.width)+"%"):a.attr(t,Math.round(100*i(a,t,r.height)/r.height)+"%"))})),v(m,a,n)}))}function c(t){var e=t._attr("id");t._findTag("style")._each((function(n){var r=A.readStyles(n._text()),i=!0;r.forEach((function(t){1!==t.type&&5!==t.type&&(i=!1)})),i&&(r.forEach((function(n){for(var r,i=h.extend({},n.style),o=n.selectorText.split(","),a=0;a<i.length;a++)delete i[a];delete i.length,o.forEach((function(n){"#"===(r=n.charAt(0))||"."===r?(t._find(r+h.escape(n))._attr(i),("."===r&&t._hasClass(n.substr(1))||"#"===r&&e===n)&&t._attr(i)):"svg"===n?t._attr(i):t._find(h.escape(n))._attr(i)}))})),n._remove())}))}function d(t){var e=s.doc._children("defs")._children("style"),n=e._html(),r=!1;t._findTag("style")._each((function(t){A.readStyles(t._text()).forEach((function(t){7===t.type&&(r=!0),3===t.type&&-1===n.indexOf(t.href)&&(n+=t.cssText+";")})),!1===r&&t._remove()})),e._html(n)}function v(t){function e(t){t._children("g")._each((function(t){e(t),0===t._children().length&&t._remove()}))}t._findTag("defs")._each((function(t){t._findTag("use, path, rect, circle, ellipse, line, polyline, polygon, text")._remove(),e(t),0===t._children().length&&t._remove()}))}function p(t){var e=["rect","ellipse","path","image","svg","line"],n=1;t._findTag("clipPath")._each((function(r){var i,o,a=r._children();0!==a.length&&"use"!==a.el[0].tagName||(r._remove(),i=!0),t._find('[clip-path="url(#'+r._attr("id")+')"]')._each((function(t){var r,c;i?t._remove():0===t._find("[clip-path]").length?(r=a._clone(),"g"===s.wrap(t).type()?(t._find(e.join(","))._each((function(t){g(t.el[0],n)})),r._each((function(t){var e={};["fill","stroke"].forEach((function(n){e[n]=t._css(n)||"none"})),t._attr(e),g(t.el[0],n,!0)})),t._append(r)):(c=t.el[0].transform.baseVal.consolidate(),g(t.el[0],n),r._each((function(t){var e,r=t.el[0].transform.baseVal.consolidate();c&&r?e=T.matrix.multiply(h.extend({},c.matrix),r.matrix):c&&(e=c.matrix),e&&t._attr("transform","matrix("+e.a+" "+e.b+" "+e.c+" "+e.d+" "+e.e+" "+e.f+")"),g(t.el[0],n,!0)})),t._after(r)),n++):o=!0})),o||r._remove()}))}function g(t,e,n){t.clip_index=e,n?t.clipper=!0:t.clippy=!0}function m(t){var e,n,r,i;e=new s.Defs(null,t),t._findTag("symbol")._each((function(t){n=s.wrap(h.parseSVG("<g />")),(r=s.wrap(t)).attr("viewBox")&&(i=r[0].viewBox.baseVal,n.attr("transform","translate("+(-i.x||0)+", "+(-i.y||0)+")")),r._children()._each((function(t){var e=s.wrap(t).type();"title"!==e&&"desc"!==e||t._remove()})),n.attr("id",r.attr("id")),n._append(r._children()._clone()),e._append(n),r._remove()}))}function y(t,e){t&&((t=t.split(";")).forEach((function(t){var n=t.split(":");n[0]=n[0].trim(),"-"!==n[0].charAt(0)&&e.attr(n[0],n[1])})),e._$().removeAttr("style"))}function x(t,e){t._findTag("style")._each((function(n){var r=n._text().replace(/{(.*?)}/g,(function(t){return t.replace(/\s/g,"")})),i=A.readStyles(r),o=new RegExp("}* *(.*?){(.*?)}"),a=!1;i.forEach((function(n){var i=[],s=n.cssText.match(o);"animation"!==n.style[0]&&"@keyframes"!==n.selectorText&&(n.selectorText.split(",").forEach((function(n){var r,o,a,c;o=(n=n.trim()).charAt(0),r=n.replace(".",e+"_"),"."!==o&&"#"!==o?s&&(r=0===s[1].indexOf("svg")?s[1].replace("svg","#"+e+" > svg"):"#"+e+" > svg "+s[1],i.push(r)):(a=h.escape(n),c=t._find(o+a),"."===o?c._each((function(t){t._attr("class",t._attr("class").replace(a,r))})):c._each((function(t){t._attr("id",t._attr("id").replace(a,r))})),i.push("."+r))})),s&&(r=r.replace(s[0],i.join(",")+"{"+s[2]+"}")),a=!0)})),a&&n._text(r)}))}function k(t){t._find("text")._each((function(t){var e=t._attr("writing-mode"),n={};if(e)switch(e){case"tb-rl":case"tb":n.x=parseFloat(t._attr("x"))-1,n.y=parseFloat(t._attr("y"))-1,t._attr("transform","rotate(90)"),t._attr("transform-origin",n.x+"px "+n.y+"px"),t._removeAttr("writing-mode")}}))}}(t).then((function(t){var e,r;return null===t.shape?null:(r=s.wrap(t.shape),void 0!==n&&!1!==n||(u.trigger("_mutationEnable.Vecta"),s.page.append(t.shape[0]),u.selection.clear().add([t.shape])),t.grads&&(e=s.doc._findTag("defs"),t.grads.forEach((function(t){var n=t.id(),i=t.signature();0===e._findID(i).length&&e._append(t[0]),t.id(i),r._find('[fill="url(#'+n+')"]')._attr("fill","url(#"+i+")"),r._find('[stroke="url(#'+n+')"]')._attr("stroke","url(#"+i+")")}))),u.activePage.zoomTo(100*c),t.shape)}))}))},shapeToList:function(t){var e,n=s.wrap(t).prim();switch(n.type()){case"rect":case"ellipse":case"image":case"svg":e=A.prim2List(n);break;case"path":e=n.list()}return S.globalize(S.clean(e),n)},num2Str:function(t){for(var e="A".charCodeAt(0),n="Z".charCodeAt(0)-e+1,r="";t>=0;)r=String.fromCharCode(t%n+e)+r,t=Math.floor(t/n)-1;return r},str2Num:function(t){var e="A".charCodeAt(0),n="Z".charCodeAt(0)-e+1,r=0;return t.toUpperCase().split("").reverse().forEach((function(t,e){var i,o=t.charCodeAt(0);e?(i=Math.pow(n,e),r+=i*(o%65)+i):r=o%65})),r},getJSON:function(t,e){var n=s.wrap(t);if(void 0===e)return n.json("v:json");null!==e&&"object"!==_typeof(e)?console.error("Invalid json at getJSON"):(h.isEmpty(e)&&(e=null),n.json("v:json",e),L.trigger(t,"json"))},getLayerShapes:function(t){var e,n,r=[];return t.indexOf(".lay")>-1&&(t=t.replace(".lay","")),t===s.CONST.DEFAULT_LAYER?(e=Object.keys(s.doc.json("v:layers")).map((function(t){return":not(."+h.escape(t)+"\\.lay)"})).join(""),n=s.page._find("g[id]"+e)):n=s.page._find("g[id]."+h.escape(t)+"\\.lay"),n._each((function(t){r.push(new u.Shape(t))})),r},flattenShapes:function(t){var e=[];return t.filter((function(t){return!1===t.locked()})).forEach((function(t){e=t.isGroup()?e.concat(s.wrap(t).allSubs(!0)):e.concat(t)})),e},setFontsImports:function(t,e){var n=A.getFontNode(s.doc),r=n._text(),i=A.readImports(r),o=s.utils.readFontFaces(r),a={},c="";h.each(i,(function(t,e){s.CONST.FONTS.DEFAULT.indexOf(e)<0&&void 0===a[e]&&(a[e]=t.styles)})),a[t]=e,h.each(a,(function(t,e){(s.CONST.FONTS.DEFAULT.indexOf(e)>-1||null===t)&&delete a[e]})),s.CONST.FONTS.DEFAULT.forEach((function(t){c+='@import url("'+s.CONST.FONTS.GOOGLE_URL+"/css?family="+t+':400,400i,700,700i"); '})),h.each(a,(function(t,e){c+='@import url("'+s.CONST.FONTS.GOOGLE_URL+"/css?family="+e,(t=t.join(","))&&(c+=":"+t),c+='"); '})),h.each(o,(function(t,e){c+='@font-face{font-family:"'+e+'"; src: url("'+t+'");}'})),r!==c.trim()&&n._empty()._text(c.trim())},setFontFace:function(t,e){var n=A.getFontNode(s.doc),r=n._text();null===e?r=r.replace(new RegExp('@font-face{font-family:[ ]{0,1}"'+t+'"; src: url(.*?);}',"g"),""):!1===r.includes(e)&&(r+='@font-face{font-family:"'+t+'"; src: url("'+e+'");}'),n._text()!==r&&n._empty()._text(r)},uploadFonts:function(t){var e={};return s.utils.getTeam(s.go.queryID()).then((function(t){return t?s.db.mfid(t).once("fonts").then((function(t){return t.val()||{}})):s.db.once("users/"+s.user.id+"/fonts").then((function(t){return t.val()||{}}))})).then((function(n){return h.sequence(Object.keys(t),(function(r){return function(t,e){return s.go.ajax.arrayBuffer(t).then((function(t){var n=s.fonts.readWoff(t).name.fullName,r=!1;return Object.keys(e).forEach((function(t){e[t].name.replace(/\s/g,"")===n.replace(/\s/g,"")&&(r=t)})),!1===r?s.utils.uploadFont({ab:t,name:n},!0):{id:r,exists:!0}}))}(t[r],n).then((function(t){e[r]=t.id,void 0===t.exists&&(n[t.id]={name:t.name})})).catch((function(){e[r]=null}))})).then((function(){u.once("_fontPopulated.Vecta",(function(){Object.keys(e).forEach((function(t){t!==e[t]&&(s.doc.$.find('text[font-family="'+t+'"]').attr("font-family",e[t]),s.fn.setFontFace(t,null))}))})),u.trigger("_getUploadedFonts.Vecta",!0),s.go.hideMessage()}))}))},setNamespace:function(t,e,n){for(var r,i=e,o=/\.(on|once)\( *'(.*?)' *,/g,a=/\.(on|once)\( *"(.*?)" *,/g;r=o.exec(e);)i=i.replace(r[0],"."+r[1]+"('"+r[2]+"."+t+"',");for(;r=a.exec(e);)i=i.replace(r[0],"."+r[1]+'("'+r[2]+"."+t+'",');return"try{\n"+i+'\n}catch(e){console.warn("Error found in plugin '+n+'");console.error(e); }\nVecta.trigger("pluginStopped.Vecta.Plugin");'},scaleShape:function(t,e){return t.isGroup()?(s.wrap(t).allSubs().forEach((function(t){t.isGroup()||A.scaleStroke(t,e),A.scaleFont(t,e)})),A.scaleFont(t,e)):(A.scaleStroke(t,e),A.scaleFont(t,e)),t},scaleFont:function(t,e){var n,r,i=s.wrap(t).getText();return i&&(n=new u.Length(t.fontSize()),(r=i.getStyledTSpans("font-size")).length>0?(i.style("font-size",T.round(n.value*e)+n.unit),r._each((function(t){var n=new u.Length(t._attr("font-size"));t._attr("font-size",T.round(n.value*e)+n.unit)})),t.text(t.getStyledText())):t.fontSize(T.round(n.value*e)+n.unit)),t},scaleStroke:function(t,e){var n=new u.Length(t.strokeWidth());return t.strokeWidth(T.round(n.value*e)+n.unit)},makeRim:function(t,e){var n,r;"image"!==e.type()&&"svg"!==e.type()||(r=0===(n=t._childClass("Rim.cls")).length?new s.Rect(null,t):s.wrap(n),R=e.sizeU(),r.move(0,0).size(R.width,R.height).attr({id:null,class:"Rim.cls",stroke:"none",fill:"none"}))},hitTest:function(t,e){var n,r,i,o=s.page.getScreenCTM().inverse(),a={x:(t-o.e)/o.a,y:(e-o.f)/o.d},c=null,l=h("#handles\\.id"),f=null,d=null;return l._css("pointer-events","none"),n=document.elementFromPoint(a.x,a.y),l._removeAttr("style"),n&&(r=s.wrap(n))&&((r=r.closestGroup())&&"v_ruler_text.id"!==(i=r.id())&&"h_ruler_text.id"!==i&&(r._hasClass("Guide.cls")?f=new u.Guide(r):c=new u.Shape(r)),A.isConnPt(n)&&(d=new u.Connect(n))),{shape:c,conn:d,guide:f,touch_nd:n}},nearestDegree:function(t,e){var n,r,i,o,a=[0,45,90],s=0,c={};for(n=Math.atan2(-(t.y-e.y),t.x-e.x),r=T.deg(n),(i=Math.abs(r))>=90&&(i=Math.abs(180-i));s<a.length-1;s++)if(i>=a[s]&&i<=a[s+1]){i=i-a[s]>=a[s+1]-i?a[s+1]:a[s];break}switch(i){case 0:e.y=t.y;break;case 90:e.x=t.x;break;default:o=T.length(t.x,t.y,e.x,e.y),c.x=Math.cos(T.rad(i))*o,c.y=Math.sin(T.rad(i))*o,e.x<t.x&&(c.x*=-1),e.y<t.y&&(c.y*=-1),e.x=t.x+c.x,e.y=t.y+c.y}return e.angle=i,e},getFontNode:function(t){var e=h(null);return("draw.id"===t.id()?t._children("defs")._eq(0)._children("style")._eq(0):t._findTag("style"))._each((function(t){var n,r=[];try{r=(n=t.el[0].sheet||t.el[0].styleSheet).cssRules||n.rules}catch(e){r=A.readStyles(t._text())}h.each(r,(function(n){if(3===n.type||5===n.type)return e=t,!1}))})),e},getVecta:function(t){var e,n,r,i;if(void 0===(r=_.get(t))){if(t.indexOf(".")&&-1===t.indexOf(".id")&&(e=t.split("."),t=e[0]),"draw.id"===t)r=u.activeDoc;else if(void 0!==s.pages[t])r=t===u.activePage.id()?u.activePage:0!==(n=new u.Page("#"+t)).$.length?n:null;else if(0===(i=s.doc._parent()._findID(t)._filter((function(t){return"symbol"!==t._parent().el[0].tagName}))).length)r=null;else switch(i.el[0].tagName.toLowerCase()){case"svg":default:r=null;break;case"g":if(n=new u.Shape(i.el[0]),void 0!==e&&"c"===e[1])e[2]&&(n=new u.Control(n,parseInt(e[2])));r=n;break;case"use":r=A.isConnPt(i.el[0])?new u.Connect(i.el[0]):null}void 0!==e?_.set(e.join(""),r):_.set(t,r)}else r instanceof u.Shape&&!1===s.doc[0].contains(r[0])&&(0===(i=s.doc._findID(t)).length?r=null:(r=new u.Shape(i.el[0]),_.set(t,r)));return r},getSibling:function(t,e){var n,r=s.wrap(t),i=r.box(!0),o="prev"===e?r._prev():r._next(),a=!1;if(o.length>0)for(i.right=i.x+i.width,i.bottom=i.y+i.height;!a;)(n=s.wrap(o).box(!0)).right=n.x+n.width,n.bottom=n.y+n.height,n.x<i.x&&n.right<i.x||n.x>i.right&&n.right>i.right||n.y<i.y&&n.bottom<i.y||n.y>i.bottom&&n.bottom>i.bottom?0===(o="prev"===e?o._prev():o._next()).length&&(a=!0):a=!0;return o},unicode:function(t){for(var e,n="",r=0;r<t.length;r++){for(e=t.charCodeAt(r).toString(16).toUpperCase();e.length<4;)e="0"+e;n+=e="\\u"+e}return n},isConnPt:function(t){var e=C.getNode(t);return(e.getAttribute("href")||e.getAttribute("xlink:href"))==="#"+s.CONST.CONN_PT.ID},getMethod:function(t){return t=t.toLowerCase(),void 0===s.CONST.ELEMENTS[t]?"Ele":s.CONST.ELEMENTS[t]},insertDropMaster:function(t,e){void 0===e&&(e=20),void 0===E[e]&&(E[e]=h.parseSVG('<svg class="DropMaster.cls" viewBox="0 0 8 '+e+'"><use xlink:href="#drop_master.sym" /></svg>')),h(t)._append(E[e]._clone())},css:function(t,e,n){var r;if(t instanceof l&&(t=C.getNode(t)),void 0===n)return r=t.style[e].replace("px",""),h.isNumeric(r)?parseFloat(r):r;r=n+(h.isNumeric(n)?"px":""),t.style[e]!==r&&(t.style[e]=r)},formatObjects:function(t,e){var n=0,r=[];if(t.length>0)for(;n<t.length;n++)switch(e){case"shape":r.push(new u.Shape(t[n]));break;case"wrap":r.push(s.wrap(t[n]));break;case"$":r.push($(t[n]));break;default:r.push(t[n])}return r},translate:function(t,e,n){var r,i=t[0].getAttribute("transform")||"";return void 0===e?((r=N.get(i))||(r=A.getTranslate(i),N.set(i,r)),C.convertUnit(t,r)):(r={x:new u.Length(e),y:new u.Length(n)},(i=(i=-1===i.indexOf("translate")?i.indexOf("matrix")>-1?i.replace(/matrix\(.*?\)/,"translate("+r.x.px()+" "+r.y.px()+")"):"translate("+r.x.px()+" "+r.y.px()+")"+(""===i?"":" "+i):(i=i.replace(/matrix\(.*?\)/,"")).replace(/translate\(.*?\)/,"translate("+r.x.px()+" "+r.y.px()+")")).trim())?t[0].setAttribute("transform",i.trim()):t[0].removeAttribute("transform"),t)},isInputFocused:function(){return h("input:not(#hidden_input\\.id):focus, textarea:focus").length>0},attrs:function(t){var e={};return t.getAttributeNames().forEach((function(n){e[n]=t.getAttribute(n)})),e},clearIcon:function(t){var e=t._attr("class");e&&(e.split(" ").forEach((function(e){(e.indexOf(".lay")>-1||"Selected.cls"===e)&&t._removeClass(e)})),""===e?t._removeAttr("class"):t._attr("class",e)),["v:control","v:handle","v:symbol","v:formula","v:dep","v:showbox","v:menu","v:inc"].forEach((function(e){t._attr(e)&&t._removeAttr(e)}))},compare:function(t,e){var n=i(t),r=i(e);return n.type===r.type?0===n.type?n.str.length===r.str.length?n.begin-r.begin:n.str.length-r.str.length:1===n.type?void 0===n.begin?void 0!==r.begin?1:n.str.localeCompare(r.str):void 0===r.begin?-1:n.begin_str.length===r.begin_str.length?n.begin-r.begin:n.begin_str.length-r.begin_str.length:n.str.localeCompare(r.str):n.type-r.type;function i(t){var e,n,r={};return r.str=t+"",e=parseFloat(r.str),!isNaN(e)&&isFinite(r.str)?(r.type=0,r.begin=e,r.end=e):(""!==(n=/(^\d*)(.*?)(\d*$)/.exec(t))[1]&&(r.begin_str=n[1],r.begin=parseFloat(r.begin_str)),""!==n[3]&&(r.end_str=n[3],r.end=parseFloat(r.end_str)),""!==n[2]&&(r.mid=n[2]),void 0===r.begin&&void 0===r.end?r.type=2:r.type=1),r}},getText:function(t){var e="";return t._findTag("tspan")._each((function(t){var n=s.wrap(t.el[0]);e+=n.text()+("true"===n.attr("v:enter")?"\n":"")})),""===(e=e.replace(/\u00A0/g," "))&&(e=t._findTag("textPath")._text()),e},replaceImportedIDS:function(t){var e,n,r,i={};return(e=t.match(/ id="[^]*?"/g))&&((n=e.map((function(t){return{id:t.replace(/ id=|"/g,""),orphaned:!0,new_id:C.getID()}}))).forEach((function(t){i[t.id]=t})),r=t.match(/<style[^]*?<\/style>/g),t=o(t,'href="#','"',n,i),t=o(t,"url\\(#","\\)",n,i),t=o(t,'begin=".*?','.*?"',n,i),n.forEach((function(e){var n=new RegExp("#"+h.escape(e.id)+"([, {>~+])","g"),i=new RegExp('id="'+h.escape(e.id)+'"',"g");null!==r&&r.forEach((function(o,a){for(var s,c;s=n.exec(o);)e.orphaned=!1,t=t.replace(i,'id="'+e.new_id+'"'),c=o.replace(s[0],"#"+e.new_id+s[1]),t=t.replace(o,c),r[a]=c}))})),t=t.replace(new RegExp(n.filter((function(t){return t.orphaned})).map((function(t){return'id="'+("#"===t.id.charAt(0)?"#":"")+h.escape(t.id)+'"'})).join("|"),"g"),"")),t;function o(t,e,n,r,i){var o=[];return t.replace(new RegExp("("+e+")("+r.map((function(t){return h.escape(t.id)})).join("|")+")("+n+")","g"),(function(t,e,n,r){return i[n].orphaned=!1,-1===o.indexOf(n)&&o.push(n),e+i[n].new_id+r})).replace(new RegExp('id="('+o.join("|")+')"',"g"),(function(t,e){return'id="'+i[e].new_id+'"'}))}},applyLinearTransform:function(t,e){var n={x1:t._attr("x1")||0,y1:t._attr("y1")||0,x2:t._attr("x2")||0,y2:t._attr("y2")||0};return e.type===s.CONST.TRANS_TRANSLATE||1===e.a&&0===e.b&&0===e.c&&1===e.d||1===e.a&&0===e.b&&0===e.c&&-1===e.d||-1===e.a&&0===e.b&&0===e.c&&1===e.d||-1===e.a&&0===e.b&&0===e.c&&-1===e.d?(n.begin={x:e.a*n.x1+e.e,y:e.d*n.y1+e.f},n.end={x:e.a*n.x2+e.e,y:e.d*n.y2+e.f},n.confidence=1,n):e.type===s.CONST.TRANS_ROTATE||e.a===e.d&&e.b===0-e.c?(n.begin=T.matrix.point({x:n.x1,y:n.y1},e),n.end=T.matrix.point({x:n.x2,y:n.y2},e),n.confidence=1,n):(n.begin=T.matrix.point({x:n.x1,y:n.y1},e),n.end=T.matrix.point({x:n.x2,y:n.y2},e),n.pre_angle=T.angle(n.x1,n.y1,n.x2,n.y2),n.cen={x:.5*(n.end.x-n.begin.x),y:.5*(n.end.y-n.begin.y)},n.start={x:n.begin.x,y:n.begin.y+2*n.cen.y},n.pt=T.rotatePoint(n.start.x,n.start.y,n.begin.x+n.cen.x,n.begin.y+n.cen.y,90),n.mx=n.pt.x-(n.begin.x+n.cen.x),n.m=(n.pt.y-(n.begin.y+n.cen.y))/n.mx,n.post_angle=T.angle(n.begin.x,n.begin.y,n.end.x,n.end.y),(Math.abs(n.m)<.01||0===n.mx||Math.abs(n.pre_angle-n.post_angle)<3.5)&&(n.confidence=1),0!==n.m&&0!==n.mx&&Math.abs(n.pre_angle-n.post_angle)>3.5&&!1==(-1===e.a&&0===e.b&&0===e.c&&1===e.d)&&(n.offset=n.m*n.cen.x,0===Math.abs(n.offset)&&(n.confidence=1),Math.abs(n.offset)>.01&&Math.abs(n.offset)>Math.abs(n.cen.y)&&(n.begin.y=n.begin.y-(n.offset-n.cen.y),n.end.y=n.end.y+n.offset-n.cen.y)),Math.abs(Math.abs(e.a)-Math.abs(e.d))<.03&&Math.abs(n.mx)>.02&&(n.confidence=1),(Math.abs(e.b)>0&&Math.abs(e.c)>0||e.a===0-e.d&&Math.abs(n.offset)<Math.abs(n.cen.y))&&delete n.confidence,n)},createAnim:function(t,e,n){var r=t.json("v:anim"),i={},o={};return Object.keys(r).forEach((function(l){var f;if(r[l].target&&0===(f=s.page._findID("#"+h.escape(r[l].target))).length&&g.notify(s.lang.ui.no_target+" ("+t.id()+")","Error"),f&&f.length>0){switch(n||t.attr({cursor:"pointer"}),l){case"menu":!function(t,e,n,r,i){var o,s,l=t.id(),f=l+".click";s=("#"===e.target.charAt(0)?"":"#")+e.target,c(t,s,"display","none","inline",e.duration||.2,f),i&&c(t,s,"display","inline","none",.01,l+".mouseout",.01);o=a(t,e,n,r),u(t,s,"translate",.01,o,o,f)}(t,r[l],i,e,n);break;case"tip":!function(t,e,n,r){var i,o,s=t.id(),l=s+".mouseover+"+(e.delay||.3);o=("#"===e.target.charAt(0)?"":"#")+e.target,c(t,o,"display","none","inline",e.duration||.2,l),c(t,o,"display","inline","none",.01,s+".mouseout"),i=a(t,e,n,r),u(t,o,"translate",.01,i,i,l)}(t,r[l],i,e)}o[l]=o[l]||[],-1===o[l].indexOf(r[l].target)&&o[l].push(r[l].target)}})),o;function a(t,e,n,r){var i,o,a,c=t.moveU(),u=t.sizeU();return a={x:c.x+u.width+(e.offset_x||5),y:c.y+(e.offset_y||0)},void 0===n[e.target]&&(n[e.target]=s.wrap(s.page._findID("#"+h.escape(e.target))).sizeU()),i=a.x+n[e.target].width,o=a.y+n[e.target].height,i>r.width&&(a.x=c.x-n[e.target].width-5),o>r.height&&(a.y=r.height-n[e.target].height),a.x+" "+a.y}function c(t,e,n,r,i,o,a,c){var u={id:null,"xlink:href":e,attributeName:n,from:r,to:i,dur:o,begin:a,fill:"freeze"};void 0!==c&&(u.end=c),new s.Anim(null,t).attr(u)}function u(t,e,n,r,i,o,a){new s.AnimTrans(null,t).attr({id:null,"xlink:href":e,attributeName:"transform",type:n,dur:r,from:i,to:o,begin:a,fill:"freeze"})}},createSymbol:function(t,e,n,r){var i=null,o=function(t,e){var n,r,i,o,a,c=s.wrap(t),l=c._find("defs clipPath"),f=l?c.alignBox():c.box(),d=l?T.rotateBox(c.alignBox(),c.angle()):c.box(!0),h=u.activePage.scale(),v=function(t,e,n){var r={left:1,top:1,right:1,bottom:1};t.isGroup()?s.wrap(t).allSubs(!0).forEach((function(t){var e=T.boxToGlobal(t,!0),o=new u.Length(t.style("stroke-width")).px();"none"===t.style("stroke")&&(o=0),i(e.x,n.x)&&o>r.left&&(r.left=o),i(e.y,n.y)&&o>r.top&&(r.top=o),i(e.x+e.width,n.x+n.width)&&o>r.right&&(r.right=o),i(e.y+e.height,n.y+n.height)&&o>r.bottom&&(r.bottom=o)})):(r.left=new u.Length(s.wrap(t).prim().style("stroke-width")).px(),r.top=r.left,r.right=r.left,r.bottom=r.left);return[Math.ceil(n.width)+.5*(r.left+r.right),Math.ceil(n.height)+.5*(r.top+r.bottom),.5*r.left+(e.x-n.x),.5*r.top+(e.y-n.y)].join(",");function i(t,e){return Math.abs(t-e)<=1e3*s.CONST.TOLERANCE}}(t,f,d);u.trigger("_deSelectConn.Vecta"),r=s.wrap(t.$.clone()),o=r.json("v:guide"),a=r.json("v:formula"),(i=new u.Shape(r)).isGroup()?s.wrap(i).allSubs(!0,"shape").forEach((function(t){A.scaleStroke(t,1/h)})):A.scaleStroke(i,1/h);o.x&&(delete a["move.x"],delete o.x);o.y&&(delete a["move.y"],delete o.y);r.json("v:formula",a),r.json("v:guide",null),r.move(0,0)._removeClass("Selected.cls"),""===r._attr("class")&&r._attr("class",null);r._findClass("Selected.cls")._removeClass("Selected.cls"),r._find('[class=""]')._attr("class",null),r._attr({"v:size":v,"v:symbol":null,"v:symname":null,"v:symdesc":null,"v:connect":null,"v:cbegin":null,"v:cend":null}),A.setVLayer(r),r._find("g[v\\:symbol]")._attr("v:symbol",null),(n=r.allGhost())&&n.forEach((function(t){t.$.remove()}));0===t.$.children("svg").length&&($.each(r.$[0].attributes,(function(t){p(r,r.$[0].attributes[t])})),r.$.find("defs filter, defs clippath, defs marker").each((function(t,n){n.id="sym_"+e+"_"+n.id})),r._children().length>0&&function t(e){e._each((function(e){var n,r=e.el[0].attributes;$.each(r,(function(t){p(s.wrap(e.el[0]),r[t])})),e.el[0]&&"svg"===e.el[0].tagName.toLowerCase()||(n=e._children()).length>0&&t(n)}))}(r._children()));return r;function p(t,n){"href"===n.name||"xlink:href"===n.name?"use"===t.type()&&0===t.$.parent(".ConnPts\\.cls").length&&-1===t.attr(n.name).indexOf("#sym_")&&t.attr(n.name,"#sym_"+e+"_"+n.value.replace("#","")):n.value.indexOf("url(#")>-1&&t.attr(n.name,"url(#sym_"+e+"_"+n.value.replace(/^url\(#/,""))}}(t,e);if(0===o.$.children("svg").length&&(i=function(t,e){var n,r=[],i=[],o=t.$[0].attributes,a=new s.Defs(null,s.doc);$.each(o,(function(e){var n=u(o[e],t.$,a);n&&-1===$.inArray(n[0].id,r)&&(i.push(n),r.push(n[0].id))})),(n=h(t.$[0])._children()).length>0&&c(n,a);return(i=i.reduce((function(t,e){return t.concat(e.toArray())}),[])).length>0?h.parseSVG("<defs />")._append(i)._$():null;function c(t,e){t._each((function(t){var n,o=t._$(),a=t.el[0].attributes;$.each(a,(function(t){var n=u(a[t],o,e);n&&n.length>0&&-1===r.indexOf(n[0].id)&&(i.push(n),r.push(n[0].id))})),t.el[0]&&"svg"===t.el[0].tagName.toLowerCase()||(n=t._children()).length>0&&c(n,e)}))}function u(t,n,r){var i,o,a,c=t.value;return"xlink:href"!==t.name&&"href"!==t.name||(i=r.$.find("#"+h.escape(c)).clone()),c.indexOf("url(#")>-1&&(c=c.replace(/^url\(#/,"").replace(/\)$/,""),"filter"===t.name||"clip-path"===t.name||["marker-mid","marker-start","marker-end"].indexOf(t.name)>-1?(o=n.parent("g[id]")).length>0&&(i=new s.Defs(null,o).$.find("#"+h.escape(c)).clone(),(a=h(i)._find("use")).length>0&&(a.el[0].hasAttribute("xlink:href")&&a._attr("xlink:href","#sym_"+e+"_"+a._attr("xlink:href").replace("\\.",".").replace("#","")),a.el[0].hasAttribute("href")&&a._attr("href","#sym_"+e+"_"+a._attr("href").replace("\\.",".").replace("#","")))):i=r.$.find("#"+h.escape(c)).clone()),i&&i.length>0&&i.attr("id","sym_"+e+"_"+c.replace("\\.",".").replace("#","")),i}}(t,e),i=function(t,e){var n=[],r=A.getUsedFonts(t,!0),i=h.parseSVG("<style></style>");r.forEach((function(t){n.push('@import url("'+t+'"); ')})),n.length&&(i._text(n.join("")),null===e?e=h.parseSVG("<defs></defs>")._append(i)._$():e.prepend(i.el[0]));return e}(t,i)),function(t,e,n,r,i){var o,a,c,u,l=t.attr("v:size").split(","),f=n?n.$:n,d=f?f.find("[data-sym="+r+"]"):[];0===d.length&&(d=$('<div class="Symbol.cls" data-sym="'+r+'"></div>'),f?"number"==typeof i&&i>-1?0===(a=f.find("div.Symbol\\.cls").eq(i)).length?f.find(".Help\\.cls").before(d):d.insertBefore(a):f.find(".Help\\.cls").before(d):$("#stencils\\.id").append(d));o=new s.SVG(null,d).id(null).viewBox(0,0,parseFloat(l[0]),parseFloat(l[1])),c=new s.Symbol(null,o.$).id(r+".sym"),u=new s.Group(null,o).id(null),new s.Title(u).text(s.lang.stencil.untitled_symbol).id(null),new s.Title(c).text(s.lang.stencil.untitled_symbol).id(null),new s.Use(null,u).id(null).link(r+".sym").move(parseFloat(l[2]),parseFloat(l[3])),null!==e&&o.append(e[0]);t.$.find("use").each((function(t,e){e.removeAttribute("xmlns:xlink")})),c.append(t.$[0]),o.append(c.$[0]),d.attr("data-sym",null),d.append($('<div class="Info.cls">'+s.lang.stencil.untitled_symbol+"</div>")),A.symbols.sanitize(h(o[0]))}(o,i,r,e,n),void 0===r)return new u.Symbol(e)},getBBox:function(t,e){var n,r,i,o;if("rect"===t.tagName)n={x:0,y:0,width:t.width.baseVal.value,height:t.height.baseVal.value};else{try{r=0===(n=t.getBBox()).x&&0===n.y&&0===n.width&&0===n.height}catch(t){r=!0}r&&(void 0===b&&(b=h("body")),o=h.parseSVG("<svg></svg>"),b._append(o),i=h(t)._clone(),o._append(i),n=i.el[0].getBBox(),e&&0===n.x&&0===n.y&&0===n.width&&0===n.height&&(o._append(e._clone()),n=i.el[0].getBBox()),o._remove())}return n},getBox:function(t){var e,n={left:[],top:[],right:[],bottom:[]},r={};return 0===t.length?null:(t.forEach((function(t){e=t.isChild()?T.boxToGlobal(t,!0):t.box(),n.left.push(e.x),n.top.push(e.y),n.right.push(e.x+e.width),n.bottom.push(e.y+e.height)})),r.x=Math.min.apply(null,n.left),r.y=Math.min.apply(null,n.top),r.width=Math.max.apply(null,n.right)-r.x,r.height=Math.max.apply(null,n.bottom)-r.y,r)},setDashArray:function(t,e,n){return n=n||u.activePage.scale(),t=String(t),e*=n,t=t.split(" ").map((function(t){return parseFloat(t)*e})).join(" ")},loadIcons:function(t,e,n){var r={url:t,dataType:"text"};return g.showMessage(s.lang.ui.load_drawing+"...",!0),n&&(r.url="/app/noauth.php",r.data={mode:"load_icons",state:g.queryString("state"),file:t}),$.ajax(r).then((function(t){e?e(t):A.setIcons(t),g.hideMessage()})).catch((function(t){console.error("Ajax failure when loading UI:",t.responseText||t)}))},setIcons:function(t){var e,n=h("body"),r=h("#bar_top\\.id");function i(t,e){var n=h.parseHTML("<li"+(e?' id="'+e+'"':"")+"></li>");return a(t,n,"class"),n._addClass("Toggle.cls"),t._children()._each((function(t){n._append(o(t,"div"))})),n}function o(t,e,n){var r,i,o,c;return e=e||"li",r=null!==(r=(o=t._find("[v\\:text]"))._attr("v:text"))?void 0===s.lang.drop[r]?r:s.lang.drop[r]:"",i=h.parseHTML("<"+e+">"+r+"</"+e+">"),(c=t._find('[v\\:type="icon"]')).length>0&&(c._removeAttr("v:type"),i._prepend(c),c._addClass("Icon.cls")),o._hasAttr("v:key")&&i._append('<span class="Shortcut.cls">'+o._attr("v:key")+"</span>"),a(t,i,"class"),a(t,i,"id"),a(t,i,"v:value","data-value"),n&&i._addClass("Check.cls"),i}function a(t,e,n,r){var i=t._attr(n);null!==i&&(r=r||n,e._attr(r,i),t._removeAttr(n))}function c(t,e){var n,r,i={};t._addClass("Drop.cls"),A.insertDropMaster(t.el[0]),l(t),void 0!==e&&0!==e.length&&(r=e._attr("class"),n=h.parseHTML('<ul id="'+t.el[0].id.replace(".icon",'.drop"')+(void 0===r?"":' class="'+r+'"')+"></ul>"),i.width=e.el[0].width.baseVal.valueAsString,i.height=e.el[0].height.baseVal.valueAsString,e._children()._each((function(t){var e,r,o,c=!1,u=t.el[0],f=t._attr("id");"separator"===t._attr("v:type")?n._append(h.parseHTML("<div"+(f?' id="'+f+'"':"")+' class="Separator.cls'+(void 0!==t._attr("class")?" "+t._attr("class"):"")+'"></div>')):(l(t),t._attr("v:text")?(e=h.parseHTML("<li>"+s.lang.drop[t._attr("v:text")]+"</li>"),c=!0):(0!==(o=t._find("svg[v\\:text]")).length?(r=o._attr("v:text"),r=s.lang.drop[r]?s.lang.drop[r]:r,o._remove(),e=h.parseHTML('<li class="MenuItem.cls"></li>')):e=h.parseHTML("<li></li>"),"100%"!==i.width&&"100%"===u.width.baseVal.valueAsString&&(u.width.baseVal.valueAsString=i.width),"100%"!==i.height&&"100%"===u.height.baseVal.valueAsString&&(u.height.baseVal.valueAsString=i.height)),a(t,e,"class"),a(t,e,"v:value","data-value"),n._append(c?e:e._append(t)),e._html(e._html()+(r?"<div>"+r+"</div>":"")))})),h("body")._append(n._addClass("Dropdown.cls")))}function l(t){var e,n,r=t._findTag("text");0!==r.length&&"@"===(e=(n=s.wrap(r)).text()).charAt(0)&&n.text(s.lang.ui[e.replace("@","")])}t=t.replace(/\r?\n|\r|\t/g,""),h.parseSVG(t)._find("svg[v\\:target]")._each((function(t){var e,r,f=h.escape(t._attr("v:target")),d=t._attr("class"),v=h("#"+f),p=h(document.createDocumentFragment());0===v.length&&f&&".menu"===f.substring(f.length-5,f.length)&&(v=h.parseHTML('<ul id="'+t._attr("v:target")+'" class="Menu.cls"></ul>'),n._append(v)),d&&v._addClass(d),t._children()._each((function(t){var f,d,g,m=t._attr("v:type"),y=t._attr("id");if(e=t._attr("v:pad")||"append",r=t._attr("v:label")||"","delete"!==t._attr("v:action"))switch(t._removeAttr("v:type")._removeAttr("v:pad")._removeAttr("v:label"),m){case"logo":!function(t,e){switch(t.el[0].id){case"header.id":t._findID("header_logo.id")._replaceWith(e._attr("v:type",null));break;case"bar_bottom.id":t._find("#vecta\\.io h1")._replaceWith(e._attr("v:type",null)._addClass("Logo.cls"))}}(v,t);break;case"menu":!function(t,e,n,r){var i=h.parseHTML("<div>"+s.lang.ui[n._children()._eq(0)._attr("v:text")]+"</div>");n._hasAttr("class")&&i._addClass(n._attr("class"));null!==r&&i._attr("id",r);t._append(i)}(p,0,t,y);break;case"toggle":p._append(i(t,y));break;case"check":p._append(o(t,"li",!0));break;case"sub":(g=h.getOrMake(n,"#"+h.escape(t.el[0].id),"ul"))._addClass("SubMenu.cls")._addClass(t._attr("class")),d=t._attr("class"),t._children()._each((function(e,n){var r;if(0===n)(r=o(e))._addClass("SubMenu.cls"+(null==d?"":" "+d)+" Menu.cls")._attr("data-id",t.el[0].id),r._append(h.parseSVG(s.CONST.SUB_MENU)),p._append(r);else switch(e._attr("v:type")){case"toggle":g.append(i(e,e._attr("id")));break;case"item":g.append(o(e));break;case"separator":g._append(h.parseHTML('<div class="Separator.cls"></div>'))}}));break;case"item":p._append(o(t));break;case"separator":!function(t,e,n,r){t._append(h.parseHTML("<div"+(r?' id="'+r+'"':"")+' class="Separator.cls'+(null!==n._attr("class")?" "+n._attr("class"):"")+'"></div>'))}(p,0,t,y);break;case"drop":!function(t,e,n,r,i){var o,a=h.parseHTML('<div class="Drop.cls"></div>');null!==n._attr("class")&&a._addClass(n._attr("class"));null!==r&&a._attr("id",r);switch(r){case"zoom_level.icon":a._append(h.parseHTML("<span></span>")),c(a);break;case"videos.icon":a._append(h.parseHTML("<span>"+s.lang.drop.tutorial_vid+"</span>")),c(a);break;case"pages.icon":a._append(h.parseHTML('<div class="Hide.cls">'+s.go.encode(u.activePage.$.attr("v:name")||"")+"</div>")),c(a);break;case"create.icon":a._append(n._find('[v\\:type="icon"]')._removeAttr("v:type")),a._append(h.parseHTML("<span>"+s.lang.ui.create+"</span>")),c(a,n._find('[v\\:type="dropbody"]'));break;default:a._append(n._find('[v\\:type="icon"]')._removeAttr("v:type")._removeAttr("v:label")),i&&(s.lang.tools&&(o=s.lang.tools[i]),a._append(h.parseHTML("<span>"+o+"</span>")),a._addClass("Label.cls")),c(a,n._find('[v\\:type="dropbody"]'))}null!==n._attr("v:group")&&(a._attr("data-group",n._attr("v:group"))._addClass("IconRadio.cls"),n._removeAttr("v:group"));t._append(a)}(p,0,t,y,r);break;case"pad":p._append(t._addClass("Pad.cls"));break;case"button":!function(t,e,n,r){var i;i=h.parseHTML("<button"+(r?' id="'+r+'"':"")+">"+s.lang.ui[n._children()._eq(0)._attr("v:text")]+"</button>"),a(n,i,"class"),a(n,i,"id"),t._append(i)}(p,0,t,y);break;case"icon":case"radio":!function(t,e,n,r,i,o){var c,u=h.parseHTML("<div></div>");a(n,u,"class"),a(n,u,"id"),"radio"===o?(u._attr("data-group",n._attr("v:group"))._addClass("IconRadio.cls"),n._removeAttr("v:group")):u._addClass("Icon.cls");l(n),u._append(n),i&&(s.lang.tools&&(c=s.lang.tools[i]),u._append(h.parseHTML("<span>"+c+"</span>")),u._addClass("Label.cls"));t._append(u)}(p,0,t,0,r,m);break;case"master":0===(f=h("#dummy\\.id #masters\\.id defs")).length&&(h("#dummy\\.id #masters\\.id")._append(h.parseHTML("<defs></defs>")),f=h("#dummy\\.id #masters\\.id defs")),f._append(t)}else y?v._findID(y)._remove():t._attr("v:value")&&v._find('[data-value="'+t._attr("v:value")+'"]')._remove()})),"append"===e&&v._append(p)})),r._append(r._findID("expand.icon")),e=s.CONST.THUMB_SIZE+1,h(".HRange\\.cls")._each((function(t){var n,r=t._css("width")||200,i=h.getOrMake(t,"svg","svg",{width:"100%",height:17}),o=h.getOrMake(i,".HRTrack\\.cls","rect",{y:7,height:4,rx:2,stroke:"none",fill:"#c0c0c0"}),a=h.getOrMake(i,".HRThumb\\.cls","circle",{cx:e,cy:9,r:s.CONST.THUMB_SIZE,stroke:"#2196f3",fill:"transparent"});n=.5*A.getBBox(a.el[0]).width||s.CONST.THUMB_SIZE,o._attr({x:n,width:r-2*n}),null!==t._attr("data-value")&&A.range.value(t._$(),t._attr("data-value"))})),h(".VRange\\.cls")._each((function(t){var n,r=t._css("height")||200,i=h.getOrMake(t,"svg","svg",{width:20,height:"100%"}),o=h.getOrMake(i,".VRTrack\\.cls","rect",{x:9,width:2,stroke:"none",fill:"#c0c0c0"}),a=h.getOrMake(i,".VRThumb\\.cls","circle",{cx:10,cy:e,r:s.CONST.THUMB_SIZE,stroke:"#2196f3",fill:"transparent"});o({y:n=.5*A.getBBox(a.el[0]).height||s.CONST.THUMB_SIZE,height:r-2*n}),null!==t._attr("data-value")&&A.range.value(t._$(),t._attr("data-value"))})),h(".CRange\\.cls")._each((function(t){var n=.5*(t._css("width")||100),r=h.getOrMake(t,"svg","svg",{width:"100%",height:"100%"},!0);h.getOrMake(r,".CRTrack\\.cls","circle",{cx:"50%",cy:"50%",r:n-e,stroke:"#c0c0c0",fill:"transparent"}),h.getOrMake(r,".CRThumb\\.cls","circle",{cx:n,cy:e,r:s.CONST.THUMB_SIZE,stroke:"#2196f3",fill:"transparent"}),null!==t._attr("data-value")&&A.range.value(t._$(),t._attr("data-value"))})),h(".Radio\\.cls")._each((function(t){0===t._findClass("RAThumb.cls").length&&t._prepend(h.parseSVG(s.CONST.RADIO_SVG))})),u.trigger("_windowResize.Vecta").trigger("_UILoaded.Vecta")},toSVG:function(t){var e;return e=["<",t.tag," ",Object.keys(t.attrs).map((function(e){return[e,'="',t.attrs[e],'"'].join("")})).join(" "),">"].join(""),e+=[t.text?t.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"):"",t.children.map((function(t){return A.toSVG(t)})).join("")].join(""),e+=["</",t.tag,">"].join("")},nodes2DOM:function(t,e){for(var n,r=Object.keys(t).length-1;r>=0;r--)i(r,t[r]);return n;function i(t,r){var i,o=r.node;switch(t){case 0:o!==s.CONST.CDATA&&(n=n||{},o=s.CONST.CDATA,n[t]=s.CONST.CDATA),i=$("<style></style>").append(s.utils.CDATA(o))[0];break;case 1:"string"==typeof o?(i=h.parseSVG(o)._$(),n=n||{},i.children().each((function(e,r){var i=(r.id||"").replace(/\./g,"__")||r.tagName.toLowerCase();n[t]=n[t]||{},n[t][i]=h.serialize(r)}))):(o="<defs>"+(o=Object.keys(r.node).reduce((function(t,e){return"style"===e?t=r.node[e]+t:t+=r.node[e],t}),""))+"</defs>",i=h.parseSVG(o)._$()),s.CONST.FONTS.DEFAULT.forEach((function(t){var e=o.match(/@import/g),n=i.find("style"),r=n.html();-1===o.indexOf(t)&&e&&(t+=":400,400i,700,700i",1===(e||[]).length?r=r.replace(");","|"+t+");"):r+="@import url('"+s.CONST.FONTS.GOOGLE_URL+"/css?family="+t+"');",n.html(r))}));break;case 2:case 3:i=$(o)}e.prepend(i)}},getPageArea:function(t,e){var n,r=[];function i(t,e,n,r){var i,o=T.boxToGlobal(t,!0);i=t.isGroup()||"none"===t.stroke()?0:new u.Length(t.strokeWidth()).px(),function(t,e,n,r){var i,o,a;""!==t.text()&&(i=e.getTextBlock(),a=T.rotateBox(A.getBBox(e.getText().$[0],e),T.angleToGlobal(i)),o={x:a.x+.5*a.width,y:a.y+.5*a.height},o=i.toGlobal(o.x,o.y,r),a.x=o.x-.5*a.width,a.y=o.y-.5*a.height,n.push(a))}(t,e,n,r),o.x-=.5*i,o.y-=.5*i,o.width+=i,o.height+=i,n.push(o)}t.full_page?(e=e||u.activePage,t.offset={x:.5,y:.5},t.width=Math.ceil(e.widthU()),t.height=Math.ceil(e.heightU()),t.vb={width:Math.ceil(e.widthU()*e.scale()),height:Math.ceil(e.heightU()*e.scale())}):(t.shapes.forEach((function(t){var n=s.wrap(t);i(t,n,r,e),t.isGroup()&&n.allSubs().forEach((function(t){i(t,s.wrap(t),r,e)}))})),n=T.mergeBoxes(r),t.offset={x:n.x,y:n.y},t.width=Math.ceil(n.width),t.height=Math.ceil(n.height),t.vb={width:Math.ceil(n.width),height:Math.ceil(n.height)})},setFileName:function(t){var e,n=h("head title"),r=h("#noti\\.icon text");e=t+" - "+s.lang.ui.app_name,r.length>0&&("+99"===r._text()||Number(r._text())>0)&&(e="("+r._text()+") "+e),n._text(e),window.history&&window.history.replaceState({},e,window.location.href),h("#header\\.id #file_name\\.icon")._val(t),s.doc._children("title")._text(t)},path:{offsetSegment:function(t,e,n){return void 0!==t.x&&(t.x=r(t.x,e)),void 0!==t.y&&(t.y=r(t.y,n)),void 0!==t.x1&&(t.x1=r(t.x1,e)),void 0!==t.y1&&(t.y1=r(t.y1,n)),void 0!==t.x2&&(t.x2=r(t.x2,e)),void 0!==t.y2&&(t.y2=r(t.y2,n)),t;function r(t,e){var n=i(t),r=i(e);return r>n&&(n=r),n>10&&(n=13),T.round(t+e,n);function i(t){var e,n;if(!isFinite(t))return 0;for(e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}}},offset:function(t,e,n){return T.matrix.list(t,{a:1,b:0,c:0,d:1,e:e,f:n})},expansion:function(t,e,n){var r,i={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return(i.x>=0||i.y>=0)&&(r=t.box()),i.x>=0&&(i.x=Math.max(e.x,n.x)-r.width,i.x=i.x<0?0:i.x),i.y>=0&&(i.y=Math.max(e.y,n.y)-r.height,i.y=i.y<0?0:i.y),i},refreshPrimVector:function(t,e,n){var r={x:n.x<0?n.x:0,y:n.y<0?n.y:0},i=0;if(r.x<0||r.y<0){for(;i<e.length;i++)S.offsetSegment(e[i],-r.x,-r.y);t.list(e)}return r},refreshShapeVector:function(t,e){var n,r,i=s.wrap(t),o=i.angleEX(),a=o&&0!==o.angle,c={x:0,y:0},u=0,l=1,f={};a&&(n=T.rad(o.angle),u=Math.sin(n),l=Math.cos(n)),0!==e.x&&(f.x=.5*e.x,c.y+=f.x*u,c.x+=f.x*l+(f.x<0?f.x:0-f.x)),0!==e.y&&(f.y=.5*e.y,c.x+=0-f.y*u,c.y+=f.y*l+(f.y<0?f.y:0-f.y)),r=i.moveU(),i.move(r.x+c.x,r.y+c.y),!a||0===f.x&&0===f.y||i.angle(o.angle)},rotate:function(t,e,n,r){return t.forEach((function(t){var i;"z"!==t.type&&"Z"!==t.type&&(i=T.rotatePoint(t.x,t.y,e,n,r),t.x=i.x,t.y=i.y,void 0!==t.x1&&(i=T.rotatePoint(t.x1,t.y1,e,n,r),t.x1=i.x,t.y1=i.y),void 0!==t.x2&&(i=T.rotatePoint(t.x2,t.y2,e,n,r),t.x2=i.x,t.y2=i.y))})),t},reverse:function(t){var e,n,r,i=[],o="Z"===t[t.length-1].type.toUpperCase()?t.pop():null;for(r=t.length-1;r>=0;r--)void 0===e?i.push({type:"M",x:t[r].x,y:t[r].y}):(n={type:e.type},void 0!==t[r].x&&(n.x=t[r].x,n.y=t[r].y),void 0!==e.x1&&(n.x1=void 0===e.x2?e.x1:e.x2,n.y1=void 0===e.y2?e.y1:e.y2),void 0!==e.x2&&(n.x2=e.x1,n.y2=e.y1),i.push(n)),e=t[r];return o&&("L"===i[i.length-1].type.toUpperCase()&&(n=i.pop()),i.push(o),n.x!==i[0].x&&n.y!==i[0].y&&(i[1].type="L",n.type="M",i.splice(0,0,n))),i},split:function(t,e){var n,r=[],i=[];return"L"===t[1].type?(n=T.getPointOnSegment(t,e),[[{type:"M",x:t[0].x,y:t[0].y},{type:"L",x:n.x,y:n.y}],[{type:"M",x:n.x,y:n.y},{type:"L",x:t[1].x,y:t[1].y}]]):(function t(e,n,r,i){var o=[],a=1;if(r.push(e[0]),i.push(e[e.length-1]),1===e.length)return[r,i];for(;a<e.length;a++)o.push({x:e[a-1].x+(e[a].x-e[a-1].x)*n,y:e[a-1].y+(e[a].y-e[a-1].y)*n});return t(o,n,r,i)}(S.curve2Points(t),e,r,i),[S.points2Curve(r),S.reverse(S.points2Curve(i))])},segmentize:function(t){for(var e,n,r=[],i=t[0],o=1;o<t.length;o++)switch(e=t[o-1],(n=t[o]).type.toUpperCase()){case"Q":r.push([{type:"M",x:e.x,y:e.y},{type:"Q",x1:n.x1,y1:n.y1,x:n.x,y:n.y}]);break;case"C":r.push([{type:"M",x:e.x,y:e.y},{type:"C",x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,x:n.x,y:n.y}]);break;case"L":r.push([{type:"M",x:e.x,y:e.y},{type:"L",x:n.x,y:n.y}]);break;case"Z":e.x===i.x&&e.y===i.y||r.push([{type:"M",x:e.x,y:e.y},{type:"L",x:i.x,y:i.y}]),o!==t.length-1&&(i=t[o+1])}return r},clone:function(t){return t.map((function(t){var e={};return e.type=t.type,void 0!==t.x&&(e.x=t.x,e.y=t.y),void 0!==t.x1&&(e.x1=t.x1,e.y1=t.y1),void 0!==t.x2&&(e.x2=t.x2,e.y2=t.y2),e}))},getClosedLists:function(t){var e=[],n=[];return t.forEach((function(t){n.push(t),"z"!==t.type&&"Z"!==t.type||(e.push(n),n=[])})),e},refresh:function(t){var e,n=s.wrap(t),r=n.prim(),i=n.ghost();r.move(0,0),i?A.prim2Ghost(r,i):n.makeGhost(r),null!==(e=t.beginArrow())&&t.beginArrow(e),null!==(e=t.endArrow())&&t.endArrow(e)},seg2Str:function(t){var e;switch(t.type){case"m":case"M":case"l":case"L":case"t":case"T":return[t.type,t.x,t.y].join(" ");case"z":case"Z":return t.type;case"h":case"H":return[t.type,t.x].join(" ");case"v":case"V":return[t.type,t.y].join(" ");case"c":case"C":return[t.type,t.x1,t.y1,t.x2,t.y2,t.x,t.y].join(" ");case"s":case"S":return[t.type,t.x2,t.y2,t.x,t.y].join(" ");case"q":case"Q":return[t.type,t.x1,t.y1,t.x,t.y].join(" ");case"a":case"A":return e=[t.type,t.rx,t.ry,t.xAxisRotation],null!==t.largeArcFlag&&e.push(t.largeArcFlag),null!==t.sweepFlag&&e.push(t.sweepFlag),e.push(t.x,t.y),e.join(" ")}},list2Str:function(t){return t.map((function(t){return S.seg2Str(t)})).join(" ")},str2ListOld:function(t,e,n,r){var i,o,a,c,u=[],l=/[a-z] *(?:-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?[ ,]*)*/gi,f={x:0,y:0,z:-1},d={m:["x","y"],M:["x","y"],l:["x","y"],L:["x","y"],t:["x","y"],T:["x","y"],q:["x1","y1","x","y"],Q:["x1","y1","x","y"],c:["x1","y1","x2","y2","x","y"],C:["x1","y1","x2","y2","x","y"],s:["x2","y2","x","y"],S:["x2","y2","x","y"],h:["x"],H:["x"],v:["y"],V:["y"],a:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"]};if(null!==t){if(i=t+e+n+r,o=M.get(i))return o;null!==(c=(t=(t=t.replace(/ +(0+)[^ \.]/g,(function(t){return t.split("").join(" ")}))).replace(/\s+/g," ")).match(/([mzlhvcsqta][ 0-9.e\-,]*)/gi))&&(r=void 0===r||r,null!=(a=e)&&(a=a.match(l),c[0]=a[0],a[1]&&(c[1]=a[1])),null!=(a=n)&&(a=a.match(l),c[c.length-1]=a[0],a[1]&&(c[c.length-2]=a[0],c[c.length-1]=a[1])),c.forEach((function(t){var e,n=t.charAt(0),i=d[n],o=0;switch(t=t.replace(n,""),e=t.match(/-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?/gi),n){case"m":case"M":f.z=u.length-1;break;case"z":case"Z":u.push({type:"Z"}),f.x=u[f.z+1].x,f.y=u[f.z+1].y,f.z=u.length-1}if(e)if("A"===n.toUpperCase()&&e.length%7!=0)for(;e.length;){var c=Number(e[0]),l=i[o];0===o&&(a={type:n.toUpperCase()}),"sweepFlag"!==l&&"largeArcFlag"!==l||"0"===e[0]||"1"===e[0]||!/^1|^0/.test(e[0])?"largeArcFlag"===l&&0!==c&&1!==c||"sweepFlag"===l&&0!==c&&1!==c?a[l]=null:(a[l]=c,e.shift()):(a[l]=Number(e[0][0]),e[0]=e[0].replace(/^1|^0/,"")),o++,"y"===l&&(n===n.toLowerCase()&&(a=S.offsetSegment(a,f.x,f.y)),h.isArray(a)?u=u.concat(a):u.push(a),f.type=u[u.length-1].type,f.x=u[u.length-1].x,f.y=u[u.length-1].y,o=0)}else for(;o<e.length/i.length;o++){switch(a={type:n.toUpperCase()},i.forEach((function(t,n){a[t]=Number(e[o*i.length+n])})),n===n.toLowerCase()&&(a=S.offsetSegment(a,f.x,f.y)),n){case"m":case"M":a.x===s.CONST.MINISCULE&&(a.x=0),a.y===s.CONST.MINISCULE&&(a.y=0),n="m"===n?"l":"L";break;case"t":case"T":a.type="Q",a.x1=0===u.length||"Q"!==f.type?f.x:2*f.x-u[u.length-1].x1,a.y1=0===u.length||"Q"!==f.type?f.y:2*f.y-u[u.length-1].y1;break;case"s":case"S":a.type="C",a.x1=0===u.length||"C"!==f.type?f.x:2*f.x-u[u.length-1].x2,a.y1=0===u.length||"C"!==f.type?f.y:2*f.y-u[u.length-1].y2;break;case"h":case"H":a.type="L",a.y=f.y;break;case"v":case"V":a.type="L",a.x=f.x;break;case"a":case"A":a=r?T.arc2Cubic(f,a):a}h.isArray(a)?u=u.concat(a):u.push(a),f.type=u[u.length-1].type,f.x=u[u.length-1].x,f.y=u[u.length-1].y}}))),M.set(i,u)}return u},str2List:function(t,e,n,r){var i,o,a,c,u,l,f,d,h,v=/([mzlhvcsqta])([ 0-9.e\-,]*)/gi,p=/-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?/gi,g={x:0,y:0},m={},y=[],x=["m","z","l","h","v","c","s","q","t","a"],k=[],w={x:"x",x1:"x",x2:"x",y:"y",y1:"y",y2:"y"},b={m:["x","y"],M:["x","y"],l:["x","y"],L:["x","y"],t:["x","y"],T:["x","y"],q:["x1","y1","x","y"],Q:["x1","y1","x","y"],c:["x1","y1","x2","y2","x","y"],C:["x1","y1","x2","y2","x","y"],s:["x2","y2","x","y"],S:["x2","y2","x","y"],h:["x"],H:["x"],v:["y"],V:["y"],a:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"]};if(t){for(0,r=void 0===r||r,h=0,e&&(i=e.match(v))&&i.forEach((function(t){k.push({type:t.charAt(0),nums:t.slice(2)})}));i=v.exec(t);){if(b[o=h<=1&&e&&k[h]?k[h].type:i[1]]){for(a=(a=h<=1&&e&&k[h]?k[h].nums:i[2]).match(p),c=b[o].length,"A"!==o&&"a"!==o||M(a),u=0;u<a.length;u++){if(0===(l=u%c)){if(f)switch(g=_(r,y,f,m),o){case"m":o="l";break;case"M":o="L"}f={type:o.toUpperCase()}}f[d=b[o][l]]=Number(a[u]),x.indexOf(o)>-1&&w[d]&&(f[d]=Number(a[u])+g[w[d]])}g=_(r,y,f,m),f=void 0}else g=_(r,y,{type:"Z"},m);h<=1&&h++}n&&(y=function(t,e,n){var r=e.match(n),i=[];r&&(r.forEach((function(t){var e=t.split(" ");switch(e[0]){case"L":i.push({type:"L",x:Number(e[1]),y:Number(e[2])});break;case"C":i.push({type:"C",x1:Number(e[1]),y1:Number(e[2]),x2:Number(e[3]),y2:Number(e[4]),x:Number(e[5]),y:Number(e[6])});break;case"Q":i.push({type:"Q",x1:Number(e[1]),y1:Number(e[2]),x:Number(e[3]),y:Number(e[4])})}})),1===i.length?t[t.length-1]=i[0]:(t[t.length-2]=i[0],t[t.length-1]=i[1]));return t}(y,n,v))}return y;function M(t){for(var e,n=3;t[n];)t[n].length>1&&(e=t[n],t[n]=e.charAt(0),t.splice(n+1,0,e.charAt(1)),e.length>2&&t.splice(n+2,0,e.substr(2))),n+=7}function _(t,e,n,r){var i;switch(n.type){case"z":case"Z":e.push(n),n=r.m;break;case"m":case"M":n.x===s.CONST.MINISCULE&&(n.x=0),n.y===s.CONST.MINISCULE&&(n.y=0),e.push(n),r.m=n;break;case"l":case"L":n.type="L",e.push(n);break;case"v":case"V":n.type="L",n.x=g.x,e.push(n);break;case"h":case"H":n.type="L",n.y=g.y,e.push(n);break;case"t":case"T":n.type="Q",n.x1=0===e.length||"Q"!==g.type?g.x:2*g.x-e[e.length-1].x1,n.y1=0===e.length||"Q"!==g.type?g.y:2*g.y-e[e.length-1].y1,e.push(n);break;case"s":case"S":n.type="C",n.x1=0===e.length||"C"!==g.type?g.x:2*g.x-e[e.length-1].x2,n.y1=0===e.length||"C"!==g.type?g.y:2*g.y-e[e.length-1].y2,e.push(n);break;case"a":case"A":t?(i=T.arc2Cubic(g,n),!1===Array.isArray(i)&&(i=[i]),i.forEach((function(t){e.push(t)})),n=i[i.length-1]):e.push(n);break;default:e.push(n)}return n}},simplify:function(t,e){var n;return t.length<=2?t:function(t){var e,n,i,o,a=0,s=[],c=[];if(2===t.length)e={x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2},t[1].type="C",n=T.rotatePoint(e.x,e.y,t[0].x,t[0].y,10),t[1].x1=n.x,t[1].y1=n.y,n=T.rotatePoint(e.x,e.y,t[1].x,t[1].y,10),t[1].x2=n.x,t[1].y2=n.y;else{for(;a<t.length;a++)s.push(t[a].x),c.push(t[a].y);for(i=r(s),o=r(c),a=1;a<t.length;a++)t[a].type="C",t[a].x1=i.p1[a-1],t[a].y1=o.p1[a-1],t[a].x2=i.p2[a-1],t[a].y2=o.p2[a-1]}return t}(function(t,e){var n=t.length-1,r=[t[0]];return i(t,0,n,e,r),r.push(t[n]),r}(function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)n=t[o],c=r,u=void 0,l=void 0,u=(s=n).x-c.x,l=s.y-c.y,u*u+l*l>e&&(i.push(n),r=n);var s,c,u,l;r.x===n.x&&r.y===n.y||i.push(n);return i}(t,n=void 0!==e?e*e:20),n));function r(t){var e,n,r=[],i=[],o=t.length-1,a=[],s=[],c=[],u=[];for(a[0]=0,s[0]=2,c[0]=1,u[0]=t[0]+2*t[1],e=1;e<o-1;e++)a[e]=1,s[e]=4,c[e]=1,u[e]=4*t[e]+2*t[e+1];for(a[o-1]=2,s[o-1]=7,c[o-1]=0,u[o-1]=8*t[o-1]+t[o],e=1;e<o;e++)n=a[e]/s[e-1],s[e]=s[e]-n*c[e-1],u[e]=u[e]-n*u[e-1];for(r[o-1]=u[o-1]/s[o-1],e=o-2;e>=0;--e)r[e]=(u[e]-c[e]*r[e+1])/s[e];for(e=0;e<o-1;e++)i[e]=2*t[e+1]-r[e+1];return i[o-1]=.5*(t[o]+r[o-1]),{p1:r,p2:i}}function i(t,e,n,r,o){for(var a,s,c,u,l,f,d,h,v,p,g=r,m=e+1;m<n;m++)c=t[m],u=t[e],l=t[n],f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,d=u.x,h=u.y,v=l.x-d,p=l.y-h,0===v&&0===p||((f=((c.x-d)*v+(c.y-h)*p)/(v*v+p*p))>1?(d=l.x,h=l.y):f>0&&(d+=v*f,h+=p*f)),(a=(v=c.x-d)*v+(p=c.y-h)*p)>g&&(s=m,g=a);g>r&&(s-e>1&&i(t,e,s,r,o),o.push(t[s]),n-s>1&&i(t,s,n,r,o))}},isCurve:function(t){return"Q"===t.type||"q"===t.type||"C"===t.type||"c"===t.type},curve2Points:function(t){var e=[];return e.push({x:t[0].x,y:t[0].y}),e.push({x:t[1].x1,y:t[1].y1}),"C"===t[1].type&&e.push({x:t[1].x2,y:t[1].y2}),e.push({x:t[1].x,y:t[1].y}),e},points2Curve:function(t){var e=[];return e.push({type:"M",x:t[0].x,y:t[0].y}),4===t.length?e.push({type:"C",x1:t[1].x,y1:t[1].y,x2:t[2].x,y2:t[2].y,x:t[3].x,y:t[3].y}):e.push({type:"Q",x1:t[1].x,y1:t[1].y,x:t[2].x,y:t[2].y}),e},poly2List:function(t){for(var e=s.wrap(t),n=e.attr("points").match(s.CONST.REGEX_NUM),r=0,i=[];r<n.length;r+=2)i.push({type:0===r?"M":"L",x:parseFloat(n[r]),y:parseFloat(n[r+1])});return"polygon"===e[0].tagName&&i.push({type:"Z"}),i},clean:function(t){var e,n,r=[];return t.forEach((function(t){"L"===t.type&&t.x===e&&t.y===n||(r.push(t),e=t.x,n=t.y)})),r},isInside:function(t,e,n,r){var i,o,a,s,c,u,l,f=!0,d=!1;if(n=n||S.segmentize(t),r=r||S.segmentize(e),t.filter((function(t){return void 0!==t.x&&void 0!==t.y})).some((function(t){return!1===T.isPointInPath(t.x,t.y,e)})))return!1;if(2===t.length&&Math.abs(t[0].x-t[1].x)<1&&Math.abs(t[0].y-t[1].y)<1&&function(t){var e;switch(t[1].type){case"L":e=T.length(t[0].x,t[0].y,t[1].x,t[1].y);break;case"Q":e=n([t[0],{x:t[1].x1,y:t[1].y1},t[1]]);break;case"C":e=n([t[0],{x:t[1].x1,y:t[1].y1},{x:t[1].x2,y:t[1].y2},t[1]])}return e;function n(t){var e,n=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],r=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],i=n.length,o=0,a=function(t){var e,n,r,i=[],o=t.length;for(r=o-1;o>1;o--,r--){for(e=[],n=0;n<r;n++)e.push({x:r*(t[n+1].x-t[n].x),y:r*(t[n+1].y-t[n].y)});i.push(e),t=e}return i}(t);for(e=0;e<i;e++)o+=r[e]*s(.5*n[e]+.5,a);return.5*o;function s(t,e){var n=function(t,e){var n,r,i,o,a,s,c,u,l,f,d;if(0===t)return e[0].t=0,e[0];if(n=e.length-1,1===t)return e[n].t=1,e[n];if(r=1-t,i=e,0===n)return e[0].t=t,e[0];if(1===n)return{x:r*i[0].x+t*i[1].x,y:r*i[0].y+t*i[1].y,t:t};if(n<4)return o=r*r,a=t*t,l=0,2===n?(i=[i[0],i[1],i[2],{x:0,y:0,z:0}],s=o,c=r*t*2,u=a):3===n&&(s=o*r,c=o*t*3,u=r*a*3,l=t*a),{x:s*i[0].x+c*i[1].x+u*i[2].x+l*i[3].x,y:s*i[0].y+c*i[1].y+u*i[2].y+l*i[3].y,t:t};f=JSON.parse(JSON.stringify(e));for(;f.length>1;){for(d=0;d<f.length-1;d++)f[d]={x:f[d].x+(f[d+1].x-f[d].x)*t,y:f[d].y+(f[d+1].y-f[d].y)*t};f.splice(f.length-1,1)}return f[0].t=t,f[0]}(t,e[0]),r=n.x*n.x+n.y*n.y;return void 0!==n.z&&(r+=n.z*n.z),Math.sqrt(r)}}}(t)<1)return!0;for(o=0;o<n.length;o++){if(f)for(a=0;a<r.length;a++)if((s=v(T.intersect(n[o],r[a]))).ts[0].sort(),!d&&s.pts.length>0&&(d=!0),0===s.pts.length);else if(1===s.pts.length){if(c=S.split(n[o],s.ts[0][0]),!1===S.isInside(c[0],e)||!1===S.isInside(c[1],e)){f=!1;break}}else if(2===s.pts.length){for(u=[],c=S.split(n[o],s.ts[0][0]),u.push(c[0]),c=S.split(c[1],(s.ts[0][1]-s.ts[0][0])/(1-s.ts[0][0])),u.push(c[0]),u.push(c[1]),i=0;i<u.length;i++)if(l=T.getPointOnSegment(u[i],.5),!1===T.isPointOnSegment(l.x,l.y,r[a],.1)&&!1===T.isPointInPath(l.x,l.y,e)){f=!1;break}}else if(!1===h(n[o],r[a])){f=!1;break}if(!d&&(l=T.getPointOnSegment(n[o],.5),!1===T.isPointInPath(l.x,l.y,e))){f=!1;break}}return f;function h(t,e){var n,r,i=!1;return t[0].x===e[0].x&&t[0].y===e[0].y||t[0].x===e[1].x&&t[0].y===e[1].y?n=T.getTValue(e,{x:t[1].x,y:t[1].y}):(t[1].x===e[0].x&&t[1].y===e[0].y||t[1].x===e[1].x&&t[1].y===e[1].y)&&(n=T.getTValue(e,{x:t[0].x,y:t[0].y})),n&&(r=o(t),i=S.split(e,n).some((function(t){return r===o(t)||r===o(S.reverse(t))}))),i;function o(t){return t.map((function(t){return""+((t=T.round(t,4)).x||"")+(t.y||"")+(t.x1||"")+(t.y1||"")+(t.x2||"")+(t.y2||"")})).join()}}function v(t){var e={pts:[],ts:[[],[]]};return t.pts.forEach((function(n,r){Math.abs(t.ts[0][r])>.02&&Math.abs(t.ts[0][r]-1)>.02&&null!==t.ts[0]&&null!==t.ts[1]&&(e.pts.push(n),e.ts[0].push(t.ts[0][r]),e.ts[1].push(t.ts[1][r]))})),e}},globalize:function(t,e,n){var r=[];return t.forEach((function(t){var i,o={type:t.type};void 0!==t.x&&(i=e.toGlobal(t.x,t.y,n),o.x=i.x,o.y=i.y),void 0!==t.x1&&(i=e.toGlobal(t.x1,t.y1,n),o.x1=i.x,o.y1=i.y),void 0!==t.x2&&(i=e.toGlobal(t.x2,t.y2,n),o.x2=i.x,o.y2=i.y),r.push(o)})),r},localize:function(t,e,n){var r=[];return t.forEach((function(t){var i,o={type:t.type};void 0!==t.x&&(i=e.toLocal(t.x,t.y,n),o.x=i.x,o.y=i.y),void 0!==t.x1&&(i=e.toLocal(t.x1,t.y1,n),o.x1=i.x,o.y1=i.y),void 0!==t.x2&&(i=e.toLocal(t.x2,t.y2,n),o.x2=i.x,o.y2=i.y),r.push(o)})),r}},controls:{move:function(t,e,n,r){var i,o=s.wrap(t.shape),a=o.json("v:control"),c=t.move(),l={x:c.x,y:c.y};if(e=new u.Length(void 0===e?c.x:e),n=new u.Length(void 0===n?c.y:n),null===e.value||null===n.value)throw"Please supply a numeric value with a valid unit. (E.g. 10, 10px, 10cm, 10in, 10mm)";return i=function(t,e,n){var r=t.minU(),i=t.maxU();null!==r.x&&e<r.x?e=r.x:null!==i.x&&e>i.x&&(e=i.x);null!==r.y&&n<r.y?n=r.y:null!==i.y&&n>i.y&&(n=i.y);return{x:e,y:n}}(t,e.px(),n.px()),e=new u.Length(i.x)[e.unit]()+e.unit,n=new u.Length(i.y)[n.unit]()+n.unit,a[t.index].x=e,a[t.index].y=n,o.json("v:control",a),u.trigger("controlPointMoved.Vecta",{control:t,old:l}),r&&(s.skip_preserve=!0,e===c.x&&n===c.y||L.trigger(t,"move")),t},save:function(t){var e,n=h("#control_selection\\.id > .Selected\\.cls").length>0;return n&&(e=t.sizeU()),t.controls().map((function(r){var i={},o={},a={};return n&&(i=r.moveU(),i=s.wrap(t).toGlobal(i.x,i.y),o={x:null===(o=r.minU()).x?o.x:o.x/e.width,y:null===o.y?o.y:o.y/e.height},a={x:null===(a=r.maxU()).x?a.x:a.x/e.width,y:null===a.y?a.y:a.y/e.height}),{move:i,min:o,max:a}}))},reset:function(t,e){t.controls().forEach((function(n,r){var i=function(t,e){var n=t[e](),r=new u.Length(n.x),i=new u.Length(n.y);return{x_unit:r.unit,y_unit:i.unit,x_res:r.resultUnit,y_res:i.resultUnit}}(n,"move"),o=n.move(),a={x:o.x,y:o.y},c=s.wrap(t);void 0!==e[r].move.x&&(a=c.toLocal(e[r].move.x,e[r].move.y),a={x:new u.Length(a.x)[i.x_unit]()+i.x_res,y:new u.Length(a.y)[i.y_unit]()+i.y_res}),o.x===a.x&&o.y===a.y||A.controls.move(n,a.x,a.y,!1)}))}},symbols:{sanitize:function(t){h.each({"text:not([stroke])":{stroke:"none"},".ConnPts\\.cls":{display:"none"},symbol:{overflow:"visible"}},(function(e,n){t._find(n)._attr(e)}))}},range:function(){return{value:function(e,n){var r,i=h(e[0]);if(void 0===n)return i._attr("data-value")||i._attr("data-min");i._attr("data-value",n),i._hasClass("HRange.cls")?function(e,n){var r=e._findClass(".HRTrack\\.cls"),i=e._findClass(".HRThumb\\.cls"),o=t(i),a=parseFloat(r._attr("x")),s=a+parseFloat(r._attr("width"))-2,c=e._attr("data-min"),u=e._attr("data-max");i._attr("transform","translate("+(a-o+(n-c)*(s-a)/(u-c))+")")}(i,n):i._hasClass("VRange.cls")?function(e,n){var r=e._findClass(".VRTrack\\.cls"),i=e._findClass(".VRThumb\\.cls"),o=t(i),a=parseFloat(r._attr("y")),s=a+parseFloat(r._attr("height"))-2,c=e._attr("data-min"),u=e._attr("data-max");i._attr("transform","translate(0 "+(a-o+(n-c)*(s-a)/(u-c))+")")}(i,n):i._hasClass("CRange.cls")&&(Math.round(n)==i._attr("data-max")&&(n=i._attr("data-min")),function(t,e){var n=360*e/(t._attr("data-max")-t._attr("data-min")),r=t._findTag("svg"),i=.5*t._innerWidth(),o=new s.Circle(".CRThumb\\.cls",r),a=T.rotatePoint(i,o.r()+1,i,i,n);o.cx(a.x).cy(a.y)}(i,n)),(0===(r=i._prev()).el.length||r.el.length>0&&"LABEL"!==r.el[0].tagName)&&(r=i._findTag("label")),r.el.length>0&&"LABEL"===r.el[0].tagName&&r._findTag("span")._text(A.range.format(i._$(),n))},format:function(t,e){var n,r,i,o=t.attr("data-format")+"";return void 0===o?e:null!==(n=o.match(/\d+\.*\d*/)[0])?(r=null===(r=n.match(/[.|,]\d*/))?0:r[0].length-1,"%"===(i=o.replace(n,""))?(100*e).toFixed(r)+i:e.toFixed(r)+i):e}};function t(t){return t._attr("r")||s.CONST.THUMB_SIZE}}(),image:{getBase64:function(t){return new Promise((function(e){if(null===t)e(null);else{if(!(t.indexOf("base64,")>-1))return g.ajax.arrayBuffer(t).then((function(n){s.utils.readFile(new Blob([n],{type:A.image.getFileType(t)}),"dataURL").then((function(n){e({base64:n.result,url:t})}))})).catch((function(t){console.error(t),e(null)}));e({base64:t,url:null})}}))},getFileType:function(t){if(!t)return null;var e="png|jpg|gif|jpeg|svg",n=t.match(new RegExp("\\.("+e+")\\?")),r=t.match(new RegExp("image\\/("+e+")"));return n?"jpg"===n[1]?"image/jpeg":"image/"+n[1]:r?t:null},getQueryStr:function(t,e){var n,r,i,o;if(!t)return null;if(r=(n=(t=t.replace(/%2F/g,"/")).indexOf("firebasestorage")>-1)?t.match(/\/o\/(.*)\?/):t.match(/\.getvecta\.com\/(.*)\?/))switch(i=(r=r[1].replace(/\//g,"/")).match(/\/.*\/(.*)/)||r.match(/\/(.*)/),o=r.match(/images\/(.*)\//)||r.match(/(.*)\//),e){case"fid":return o[1];case"full_path":return r;case"file_name":return i[1];case"guid":return i[1].match(/^(.+)\./)[1];case"bucket":return n?t.match(/\/b\/(.*)\/o\//)[1]:t.match(/\/storage\/(.*?)\//)[1]}},delete:function(t){var e,n=A.image.getAttrs(t),r=!0,i=A.image.getQueryStr(n.link,"bucket")===s.config.bucket.images,o=g.queryID(),a=A.image.getQueryStr(n.link,"file_name");return s.db.counter("files/"+o+"/images/"+h.attr(t,"v:image")+"/counter",-1).then((function(c){u.activeDoc.$.find("image").each((function(t,i){if(e=A.image.getAttrs(i),n.link===e.link)return r=!1,1})),c&&r&&c.snapshot.val()<1&&"unit"!==g.queryString("mode")&&(i?s.storage.delete(s.config.bucket.images,o+"/"+a):s.storage.image.copy(o,o,a,!i).then((function(){s.storage.delete(s.config.bucket.default,A.image.getQueryStr(n.link,"full_path"))})),s.db.remove("files/"+o+"/images/"+h.attr(t,"v:image")))}))},uploadImg:function(t,e){s.mode===s.CONST.MODE.EDIT&&(g.notify(s.lang.ui.img_uploading,"warn",{slow:!0}),$(window).on("beforeunload.Vecta.uploadImg",(function(){return!0})),s.storage.upload64(s.config.bucket.images,t.name,e,t.type,(function(t){g.notify(s.lang.ui.img_upload_progress.replace("##",t)+"...","warn",{slow:!0})})).then((function(e){e&&A.image.toURL(u.activeDoc.$.find("image"),e.downloadURL,t.guid,!0)})))},restore:function(t,e){var n,r=A.image.getAttrs(t),i=A.image.getQueryStr(r.link,"bucket")===s.config.bucket.images,o=A.image.getQueryStr(r.link,"file_name"),a=g.queryID(),c=A.image.getQueryStr(r.link,"fid"),l=!0,f=!1;if(c){if(a!==c&&i){if(u.activeDoc.$.find("image").each((function(t,e){if(n=s.wrap(e).link(),A.image.getQueryStr(n,"file_name")===o&&A.image.getQueryStr(n,"fid")!==c)return s.wrap(e).link(n),l=!1,1})),!l)return 1;g.notify(s.lang.ui.img_copying,"warn",{slow:!0}),s.storage.image.copy(c,a,o,!1).then((function(n){var r;void 0===n.error?(r=s.CONST.COMPASS?s.config.compass.url+"storage/"+n.bucket+"/"+n.name.replace(/\//,"%2F")+"?alt=media&token="+n.metadata.downloadToken:"https://firebasestorage.googleapis.com/v0/b/"+n.bucket+"/o/"+n.name.replace(/\//,"%2F")+"?alt=media&token="+n.metadata.firebaseStorageDownloadTokens,u.trigger("_disableActions.Vecta"),h.attr(t,"xlink:href",r),g.notify(s.lang.ui.img_added,"inform",{slow:!0})):(e._closest("g[id]")._remove(),g.notify(s.lang.ui.image_cannot_copy,"error",{slow:!0}))}))}}else r.link&&r.link.indexOf("data:image")>-1&&(u.activeDoc.$.find("[v\\:image="+r.id+"]").each((function(t,e){if(-1===A.image.getAttrs(e).link.indexOf("data:image"))return f=!0,1})),f||A.image.uploadImg(s.storage.getImageGUID(r.link,r.id),r.link))},getAttrs:function(t){return{link:h.attr(t,"href"),id:h.attr(t,"v:image")}},toBase64:function(t){var e=[];return t._each((function(t){var n=A.image.getAttrs(t.el[0]);n.link||t._attr("v\\:image",A.image.getQueryStr(n.link,"guid")),e.push(A.image.getBase64(n.link).then((function(e){e&&(t._attr("href")&&h.attr(t.el[0],"href",null),h.attr(t.el[0],"xlink:href",e.base64))})))})),Promise.all(e)},toURL:function(t,e,n,r){var i=!1;$(window).off("beforeunload.Vecta.uploadImg"),$.each(t,(function(t,o){var a=A.image.getAttrs(o);a.id===n&&(i=!0,a.link!==e&&h.attr(o,"xlink:href",e),r&&g.notify(s.lang.ui.img_added,"inform",{slow:!0}))})),0!==t.length&&i||!r||s.storage.delete(s.config.bucket.images,g.queryID()+"/"+n+"."+A.image.getFileType(e).split("/")[1])},toURLFromDOM:function(t){var e={},n=u.activeDoc.$.find("image");return $.each(t,(function(t,r){var i=A.image.getAttrs(r);n.each((function(t,e){var n=A.image.getAttrs(e);if(n.id===i.id&&n.link&&"http"===n.link.substr(0,4))return n.link!==i.link&&h.attr(r,"href",n.link),i.link=n.link,1})),e[i.id]||(e[i.id]=i.link)})),e},replaceBase64:function(t){for(var e,n=new RegExp('<image.*?href="(.*?)"',"g"),r=[];null!==(e=n.exec(t));)"http"===e[1].substr(0,4)&&r.push(A.image.getBase64(g.decode(e[1])).then((function(e){e&&(t=t.replace(g.encode(e.url),e.base64))})));return Promise.all(r).then((function(){return t}))}},demoNoLogin:function(){return s.CONST.DEMO[g.queryID()]&&(!s.user||!s.user.id)},parseJSON:function(t){var e;if(""===(t=t.trim()))return null;try{e=new Function("return "+t)(),$.isPlainObject(e)||(console.error("Invalid object."),e=void 0)}catch(t){console.error(t)}return e},isSvgUnit:function(t){return void 0===v.TO_SVG_UNIT[t]},units:function(){return v.UNITS},insertPage:function(t,e){var n,r,i,o,a=new s.SVG(t||C.getID(),s.doc);return new Promise((function(t){s.page?(g.showMessage(s.lang.ui.creating_page,!0),i=e||JSON.parse(s.page.$.attr("v:setup")),o={paper:i.paper,unit:i.unit,scale:i.scale},u.trigger("_beforeAddPage.Vecta"),r={width:(e=e||{}).width||s.page.$.attr("width"),height:e.height||s.page.$.attr("height"),viewBox:e.viewBox||s.page.$.attr("viewBox")},a.attr({width:"string"==typeof r.width?r.width.replace(" ",""):r.width,height:"string"==typeof r.height?r.height.replace(" ",""):r.height,viewBox:r.viewBox,overflow:"visible"}),i.width&&(o.width=i.width),i.height&&(o.height=i.height),i.orient&&(o.orient=i.orient),i.margin&&(o.margin=i.margin),s.page._css("display","none"),a.json("v:setup",o),u.trigger("_getZoom.Vecta",(function(t){var e={level:t};t&&u.trigger("_getScroll.Vecta",(function(t){e.scroll_x=t.x,e.scroll_y=t.y,u.activePage.$.attr("zoom",JSON.stringify(e))}))})),s.page=a,n=new u.Page(a.$),u.activePage=n,s.db.file.activePage(g.queryID(),a.id()),s.canvas.$.find("#grid\\.id").children("svg").attr("id","grid.id"+a.id()),u.selection.clear(),u.trigger("_zoomFit.Vecta"),s.createPage(a.id()).then((function(){u.trigger("newPageAdded.Vecta",[n]),L.trigger(u.activeDoc,"pages"),t(n)})),u.trigger("_actions.Vecta",{action:"addPage"})):(i=e||JSON.parse(s.canvas.$.attr("v:defaults")),o={paper:i.paper,unit:i.unit,scale:{from:1,to:1}},a.attr({width:s.CONST.PAPER_SIZE[o.paper]?s.CONST.PAPER_SIZE[o.paper].width:"297mm",height:s.CONST.PAPER_SIZE[o.paper]?s.CONST.PAPER_SIZE[o.paper].height:"210mm",overflow:"visible"}),r=a.sizeU(),o.width=r.width,o.height=r.height,a.viewBox(0,0,r.width,r.height),a.json("v:setup",o),s.pages&&(s.pages[a.id()]={attrs:{width:a.attr("width"),height:a.attr("height"),overflow:"visible","v:setup":JSON.stringify(o),viewBox:"0 0 "+r.width+" "+r.height},index:0}),s.page=a,u.activePage=new u.Page(a.$),t(u.activePage))}))},generatePermLink:function(t,e){var n,r,i=u.sluggify(e.name())+"_"+u.sluggify(t.name());i=function t(e,i){return i.symbols().forEach((function(o){var a=o.perm();a===e&&(n=a.substring(a.lastIndexOf("_")).replace("_",""),2===a.match(/_/g).length&&!1===isNaN(n)?(r=a.substring(0,a.lastIndexOf("_")),n=parseInt(n)+1,e=t(e=r+"_"+n,i)):e=t(e+="_2",i))})),e}(i,e),t.perm(i)},calTextBlock:function(t,e){var n,r,i,o,a=u.activePage.unit(),s={px:"30px",in:"0.3125in",mm:"8mm",cm:"0.8cm",m:"0.008m"};return void 0===e&&(e=0),0===t.width?(t.width={px:"50px",in:"0.5in",mm:"13mm",cm:"1.3cm",m:"0.008m"}[a],t.widthPX=new u.Length(t.width).px(),n=t.height,t.height=s[a],t.heightPX=new u.Length(t.height).px(),0===e?t.y+=.5*new u.Length(n).px()-.5*new u.Length(t.height).px():(r=t.x,i=t.y+n/2,o=T.rotatePoint(r+t.widthPX/2,i,r,i,e),t.x=o.x-t.widthPX/2,t.y=o.y-t.heightPX/2)):0===t.height&&(t.height=s[a],t.heightPX=new u.Length(t.height).px(),0===e?t.y-=t.heightPX:(r=t.x+t.width/2,i=t.y,o=T.rotatePoint(r,i-t.heightPX/2,r,i,e),t.x=o.x-t.width/2,t.y=o.y-t.heightPX/2)),{x:t.x,y:t.y,width:t.width,height:t.height}},selectedPathHandle:function(){var t,e=h("#path_selection\\.id");return e._hasClass("Hide.cls")||0===(t=e._find("#p_begin\\.id.Selected\\.cls,#p_end\\.id.Selected\\.cls")).length?null:t.el[0].id},getOldBeginEndPoint:function(t,e){var n,r,i={begin:{},end:{}};return void 0===e.old.x&&(n=t.moveU(),e.old.x=n.x,e.old.y=n.y),void 0===e.old.list&&(e.old.list=t.pathList()),i.begin={x:e.old.list[0].x+e.old.x,y:e.old.list[0].y+e.old.y},r=e.old.list.length-1,i.end={x:e.old.list[r].x+e.old.x,y:e.old.list[r].y+e.old.y},i}},s.math={round:function(t,e){return e=void 0===e?4:e,e=Math.pow(10,e),"object"===_typeof(t)?Object.keys(t).forEach((function(n){h.isNumeric(t[n])&&(t[n]=Math.round(t[n]*e)/e)})):h.isNumeric(t)&&(t=Math.round(t*e)/e),t},roundList:function(t,e){return e=e||6,t.forEach((function(t){void 0!==t.x&&(t.x=T.round(t.x,e),t.y=T.round(t.y,e)),void 0!==t.x1&&(t.x1=T.round(t.x1,e),t.y1=T.round(t.y1,e)),void 0!==t.x2&&(t.x2=T.round(t.x2,e),t.y2=T.round(t.y2,e))})),t},roundHandle:function(t){return t.x=Math.round(t.x-.5)+.5,t.y=Math.round(t.y-.5)+.5,t},deg:function(t){return 180*t/Math.PI},rad:function(t){return t*Math.PI/180},angle:function(t,e,n,r){var i=t-n,o=e-r;return 0===i&&0===o?0:T.deg(Math.atan(o/i))+(i<0?270:90)},length:function(t,e,n,r){var i=n-t,o=r-e;return Math.sqrt(i*i+o*o)},arc2Cubic:function(t,e){var n,r,i,o,a,s,c,u,l,f,d,h,v,p,g=2*Math.PI,m=[],y=0;if(null===e.largeArcFlag||null===e.sweepFlag)return e;if(e.xAxisRotation=e.xAxisRotation||0,e.largeArcFlag=e.largeArcFlag||0,e.sweepFlag=e.sweepFlag||0,0===e.rx||0===e.ry)return{type:"L",x:e.x,y:e.y};if(n=Math.sin(e.xAxisRotation*g/360),i=(r=Math.cos(e.xAxisRotation*g/360))*(t.x-e.x)/2+n*(t.y-e.y)/2,o=-n*(t.x-e.x)/2+r*(t.y-e.y)/2,0===i&&0===o)return{type:"L",x:e.x,y:e.y};for(e.rx=Math.abs(e.rx),e.ry=Math.abs(e.ry),(a=Math.pow(i,2)/Math.pow(e.rx,2)+Math.pow(o,2)/Math.pow(e.ry,2))>1&&(e.rx*=Math.sqrt(a),e.ry*=Math.sqrt(a)),s=T.arcCenter(t,e,n,r,i,o),c=Math.max(Math.ceil(Math.abs(s.ang2)/(g/4)),1),s.ang2/=c;y<c;y++)m.push((u=s.ang1,l=s.ang2,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,f=4/3*Math.tan(l/4),d=Math.cos(u),h=Math.sin(u),v=Math.cos(u+l),p=Math.sin(u+l),[{x:d-h*f,y:h+d*f},{x:v+p*f,y:p-v*f},{x:v,y:p}])),s.ang1+=s.ang2;return m.map((function(t){var i,o={type:"C"};return i=x(t[0],e.rx,e.ry,r,n,s.x,s.y),o.x1=i.x,o.y1=i.y,i=x(t[1],e.rx,e.ry,r,n,s.x,s.y),o.x2=i.x,o.y2=i.y,i=x(t[2],e.rx,e.ry,r,n,s.x,s.y),o.x=i.x,o.y=i.y,o}));function x(t,e,n,r,i,o,a){return t.x*=e,t.y*=n,{x:r*t.x-i*t.y+o,y:i*t.x+r*t.y+a}}},arcCenter:function(t,e,n,r,i,o){var a,s,c,u,l,f,d,h,v,p=2*Math.PI,g=Math.pow(e.rx,2),m=Math.pow(e.ry,2),y={};return n=void 0===n?Math.sin(e.xAxisRotation*p/360):n,r=void 0===r?Math.cos(e.xAxisRotation*p/360):r,i=void 0===i?r*(t.x-e.x)/2+n*(t.y-e.y)/2:i,o=void 0===o?-n*(t.x-e.x)/2+r*(t.y-e.y)/2:o,a=Math.pow(i,2),(c=g*m-g*(s=Math.pow(o,2))-m*a)<0&&(c=0),c/=g*s+m*a,u=(c=Math.sqrt(c)*(e.largeArcFlag===e.sweepFlag?-1:1))*e.rx/e.ry*o,l=c*-e.ry/e.rx*i,y.x=r*u-n*l+(t.x+e.x)/2,y.y=n*u+r*l+(t.y+e.y)/2,f=(i-u)/e.rx,d=(o-l)/e.ry,h=(-i-u)/e.rx,v=(-o-l)/e.ry,y.ang1=x(1,0,f,d),y.ang2=x(f,d,h,v),0===e.sweepFlag&&y.ang2>0&&(y.ang2-=p),1===e.sweepFlag&&y.ang2<0&&(y.ang2+=p),y;function x(t,e,n,r){var i=t*r-e*n<0?-1:1,o=(t*n+e*r)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)}},normalizeAngle:function(t){var e=t;return t<0?e=t%360+360:t>=360&&(e=t%360),360===e&&(e=0),e},angleRatio:function(t,e){return 0===(t=T.normalizeAngle(t))||180===t||360===t?e:(t<=90||(t<=180?t=180-t:t<=270?t-=180:t=360-t),{x:(e.x-1)*(90-t)/90+(e.y-1)*t/90+1,y:(e.x-1)*t/90+(e.y-1)*(90-t)/90+1})},rotatePoint:function(t,e,n,r,i){var o,a,s,c,u;return 0!==i?(o=t-n,a=e-r,s=T.rad(i),{x:n+o*(c=Math.cos(s))-a*(u=Math.sin(s)),y:r+o*u+a*c}):{x:t,y:e}},getPathBox:function(t){var e,n,r=1,i={x:[],y:[]},o={};for(i.x.push(t[0].x),i.y.push(t[0].y);r<t.length;r++)e=t[r-1],"z"!==(n=t[r]).type&&"Z"!==n.type&&(i.x.push(t[r].x),i.y.push(t[r].y),"Q"===n.type&&a(e,n),"C"===n.type&&s(e,n));return o.x=Math.min.apply(null,i.x),o.y=Math.min.apply(null,i.y),o.width=Math.max.apply(null,i.x)-o.x,o.height=Math.max.apply(null,i.y)-o.y,o;function a(t,e){for(var n,r,o,a,s,c,u=0;u<2;u++)s=1-(a=((n=0===u?t.x:t.y)-(r=0===u?e.x1:e.y1))/(n-2*r+(o=0===u?e.x:e.y))),c=n*Math.pow(s,2)+2*r*s*a+o*Math.pow(a,2),(isNaN(c)||c<Math.min(n,r,o)||c>Math.max(n,r,o))&&(c=n),i[0===u?"x":"y"].push(c)}function s(t,e){for(var n,r,o,a,s,c,u,l,f,d=0,h=[];d<2;d++)if(n=0===d?6*t.x-12*e.x1+6*e.x2:6*t.y-12*e.y1+6*e.y2,r=0===d?3*e.x1-3*t.x:3*e.y1-3*t.y,o=0===d?-3*t.x+9*e.x1+3*e.x-9*e.x2:-3*t.y+9*e.y1+3*e.y-9*e.y2,Math.abs(o)<1e-12){if(Math.abs(n)<1e-12)continue;0<(a=-r/n)&&a<1&&h.push(a)}else l=Math.pow(n,2)-4*r*o,f=Math.sqrt(l),l<0||(0<(c=(-n+f)/(2*o))&&c<1&&h.push(c),0<(u=(-n-f)/(2*o))&&u<1&&h.push(u));for(d=h.length;d--;)s=1-(a=h[d]),i.x.push(Math.pow(s,3)*t.x+3*Math.pow(s,2)*a*e.x1+3*s*Math.pow(a,2)*e.x2+Math.pow(a,3)*e.x),i.y.push(Math.pow(s,3)*t.y+3*Math.pow(s,2)*a*e.y1+3*s*Math.pow(a,2)*e.y2+Math.pow(a,3)*e.y)}},rotateBox:function(t,e,n){var r,i=[],o=t.x+t.width,a=t.y+t.height;return n=n||{x:t.x+.5*t.width,y:t.y+.5*t.height},i.push(T.rotatePoint(t.x,t.y,n.x,n.y,e)),i.push(T.rotatePoint(o,t.y,n.x,n.y,e)),i.push(T.rotatePoint(t.x,a,n.x,n.y,e)),i.push(T.rotatePoint(o,a,n.x,n.y,e)),{x:(r=i.reduce((function(t,e){return{left:Math.min(t.left,e.x),top:Math.min(t.top,e.y),right:Math.max(t.right,e.x),bottom:Math.max(t.bottom,e.y)}}),{left:i[0].x,top:i[0].y,right:i[0].x,bottom:i[0].y})).left,y:r.top,width:r.right-r.left,height:r.bottom-r.top}},rotateEllipseBox:function(t,e){var n,r,i,o,a,c,u,l,f,d,h,v;return 0===t.width&&(t.width=s.CONST.MINISCULE),0===t.height&&(t.height=s.CONST.MINISCULE),r={width:.5*t.width,height:.5*t.height},i={x:t.x+r.width,y:t.y+r.height},o=T.rad(e),u=Math.cos(o),l=Math.sin(o),a=Math.atan(-r.height*Math.tan(o)/r.width),c=Math.atan(r.height/(r.width*Math.tan(o))),f=i.x+r.width*Math.cos(a)*u-r.height*Math.sin(a)*l,d=i.y+r.height*Math.sin(c)*u+r.width*Math.cos(c)*l,a-=Math.PI,c-=Math.PI,h=i.x+r.width*Math.cos(a)*u-r.height*Math.sin(a)*l,v=i.y+r.height*Math.sin(c)*u+r.width*Math.cos(c)*l,(n={x:Math.min(f,h),y:Math.min(d,v)}).width=Math.max(f,h)-n.x,n.height=Math.max(d,v)-n.y,n},mergeBoxes:function(t){var e=t.reduce((function(t,e){return{left:Math.min(t.left,e.x),top:Math.min(t.top,e.y),right:Math.max(t.right,e.x+e.width),bottom:Math.max(t.bottom,e.y+e.height)}}),{left:t[0].x,top:t[0].y,right:t[0].x,bottom:t[0].y});return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}},getXY:function(t,e,n){var r=t.sizeU();return{x:e-.5*r.width,y:n-.5*r.height}},getCenXY:function(t){var e=t.moveU(),n=t.sizeU();return{x:e.x+.5*n.width,y:e.y+.5*n.height}},angleToGlobal:function(t){var e=t.parents(),n=t.angle();return e.forEach((function(t){n+=t.angle()})),T.normalizeAngle(n)},boxToGlobal:function(t,e){var n,r,i=t.parents(),o=s.wrap(t),a=o[0].hasAttribute("v:abox"),c=a?o.alignBox():o.box(),u={x:c.x+.5*c.width,y:c.y+.5*c.height},l=T.angleToGlobal(t),f=t.type();if(s.ex.skew&&(n=t.skewX(),r=t.skewY()),i.forEach((function(t){var e,i,a=s.wrap(t),l=a.angleEX(),f={},d=a.moveU();a.hasClip()&&t.isGroup()&&!o._hasClass("Text.cls")&&(i=s.wrap(a._children("g.Prim\\.cls[clip-path]").el[0]),e=A.translate(i),d.x+=e.x,d.y+=e.y,c.x+=e.x,c.y+=e.y),u.x+=d.x,u.y+=d.y,l&&(s.ex.skew?0===n&&0===r&&(f.x=d.x+l.cx,f.y=d.y+l.cy,u=T.rotatePoint(u.x,u.y,f.x,f.y,l.angle)):(f.x=d.x+l.cx,f.y=d.y+l.cy,u=T.rotatePoint(u.x,u.y,f.x,f.y,l.angle)))})),c.x+=u.x-(c.x+.5*c.width),c.y+=u.y-(c.y+.5*c.height),e)if(a)c=T.rotateBox(c,l);else switch(f){case"ellipse":c=!s.ex.skew||0===n&&0===r?T.rotateEllipseBox(c,l):T.getPathBox(A.shapeToList(t));break;case"path":(c=T.getPathBox(S.rotate(t.pathList(),c.x+.5*c.width,c.y+.5*c.height,l))).x+=u.x-(c.x+.5*c.width),c.y+=u.y-(c.y+.5*c.height);break;default:c=!s.ex.skew||0===n&&0===r?T.rotateBox(c,l):T.getPathBox(A.shapeToList(t))}return c},transformPoint:function(t,e,n,r){var i,o={x:t,y:e},a=n[0].transform.baseVal;if(r)for(i=0;i<a.numberOfItems;i++)o=T.matrix.point(o,s(a.getItem(i),!0));else for(i=a.numberOfItems-1;i>=0;i--)o=T.matrix.point(o,s(a.getItem(i),!1));return T.round(o);function s(t,e){var r;return t.type===SVGTransform.SVG_TRANSFORM_TRANSLATE?(r=n.moveU(),{a:1,b:0,c:0,d:1,e:e?0-r.x:r.x,f:e?0-r.y:r.y}):e?t.matrix.inverse():t.matrix}},pointExist:function(t,e,n){for(var r=n||.1,i=!1,o=0;o<t.length;o++)if(e.x>=t[o].x-r&&e.x<=t[o].x+r&&e.y>=t[o].y-r&&e.y<=t[o].y+r){i=!0;break}return i},intersect:function(t,e){var n,r,i,o,a,c,u,l,f,d,h,v,p=10,g={pts:[],ts:[[],[]]},m=!1;if(t[0].x===e[0].x&&t[0].y===e[0].y&&(g.pts.push({x:t[0].x,y:t[0].y}),g.ts[0].push(0),g.ts[1].push(0)),t[0].x===e[e.length-1].x&&t[0].y===e[e.length-1].y&&(g.pts.push({x:t[0].x,y:t[0].y}),g.ts[0].push(0),g.ts[1].push(1)),t[t.length-1].x===e[0].x&&t[t.length-1].y===e[0].y&&(g.pts.push({x:t[t.length-1].x,y:t[t.length-1].y}),g.ts[0].push(1),g.ts[1].push(0)),t[t.length-1].x===e[e.length-1].x&&t[t.length-1].y===e[e.length-1].y&&(g.pts.push({x:t[t.length-1].x,y:t[t.length-1].y}),g.ts[0].push(1),g.ts[1].push(1)),2===g.pts.length&&t[1].type===e[1].type)switch(t[1].type){case"L":m=!0;break;case"Q":t[1].x1===e[1].x1&&t[1].y1===e[1].y1&&(m=!0);break;case"C":(t[1].x1===e[1].x1&&t[1].y1===e[1].y1&&t[1].x2===e[1].x2&&t[1].y2===e[1].y2||t[1].x1===e[1].x2&&t[1].y1===e[1].y2&&t[1].x2===e[1].x1&&t[1].y2===e[1].y1)&&(m=!0)}if(!m)switch(t[1].type){case"L":switch(e[1].type){case"L":r=t,i=e,o=g.pts,a=g.ts[0],c=g.ts[1],f=T.matrix.list(r,{a:p,b:0,c:0,d:p,e:0,f:0}),d=T.matrix.list(i,{a:p,b:0,c:0,d:p,e:0,f:0}),h={x1:f[1].x-f[0].x,y1:f[1].y-f[0].y,x2:d[1].x-d[0].x,y2:d[1].y-d[0].y,x12:f[0].x-d[0].x,y12:f[0].y-d[0].y},0!=(v=h.y2*h.x1-h.x2*h.y1)&&(u=(h.x2*h.y12-h.y2*h.x12)/v,l=(h.x1*h.y12-h.y1*h.x12)/v,0<=u&&u<=1&&0<=l&&l<=1&&(a.push(u),c.push(l),o.push(y({x:f[0].x+u*h.x1,y:f[0].y+u*h.y1}))));break;case"Q":x(e,t,g.pts,g.ts[1],g.ts[0]);break;case"C":k(e,t,g.pts,g.ts[1],g.ts[0])}break;case"Q":switch(e[1].type){case"L":x(t,e,g.pts,g.ts[0],g.ts[1]);break;case"Q":n=g.pts.length,w(t,e,g.pts,g.ts[0],g.ts[1]),w(t,e,g.pts,g.ts[1],g.ts[0]),g.pts.length===n&&w(T.roundList(t,1),T.roundList(e,1),g.pts,g.ts[0],g.ts[1]);break;case"C":b(e,t,g.pts,g.ts[1],g.ts[0])}break;case"C":switch(e[1].type){case"L":k(t,e,g.pts,g.ts[0],g.ts[1]);break;case"Q":b(t,e,g.pts,g.ts[0],g.ts[1]);break;case"C":M(t,e,g.pts,g.ts[0],g.ts[1]),M(e,t,g.pts,g.ts[1],g.ts[0])}}return function(t,e,n){return t.pts.forEach((function(i,o){t.ts[0][o]=r(t.ts[0],o,i,e,.001),t.ts[1][o]=r(t.ts[1],o,i,n,.001)})),t;function r(t,e,n,r,i){return null===t[e]?Math.abs(n.x-r[0].x)<=i&&Math.abs(n.x-r[0].y)<=i?0:1:t[e]}}(g=function(t){var e={pts:[],ts:[[],[]]};return t.pts.forEach((function(n,r){!1===T.pointExist(e.pts,n)&&(e.pts.push(t.pts[r]),e.ts[0].push(t.ts[0][r]),e.ts[1].push(t.ts[1][r]))})),e}(g),t,e);function y(t){return{x:t.x/p,y:t.y/p}}function x(t,e,n,r,i){var o,a,s,c,u,l,f,d=T.matrix.list(t,{a:p,b:0,c:0,d:p,e:0,f:0}),h=T.matrix.list(e,{a:p,b:0,c:0,d:p,e:0,f:0}),v=Math.min(h[0].x,h[1].x)-5,g=Math.min(h[0].y,h[1].y)-5,m=Math.max(h[0].x,h[1].x)+5,x=Math.max(h[0].y,h[1].y)+5;o={x:-2*d[1].x1,y:-2*d[1].y1},s={x:d[0].x+o.x+d[1].x,y:d[0].y+o.y+d[1].y},o={x:-2*d[0].x,y:-2*d[0].y},a={x:2*d[1].x1,y:2*d[1].y1},c={x:o.x+a.x,y:o.y+a.y},u={x:d[0].x,y:d[0].y},f={x:h[0].y-h[1].y,y:h[1].x-h[0].x},l=h[0].x*h[1].y-h[1].x*h[0].y,F([f.x*s.x+f.y*s.y,f.x*c.x+f.y*c.y,f.x*u.x+f.y*u.y+l].reverse()).forEach((function(t){var e,o,a;-1e-8<=t&&t<=1.00000001&&(e={x:d[0].x+(d[1].x1-d[0].x)*t,y:d[0].y+(d[1].y1-d[0].y)*t},o={x:d[1].x1+(d[1].x-d[1].x1)*t,y:d[1].y1+(d[1].y-d[1].y1)*t},(a={x:e.x+(o.x-e.x)*t,y:e.y+(o.y-e.y)*t}).x>=v&&a.x<=m&&a.y>=g&&a.y<=x&&(r.push(t),i.push(T.getTValue(h,a)),n.push(y(a))))}))}function k(t,e,n,r,i){var o,a,s,c,u,l,f,d,h,v,g=T.matrix.list(t,{a:p,b:0,c:0,d:p,e:0,f:0}),m=T.matrix.list(e,{a:p,b:0,c:0,d:p,e:0,f:0}),x=Math.min(m[0].x,m[1].x)-5,k=Math.min(m[0].y,m[1].y)-5,w=Math.max(m[0].x,m[1].x)+5,b=Math.max(m[0].y,m[1].y)+5;o={x:-1*g[0].x,y:-1*g[0].y},a={x:3*g[1].x1,y:3*g[1].y1},s={x:-3*g[1].x2,y:-3*g[1].y2},u={x:(c={x:o.x+(a.x+(s.x+g[1].x)),y:o.y+(a.y+(s.y+g[1].y))}).x,y:c.y},o={x:3*g[0].x,y:3*g[0].y},a={x:-6*g[1].x1,y:-6*g[1].y1},s={x:3*g[1].x2,y:3*g[1].y2},l={x:(c={x:o.x+(a.x+s.x),y:o.y+(a.y+s.y)}).x,y:c.y},o={x:-3*g[0].x,y:-3*g[0].y},a={x:3*g[1].x1,y:3*g[1].y1},f={x:(s={x:o.x+a.x,y:o.y+a.y}).x,y:s.y},d={x:g[0].x,y:g[0].y},v={x:m[0].y-m[1].y,y:m[1].x-m[0].x},h=m[0].x*m[1].y-m[1].x*m[0].y,F([v.x*u.x+v.y*u.y,v.x*l.x+v.y*l.y,v.x*f.x+v.y*f.y,v.x*d.x+v.y*d.y+h].reverse()).forEach((function(t){var e,o,a,s,c,u;-1e-8<=t&&t<=1.00000001&&(e={x:g[0].x+(g[1].x1-g[0].x)*t,y:g[0].y+(g[1].y1-g[0].y)*t},o={x:g[1].x1+(g[1].x2-g[1].x1)*t,y:g[1].y1+(g[1].y2-g[1].y1)*t},a={x:g[1].x2+(g[1].x-g[1].x2)*t,y:g[1].y2+(g[1].y-g[1].y2)*t},(u={x:(s={x:e.x+(o.x-e.x)*t,y:e.y+(o.y-e.y)*t}).x+((c={x:o.x+(a.x-o.x)*t,y:o.y+(a.y-o.y)*t}).x-s.x)*t,y:s.y+(c.y-s.y)*t}).x>=x&&u.x<=w&&u.y>=k&&u.y<=b&&(r.push(t),i.push(T.getTValue(m,u)),n.push(y(u))))}))}function w(t,e,n,r,i){var o,a,s,c,u,l,f,d,h,v,g=T.matrix.list(t,{a:p,b:0,c:0,d:p,e:0,f:0}),m=T.matrix.list(e,{a:p,b:0,c:0,d:p,e:0,f:0});o={x:g[0].x+(-2*g[1].x1+g[1].x),y:g[0].y+(-2*g[1].y1+g[1].y)},a={x:-2*g[0].x+2*g[1].x1,y:-2*g[0].y+2*g[1].y1},s={x:g[0].x,y:g[0].y},c={x:m[0].x+(-2*m[1].x1+m[1].x),y:m[0].y+(-2*m[1].y1+m[1].y)},u={x:-2*m[0].x+2*m[1].x1,y:-2*m[0].y+2*m[1].y1},l={x:m[0].x,y:m[0].y},F([-(f=c.x*o.y-o.x*c.y)*f,-2*f*(d=u.x*o.y-o.x*u.y),(h=o.x*a.y-a.x*o.y)*(c.x*a.y-a.x*c.y)-d*d-2*f*(v=o.x*(s.y-l.y)+o.y*(-s.x+l.x)),h*(u.x*a.y-a.x*u.y)-2*d*v,h*(a.x*(s.y-l.y)+a.y*(-s.x+l.x))-v*v].reverse()).forEach((function(t){var e,f;0<=t&&t<=1&&(e=F([o.x,a.x,s.x-l.x-t*u.x-t*t*c.x].reverse()),f=F([o.y,a.y,s.y-l.y-t*u.y-t*t*c.y].reverse()),e.length>0&&f.length>0&&e.forEach((function(e){0<=e&&e<=1&&f.forEach((function(o){Math.abs(e-o)<1e-4&&(r.push(e),i.push(t),n.push(y({x:c.x*(t*t)+(u.x*t+l.x),y:c.y*(t*t)+(u.y*t+l.y)})))}))})))}))}function b(t,e,n,r,i){var o,a,s,c,u,l,f,d,h,v,g,m,x,k,w,b,M,_,A,S,L,C,O,N,I,B=T.matrix.list(t,{a:p,b:0,c:0,d:p,e:0,f:0}),R=T.matrix.list(e,{a:p,b:0,c:0,d:p,e:0,f:0});o={x:-2*R[1].x1,y:-2*R[1].y1},u={x:R[0].x+(o.x+R[1].x),y:R[0].y+(o.y+R[1].y)},o={x:-2*R[0].x,y:-2*R[0].y},a={x:2*R[1].x1,y:2*R[1].y1},l={x:o.x+a.x,y:o.y+a.y},f={x:R[0].x,y:R[0].y},o={x:-1*B[0].x,y:-1*B[0].y},a={x:3*B[1].x1,y:3*B[1].y1},s={x:-3*B[1].x2,y:-3*B[1].y2},c={x:o.x+(a.x+(s.x+B[1].x)),y:o.y+(a.y+(s.y+B[1].y))},d={x:c.x,y:c.y},o={x:3*B[0].x,y:3*B[0].y},a={x:-6*B[1].x1,y:-6*B[1].y1},s={x:3*B[1].x2,y:3*B[1].y2},c={x:o.x+(a.x+s.x),y:o.y+(a.y+s.y)},h={x:c.x,y:c.y},o={x:-3*B[0].x,y:-3*B[0].y},a={x:3*B[1].x1,y:3*B[1].y1},s={x:o.x+a.x,y:o.y+a.y},v={x:s.x,y:s.y},g={x:B[0].x,y:B[0].y},m=f.x*f.x,x=f.y*f.y,k=l.x*l.x,w=l.y*l.y,b=u.x*u.x,M=u.y*u.y,_=g.x*g.x,A=g.y*g.y,S=v.x*v.x,L=v.y*v.y,C=h.x*h.x,O=h.y*h.y,N=d.x*d.x,I=d.y*d.y,E([-2*u.x*u.y*d.x*d.y+b*I+M*N,-2*u.x*u.y*h.x*d.y-2*u.x*u.y*h.y*d.x+2*M*h.x*d.x+2*b*h.y*d.y,-2*u.x*v.x*u.y*d.y-2*u.x*u.y*v.y*d.x-2*u.x*u.y*h.x*h.y+2*v.x*M*d.x+M*C+b*(2*v.y*d.y+O),2*f.x*u.x*u.y*d.y+2*f.y*u.x*u.y*d.x+l.x*l.y*u.x*d.y+l.x*l.y*u.y*d.x-2*g.x*u.x*u.y*d.y-2*u.x*g.y*u.y*d.x-2*u.x*v.x*u.y*h.y-2*u.x*u.y*v.y*h.x-2*f.x*M*d.x-2*f.y*b*d.y+2*g.x*M*d.x+2*v.x*M*h.x-w*u.x*d.x-k*u.y*d.y+b*(2*g.y*d.y+2*v.y*h.y),2*f.x*u.x*u.y*h.y+2*f.y*u.x*u.y*h.x+l.x*l.y*u.x*h.y+l.x*l.y*u.y*h.x-2*g.x*u.x*u.y*h.y-2*u.x*g.y*u.y*h.x-2*u.x*v.x*u.y*v.y-2*f.x*M*h.x-2*f.y*b*h.y+2*g.x*M*h.x-w*u.x*h.x-k*u.y*h.y+S*M+b*(2*g.y*h.y+L),2*f.x*u.x*u.y*v.y+2*f.y*u.x*v.x*u.y+l.x*l.y*u.x*v.y+l.x*l.y*v.x*u.y-2*g.x*u.x*u.y*v.y-2*u.x*g.y*v.x*u.y-2*f.x*v.x*M-2*f.y*b*v.y+2*g.x*v.x*M-w*u.x*v.x-k*u.y*v.y+2*b*g.y*v.y,-2*f.x*f.y*u.x*u.y-f.x*l.x*l.y*u.y-f.y*l.x*l.y*u.x+2*f.x*u.x*g.y*u.y+2*f.y*g.x*u.x*u.y+l.x*g.x*l.y*u.y+l.x*l.y*u.x*g.y-2*g.x*u.x*g.y*u.y-2*f.x*g.x*M+f.x*w*u.x+f.y*k*u.y-2*f.y*b*g.y-g.x*w*u.x-k*g.y*u.y+m*M+x*b+_*M+b*A].reverse(),0,1).forEach((function(t){var e=F([u.x,l.x,f.x-g.x-t*v.x-t*t*h.x-t*t*t*d.x].reverse()),o=F([u.y,l.y,f.y-g.y-t*v.y-t*t*h.y-t*t*t*d.y].reverse());e.length>0&&o.length>0&&e.forEach((function(e){0<=e&&e<=1&&o.forEach((function(o){Math.abs(e-o)<1e-4&&(r.push(t),i.push(e),n.push(y({x:d.x*(t*t*t)+h.x*(t*t)+(v.x*t+g.x),y:d.y*(t*t*t)+h.y*(t*t)+(v.y*t+g.y)})))}))}))}))}function M(t,e,n,r,i){var o,a,s,c,u,l,f,d,h,v,g,m,x,k,w,b,M,_,A,S,L,C,O,N,I,B,R,P,D,j,U,G,z,$,H,V,X,q,W,Y,Z=T.matrix.list(t,{a:p,b:0,c:0,d:p,e:0,f:0}),K=T.matrix.list(e,{a:p,b:0,c:0,d:p,e:0,f:0});o={x:-1*Z[0].x,y:-1*Z[0].y},a={x:3*Z[1].x1,y:3*Z[1].y1},s={x:-3*Z[1].x2,y:-3*Z[1].y2},c={x:o.x+(a.x+(s.x+Z[1].x)),y:o.y+(a.y+(s.y+Z[1].y))},u={x:c.x,y:c.y},o={x:3*Z[0].x,y:3*Z[0].y},a={x:-6*Z[1].x1,y:-6*Z[1].y1},s={x:3*Z[1].x2,y:3*Z[1].y2},c={x:o.x+(a.x+s.x),y:o.y+(a.y+s.y)},l={x:c.x,y:c.y},o={x:-3*Z[0].x,y:-3*Z[0].y},a={x:3*Z[1].x1,y:3*Z[1].y1},s={x:o.x+a.x,y:o.y+a.y},f={x:s.x,y:s.y},d={x:Z[0].x,y:Z[0].y},o={x:-1*K[0].x,y:-1*K[0].y},a={x:3*K[1].x1,y:3*K[1].y1},s={x:-3*K[1].x2,y:-3*K[1].y2},c={x:o.x+(a.x+(s.x+K[1].x)),y:o.y+(a.y+(s.y+K[1].y))},h={x:c.x,y:c.y},o={x:3*K[0].x,y:3*K[0].y},a={x:-6*K[1].x1,y:-6*K[1].y1},s={x:3*K[1].x2,y:3*K[1].y2},c={x:o.x+(a.x+s.x),y:o.y+(a.y+s.y)},v={x:c.x,y:c.y},o={x:-3*K[0].x,y:-3*K[0].y},a={x:3*K[1].x1,y:3*K[1].y1},s={x:o.x+a.x,y:o.y+a.y},g={x:s.x,y:s.y},m={x:K[0].x,y:K[0].y},k=(x=d.x*d.x)*d.x,b=(w=d.y*d.y)*d.y,_=(M=f.x*f.x)*f.x,S=(A=f.y*f.y)*f.y,C=(L=l.x*l.x)*l.x,N=(O=l.y*l.y)*l.y,B=(I=u.x*u.x)*u.x,P=(R=u.y*u.y)*u.y,j=(D=m.x*m.x)*m.x,G=(U=m.y*m.y)*m.y,$=(z=g.x*g.x)*g.x,H=g.y*g.y,X=(V=v.x*v.x)*v.x,q=v.y*v.y,E([-B*((Y=h.y*h.y)*h.y)+P*((W=h.x*h.x)*h.x)-3*u.x*R*W*h.y+3*I*u.y*h.x*Y,-6*u.x*v.x*R*h.x*h.y+6*I*u.y*v.y*h.x*h.y+3*v.x*P*W-3*B*v.y*Y-3*u.x*R*v.y*W+3*I*v.x*u.y*Y,-6*g.x*u.x*R*h.x*h.y-6*u.x*v.x*R*v.y*h.x+6*I*v.x*u.y*v.y*h.y+3*g.x*P*W+3*V*P*h.x+3*g.x*I*u.y*Y-3*u.x*g.y*R*W-3*u.x*V*R*h.y+I*u.y*h.x*(6*g.y*h.y+3*q)+B*(-g.y*Y-2*q*h.y-h.y*(2*g.y*h.y+q)),f.x*l.y*u.x*u.y*h.x*h.y-f.y*l.x*u.x*u.y*h.x*h.y+6*g.x*v.x*P*h.x+3*f.x*l.x*u.x*u.y*Y+6*d.x*u.x*R*h.x*h.y-3*f.x*l.x*R*h.x*h.y-3*f.y*l.y*u.x*u.y*W-6*d.y*I*u.y*h.x*h.y-6*m.x*u.x*R*h.x*h.y+3*f.y*l.y*I*h.x*h.y-2*l.x*O*u.x*h.x*h.y-6*g.x*u.x*v.x*R*h.y-6*g.x*u.x*R*v.y*h.x-6*u.x*g.y*v.x*R*h.x+6*g.x*I*u.y*v.y*h.y+2*L*l.y*u.y*h.x*h.y+X*P-3*d.x*P*W+3*d.y*B*Y+3*m.x*P*W+N*u.x*W-C*u.y*Y-3*d.x*I*u.y*Y+3*d.y*u.x*R*W-2*f.x*l.y*I*Y+f.x*l.y*R*W-f.y*l.x*I*Y+2*f.y*l.x*R*W+3*m.x*I*u.y*Y-l.x*O*u.y*W-3*m.y*u.x*R*W+L*l.y*u.x*Y-3*u.x*V*R*v.y+I*u.y*h.x*(6*m.y*h.y+6*g.y*v.y)+I*v.x*u.y*(6*g.y*h.y+3*q)+B*(-2*g.y*v.y*h.y-m.y*Y-v.y*(2*g.y*h.y+q)-h.y*(2*m.y*h.y+2*g.y*v.y)),6*f.x*l.x*u.x*u.y*v.y*h.y+f.x*l.y*u.x*v.x*u.y*h.y+f.x*l.y*u.x*u.y*v.y*h.x-f.y*l.x*u.x*v.x*u.y*h.y-f.y*l.x*u.x*u.y*v.y*h.x-6*f.y*l.y*u.x*v.x*u.y*h.x-6*d.x*v.x*P*h.x+6*m.x*v.x*P*h.x+6*d.y*B*v.y*h.y+2*N*u.x*v.x*h.x-2*C*u.y*v.y*h.y+6*d.x*u.x*v.x*R*h.y+6*d.x*u.x*R*v.y*h.x+6*d.y*u.x*v.x*R*h.x-3*f.x*l.x*v.x*R*h.y-3*f.x*l.x*R*v.y*h.x+2*f.x*l.y*v.x*R*h.x+4*f.y*l.x*v.x*R*h.x-6*d.x*I*u.y*v.y*h.y-6*d.y*I*v.x*u.y*h.y-6*d.y*I*u.y*v.y*h.x-4*f.x*l.y*I*v.y*h.y-6*m.x*u.x*v.x*R*h.y-6*m.x*u.x*R*v.y*h.x-2*f.y*l.x*I*v.y*h.y+3*f.y*l.y*I*v.x*h.y+3*f.y*l.y*I*v.y*h.x-2*l.x*O*u.x*v.x*h.y-2*l.x*O*u.x*v.y*h.x-2*l.x*O*v.x*u.y*h.x-6*m.y*u.x*v.x*R*h.x-6*g.x*u.x*g.y*R*h.x-6*g.x*u.x*v.x*R*v.y+6*m.x*I*u.y*v.y*h.y+2*L*l.y*u.x*v.y*h.y+2*L*l.y*v.x*u.y*h.y+2*L*l.y*u.y*v.y*h.x+3*g.x*V*P+3*z*P*h.x-3*u.x*g.y*V*R-3*z*u.x*R*h.y+I*v.x*u.y*(6*m.y*h.y+6*g.y*v.y)+I*u.y*h.x*(6*m.y*v.y+3*H)+g.x*I*u.y*(6*g.y*h.y+3*q)+B*(-2*m.y*v.y*h.y-h.y*(2*m.y*v.y+H)-g.y*(2*g.y*h.y+q)-v.y*(2*m.y*h.y+2*g.y*v.y)),f.x*g.x*l.y*u.x*u.y*h.y+f.x*l.y*u.x*g.y*u.y*h.x+f.x*l.y*u.x*v.x*u.y*v.y-f.y*l.x*g.x*u.x*u.y*h.y-f.y*l.x*u.x*g.y*u.y*h.x-f.y*l.x*u.x*v.x*u.y*v.y-6*f.y*g.x*l.y*u.x*u.y*h.x-6*d.x*g.x*P*h.x+6*m.x*g.x*P*h.x+2*g.x*N*u.x*h.x+6*d.x*g.x*u.x*R*h.y+6*d.x*u.x*g.y*R*h.x+6*d.x*u.x*v.x*R*v.y+6*d.y*g.x*u.x*R*h.x-3*f.x*l.x*g.x*R*h.y-3*f.x*l.x*g.y*R*h.x-3*f.x*l.x*v.x*R*v.y+2*f.x*g.x*l.y*R*h.x+4*f.y*l.x*g.x*R*h.x-6*d.y*g.x*I*u.y*h.y-6*d.y*I*g.y*u.y*h.x-6*d.y*I*v.x*u.y*v.y-6*m.x*g.x*u.x*R*h.y-6*m.x*u.x*g.y*R*h.x-6*m.x*u.x*v.x*R*v.y+3*f.y*g.x*l.y*I*h.y-3*f.y*l.y*u.x*V*u.y+3*f.y*l.y*I*g.y*h.x+3*f.y*l.y*I*v.x*v.y-2*l.x*g.x*O*u.x*h.y-2*l.x*g.x*O*u.y*h.x-2*l.x*O*u.x*g.y*h.x-2*l.x*O*u.x*v.x*v.y-6*m.y*g.x*u.x*R*h.x-6*g.x*u.x*g.y*v.x*R+6*m.y*I*g.y*u.y*h.x+2*L*g.x*l.y*u.y*h.y+2*L*l.y*g.y*u.y*h.x+2*L*l.y*v.x*u.y*v.y-3*d.x*V*P+3*m.x*V*P+3*z*v.x*P+N*u.x*V+3*d.y*u.x*V*R+f.x*l.y*V*R+2*f.y*l.x*V*R-l.x*O*V*u.y-3*m.y*u.x*V*R-3*z*u.x*R*v.y+L*l.y*u.x*(2*g.y*h.y+q)+f.x*l.x*u.x*u.y*(6*g.y*h.y+3*q)+g.x*I*u.y*(6*m.y*h.y+6*g.y*v.y)+C*u.y*(-2*g.y*h.y-q)+d.y*B*(6*g.y*h.y+3*q)+f.y*l.x*I*(-2*g.y*h.y-q)+f.x*l.y*I*(-4*g.y*h.y-2*q)+d.x*I*u.y*(-6*g.y*h.y-3*q)+I*v.x*u.y*(6*m.y*v.y+3*H)+m.x*I*u.y*(6*g.y*h.y+3*q)+B*(-2*m.y*g.y*h.y-v.y*(2*m.y*v.y+H)-m.y*(2*g.y*h.y+q)-g.y*(2*m.y*h.y+2*g.y*v.y)),-d.x*f.x*l.y*u.x*u.y*h.y+d.x*f.y*l.x*u.x*u.y*h.y+6*d.x*f.y*l.y*u.x*u.y*h.x-6*d.y*f.x*l.x*u.x*u.y*h.y-d.y*f.x*l.y*u.x*u.y*h.x+d.y*f.y*l.x*u.x*u.y*h.x+f.x*f.y*l.x*l.y*u.x*h.y-f.x*f.y*l.x*l.y*u.y*h.x+f.x*m.x*l.y*u.x*u.y*h.y+f.x*m.y*l.y*u.x*u.y*h.x+f.x*g.x*l.y*u.x*u.y*v.y+f.x*l.y*u.x*g.y*v.x*u.y-m.x*f.y*l.x*u.x*u.y*h.y-6*m.x*f.y*l.y*u.x*u.y*h.x-f.y*l.x*m.y*u.x*u.y*h.x-f.y*l.x*g.x*u.x*u.y*v.y-f.y*l.x*u.x*g.y*v.x*u.y-6*f.y*g.x*l.y*u.x*v.x*u.y-6*d.x*m.x*P*h.x-6*d.x*g.x*v.x*P-2*d.x*N*u.x*h.x+6*m.x*g.x*v.x*P+2*m.x*N*u.x*h.x+2*g.x*N*u.x*v.x+2*d.y*C*u.y*h.y-6*d.x*d.y*u.x*R*h.x+3*d.x*f.x*l.x*R*h.y-2*d.x*f.x*l.y*R*h.x-4*d.x*f.y*l.x*R*h.x+3*d.y*f.x*l.x*R*h.x+6*d.x*d.y*I*u.y*h.y+6*d.x*m.x*u.x*R*h.y-3*d.x*f.y*l.y*I*h.y+2*d.x*l.x*O*u.x*h.y+2*d.x*l.x*O*u.y*h.x+6*d.x*m.y*u.x*R*h.x+6*d.x*g.x*u.x*R*v.y+6*d.x*u.x*g.y*v.x*R+4*d.y*f.x*l.y*I*h.y+6*d.y*m.x*u.x*R*h.x+2*d.y*f.y*l.x*I*h.y-3*d.y*f.y*l.y*I*h.x+2*d.y*l.x*O*u.x*h.x+6*d.y*g.x*u.x*v.x*R-3*f.x*m.x*l.x*R*h.y+2*f.x*m.x*l.y*R*h.x+f.x*f.y*O*u.x*h.x-3*f.x*l.x*m.y*R*h.x-3*f.x*l.x*g.x*R*v.y-3*f.x*l.x*g.y*v.x*R+2*f.x*g.x*l.y*v.x*R+4*m.x*f.y*l.x*R*h.x+4*f.y*l.x*g.x*v.x*R-2*d.x*L*l.y*u.y*h.y-6*d.y*m.x*I*u.y*h.y-6*d.y*m.y*I*u.y*h.x-6*d.y*g.x*I*u.y*v.y-2*d.y*L*l.y*u.x*h.y-2*d.y*L*l.y*u.y*h.x-6*d.y*I*g.y*v.x*u.y-f.x*f.y*L*u.y*h.y-2*f.x*A*u.x*u.y*h.x+3*m.x*f.y*l.y*I*h.y-2*m.x*l.x*O*u.x*h.y-2*m.x*l.x*O*u.y*h.x-6*m.x*m.y*u.x*R*h.x-6*m.x*g.x*u.x*R*v.y-6*m.x*u.x*g.y*v.x*R+3*f.y*m.y*l.y*I*h.x+3*f.y*g.x*l.y*I*v.y+3*f.y*l.y*I*g.y*v.x-2*l.x*m.y*O*u.x*h.x-2*l.x*g.x*O*u.x*v.y-2*l.x*g.x*O*v.x*u.y-2*l.x*O*u.x*g.y*v.x-6*m.y*g.x*u.x*v.x*R-A*l.x*l.y*u.x*h.x+2*m.x*L*l.y*u.y*h.y+6*m.y*I*g.y*v.x*u.y+2*M*f.y*u.x*u.y*h.y+M*l.x*l.y*u.y*h.y+2*L*m.y*l.y*u.y*h.x+2*L*g.x*l.y*u.y*v.y+2*L*l.y*g.y*v.x*u.y+$*P+3*x*P*h.x-3*w*B*h.y+3*D*P*h.x+S*I*h.x-_*R*h.y-f.x*A*I*h.y+M*f.y*R*h.x-3*x*u.x*R*h.y+3*w*I*u.y*h.x-M*O*u.x*h.y+A*L*u.y*h.x-3*z*u.x*g.y*R-3*D*u.x*R*h.y+3*U*I*u.y*h.x+f.x*l.x*u.x*u.y*(6*m.y*h.y+6*g.y*v.y)+C*u.y*(-2*m.y*h.y-2*g.y*v.y)+d.y*B*(6*m.y*h.y+6*g.y*v.y)+f.y*l.x*I*(-2*m.y*h.y-2*g.y*v.y)+L*l.y*u.x*(2*m.y*h.y+2*g.y*v.y)+f.x*l.y*I*(-4*m.y*h.y-4*g.y*v.y)+d.x*I*u.y*(-6*m.y*h.y-6*g.y*v.y)+m.x*I*u.y*(6*m.y*h.y+6*g.y*v.y)+g.x*I*u.y*(6*m.y*v.y+3*H)+B*(-2*m.y*g.y*v.y-U*h.y-g.y*(2*m.y*v.y+H)-m.y*(2*m.y*h.y+2*g.y*v.y)),-d.x*f.x*l.y*u.x*u.y*v.y+d.x*f.y*l.x*u.x*u.y*v.y+6*d.x*f.y*l.y*u.x*v.x*u.y-6*d.y*f.x*l.x*u.x*u.y*v.y-d.y*f.x*l.y*u.x*v.x*u.y+d.y*f.y*l.x*u.x*v.x*u.y+f.x*f.y*l.x*l.y*u.x*v.y-f.x*f.y*l.x*l.y*v.x*u.y+f.x*m.x*l.y*u.x*u.y*v.y+f.x*m.y*l.y*u.x*v.x*u.y+f.x*g.x*l.y*u.x*g.y*u.y-m.x*f.y*l.x*u.x*u.y*v.y-6*m.x*f.y*l.y*u.x*v.x*u.y-f.y*l.x*m.y*u.x*v.x*u.y-f.y*l.x*g.x*u.x*g.y*u.y-6*d.x*m.x*v.x*P-2*d.x*N*u.x*v.x+2*m.x*N*u.x*v.x+2*d.y*C*u.y*v.y-6*d.x*d.y*u.x*v.x*R+3*d.x*f.x*l.x*R*v.y-2*d.x*f.x*l.y*v.x*R-4*d.x*f.y*l.x*v.x*R+3*d.y*f.x*l.x*v.x*R+6*d.x*d.y*I*u.y*v.y+6*d.x*m.x*u.x*R*v.y-3*d.x*f.y*l.y*I*v.y+2*d.x*l.x*O*u.x*v.y+2*d.x*l.x*O*v.x*u.y+6*d.x*m.y*u.x*v.x*R+6*d.x*g.x*u.x*g.y*R+4*d.y*f.x*l.y*I*v.y+6*d.y*m.x*u.x*v.x*R+2*d.y*f.y*l.x*I*v.y-3*d.y*f.y*l.y*I*v.x+2*d.y*l.x*O*u.x*v.x-3*f.x*m.x*l.x*R*v.y+2*f.x*m.x*l.y*v.x*R+f.x*f.y*O*u.x*v.x-3*f.x*l.x*m.y*v.x*R-3*f.x*l.x*g.x*g.y*R+4*m.x*f.y*l.x*v.x*R-2*d.x*L*l.y*u.y*v.y-6*d.y*m.x*I*u.y*v.y-6*d.y*m.y*I*v.x*u.y-6*d.y*g.x*I*g.y*u.y-2*d.y*L*l.y*u.x*v.y-2*d.y*L*l.y*v.x*u.y-f.x*f.y*L*u.y*v.y-2*f.x*A*u.x*v.x*u.y+3*m.x*f.y*l.y*I*v.y-2*m.x*l.x*O*u.x*v.y-2*m.x*l.x*O*v.x*u.y-6*m.x*m.y*u.x*v.x*R-6*m.x*g.x*u.x*g.y*R+3*f.y*m.y*l.y*I*v.x+3*f.y*g.x*l.y*I*g.y-2*l.x*m.y*O*u.x*v.x-2*l.x*g.x*O*u.x*g.y-A*l.x*l.y*u.x*v.x+2*m.x*L*l.y*u.y*v.y-3*f.y*z*l.y*u.x*u.y+6*m.y*g.x*I*g.y*u.y+2*M*f.y*u.x*u.y*v.y+M*l.x*l.y*u.y*v.y+2*L*m.y*l.y*v.x*u.y+2*L*g.x*l.y*g.y*u.y-3*d.x*z*P+3*m.x*z*P+3*x*v.x*P-3*w*B*v.y+3*D*v.x*P+z*N*u.x+S*I*v.x-_*R*v.y+3*d.y*z*u.x*R-f.x*A*I*v.y+f.x*z*l.y*R+2*f.y*l.x*z*R+M*f.y*v.x*R-l.x*z*O*u.y-3*m.y*z*u.x*R-3*x*u.x*R*v.y+3*w*I*v.x*u.y-M*O*u.x*v.y+A*L*v.x*u.y-3*D*u.x*R*v.y+3*U*I*v.x*u.y+L*l.y*u.x*(2*m.y*v.y+H)+f.x*l.x*u.x*u.y*(6*m.y*v.y+3*H)+C*u.y*(-2*m.y*v.y-H)+d.y*B*(6*m.y*v.y+3*H)+f.y*l.x*I*(-2*m.y*v.y-H)+f.x*l.y*I*(-4*m.y*v.y-2*H)+d.x*I*u.y*(-6*m.y*v.y-3*H)+m.x*I*u.y*(6*m.y*v.y+3*H)+B*(-2*m.y*H-U*v.y-m.y*(2*m.y*v.y+H)),-d.x*f.x*l.y*u.x*g.y*u.y+d.x*f.y*l.x*u.x*g.y*u.y+6*d.x*f.y*g.x*l.y*u.x*u.y-6*d.y*f.x*l.x*u.x*g.y*u.y-d.y*f.x*g.x*l.y*u.x*u.y+d.y*f.y*l.x*g.x*u.x*u.y-f.x*f.y*l.x*g.x*l.y*u.y+f.x*f.y*l.x*l.y*u.x*g.y+f.x*m.x*l.y*u.x*g.y*u.y+6*f.x*l.x*m.y*u.x*g.y*u.y+f.x*m.y*g.x*l.y*u.x*u.y-m.x*f.y*l.x*u.x*g.y*u.y-6*m.x*f.y*g.x*l.y*u.x*u.y-f.y*l.x*m.y*g.x*u.x*u.y-6*d.x*m.x*g.x*P-2*d.x*g.x*N*u.x+6*d.y*m.y*B*g.y+2*m.x*g.x*N*u.x+2*d.y*C*g.y*u.y-2*C*m.y*g.y*u.y-6*d.x*d.y*g.x*u.x*R+3*d.x*f.x*l.x*g.y*R-2*d.x*f.x*g.x*l.y*R-4*d.x*f.y*l.x*g.x*R+3*d.y*f.x*l.x*g.x*R+6*d.x*d.y*I*g.y*u.y+6*d.x*m.x*u.x*g.y*R-3*d.x*f.y*l.y*I*g.y+2*d.x*l.x*g.x*O*u.y+2*d.x*l.x*O*u.x*g.y+6*d.x*m.y*g.x*u.x*R+4*d.y*f.x*l.y*I*g.y+6*d.y*m.x*g.x*u.x*R+2*d.y*f.y*l.x*I*g.y-3*d.y*f.y*g.x*l.y*I+2*d.y*l.x*g.x*O*u.x-3*f.x*m.x*l.x*g.y*R+2*f.x*m.x*g.x*l.y*R+f.x*f.y*g.x*O*u.x-3*f.x*l.x*m.y*g.x*R+4*m.x*f.y*l.x*g.x*R-6*d.x*m.y*I*g.y*u.y-2*d.x*L*l.y*g.y*u.y-6*d.y*m.x*I*g.y*u.y-6*d.y*m.y*g.x*I*u.y-2*d.y*L*g.x*l.y*u.y-2*d.y*L*l.y*u.x*g.y-f.x*f.y*L*g.y*u.y-4*f.x*m.y*l.y*I*g.y-2*f.x*A*g.x*u.x*u.y+3*m.x*f.y*l.y*I*g.y-2*m.x*l.x*g.x*O*u.y-2*m.x*l.x*O*u.x*g.y-6*m.x*m.y*g.x*u.x*R-2*f.y*l.x*m.y*I*g.y+3*f.y*m.y*g.x*l.y*I-2*l.x*m.y*g.x*O*u.x-A*l.x*g.x*l.y*u.x+6*m.x*m.y*I*g.y*u.y+2*m.x*L*l.y*g.y*u.y+2*M*f.y*u.x*g.y*u.y+M*l.x*l.y*g.y*u.y+2*L*m.y*g.x*l.y*u.y+2*L*m.y*l.y*u.x*g.y+3*x*g.x*P-3*w*B*g.y+3*D*g.x*P+S*g.x*I-_*g.y*R-3*U*B*g.y-f.x*A*I*g.y+M*f.y*g.x*R-3*x*u.x*g.y*R+3*w*g.x*I*u.y-M*O*u.x*g.y+A*L*g.x*u.y-3*D*u.x*g.y*R+3*U*g.x*I*u.y,d.x*d.y*f.x*l.y*u.x*u.y-d.x*d.y*f.y*l.x*u.x*u.y+d.x*f.x*f.y*l.x*l.y*u.y-d.y*f.x*f.y*l.x*l.y*u.x-d.x*f.x*m.y*l.y*u.x*u.y+6*d.x*m.x*f.y*l.y*u.x*u.y+d.x*f.y*l.x*m.y*u.x*u.y-d.y*f.x*m.x*l.y*u.x*u.y-6*d.y*f.x*l.x*m.y*u.x*u.y+d.y*m.x*f.y*l.x*u.x*u.y-f.x*m.x*f.y*l.x*l.y*u.y+f.x*f.y*l.x*m.y*l.y*u.x+f.x*m.x*m.y*l.y*u.x*u.y-m.x*f.y*l.x*m.y*u.x*u.y-2*d.x*m.x*N*u.x+2*d.y*C*m.y*u.y-3*d.x*d.y*f.x*l.x*R-6*d.x*d.y*m.x*u.x*R+3*d.x*d.y*f.y*l.y*I-2*d.x*d.y*l.x*O*u.x-2*d.x*f.x*m.x*l.y*R-d.x*f.x*f.y*O*u.x+3*d.x*f.x*l.x*m.y*R-4*d.x*m.x*f.y*l.x*R+3*d.y*f.x*m.x*l.x*R+6*d.x*d.y*m.y*I*u.y+2*d.x*d.y*L*l.y*u.y+2*d.x*f.x*A*u.x*u.y+2*d.x*m.x*l.x*O*u.y+6*d.x*m.x*m.y*u.x*R-3*d.x*f.y*m.y*l.y*I+2*d.x*l.x*m.y*O*u.x+d.x*A*l.x*l.y*u.x+d.y*f.x*f.y*L*u.y+4*d.y*f.x*m.y*l.y*I-3*d.y*m.x*f.y*l.y*I+2*d.y*m.x*l.x*O*u.x+2*d.y*f.y*l.x*m.y*I+f.x*m.x*f.y*O*u.x-3*f.x*m.x*l.x*m.y*R-2*d.x*L*m.y*l.y*u.y-6*d.y*m.x*m.y*I*u.y-2*d.y*m.x*L*l.y*u.y-2*d.y*M*f.y*u.x*u.y-d.y*M*l.x*l.y*u.y-2*d.y*L*m.y*l.y*u.x-2*f.x*m.x*A*u.x*u.y-f.x*f.y*L*m.y*u.y+3*m.x*f.y*m.y*l.y*I-2*m.x*l.x*m.y*O*u.x-m.x*A*l.x*l.y*u.x+3*w*f.x*l.x*u.x*u.y+3*f.x*l.x*U*u.x*u.y+2*m.x*L*m.y*l.y*u.y-3*x*f.y*l.y*u.x*u.y+2*M*f.y*m.y*u.x*u.y+M*l.x*m.y*l.y*u.y-3*D*f.y*l.y*u.x*u.y-k*P+b*B+j*P-G*B-3*d.x*D*P-d.x*S*I+3*x*m.x*P+d.y*_*R+3*d.y*U*B+m.x*S*I+x*N*u.x-3*w*m.y*B-w*C*u.y+D*N*u.x-_*m.y*R-C*U*u.y-d.x*M*f.y*R+d.y*f.x*A*I-3*d.x*w*I*u.y-d.x*A*L*u.y+d.y*M*O*u.x-f.x*A*m.y*I+3*x*d.y*u.x*R+x*f.x*l.y*R+2*x*f.y*l.x*R-2*w*f.x*l.y*I-w*f.y*l.x*I+M*m.x*f.y*R-3*d.x*U*I*u.y+3*d.y*D*u.x*R+f.x*D*l.y*R-2*f.x*U*l.y*I+m.x*A*L*u.y-f.y*l.x*U*I-x*l.x*O*u.y-3*x*m.y*u.x*R+3*w*m.x*I*u.y+w*L*l.y*u.x-M*m.y*O*u.x+2*D*f.y*l.x*R+3*m.x*U*I*u.y-D*l.x*O*u.y-3*D*m.y*u.x*R+L*U*l.y*u.x].reverse(),0,1).forEach((function(t){var e=F([u.x,l.x,f.x,d.x-m.x-t*g.x-t*t*v.x-t*t*t*h.x].reverse()),o=F([u.y,l.y,f.y,d.y-m.y-t*g.y-t*t*v.y-t*t*t*h.y].reverse());e.length>0&&o.length>0&&e.forEach((function(e){-1e-4<=e&&e<=1.0001&&o.forEach((function(o){Math.abs(e-o)<1e-4&&(r.push(e),i.push(t),n.push(y({x:h.x*(t*t*t)+v.x*(t*t)+(g.x*t+m.x),y:h.y*(t*t*t)+v.y*(t*t)+(g.y*t+m.y)})))}))}))}))}function _(t){var e,n,r,i,o,a,s,c,u=[],l=t[3],f=t[2]/l,d=t[1]/l,h=(3*d-f*f)/3,v=(2*f*f*f-9*d*f+t[0]/l*27)/27,p=f/3,g=v*v/4+h*h*h/27,m=v/2;return Math.abs(g)<=1e-8&&(g=0),g>0?(e=(n=-m+(r=Math.sqrt(g)))>=0?Math.pow(n,1/3):-Math.pow(-n,1/3),(n=-m-r)>=0?e+=Math.pow(n,1/3):e-=Math.pow(-n,1/3),u.push(e-p)):g<0?(i=Math.sqrt(-h/3),o=Math.atan2(Math.sqrt(-g),-m)/3,a=Math.cos(o),s=Math.sin(o),c=Math.sqrt(3),u.push(2*i*a-p),u.push(-i*(a+c*s)-p),u.push(-i*(a-c*s)-p)):(n=m>=0?-Math.pow(m,1/3):Math.pow(-m,1/3),u.push(2*n-p),u.push(-n-p)),u}function F(t){for(var e=t.length-1;e>=0&&Math.abs(t[e])<=s.CONST.TOLERANCE;e--)t.pop();switch(t.length-1){case 1:return function(t){var e=[],n=t[1];return 0!==n&&e.push(-t[0]/n),e}(t);case 2:return function(t){var e,n=[],r=t[2],i=t[1]/r,o=i*i-t[0]/r*4;return o>0?(e=Math.sqrt(o),n.push(.5*(-i+e)),n.push(.5*(-i-e))):0===o&&n.push(.5*-i),n}(t);case 3:return _(t);case 4:return function(t){var e,n,r,i,o,a,c,u,l=[],f=t[4],d=t[3]/f,h=t[2]/f,v=t[1]/f,p=t[0]/f;return e=d*d/4-h+(n=_([1,-h,d*v-4*p,-d*d*p+4*h*p-v*v].reverse())[0]),Math.abs(e)<=s.CONST.TOLERANCE&&(e=0),e>0?(c=(o=3*d*d/4-(r=Math.sqrt(e))*r-2*h)+(a=(4*d*h-8*v-d*d*d)/(4*r)),u=o-a,Math.abs(c)<=s.CONST.TOLERANCE&&(c=0),Math.abs(u)<=s.CONST.TOLERANCE&&(u=0),c>=0&&(i=Math.sqrt(c),l.push(-d/4+(r+i)/2),l.push(-d/4+(r-i)/2)),u>=0&&(i=Math.sqrt(u),l.push(-d/4+(i-r)/2),l.push(-d/4-(i+r)/2))):e<0||(a=n*n-4*p)>=-s.CONST.TOLERANCE&&(a<0&&(a=0),(o=3*d*d/4-2*h)+(a=2*Math.sqrt(a))>=s.CONST.TOLERANCE&&(l.push(-d/4+Math.sqrt(o+a)/2),l.push(-d/4-Math.sqrt(o+a)/2)),o-a>=s.CONST.TOLERANCE&&(l.push(-d/4+Math.sqrt(o-a)/2),l.push(-d/4-Math.sqrt(o-a)/2))),l}(t);default:return[]}}function E(t,e,n){var r,i,o,a,c=[];if(t.length-1==1)null!==(r=u(t,e,n))&&c.push(r);else if(i=function(t){for(var e=[],n=1;n<t.length;n++)e.push(n*t[n]);return e}(t),(o=E(i,e,n)).length>0){for(null!==(r=u(t,e,o[0]))&&c.push(r),a=0;a<=o.length-2;a++)null!==(r=u(t,o[a],o[a+1]))&&c.push(r);null!==(r=u(t,o[o.length-1],n))&&c.push(r)}else null!==(r=u(t,e,n))&&c.push(r);return c;function u(t,e,n){var r,i,o=l(t,e),a=l(t,n),c=null,u=0;if(Math.abs(o)<=s.CONST.TOLERANCE)c=e;else if(Math.abs(a)<=s.CONST.TOLERANCE)c=n;else if(o*a<=0)for(r=Math.ceil((Math.log(n-e)+6*Math.LN10)/Math.LN2);u<r&&(i=l(t,c=.5*(e+n)),!(Math.abs(i)<=s.CONST.TOLERANCE));u++)i*o<0?(n=c,a=i):(e=c,o=i);return c;function l(t,e){for(var n=0,r=t.length-1;r>=0;r--)n=n*e+t[r];return n}}}},isPointOnSegment:function(t,e,n,r){return t===n[0].x&&e===n[0].y||t===n[1].x&&e===n[1].y||("L"===n[1].type?function(t,e,n,r){var i,o=!0;return r=r||s.CONST.TOLERANCE,Math.min(n[0].x,n[1].x)-t>r||t-Math.max(n[0].x,n[1].x)>r||Math.min(n[0].y,n[1].y)-e>r||e-Math.max(n[0].y,n[1].y)>r?o=!1:Math.abs(n[1].x-n[0].x)>=r&&(i=(n[1].y-n[0].y)/(n[1].x-n[0].x),o=0===i?Math.abs(e-n[0].y)<=r:Math.abs(e-n[0].y-i*(t-n[0].x))<=r),o}(t,e,n,r):function(t,e,n,r){var i=T.getPathBox(n),o=!1;return!1===(o=a(t,e,[{type:"M",x:i.x-5,y:e},{type:"L",x:i.x+i.width+5,y:e}],n))&&(o=a(t,e,[{type:"M",x:t,y:i.y-5},{type:"L",x:t,y:i.y+i.height+5}],n)),o;function a(t,e,n,i){var o=T.intersect(n,i);return 0!==o.pts.length&&T.pointExist(o.pts,{x:t,y:e},r||.05)}}(t,e,n,r))},isPointOnPath:function(t,e,n,r){var i,o,a=T.getPathBox(n);if(void 0===r&&(r=.01),t-a.x+r<0||t-(a.x+a.width)>r||e-a.y+r<0||e-(a.y+a.height)>r)return!1;for(i=S.segmentize(n),o=0;o<i.length;o++)if(T.isPointOnSegment(t,e,i[o],r))return!0;return!1},isPointInPath:function(t,e,n){var r,i,o,a=0,c=[],u=S.segmentize(n),l=T.getPathBox(n),f=0,d=.02;if(t-l.x+d<0||t-(l.x+l.width)>d||e-l.y+d<0||e-(l.y+l.height)>d)return!1;for(o=[{type:"M",x:t,y:e},{type:"L",x:t,y:l.y+l.height+10}];f<u.length;f++){if(i=u[f],T.isPointOnSegment(t,e,i,.01))return!0;r=T.intersect(i,o),a+=r.pts.length,1===r.pts.length&&("L"!==i[1].type||Math.abs(r.pts[0].x-i[0].x)<=s.CONST.TOLERANCE||Math.abs(r.pts[0].x-i[1].x)<=s.CONST.TOLERANCE)&&c.push(i)}return o[0].x+=1e-4,o[1].x+=1e-4,c.length>1&&c.forEach((function(t){a+=T.intersect(t,o).pts.length-1})),a%2!=0},getQuadControls:function(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}},getCubicControls:function(t,e,n,r,i,o){var a=1-i,s=1-o,c=a*a,u=a*s,l=s*s,f=i*i,d=i*o,h=o*o;return[{x:c*s*t.x+(i*u*2+c*o)*e.x+(f*s+d*a+d*a)*n.x+f*o*r.x,y:c*s*t.y+(i*u*2+c*o)*e.y+(f*s+d*a+d*a)*n.y+f*o*r.y},{x:u*s*t.x+(o*u*2+l*i)*e.x+(d*s+h*a+d*s)*n.x+h*i*r.x,y:u*s*t.y+(o*u*2+l*i)*e.y+(d*s+h*a+d*s)*n.y+h*i*r.y}]},getPointOnSegment:function(t,e){return"L"===t[1].type.toUpperCase()?function(t,e,n){return{x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y}}(t[0],t[1],e):function(t,e){return function t(e,n){var r=[],i=1;if(1===n)return e[e.length-1];if(0===n)return e[0];if(1===e.length)return e[0];for(;i<e.length;i++)r.push({x:e[i-1].x+(e[i].x-e[i-1].x)*n,y:e[i-1].y+(e[i].y-e[i-1].y)*n});return t(r,n)}(S.curve2Points(t),e)}(t,e)},getTValue:function(t,e){var n=.01;if(Math.abs(e.x-t[0].x)<=n&&Math.abs(e.y-t[0].y)<=n)return 0;if(Math.abs(e.x-t[1].x)<=n&&Math.abs(e.y-t[1].y)<=n)return 1;switch(t[1].type){case"L":return function(t,e,r){var i={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y)},o={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)};return r.x<i.x-n||r.x>o.x+n||r.y<i.y-n||r.y>o.y+n?null:Math.abs(e.x-t.x)<=.001?(r.y-t.y)/(e.y-t.y):(r.x-t.x)/(e.x-t.x)}(t[0],t[1],e);case"Q":return function(t,e){var n,r,i=S.curve2Points(t),o=.1,a=i[0].x-2*i[1].x+i[2].x,s=2*i[1].x-2*i[0].x,c=i[0].y-2*i[1].y+i[2].y,u=2*i[1].y-2*i[0].y,l=s*e.y-s*i[0].y-u*e.x+u*i[0].x,f=c*e.x-c*i[0].x-a*e.y+a*i[0].y;return null!==(n=(n=0===l?0:0===f?null:l/f)<0||n>1?null:n)&&(r=T.getPointOnSegment(t,n),Math.abs(e.x-r.x)<=o&&Math.abs(e.y-r.y)<=o||(n=null)),n}(t,e);case"C":return function(t,e){var n=S.curve2Points(t),r=i(o(n[0].x,n[1].x,n[2].x,n[3].x,e.x));return null===r&&(r=i(o(n[0].y,n[1].y,n[2].y,n[3].y,e.y))),null!==r&&(Math.abs(0-r)<=s.CONST.TOLERANCE?r=0:Math.abs(1-r)<=s.CONST.TOLERANCE&&(r=1)),r;function i(n){var r,i,o=.75,a=null;return n.forEach((function(n){var s=T.getPointOnSegment(t,n);(r=Math.hypot(e.x-s.x,e.y-s.y))<=o&&(null===a||i>r)&&(a=n,i=r)})),a}function o(t,e,n,r,i){var o,a,c,u,l,f,d,h,v,p,g,m,y,x=0-s.CONST.TOLERANCE,k=1+s.CONST.TOLERANCE,w=r-3*n+3*e-t,b=3*t-6*e+3*n,M=3*e-3*t,_=t-i,F=[];return 0===w&&(w=s.CONST.TOLERANCE),0==(o=18*w*b*M*_-4*b*b*b*_+b*b*M*M-4*w*M*M*M-27*w*w*_*_)?(m=-1*T.cubeRoot(_/w))>=x&&m<=k&&F.push(m):(u=(c=(2*b*b*b/(w*w*w)-9*b*M/(w*w)+27*_/w)/27)*c/4+(a=(3*M/w-b*b/(w*w))/3)*a*a/27,o<0?(m=(l=T.cubeRoot(Math.sqrt(u)-c/2))+(f=T.cubeRoot(-Math.sqrt(u)-c/2))-b/(3*w))>=x&&m<=k&&F.push(m):(l=Math.sqrt(c*c/4-u),f=T.cubeRoot(l),d=(y=-c/(2*l))<-1?Math.acos(-1):y>1?Math.acos(1):Math.acos(y),h=-1*f,v=Math.cos(d/3),p=Math.sqrt(3)*Math.sin(d/3),g=b/(3*w)*-1,(m=2*f*Math.cos(d/3)-b/(3*w))>=x&&m<=k&&F.push(m),(m=h*(v+p)+g)>=x&&m<=k&&F.push(m),(m=h*(v-p)+g)>=x&&m<=k&&F.push(m))),F}}(t,e)}},getLinePoint:function(t,e,n,r,i){var o=e.y-t.y,a=e.x-t.x,s=o/a,c=t.y-s*t.x;return void 0===n?0===a?t.x:0===s?i:(r-c)/s:0===a?t.y:0===s?i:s*n+c},cubeRoot:function(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)},adjustPointToLine:function(t,e){var n,r,i,o,a,s,c,u={x:t[0].x,y:t[0].y},l={x:t[1].x,y:t[1].y},f=l.y-u.y,d=l.x-u.x,h=e.y-u.y,v=e.x-u.x;return Math.abs(d)>.001?(n=Math.atan(f/(d||1)),i=(r=Math.atan(h/(v||1)))-n,o=(e.x-u.x)/Math.cos(r),a=Math.cos(n)*Math.cos(i)*o,s=Math.sin(n)*Math.cos(i)*o):(a=0,s=h),(c={x:u.x+a,y:u.y+s}).x=p(c.x,u.x,l.x),c.y=p(c.y,u.y,l.y),c;function p(t,e,n){var r=Math.min(e,n);return t<r||t>(r=Math.max(e,n))?r:t}},getOpposite:function(t,e){return e*Math.tan(T.rad(t))},nearestGrid:function(t,e,n){var r={px:10,in:12,mm:7.559,cm:7.559,m:7.559}[e||"px"];return void 0===n&&(n=1),r*=n,Math.round(t/r)*r},getVectorAngle:function(t,e,n){var r,i={x:e.x-t.x,y:e.y-t.y},o={x:n.x-e.x,y:n.y-e.y};return r=1==(r=(o.x*i.x+o.y*i.y)/(Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))*Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))))&&0===i.x&&0===o.x?-1:r,T.deg(Math.acos(r.toFixed(2)))},matrix:{multiply:function(t,e){var n={};return n.a=t.a*e.a+t.c*e.b,n.b=t.b*e.a+t.d*e.b,n.c=t.a*e.c+t.c*e.d,n.d=t.b*e.c+t.d*e.d,n.e=t.a*e.e+t.c*e.f+t.e,n.f=t.b*e.e+t.d*e.f+t.f,t.a=n.a,t.b=n.b,t.c=n.c,t.d=n.d,t.e=n.e,t.f=n.f,t},point:function(t,e){return{x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}},list:function(t,e){var n=[];return t.forEach((function(t){var r={type:t.type};void 0!==t.x&&(r.x=e.a*t.x+e.c*t.y+e.e,r.y=e.b*t.x+e.d*t.y+e.f),void 0!==t.x1&&(r.x1=e.a*t.x1+e.c*t.y1+e.e,r.y1=e.b*t.x1+e.d*t.y1+e.f),void 0!==t.x2&&(r.x2=e.a*t.x2+e.c*t.y2+e.e,r.y2=e.b*t.x2+e.d*t.y2+e.f),n.push(r)})),n},rotate:function(t,e){var n,r,i;return e=e*Math.PI/180,i={a:n=Math.cos(e),b:r=Math.sin(e),c:-r,d:n,e:0,f:0},T.matrix.multiply(t,i)}}};g=s.go;var A=s.fn,S=s.fn.path,T=s.math,L=s.formula,C=(v=s.CONST,{id_num:0,getID:function(){return(+new Date).toString(36)+(C.id_num++).toString(36)},getNode:function(t){return t instanceof s.Nodes?t.el[0]:t instanceof l?t[0]:void 0!==t.$?t.$[0]:t},getOrMake:function(t,e,n){var r,o,a,c,l,f;return e=e||s.page,l=h(C.getNode(e)),t&&(o="."===(a=t.charAt(0)),(r="#"===a)?(c=l._findID(t)).length>0&&c.el[0].parentNode===l.el[0]&&(f=c):((r||o)&&(t=a+h.escape(t)),f=l._children((o?n:"")+t))),void 0!==f&&0!==f.length||(f=h((new i).createElementNS(s.CONST.XMLNS,n)),r?f.el[0].id=h.unEscape(t):o?f._attr({class:h.unEscape(t),id:C.getID()}):f.el[0].id=C.getID(),"path"===n&&u.activePage&&(l.el[0].id===u.activePage.id()||s.$frag)&&f._attr("fill","none"),e.v?(e.$frag?e.$frag[0]:l.el[0]).appendChild(f.el[0]):l.el[0].appendChild(f.el[0])),f},viewBox:function(t,e,n,r,i){var o,a;return void 0!==e&&void 0!==n&&void 0!==r&&void 0!==i?t.attr("viewBox",e+" "+n+" "+r+" "+i):void 0!==e&&void 0===n&&void 0===r&&void 0===i?t.attr("viewBox",e):(null===(o=t.attr("viewBox"))?o={x:0,y:0,width:null===(a={width:t.attr("width"),height:t.attr("height")}).width?300:new u.Length(a.width).px(),height:null===a.height?150:new u.Length(a.height).px()}:(o=o.split(" "),o={x:parseFloat(o[0]),y:parseFloat(o[1]),width:parseFloat(o[2]),height:parseFloat(o[3])}),o)},boxFromTo:function(t,e,n,r){var i=s.fn.xyFromTo(t.x,t.y,e,n,r),o={};return r=r||n,o.x=i.x,o.y=i.y,i=s.fn.xyFromTo(t.x+t.width,t.y+t.height,e,n,r),o.width=i.x-o.x,o.height=i.y-o.y,o},getTransform:function(t,e){for(var n,r=0;r<t.numberOfItems;r++)if((n=t.getItem(r)).index=r,n.type===e)return n},getShapes:function(t,e,n){var r,i=[];return void 0===e?s.wrap(t.$).subs():""===(e=(e+"").trim())||null===e?null:(e=h.unEscape(e),(r=t.$.find("g#"+h.escape(e))).length>0?new u.Shape(r[0]):n?(t.$.find('g[v\\:name^="'+h.escape(e)+'"]').filter(o).each((function(t,e){i.push(new u.Shape(e))})),i):(r=t.$.find('g[v\\:name="'+h.escape(e)+'"]').filter(o)).length>0?new u.Shape(r[0]):null);function o(t,e){return!$(e).closest("#blacky_0").length}},text:function(t,e){return void 0===e?t.$[0].textContent:(t.$[0].textContent=e,t)},textStyle:function(t,e,n){var r;if("string"!=typeof e){for(r in e)a(t,r,e[r]);return t}if(void 0!==n)return a(t,e,n),t;switch(e){case"font-fill":return t.attr("fill")||i(t,e);case"text-align":return t.attr("v:align")||i(t,e);case"font-opacity":return t.attr("fill-opacity")||i(t,e);case"text-stroke":return t.attr("stroke")||i(t,e);case"text-stroke-width":return t.attr("stroke-width")||i(t,e);case"text-stroke-opacity":return t.attr("stroke-opacity")||i(t,e);default:return t.attr(e)||i(t,e)}function i(t,e){var n=t.type(),r="tspan"===n||"textpath"===n?t._parent():[];return 0===r.length?u&&u.activeDoc?u.activeDoc.styles(e):o(t.$[0],e):s.wrap(r.el[0]).style(e)}function a(t,e,n){var r=i(t,e);switch(e){case"font-size":t.attr(e,new u.Length(n).px("px")===r?null:n);break;case"text-align":t.attr("v:align",n==r?null:n);break;case"font-fill":"text"===t.type()?t.attr("fill",null===n?i(t,e):n):t.attr("fill",n==r?null:n);break;case"font-opacity":"text"===t.type()?t.attr("fill-opacity",null===n?i(t,e):n):t.attr("fill-opacity",n==r?null:n);break;case"text-stroke":t.attr("stroke",n==r?null:n);break;case"text-stroke-width":t.attr("stroke-width",new u.Length(n).px("px")===r?null:n);break;case"text-stroke-opacity":t.attr("stroke-opacity",n==r?null:n);break;default:t.attr(e,n==r?null:n)}}},skew:function(t,e,n,r){if(s.ex.skew){var i,o,a=t.$[0].transform.baseVal,c="skewX"===r?C.getTransform(a,SVGTransform.SVG_TRANSFORM_SKEWX):C.getTransform(a,SVGTransform.SVG_TRANSFORM_SKEWY),u=t.type();switch(e){case null:l(t,c,r);break;case void 0:return void 0===c?0:c.angle;default:return"use"===u&&0!==(o=$(h.escape(t.link()))).length&&(t=s.wrap(o)),0===(e=T.normalizeAngle(e))||360===e?l(t,c,r):(i=t.attr("transform")||"",i="skewX"===r?i.replace(/\s*skewX\(.*?\)/g,"").trim():i.replace(/\s*skewY\(.*?\)/g,"").trim(),t.attr("transform",function(t,e,n){var r="",i=t.split(") "),o=!1;i.forEach((function(t,i){i===n&&(r+=(""===r?"":" ")+e,o=!0),t&&(r+=(""===r?"":" ")+t+(")"===t.substr(t.length-1)?"":")"))})),o||(r+=(""===r?"":" ")+e);return r.trim()}(i,r+"("+e+")",n))),t}}function l(t,e,n){var r;e&&(r="skewX"===n?t.attr("transform").replace(/skewX\(.*?\)\s*/,""):t.attr("transform").replace(/skewY\(.*?\)\s*/,""),t.attr("transform",""===r?null:r.trim()))}},convertUnit:function(t,e){var n=t.json("v:unit");return n["move.x"]&&"px"!==n["move.x"]&&(e.x=new u.Length(e.x)[n["move.x"]](n["move.x"])),n["move.y"]&&"px"!==n["move.y"]&&(e.y=new u.Length(e.y)[n["move.y"]](n["move.y"])),e},PRIMS:["rect:first-child","ellipse:first-child","path:first-child","image:first-child","svg:first-child","line:first-child"],PRIM_ELES:["rect","ellipse","path","image","svg","line"],PRIMS_FIRST:"rect:first-child, ellipse:first-child, path:first-child, image:first-child, svg:first-child, line:first-child",GROUP_FIRST:"g[id]>rect:first-child, g[id]>ellipse:first-child, g[id]>path:first-child, g[id]>image:first-child, g[id]>svg:first-child, g[id]>line:first-child"}),O={v:!0,id:function(t){return void 0===t?""===this[0].id?null:this[0].id:null===t?(this._removeAttr("id"),this):(this[0].id=t,this)},attr:function(t,e){return h.attr(C.getNode(this),t,e,this)},attrs:function(t){var e=A.attrs(this[0]);return!t&&e.id&&delete e.id,e},type:function(){var t=C.getNode(this),e=t.tagName.toLowerCase();return"svg"===e&&(e="g"===((t.parentNode||{tagName:""}).tagName||"").toLowerCase()?"svg":"SVG"),e},back:function(){return this.$.parent().prepend(this.$.detach()),this},front:function(){return this.$.parent().closest("[id]").append(this.$.detach()),this},show:function(){return this.attr("display",null)},hide:function(){return this.attr("display","none")},style:function(t,e){var n,r,i=this,a=i.type();if("string"==typeof t)return void 0===e?"ellipse"===a&&"rx"===t?u.activeDoc.styles(t):(r=i.attr(t),null==r?u&&u.activeDoc?u.activeDoc.styles(t):new u.Length(o(i[0])[t]).px():r):(s(i,t,e,a),i);for(n in t)s(i,n,t[n],a);return i;function s(t,e,n,r){var i,o=u.activeDoc.styles(e);switch(e){case"stroke-width":(i=new u.Length(n)).value+i.resultUnit==o&&(n=null);break;case"rx":if("rect"!==r&&"g"!==r)return;(n=(i=new u.Length(n)).value+i.resultUnit)==o&&(n=null);break;case"stroke":case"fill":0===n.indexOf("url")&&(n=n.replace(/"/g,"")),n==o&&(n=null);break;case"text-stroke":case"text-stroke-width":case"text-stroke-opacity":e=e.slice(5),n==o&&(n=null);break;default:n==o&&(n=null)}t.attr(e,n)}},getScreenCTM:function(t){var e,n,r=h(this),i=s.ctm&&void 0!==s.ctm[this[0].id]?s.ctm[this[0].id]:this[0].getScreenCTM();return!i&&s.CONST.FIREFOX&&(i=h.parseSVG("<svg></svg>").el[0].createSVGMatrix()),e=(t=void 0===t?1===r._closest("svg#draw\\.id").length:t)?u.activePage.scale():1,n=t&&s.zoom?s.zoom.level:1,1===i.a&&s.CONST.FIREFOX&&(i.a/=n,i.d/=n,i.a/=e,i.d/=e),i},toGlobal:function(t,e,n){return n=n||u.activePage.$,s.fn.xyFromTo(t,e,this,n)},toLocal:function(t,e,n){return s.fn.xyFromTo(t,e,n||u.activePage.$,this)},boxFrom:function(t,e){return e=e||u.activePage.$,C.boxFromTo(t,e,this)},delete:function(){return h(this)._remove(),this},closestGroup:function(){var t=this._closest("g[id]");return 0===t.length?null:s.wrap(t)},isShape:function(t){var e=!1;return"g"===this[0].tagName&&this[0].id&&(e=!!t||0===this._closest("#blacky\\.id").length),e},parents:function(t){var e=[];return t=t||"shape",this._parentsUntil("svg")._matches("g[id]")._each((function(n){switch(t){case"shape":e.push(new u.Shape(n.el[0]));break;case"wrap":e.push(n);break;case"$":e.push(n._$());break;case"node":e.push(n.el[0])}})),e},json:function(t,e){var n;return void 0===e?n=JSON.parse(this[0].hasAttribute(t)&&this[0].getAttribute(t)||"{}"):(null===e||"object"===_typeof(e)&&h.isEmpty(e)?this[0].removeAttribute(t):this[0].setAttribute(t,JSON.stringify(e)),n=this),n},index:function(){return h(C.getNode(this))._index()},filterAttr:function(t){var e=this;return void 0===t?e=this.attr("filter").replace("url#","").replace(".flt)",""):null===t?this.attr("filter",null):0===t.indexOf("url(#")?this.attr("filter",t):this.attr("filter","url(#"+t+".flt)"),e}};h.extend(O,s.Nodes.prototype);var N=new y,I={move:function(t,e){var n;return void 0===t&&void 0===e?r(this):(void 0!==t&&void 0!==e||(n=r(this),t=void 0===t?n.x:t,e=void 0===e?n.y:e),r(this,{x:t,y:e}),this);function r(t,e){var n,r,i,o,a,c,l,f=t[0].tagName;switch(f){case"path":return i={x:(n=t.box()).x,y:n.y},void 0===e?C.convertUnit(t,i):(o={x:new u.Length(e.x).px(),y:new u.Length(e.y).px()},r=S.offset(t.list(),o.x-i.x,o.y-i.y),t.list(r),t);case"g":return void 0===e?A.translate(t):(A.translate(t,e.x,e.y),t);case"ellipse":case"circle":return c="ellipse"===f?"rx":"r",l="ellipse"===f?"ry":"r",void 0===e?(i={x:parseFloat(t.attr("cx"))||0,y:parseFloat(t.attr("cy"))||0,x_unit:v.TYPE2UNIT[v.UNIT2TYPE[String(t.attr("cx")).substr(-2)]||1],y_unit:v.TYPE2UNIT[v.UNIT2TYPE[String(t.attr("cy")).substr(-2)]||1]},o={x:parseFloat(t.attr(c))||0,y:parseFloat(t.attr(l))||0,x_unit:v.TYPE2UNIT[v.UNIT2TYPE[String(t.attr(c)).substr(-2)]||1],y_unit:v.TYPE2UNIT[v.UNIT2TYPE[String(t.attr(l)).substr(-2)]||1]},i.x_unit===o.x_unit?i.x=i.x-o.x:i.x=i.x-new u.Length(o.x+o.x_unit)[i.x_unit](),i.y_unit===o.y_unit?i.y=i.y-o.y:i.y=i.y-new u.Length(o.y+o.y_unit)[i.y_unit](),(a=t.$[0].parentNode&&"g"===t.$[0].parentNode.tagName?s.wrap(t.$[0].parentNode).json("v:unit"):{})["move.x"]&&!1===A.isSvgUnit(a["move.x"])&&(i.x=new u.Length(i.x)[a["move.x"]]()+a["move.x"]),a["move.y"]&&!1===A.isSvgUnit(a["move.y"])&&(i.y=new u.Length(i.y)[a["move.y"]]()+a["move.y"]),{x:i.x,y:i.y}):(e={x:new u.Length(e.x).toSvgUnit(),y:new u.Length(e.y).toSvgUnit()},i={x:new u.Length(e.x),y:new u.Length(e.y)},o={x:new u.Length(t.attr(c)||0)[i.x.unit](),y:new u.Length(t.attr(l)||0)[i.y.unit]()},t.attr({cx:i.x.value+o.x+i.x.resultUnit,cy:i.y.value+o.y+i.y.resultUnit}));default:return void 0===e?(i={x:t.attr("x"),y:t.attr("y")},(a=t.$[0].parentNode&&"g"===t.$[0].parentNode.tagName?s.wrap(t.$[0].parentNode).json("v:unit"):{})["move.x"]&&!1===A.isSvgUnit(a["move.x"])&&(i.x=new u.Length(i.x)[a["move.x"]]()+a["move.x"]),a["move.y"]&&!1===A.isSvgUnit(a["move.y"])&&(i.y=new u.Length(i.y)[a["move.y"]]()+a["move.y"]),i):(e={x:(i={x:new u.Length(e.x),y:new u.Length(e.y)}).x.toSvgUnit(),y:i.y.toSvgUnit()},t.attr({x:e.x,y:e.y}))}}},moveU:function(t,e){var n,r,i;switch(void 0!==t&&void 0!==v.UNIT2TYPE[t]||(t="px"),this.type()){case"clippath":case"path":n=this.box(),r="px"===t?{x:s.fn.formatValue(n.x,e),y:s.fn.formatValue(n.y,e)}:{x:new u.Length(n.x)[t](e),y:new u.Length(n.y)[t](e)};break;case"ellipse":case"circle":(r=this.move()).x_unit=v.TYPE2UNIT[v.UNIT2TYPE[String(this.attr("cx")).substr(-2)]||1],r.y_unit=v.TYPE2UNIT[v.UNIT2TYPE[String(this.attr("cy")).substr(-2)]||1],r=o(r,t,e);break;case"g":i=this[0].getAttribute("transform")||"",(r=N.get(i))||(r=A.getTranslate(i),N.set(i,r)),r="px"===t?{x:s.fn.formatValue(r.x,e),y:s.fn.formatValue(r.y,e)}:{x:new u.Length(r.x)[t](e),y:new u.Length(r.y)[t](e)};break;case"tspan":r={},this.$[0].x.baseVal.length>0?(r.x=this.$[0].x.baseVal.getItem(0).valueInSpecifiedUnits,r.x_unit=v.TYPE2UNIT[this.$[0].x.baseVal.getItem(0).unitType]):(r.x=0,r.x_unit="px"),this.$[0].y.baseVal.length>0?(r.y=this.$[0].y.baseVal.getItem(0).valueInSpecifiedUnits,r.y_unit=v.TYPE2UNIT[this.$[0].y.baseVal.getItem(0).unitType]):(r.y=0,r.y_unit="px"),r=o(r,t,e);break;case"text":r=o(r={x:this.$[0].x.baseVal.getItem(0).valueInSpecifiedUnits,y:this.$[0].y.baseVal.getItem(0).valueInSpecifiedUnits,x_unit:v.TYPE2UNIT[this.$[0].x.baseVal.getItem(0).unitType],y_unit:v.TYPE2UNIT[this.$[0].y.baseVal.getItem(0).unitType]},t,e);break;default:r=o(r={x:parseFloat(this[0].getAttribute("x"))||0,y:parseFloat(this[0].getAttribute("y"))||0,x_unit:v.TYPE2UNIT[v.UNIT2TYPE[this[0].getAttribute("x")]||1],y_unit:v.TYPE2UNIT[v.UNIT2TYPE[this[0].getAttribute("y")]||1]},t,e)}return r;function o(t,e,n){return t.x=t.x_unit===e?s.fn.formatValue(t.x,n):new u.Length(t.x+t.x_unit)[e](n),t.y=t.y_unit===e?s.fn.formatValue(t.y,n):new u.Length(t.y+t.y_unit)[e](n),{x:t.x,y:t.y}}}},B=new y(100),R={size:function(t,e){var n;return void 0===t&&void 0===e?r(this):(void 0!==t&&void 0!==e||(n=r(this),t=void 0===t?n.width:t,e=void 0===e?n.height:e),r(this,{width:t,height:e}),this);function r(t,e){var n,r,o,a,c,l,f,d,h,v,p,g,m=0,y={x:[],y:[]},x=t.type(),k="ellipse"===x?"rx":"r",w="ellipse"===x?"ry":"r";switch(x){case"clippath":void 0===e?(l={width:(p=t.box()).width,height:p.height},(g=t.$[0].parentNode&&"g"===t.$[0].parentNode.tagName?s.wrap(t.$[0].parentNode).json("v:unit"):{})["size.width"]&&!1===A.isSvgUnit(g["size.width"])&&(l.width=new u.Length(l.width)[g["size.width"]]()+g["size.width"]),g["size.height"]&&!1===A.isSvgUnit(g["size.height"])&&(l.height=new u.Length(l.height)[g["size.height"]]()+g["size.height"])):(d=t.allPrim(),e={width:new u.Length(e.width),height:new u.Length(e.height)},(h=t.box()).width=new u.Length(h.width),h.height=new u.Length(h.height),r={x:e.width.value/(h.width[e.width.unit]()||1)||1,y:e.height.value/(h.height[e.height.unit]()||1)||1},d.forEach((function(t){var e=A.translate(t),n=t.size(),i=t.angleEX(),o=i&&i.angle?T.angleRatio(i.angle,r):r,a={width:new u.Length(n.width),height:new u.Length(n.height)},s={width:a.width.px()*o.x,height:a.height.px()*o.y};A.translate(t,e.x*r.x,e.y*r.y),t.size(s.width,s.height)})));break;case"g":case"path":if(void 0===e)l={width:(p=t.box()).width,height:p.height},(g=t.json("v:unit"))["size.width"]&&!1===A.isSvgUnit(g["size.width"])&&(l.width=new u.Length(l.width)[g["size.width"]]()+g["size.width"]),g["size.height"]&&!1===A.isSvgUnit(g["size.height"])&&(l.height=new u.Length(l.height)[g["size.height"]]()+g["size.height"]);else{for(p=t.sizeU(),a={width:new u.Length(e.width),height:new u.Length(e.height)},r={width:a.width.px()/(0===p.width?1:p.width),height:a.height.px()/(0===p.height?1:p.height)},f=t.list();m<f.length;m++)"z"!==(o=f[m]).type&&"Z"!==o.type&&(y.x.push(o.x),y.y.push(o.y));for(y.x=Math.min.apply(null,y.x),y.y=Math.min.apply(null,y.y),m=0;m<f.length;m++)void 0!==(o=f[m]).x&&(o.x=(o.x-y.x)*r.width+y.x),void 0!==o.y&&(o.y=(o.y-y.y)*r.height+y.y),void 0!==o.x1&&(o.x1=(o.x1-y.x)*r.width+y.x),void 0!==o.y1&&(o.y1=(o.y1-y.y)*r.height+y.y),void 0!==o.x2&&(o.x2=(o.x2-y.x)*r.width+y.x),void 0!==o.y2&&(o.y2=(o.y2-y.y)*r.height+y.y);t.list(f),l=t}break;case"ellipse":case"circle":void 0===e?(l=i(l={width:2*t.$[0][k].baseVal.valueInSpecifiedUnits,height:2*t.$[0][w].baseVal.valueInSpecifiedUnits},t.$[0][k].baseVal.unitType,t.$[0][w].baseVal.unitType),(g=t.$[0].parentNode&&"g"===t.$[0].parentNode.tagName?s.wrap(t.$[0].parentNode).json("v:unit"):{})["size.width"]&&!1===A.isSvgUnit(g["size.width"])&&(l.width=new u.Length(l.width)[g["size.width"]]()+g["size.width"]),g["size.height"]&&!1===A.isSvgUnit(g["size.height"])&&(l.height=new u.Length(l.height)[g["size.height"]]()+g["size.height"])):(n=t.move(),e={width:new u.Length(e.width).toSvgUnit(),height:new u.Length(e.height).toSvgUnit()},a={width:new u.Length(e.width),height:new u.Length(e.height)},"ellipse"===x?t.attr({rx:a.width.value/2+a.width.resultUnit,ry:a.height.value/2+a.height.resultUnit}):t.attr({r:a.width.value/2+a.width.resultUnit}),t.move(new u.Length(n.x)[a.width.unit](a.width.resultUnit),new u.Length(n.y)[a.height.unit](a.height.resultUnit)),l=t);break;default:void 0===e?(l=i(l={width:t.$[0].width.baseVal.valueInSpecifiedUnits,height:t.$[0].height.baseVal.valueInSpecifiedUnits},t.$[0].width.baseVal.unitType,t.$[0].height.baseVal.unitType),(g=t.$[0].parentNode&&"g"===t.$[0].parentNode.tagName?s.wrap(t.$[0].parentNode).json("v:unit"):{})["size.width"]&&!1===A.isSvgUnit(g["size.width"])&&(l.width=new u.Length(l.width)[g["size.width"]]()+g["size.width"]),g["size.height"]&&!1===A.isSvgUnit(g["size.height"])&&(l.height=new u.Length(l.height)[g["size.height"]]()+g["size.height"])):(e={width:new u.Length(e.width).toSvgUnit(),height:new u.Length(e.height).toSvgUnit()},l=t.attr({width:e.width,height:e.height}))}return void 0!==e&&void 0!==t.angleEX&&(c=t.angleEX(),v=t.moveU(),p=t.sizeU(),void 0!==c&&0!==c&&t.angle(c.angle,v.x+.5*p.width,v.y+.5*p.height)),l}function i(t,e,n){return"px"!==v.TYPE2UNIT[e]&&(t.width+=v.TYPE2UNIT[e]),"px"!==v.TYPE2UNIT[n]&&(t.height+=v.TYPE2UNIT[n]),t}},sizeU:function(t,e){var n,r,i=this.type(),o="ellipse"===i?"rx":"r",a="ellipse"===i?"ry":"r";switch(void 0!==t&&void 0!==v.UNIT2TYPE[t]||(t="px"),i){case"clippath":case"g":case"path":n=this.$.hasClass("Group.cls")?this.alignBox():this.box(),r={width:new u.Length(n.width)[t](e),height:new u.Length(n.height)[t](e)};break;case"ellipse":case"circle":r=s(r={width:2*(parseFloat(this[0].getAttribute(o))||0),height:2*(parseFloat(this[0].getAttribute(a))||0)},t,v.UNIT2TYPE[this[0].getAttribute(o).substr(-2)]||1,v.UNIT2TYPE[this[0].getAttribute(a).substr(-2)]||1,e);break;default:r=s(r={width:parseFloat(this[0].getAttribute("width"))||null,height:parseFloat(this[0].getAttribute("height"))||null},t,v.UNIT2TYPE[String(this[0].getAttribute("width")).substr(-2)]||1,v.UNIT2TYPE[String(this[0].getAttribute("height")).substr(-2)]||1,e)}return r;function s(t,e,n,r,i){return n=v.TYPE2UNIT[n],r=v.TYPE2UNIT[r],t.width=new u.Length(t.width+n)[e](i),t.height=new u.Length(t.height+r)[e](i),t}},box:function(t){var e,n=s.wrap(this);switch(n.type()){case"g":e=function(t,e){var n,l,f,d,v=[],p={x:0,y:0,width:0,height:0},g=[],m=t._hasClass("Group.cls");m?(n=t._find(C.GROUP_FIRST),(l=t._find("g[id]>svg:first-child")).length>0&&(n._each((function(t){l._each((function(e){0===t._closest(e[0]).length&&g.push(t.el[0])}))})),n.el=g,l.el.forEach((function(t){n.el.push(t)})))):n=t._children(C.PRIMS_FIRST);if(1===n.length&&(d=a(s.wrap(n.el[0]),0)+"g"+(m?n._parent().el[0].getAttribute("transform"):"")+t[0].getAttribute("transform")+(e||""),f=B.get(d)))return f;n._each((function(n){var a,l,f,d,p,g=s.wrap(n.el[0]),m=0,y=0,x=c(g);switch(s.ex.skew&&(p=g.closestGroup())&&(m=p.skewX(),y=p.skewY()),g.type()){case"path":a=r(g,0);break;case"svg":a=o(g,0);break;default:a=s.ex.skew&&e&&p&&(0!==m||0!==y)?function(t){var e,n,r;e=T.getPathBox(A.shapeToList(t)),r=t.moveU(),e.x=e.x-r.x,e.y=e.y-r.y,t.isChild()&&(n=C.boxFromTo(e,u.activePage.$,t.parent().$),e.x=n.x,e.y=n.y);return e}(new u.Shape(p[0])):A.getBBox(g[0])}if(l={x:a.x+.5*a.width,y:a.y+.5*a.height},g._parentsUntil(t[0])._matches("g[id]")._each((function(t){var e,n,r=s.wrap(t.el[0]);e=r.moveU(),n=r.angleEX(),l.x+=e.x,l.y+=e.y,n&&(s.ex.skew?0===m&&0===y&&(l=T.rotatePoint(l.x,l.y,e.x+n.cx,e.y+n.cy,n.angle),x+=n.angle):(l=T.rotatePoint(l.x,l.y,e.x+n.cx,e.y+n.cy,n.angle),x+=n.angle))})),d=t.moveU(),l.x+=d.x,l.y+=d.y,e&&(f=t.angleEX())&&(s.ex.skew?0===m&&0===y&&(l=T.rotatePoint(l.x,l.y,d.x+f.cx,d.y+f.cy,f.angle),x+=f.angle):(l=T.rotatePoint(l.x,l.y,d.x+f.cx,d.y+f.cy,f.angle),x+=f.angle)),l.x=l.x-(a.x+.5*a.width),l.y=l.y-(a.y+.5*a.height),0!==x)switch(g.type()){case"ellipse":s.ex.skew?0===m&&0===y&&(a=i(g,x)):a=i(g,x);break;case"path":a=r(g,x);break;case"image":case"svg":case"rect":s.ex.skew?0===m&&0===y&&(a=o(g,x)):a=o(g,x)}(a=h.extend({},a)).x+=l.x,a.y+=l.y,v.push(a)})),0!==v.length&&(p=T.mergeBoxes(v));1===n.length&&B.set(d,p);return p}(n,t);break;case"circle":case"ellipse":e=i(n,t?c(n):0);break;case"path":e=r(n,t?c(n):0);break;default:e=o(n,t?c(n):0)}return e;function r(t,e){var n,r,i=a(t,e),o=B.get(i);return o||(n=t.list(),r=T.getPathBox(n),0!==e&&(r=T.getPathBox(S.rotate(n,r.x+.5*r.width,r.y+.5*r.height,e))),B.set(i,r),r)}function i(t,e){var n,r,i=a(t,e),o=B.get(i);return o||(n=A.getBBox(t.$[0]),r=h.extend({},n),0!==e&&(r=T.rotateEllipseBox(n,e)),B.set(i,r),r)}function o(t,e){var n,r,i,o,s,c,l=a(t,e),f=B.get(l);return f||(n="svg"===t.type()?{x:r=null==(r=t.attr("x"))?0:new u.Length(r).px(),y:i=null==(i=t.attr("y"))?0:new u.Length(i).px(),width:o=null==(o=t.attr("width"))?300:new u.Length(o).px(),height:s=null==(s=t.attr("height"))?150:new u.Length(s).px()}:A.getBBox(t.$[0]),c=h.extend({},n),0!==e&&(c=T.rotateBox(n,e)),B.set(l,c),c)}function a(t,e){var n,r,i=t[0].tagName;switch(i){case"image":case"svg":case"rect":n=[i,t[0].getAttribute("x"),t[0].getAttribute("y"),t[0].getAttribute("width"),t[0].getAttribute("height"),e].join("");break;case"ellipse":n=[i,t[0].getAttribute("cx"),t[0].getAttribute("cy"),t[0].getAttribute("rx"),t[0].getAttribute("ry"),e].join("");break;case"path":n=["path",t[0].getAttribute("d"),e].join("");break;case"g":n=[i,e].join("");break;case"clippath":n=[i,e],Array.prototype.push.apply(n,t.allPrim().forEach((function(t){r=t[0].tagName(),n.push(t[0].getAttribute("transform")),"ellipse"===r?n.push(t[0].getAttribute("cx"),t[0].getAttribute("cy"),t[0].getAttribute("rx"),t[0].getAttribute("ry")):"path"===r?n.push(r,t[0].getAttribute("d"),e):n.push(t[0].getAttribute("width"),t[0].getAttribute("height"))}))),n=n.join("")}return n}function c(t){var e;try{e=t.angle()}catch(t){e=0}return e}}},P={speedy:function(){return u.activePage&&u.activePage.id()===this.id()?s.$frag=$(document.createDocumentFragment()):this.$frag=$(document.createDocumentFragment()),this},gonzales:function(){return u.activePage&&u.activePage.id()===this.id()?(this.$[0].appendChild(s.$frag[0]),s.$frag=void 0):(this.append(this.$frag[0]),this.$frag=void 0),this},clone:function(t,e){var n,r,i,o=s.wrap(s.wrap(t)._clone());return"g"===o.type()&&null!==o.getFilter()&&o.hide().show(),o.id()&&(n=s.wrap(t)._closest("svg[id]"),r=s.wrap(this)._closest("svg[id]"),n.length>0&&r.length>0&&(i={old:n.el[0].id,cur:r.el[0].id}),A.refreshID(o,!0,i)),e||this.append(o.$[0]),t instanceof SVGElement?o.$[0]:t instanceof l?o.$:(o.$.hide().show(),o.$.removeAttr("style"),o)},empty:function(){return this.$.empty(),this},prim:function(){var t=this._children().el[0],e=null;return t&&C.PRIM_ELES.indexOf(t.tagName.toLowerCase())>-1&&(e=s.wrap(t)),e},primTarget:function(){var t=this._children(".Prim\\.cls");return t.length>0?s.wrap(t):this.prim()},allPrim:function(){return"clippath"===this.type()?this._children().el.map((function(t){return s.wrap(t)})):this._find("g[id]:not(.Group\\.cls)").el.map((function(t){return s.wrap(t).prim()}))},sub:function(t,e){var n,r,i=[],o=[],a=null;return""!==(t=(t+"").trim())&&null!==t&&(t=h.unEscape(t),((r=t.charCodeAt(0))>=65&&r<=90||r>=97&&r<=122)&&(o=this._findID("#"+h.escape(t))),o.length>0&&"g"===o.el[0].tagName?a=new u.Shape(o.el[0]):(n=this.$.find('g[v\\:name="'+h.escape(t)+'"]').filter(s),e?(n.length>0&&i.push(new u.Shape(n[0])),this.$.find('g[v\\:name^="'+h.escape(t)+'."]').filter(s).each((function(){i.push(new u.Shape(this))})),a=i):n.length>0&&(a=new u.Shape(n[0])))),a;function s(){return!$(this).closest("#blacky_0").length}},subs:function(t,e){var n,r,i=[];return void 0===t?(n=this._hasClass("Group.cls")?this._find("#"+this.id()+">.Prim\\.cls>[id]"):this._find("#"+this.id()+">g[id]"),e=e||"shape",i=A.formatObjects(n.el.filter((function(t){return"blacky.id"!==t.id&&-1===t.className.baseVal.indexOf("Guide.cls")})),e)):""!==(t=(t+"").trim())&&null!==t&&(t=h.unEscape(t),(r=this.$.find('g[v\\:name="'+h.escape(t)+'"]').filter(o)).length>0&&i.push(new u.Shape(r[0])),this.$.find('g[v\\:name^="'+h.escape(t)+'."]').filter(o).each((function(){i.push(new u.Shape(this))}))),i;function o(){return!$(this).closest("#blacky_0").length}},allSubs:function(t,e){var n=this.$[0].querySelectorAll("g[id]:not(.Guide\\.cls)"+(t?":not(.Group\\.cls)":"")),r=Array.prototype.map.call(this.$[0].querySelectorAll("#"+this.id()+" svg g[id]"),(function(t){return t.id})),i=[],o=0;if(r.length>0)for(;o<n.length;o++)-1===r.indexOf(n[o].id)&&i.push(n[o]);else i=n;return i=A.formatObjects(i,e||"shape")},vUnit:function(t){var e=this.json("v:unit");if(!t)return e;h.each(t,(function(t,n){t?e[n]=t:delete e[n]})),this.json("v:unit",h.isEmpty(e)?null:e)},append:function(t){return this.$[0].appendChild(C.getNode(t)),this}},D={getOrMakeFilter:function(){var t=this.closestGroup(),e=t.id(),n=new s.Defs(null,t).id(null),r=this.getFilter();return null===r&&(this._hasClass("Text.cls")&&(e+=".txt"),r=new s.Filter(null,n).id(e+".flt")),r},getFilter:function(){var t=this.closestGroup(),e=this._hasClass("Text.cls"),n=t._children("defs")._children("filter")._filter((function(t){var n=t.el[0].id;return e?n.indexOf(".txt")>-1:-1===n.indexOf(".txt")})),r=null;return n.length>0&&(r=s.wrap(n.el[0])),r},filterID:function(){var t=this.closestGroup(),e=this._hasClass("Text.cls");return t.id()+(e?".txt":"")+".flt"},removeEffect:function(t){var e,n,r=this.closestGroup()._children("defs"),i=this.getPrim();r.length>0&&(e=r._findID(this.filterID())).length>0&&(n=e._children(t)).length>0&&(0!==e._children(":not("+t+")").length?n._remove():(1===r._children().length?r._remove():e._remove(),i.filterAttr(null)))},getEffect:function(t){var e,n,r=this.closestGroup()._children("defs"),i=null;return r.length>0&&(e=r._findID(this.filterID())).length>0&&(n=e._children(t)).length>0&&(i=n),i},getOrMakeEffect:function(t,e){var n,r,i,o,a=this.closestGroup(),c=this.getEffect(t),u=h.unEscape(t),l=[];return c?c._each((function(t){l.push(s.wrap(t))})):(o=a.id(),this._hasClass("Text.cls")&&(o+=".txt"),r=(n=new s.Defs(null,a).id(null))._findID(this.filterID()),i=new s.Filter(r.length>0?r:null,n).id(o+".flt"),e.forEach((function(t){l.push(new s[t](null,i).id(null).attr({class:u}))}))),l},checkEffectValues:function(t,e,n,r){var i=r;if(void 0!==e[n])switch(n){case"altitude":case"angle":$.isNumeric(e[n])?i=T.normalizeAngle(e[n]):console.error("Invalid value for "+t+"."+n+", must be a numeric");break;case"color":g.valid.color(e[n])?i=e[n]:console.error("Invalid value for "+t+"."+n+", must be a valid color");break;default:g.valid.unit(e[n])?i=new u.Length(e[n]).px():console.error("Invalid value for "+t+"."+n+", must be a valid unit length")}return i},getPrim:function(){return this._hasClass("Prim.cls")||this._hasClass("Text.cls")?this:this.prim()},_findEff:function(t,e){return t._filter((function(t){return t.el[0].tagName===e}))},shadow:function(t){var e,n,r,i,o,a,c,u,l,f,d,h=this;return g.valid.json(t)&&(t=JSON.parse(t)),void 0===t?(n=this.getEffect(s.CONST.SHADOW_EFFECT))?(a=s.wrap(this._findEff(n,"feOffset")),c=s.wrap(this._findEff(n,"feFlood")),u=this._findEff(n,"feComposite"),h={deviation:s.wrap(this._findEff(n,"feGaussianBlur")).deviation(),x:a.attr("dx"),y:a.attr("dy"),color:c.attr("flood-color"),opacity:c.attr("flood-opacity"),type:u.length>1?"inner":"drop"}):h={}:null===t?this.removeEffect(s.CONST.SHADOW_EFFECT):"object"===_typeof(t)?(l=this.checkEffectValues("shadow",t,"deviation",5),f=this.checkEffectValues("shadow",t,"x",3),d=this.checkEffectValues("shadow",t,"y",3),i=this.checkEffectValues("shadow",t,"color","#000"),o=this.checkEffectValues("shadow",t,"opacity",.5),e=this.getOrMakeFilter().viewPort(l,f,d),n=this.getEffect(s.CONST.SHADOW_EFFECT),this.removeEffect(s.CONST.BLUR_EFFECT),t.type&&"inner"===t.type?(n&&5===n.length?e._findClass(s.CONST.SHADOW_EFFECT+", "+s.CONST.BEVEL_EFFECT)._remove():e._findClass(s.CONST.BEVEL_EFFECT)._remove(),(r=this.getOrMakeEffect(s.CONST.SHADOW_EFFECT,["Blur","Offset","Composite","Flood","Composite","Merge"]))[0].attr({in:"SourceAlpha",stdDeviation:l,result:"shadow"}),r[1].attr({in:"shadow",dx:f,dy:d,result:"shadow_offset"}),r[2].attr({in2:"SourceAlpha",operator:"arithmetic",k2:-1,k3:1,result:"inner_eff"}),r[3].attr({"flood-color":i,"flood-opacity":o}),r[4].attr({in2:"inner_eff",operator:"in",result:"shadow_eff"}),0===r[5]._children().length&&r[5].add("SourceGraphic").add("shadow_eff")):(n&&n.length>5&&e._findClass(s.CONST.SHADOW_EFFECT)._remove(),(r=this.getOrMakeEffect(s.CONST.SHADOW_EFFECT,["Blur","Offset","Flood","Composite","Merge"]))[0].attr({in:"SourceAlpha",stdDeviation:l,result:"shadow"}),r[1].attr({in:"shadow",dx:f,dy:d,result:"shadow_offset"}),r[2].attr({"flood-color":i,"flood-opacity":o}),r[3].attr({in2:"shadow_offset",operator:"in",result:"shadow_eff"}),e._findClass(s.CONST.BEVEL_EFFECT).length?r[4]._children().length>0?s.wrap(e._last()._children().el[1]).attr("in","bevel_eff"):r[4].add("shadow_eff").add("bevel_eff"):0===r[4]._children().length&&r[4].add("shadow_eff").add("SourceGraphic")),this.getPrim().filterAttr(e.id().replace(".flt",""))):console.error("Invalid values for shadow, expected object"),h},bevel:function(t){var e,n,r,i,o,a,c,u,l,f=["Blur","Diffuse","Composite","Composite"],d=this;return g.valid.json(t)&&(t=JSON.parse(t)),void 0===t?(i=this.getEffect(s.CONST.BEVEL_EFFECT))?i.length===f.length?(r=s.wrap(this._findEff(i,"feDiffuseLighting")),d={deviation:s.wrap(i.el[0]).deviation(),color:r.attr("lighting-color"),surface_scale:r.attr("surfaceScale")}):(this.removeEffect(s.CONST.BEVEL_EFFECT),d={}):d={}:null===t?(this.removeEffect(s.CONST.BEVEL_EFFECT),(u=this.getEffect(s.CONST.SHADOW_EFFECT))&&5===u.length&&s.wrap(u._last()._children().el[1]).attr("in","SourceGraphic")):"object"===_typeof(t)?(o=this.checkEffectValues("bevel",t,"deviation",5),a=this.checkEffectValues("bevel",t,"color","#fff"),c=this.checkEffectValues("bevel",t,"surface_scale",30),u=(e=this.getOrMakeFilter())._findClass(s.CONST.SHADOW_EFFECT),l=this.getPrim(),e.$.find(s.CONST.BLUR_EFFECT).remove(),(n=this.getOrMakeEffect(s.CONST.BEVEL_EFFECT,f))[0].attr({in:"SourceAlpha",stdDeviation:o}),n[1].attr({surfaceScale:c,diffuseConstant:1,"lighting-color":a,result:"highlight"}).point(-1e4,-1e4,13e3),n[2].attr({in2:"SourceGraphic",in:"highlight",operator:"arithmetic",k1:0,k2:.6,k3:.7,k4:0,result:"bevel_eff"}),n[3].attr({in:"bevel_eff",in2:"SourceGraphic",operator:"in",result:"bevel_eff"}),u.length>0?5===u.length?(s.wrap(u._last()._children().el[1]).attr("in","bevel_eff"),e._append(u)):(u._remove(),e.viewPort(10,0,0)):e.viewPort(10,0,0),l.filterAttr(e.id().replace(".flt",""))):console.error("Invalid values for bevel, expected object"),d},blur:function(t){var e,n,r,i=this;return 0==h.isObject(t)&&g.valid.json(t)&&(t=JSON.parse(t)),void 0===t?i=null===(n=this.getEffect(s.CONST.BLUR_EFFECT))?{}:{deviation:s.wrap(n.el[0]).deviation()}:null===t||0===t?this.removeEffect(s.CONST.BLUR_EFFECT):(h.isObject(t)&&(t=void 0===t.deviation?3:t.deviation),g.valid.unit(t)?(t=new u.Length(t).px(),r=this.getPrim(),(e=this.getOrMakeFilter().viewPort(t))._findClass(s.CONST.BEVEL_EFFECT+", "+s.CONST.SHADOW_EFFECT)._remove(),new s.Blur(s.CONST.BLUR_EFFECT,e).id(null).in("SourceGraphic").deviation(t),r.filterAttr(e.id().replace(".flt",""))):console.error("Invalid value for blur deviation")),i},glow:function(t){var e,n,r,i,o,a,c,u=this,l=["Flood","Composite","Morph","Blur","Merge"];return 0==h.isObject(t)&&g.valid.json(t)&&(t=JSON.parse(t)),void 0===t?(r=u.getEffect(s.CONST.GLOW_EFFECT))?r.length===l.length?(a=s.wrap(u._findEff(r,"feFlood")),u={deviation:s.wrap(u._findEff(r,"feGaussianBlur")).deviation(),color:a.attr("flood-color"),opacity:a.attr("flood-opacity")}):(u.removeEffect(s.CONST.GLOW_EFFECT),u={}):u={}:null===t?u.removeEffect(s.CONST.GLOW_EFFECT):"object"===_typeof(t)?(c=u.checkEffectValues("glow",t,"deviation",10),i=u.checkEffectValues("glow",t,"color","#FFF"),o=u.checkEffectValues("glow",t,"opacity",1),e=u.getOrMakeFilter().viewPort(c,0,0),u.removeEffect(s.CONST.BLUR_EFFECT),(n=u.getOrMakeEffect(s.CONST.GLOW_EFFECT,l))[0].attr({result:"flood","flood-color":i,"flood-opacity":o}),n[1].attr({in:"flood",result:"mask",in2:"SourceGraphic",operator:"in"}),n[2].attr({in:"mask",result:"dilated",operator:"dilate",radius:2}),n[3].attr({in:"dilated",result:"blurred",stdDeviation:c}),0===n[4]._children().length&&n[4].add("blurred").add("SourceGraphic"),u.getPrim().filterAttr(e.id().replace(".flt",""))):console.error("Invalid values for glow, expected object"),u}},j={distant:function(t,e){var n=h(this.$.children()[0]);return n.length>0&&"fedistantlight"!==n.el[0].tagName.toLowerCase()&&n._remove(),s.wrap(C.getOrMake("feDistantLight",this.$,"feDistantLight")).id(null).attr({azimuth:t,elevation:e}),this},point:function(t,e,n){var r=h(this.$.children()[0]);return r.length>0&&"fepointlight"!==r.el[0].tagName.toLowerCase()&&r._remove(),s.wrap(C.getOrMake("fePointLight",this.$,"fePointLight")).id(null).attr({x:t,y:e,z:n}),this},spot:function(t,e,n,r,i,o,a,c){var u=h(this.$.children()[0]);return u.length>0&&"fespotlight"!==u.el[0].tagName.toLowerCase()&&u._remove(),s.wrap(C.getOrMake("feSpotLight",this.$,"feSpotLight")).id(null).attr({x:t,y:e,z:n,pointsAtX:r,pointsAtY:i,pointsAtZ:o,specularExponent:a,limitingConeAngle:c}),this}},U=new y(75),G={scale:function(t,e){var n,r=this.$[0].transform.baseVal,i=C.getTransform(r,SVGTransform.SVG_TRANSFORM_SCALE);switch(t){case null:return i&&(n=this.attr("transform").replace(/scale\(.*?\)/,""),this.attr("transform",""===n?null:n)),this;case void 0:return void 0===i?{x:1,y:1}:{x:i.matrix.a,y:i.matrix.d};default:return n=this.attr("transform")||"",n=void 0===i?(""===n?"":n+" ")+"scale("+t+(void 0===e?"":","+e)+")":n.replace(/scale\(.*?\)/,"scale("+t+(void 0===e?"":","+e)+")"),this.attr("transform",n),this}},angle:function(t,e,n,r){var i,o,a,c,u,l,f,d=this;switch(o=C.getTransform(d.$[0].transform.baseVal,SVGTransform.SVG_TRANSFORM_ROTATE),a=d.type(),t){case null:return v(d,o),d;case void 0:return void 0===o?0:o.angle;default:return"use"===a&&0!==(c=$(h.escape(d.link()))).length&&(d=s.wrap(c)),0===(t=T.normalizeAngle(t))||360===t?v(d,o):(void 0!==e&&void 0!==n||(f="g"===a?d.hasClip():void 0,l=d.$.hasClass("Group.cls")||f?d.alignBox():d.sizeU(),u=d.moveU(),void 0===e&&(e="g"===a?0:u.x,e+=.5*l.width),void 0===n&&(n="g"===a?0:u.y,n+=.5*l.height)),i=(i=d.attr("transform")||"").replace(/\s*rotate\(.*?\)/g,"").trim(),d.attr("transform",function(t,e,n){var r="",i=t.split(") "),o="",a=0,c="",u=0,l=!1;i.forEach((function(t,i){i===n&&(r+=(""===r?"":" ")+e,l=!0),t&&(s.ex.skew?t.indexOf("skewX")>-1?(o=t+(")"===t.substr(t.length-1)?"":")"),l?r+=(""===r?"":" ")+o:a=i):t.indexOf("skewY")>-1?(c=t+(")"===t.substr(t.length-1)?"":")"),l?r+=(""===r?"":" ")+c:u=i):r+=(""===r?"":" ")+t+(")"===t.substr(t.length-1)?"":")"):r+=(""===r?"":" ")+t+(")"===t.substr(t.length-1)?"":")"))})),l||(s.ex.skew?r+=a<u||a===u?(""===r?"":" ")+e+(""===o?"":" "+o)+(""===c?"":" "+c):(""===r?"":" ")+e+(""===c?"":" "+c)+(""===o?"":" "+o):r+=(""===r?"":" ")+e);return r.trim()}(i,"rotate("+t+" "+e+" "+n+")",r))),d}function v(t,e){var n;e&&(n=s.ex.skew?t.attr("transform").replace(/rotate\(.*?\)\s*/,""):t.attr("transform").replace(/rotate\(.*?\)/,""),t.attr("transform",""===n?null:n.trim()))}},angleEX:function(){var t,e,n=this[0].getAttribute("transform");return n&&void 0===(t=U.get(n))&&((e=n.match(/rotate ?\((-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?)[, ]*(-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?)*[, ]*(-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?)* ?\)/))&&((t={angle:Number(e[1])}).cx=e[2]?Number(e[2]):0,t.cy=e[3]?Number(e[3]):0),U.set(n,t)),t},flip:function(t,e){var n,r,i,o,a,c,l,f,d,v,p;switch(this.type()){case"ellipse":case"rect":this.attr("clip-path")&&g(this);break;case"g":if(this.$.hasClass("ConnPts.cls"))break;c=new u.Shape(this.$[0]),this.$.hasClass("Group.cls")?(r=this.hasClip()?this.box():this.alignBox(),a=r.width,this.$.children(".Prim\\.cls").children().each((function(e,n){var r=s.wrap(n),i=new u.Shape(n);i.$.hasClass("ConnPts.cls")||(r.flip(t,!0),o=r.moveU().x,i.move(a-o-r.alignBox().width))}))):(A.prim2Ghost(this.prim().flip(!1),this.ghost()),c.beginArrow(c.beginArrow()),c.endArrow(c.endArrow()),this.hasClip()&&this.getClipPath().allPrim().forEach((function(t){t.flip()}))),(p=this.getTextBlock())&&c.txtMove(0-c.txtMoveU().x-(c.txtSizeU().width-c.sizeU().width)),t?(p&&c.txtAngle(180-c.txtAngle()),e||this.angle(this.angle()+180)):p&&c.txtAngle(360-c.txtAngle());break;case"path":r=this.box(),n=this.list(),t?(i=["y","y1","y2"],a=r.height,o=r.y):(i=["x","x1","x2"],a=r.width,o=r.x),n.forEach((function(t){i.forEach((function(e){void 0!==t[e]&&(t[e]=o+a-(t[e]-o))}))})),this.list(n),this.attr("clip-path")&&g(this)}return this.angle(360-this.angle()),(l=this.attr("fill"))&&A.isURL(l)&&(l=h.escape(A.url2ID(l)),l=s.wrap(s.doc._findID(l)),f=s.wrap(l._clone()),v=s.doc._find("defs"),"lineargradient"===l.type()?(f.attr("x1",l.attr("x2")),f.attr("x2",l.attr("x1")),d=f.signature(),f.attr("id",d),0===v._findID(d).length&&v._append(f)):"radialgradient"===l.type()?(f.attr("cx",100-parseInt(l.attr("cx"))+"%"),f.attr("cy",l.attr("cy")),f.attr("fx",100-parseInt(l.attr("fx"))+"%"),f.attr("fy",l.attr("fy")),d=f.signature(),f.attr("id",d),0===v._findID(d).length&&v._append(f)):d=l.id(),this.attr("fill","url(#"+d+")")),this;function g(t){var e,n,r,i;r=s.wrap(t.$.parent("g[v\\:abox]")).alignBox(),e=t.box(),i=A.translate(t),n=r.x+i.x+e.width-(r.x+r.width/2),t.move(e.width-t.moveU().x-2*n)}},skewX:function(t,e){return C.skew(this,t,e,"skewX")},skewY:function(t,e){return C.skew(this,t,e,"skewY")}},z={stops:function(t,e){var n,r={},i=[];return void 0===t?(this.$.children().each((function(t,e){n=$(e),i.push({offset:h.attr(n,"offset"),color:h.attr(n,"stop-color")||"#000000",opacity:h.attr(n,"stop-opacity")||1})})),i):(n=this.$.children().eq(t)).length>0?void 0===e?{offset:h.attr(n,"offset"),color:h.attr(n,"stop-color")||"#000000",opacity:h.attr(n,"stop-opacity")||1}:null===e?(n.remove(),this):(void 0!==e.offset&&(r.offset=e.offset),void 0!==e.color&&(r["stop-color"]=e.color),void 0!==e.opacity&&(r["stop-opacity"]=e.opacity),h.isEmpty(r)||h.attr(n,r),this):void 0},addStops:function(t){for(var e,n=0,r=100/((t.length<2?2:t.length)-1);n<t.length;n++)(e={}).offset=t[n].offset||n*r+"%",e["stop-color"]=t[n].color||"#000",e["stop-opacity"]=t[n].opacity||1,h.isEmpty(e)||C.getOrMake(null,this,"stop")._attr(e)._removeAttr("id");return this},signature:function(){var t,e=this;return"lineargradient"===this.type()?(t=["L"],["x1","y1","x2","y2"].forEach((function(n){t.push(e.attr(n).replace("%","").replace(/\..*/g,""))}))):(t=["R"],["r","fx","fy","cx","cy"].forEach((function(n){var r=e.attr(n);"fx"===n&&(r=r||e.attr("cx")),"fy"===n&&(r=r||e.attr("cy")),t.push(r.replace("%","").replace(/\..*/g,""))}))),this._findTag("stop")._each((function(e){var n;(n=e.el[0].getAttribute("offset"))&&t.push(n.replace("%","").replace(/\..*/g,"")),(n=e.el[0].getAttribute("stop-color"))&&t.push(n.replace("#","").replace(/\..*/g,"")),(n=e.el[0].getAttribute("stop-opacity"))&&t.push(100*n)})),t.join("").replace(/[.#$/[\]]/g,"")+".grad"},length:function(){return this.$.children().length}},H={viewBox:function(t,e,n,r){return C.viewBox(this,t,e,n,r)},insertNS:function(){return this.attr({xmlns:s.CONST.XMLNS,"xmlns:xlink":s.CONST.XLINK,"xmlns:v":s.CONST.VNS}),this},insertCDATA:function(t){var e,r=this._find("style")._filter((function(t){return 0===t._closest("defs").length})),i="";if("string"==typeof t)i=t.replace("<style>","").replace("</style>","").replace("<![CDATA[","").replace("]]>","");else for(e in t)i=(""===i?"":i+"\n")+e+JSON.stringify(t[e]).replace(/","/g,";").replace(/"/g,"");return 0===r.length?(r=h.parseHTML("<style></style>"),this._prepend(r)):(i=r._text()+i,r._empty()),r._prepend((new n).parseFromString("<svg></svg>","image/svg+xml").createCDATASection(i)),this}};s.wrap=function(t){var e=C.getNode(t),n=e.tagName.toLowerCase();switch(n){case"svg":return e.parentNode&&e.parentNode.tagName&&"g"===e.parentNode.tagName.toLowerCase()?new s.Svg(e):new s.SVG(e);case"title":case"desc":return new(s[A.getMethod(n)])(e.parentNode);default:return new(s[A.getMethod(n)])(e)}},s.SVG=function(t,e){var n;"string"==typeof t?0===(n=h(t)).length&&(n=h.parseSVG('<svg id="'+h.unEscape(t)+'"></svg>'),(e||s.canvas)&&C.getNode(e||s.canvas).appendChild(n.el[0])):null==t?(n=h.parseSVG('<svg id="'+C.getID()+'"></svg>'),C.getNode(e||s.canvas).appendChild(n.el[0])):n=h(C.getNode(t)),this.$=n._$(),this[0]=n.el[0]},h.extend(s.SVG.prototype,O,I,R,P,H,{getMaster:function(t){var e=new s.Defs(null,this),n=e.$.children("#"+h.escape(t)),r={stroke:"none"},i={fill:"none"};if(0===n.length)switch(t){case"thick.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M 0 0 L 4 5 -4 5 z")).id(null).style(r);break;case"thin.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M 0 0 L 3 10 -3 10 z")).id(null).style(r);break;case"thick_l.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M 0 0.5 L 4 5.5 -4 5.5 0 0.5 -4 0.5 -4 -0.5 4 -0.5 4 0.5 z")).id(null).style(r);break;case"thin_l.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M 0 0.5 3 10.5 -3 10.5 0 0.5 -3 0.5 -3 -0.5 3 -0.5 3 0.5 z")).id(null).style(r);break;case"dot.end":n=new s.Group("#"+t,e),new s.Ellipse(null,n).size(4,4).move(-2,-2).id(null).style(r);break;case"square.end":n=new s.Group("#"+t,e),new s.Rect(null,n).size(4,4).move(-2,-2).id(null).style(r);break;case"sharp.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M10.5 9.5l-5-9-5 9")).move(-5,0).id(null).style(i);break;case"rev_sharp.end":case"many.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M 0 0 L 5 7.5 10 0")).move(-5,0).id(null).style(i);break;case"one.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M -5 5 L 5 5 M -5 10")).id(null).style(i);break;case"one_one.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M -5 5 L 5 5 M -5 10 L 5 10")).id(null).style(i);break;case"zero_one.end":n=new s.Group("#"+t,e),new s.Ellipse(null,n).size(8,8).move(-4,8).id(null).style({fill:"#fff"}),new s.Path(null,n).list(S.str2List("M 0 0 L 10 0")).move(-5,5).id(null).style(i);break;case"many_one.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M -5 0 L 0 7.5 5 0 M -5 10 L 5 10")).move(-5,0).id(null).style(i);break;case"zero_many.end":n=new s.Group("#"+t,e),new s.Ellipse(null,n).size(8,8).move(-4,8).id(null).style({fill:"#fff"}),new s.Path(null,n).list(S.str2List("M 0 0 L 5 7.5 10 0")).move(-5,0).id(null).style(i);break;case"iec_left.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M 0 0 L 6.5 5.5 L 6.5 7.5")).move(-6.5,0).id(null).style(i);break;case"iec_right.end":n=new s.Group("#"+t,e),new s.Path(null,n).list(S.str2List("M 0 0 L 0 -2 L 6.5 -7.5")).move(0,0).id(null).style(i);break;default:n=null}else n=new s.Group(n);return n},getMarkerMaster:function(t){var e,n=new s.Defs(null,this),r=null,i=0,o=n.$.children("#"+h.escape(t));return 0===o.length?(o=null,h.each(v.MARKER_IDS,(function(a){if(a.id===t)return o=new s.Group("#"+t,n),0===(e=h.parseSVG(a.pattern))._childCount()?o._append(e):o._append(e._children()),r=a.marker_attrs,i=a.spacing,!1}))):(o=new s.Group(o),h.each(v.MARKER_IDS,(function(e){if(e.id===t)return r=e.marker_attrs,i=e.spacing,!1}))),{master:o,marker_attrs:r,spacing:i}}}),s.Svg=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"svg"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Svg.prototype,O,I,R,P,H),s.Image=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"image"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Image.prototype,O,I,R,G,{link:function(t){return this.attr("href",t)},aspectRatio:function(t){return this.attr("preserveAspectRatio",t)}}),s.Ele=function(t,e,n){var r=null==t||"string"==typeof t?C.getOrMake(t,n,e):h(C.getNode(t));this.$=r._$(),this[0]=r.el[0]},h.extend(s.Ele.prototype,O),s.Rect=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"rect"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Rect.prototype,O,I,R,G,{rounded:function(t){return this.style("rx",t)}}),s.Circle=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"circle"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Circle.prototype,O,I,R,{cx:function(t){return this.attr("cx",t)},cy:function(t){return this.attr("cy",t)},r:function(t){return this.attr("r",t)}}),s.Line=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"line"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Line.prototype,O,{x1:function(t){return this.attr("x1",t)},y1:function(t){return this.attr("y1",t)},x2:function(t){return this.attr("x2",t)},y2:function(t){return this.attr("y2",t)}}),s.Path=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"path"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Path.prototype,O,I,R,G,{list:function(t){var e,n,r,i,o=[],a=this._parent(),c=a.length>0&&"g"===a.el[0].tagName&&null!==a._attr("v:list");return void 0===t?(e=this[0].getAttribute("d"),c&&(e=a._attr("v:list")),S.str2List(e,this[0].getAttribute("v:begin"),this[0].getAttribute("v:end"))):(e="",o=function(t,e){var n=h.extend([],e);n.length;0;return n}(0,t),n=o.length-1,i="z"===o[n].type||"Z"===o[n].type,o.forEach((function(t){0!==t.x||0!==t.y||i||(t.x=s.CONST.MINISCULE,t.y=s.CONST.MINISCULE),i&&t.x===s.CONST.MINISCULE&&t.y===s.CONST.MINISCULE&&(t.x=0,t.y=0),e+=S.seg2Str(t)+" "})),e=e.trim(),c&&null!==(r=new u.Shape(a.el[0]).markerMid(!0))&&(a._attr("v:list",e),e=function(t,e,n){var r,i,o,a,c,u,l,f,d,h,v,p,g=0,m="",y=1,x=40;d=(u=s.doc.getMarkerMaster(n+".mkr")).spacing?u.spacing:x;0!==t._find("marker")._childCount()&&(y=s.wrap(t._find("use")._eq(0).el[0]).scale(),p=t._find("marker")._attr("markerWidth"),d=T.round(d*y.x,0));v=T.round(50*y.x,0),h=S.segmentize(e),m=S.seg2Str(h[0][0])+" ",h.forEach((function(t){if(o=k(t),g=v,(l=o.getTotalLength())<g)m+=S.seg2Str(t[1])+" ";else do{r=o.getPointAtLength(g),t.forEach((function(t){t.x<=s.CONST.MINISCULE&&(t.x=0),t.y<=s.CONST.MINISCULE&&(t.y=0)})),c=T.getTValue(t,{x:r.x,y:r.y}),(i=S.split(t,c))[0]=T.roundList(i[0]),i[1]=T.roundList(i[1]),t=i[1],T.length(i[1][0].x,i[1][0].y,i[1][1].x,i[1][1].y)>=p+p/2&&(f=S.seg2Str(i[0][1]),m+=f+" "),(g+=d)>=l&&(a=S.seg2Str(i[1][1]),f!==a&&(m+=a+" "))}while(g<l)})),("z"===e[e.length-1].type||"Z"===e[e.length-1].type)&&(m+=e[e.length-1].type);return m.trim();function k(t){var e,n;return e=S.seg2Str(t[0])+" "+S.seg2Str(t[1]),(n=document.createElementNS(s.CONST.XMLNS,"path")).setAttribute("d",e.trim()),n}}(a,S.str2List(e),r)),this[0].setAttribute("d",e),this)},segCount:function(){var t,e,n,r,i=this.attr("d"),o=0,a=this._parent();return a.length>0&&"g"===a.el[0].tagName&&null!==a._attr("v:list")&&(i=a._attr("v:list")),null!==i&&null!==(t=i.match(/[a-zA-Z] ?(?:-?\d+\.?\d*e?-?\d*[ ,]?)*/g))?(t.forEach((function(t){switch(e=t.charAt(0),n=t.replace(e,"").trim().split(/[ ,]/),e){case"m":case"M":case"l":case"L":case"t":case"T":r=2,o+=n.length/r;break;case"a":case"A":r=7,o+=n.length/r;break;case"h":case"H":case"v":case"V":case"z":case"Z":o+=n.length;break;case"c":case"C":r=6,o+=n.length/r;break;case"q":case"Q":case"s":case"S":r=4,o+=n.length/r}})),o):o},length:function(t){var e=s.wrap(A.clonePath(this)),n=e.list(),r=e.$[0].getTotalLength();return void 0===t?r:2===n.length&&"L"===n[1].type?this.list(function(t,e,n){var r={x:t[0].x,y:t[0].y},i={x:t[1].x,y:t[1].y};return t[1].x=(i.x-r.x)*e/n+r.x,t[1].y=(i.y-r.y)*e/n+r.y,t}(this.list(),t,r)):null},lengthU:function(t,e){var n=this.length(),r=new u.Length(n).px();return void 0!==t&&void 0!==v.UNIT2TYPE[t]||(t="px"),"px"===t?s.fn.formatValue(r,e):new u.Length(r)[t](e)},closed:function(){var t=this.attr("d").slice(-1);return"z"===t||"Z"===t},removeClosure:function(){var t=this.list();return 3===t.length&&this.closed()&&"L"===t[1].type&&(t.splice(2,1),this.style("fill","none")),this},reverse:function(){return this.list(S.reverse(this.list()))}}),s.Ellipse=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"ellipse"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Ellipse.prototype,O,I,R,G),s.Text=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"text"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Text.prototype,O,I,P,G,{text:function(t){return C.text(this,t)},style:function(t,e){return C.textStyle(this,t,e)},hasStyledTSpans:function(){return this._findTag("tspan").el.some((function(t){return t.hasAttribute("font-weight")||t.hasAttribute("font-style")||t.hasAttribute("font-size")||t.hasAttribute("font-family")||t.hasAttribute("fill")||t.hasAttribute("fill-opacity")||t.hasAttribute("text-decoration")||t.hasAttribute("stroke")||t.hasAttribute("stroke-width")||t.hasAttribute("stroke-opacity")}))},getStyledTSpans:function(t){return this._find("tspan["+(t||["font-weight","font-style","font-size","font-family","fill","fill-opacity","text-decoration","stroke","stroke-width","stroke-opacity"].join("],["))+"]")}}),s.TextPath=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"textPath"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.TextPath.prototype,O,{text:function(t){return C.text(this,t)},style:function(t,e){return C.textStyle(this,t,e)},startOffset:function(t){var e;return void 0===t?null===(e=this._attr("startOffset"))?0:$.isNumeric(e)?Number(e):e:this._attr("startOffset",t)}}),s.Tspan=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"tspan"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Tspan.prototype,O,I,{text:function(t){return C.text(this,t)},style:function(t,e){return C.textStyle(this,t,e)}}),s.Defs=function(t,e){var n=null==t?C.getOrMake("defs",e,"defs"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Defs.prototype,O,P),s.Symbol=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"symbol"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Symbol.prototype,O,P,{viewBox:function(t,e,n,r){return console.log("a"),C.viewBox(this,t,e,n,r)}}),s.Clip=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"clipPath"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Clip.prototype,O,P,R),s.Marker=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"marker"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Marker.prototype,O,P,I,R,{markerWidth:function(t){return void 0===t?this.attr("markerWidth"):this.attr("markerWidth",t)},markerHeight:function(t){return void 0===t?this.attr("markerHeight"):this.attr("markerHeight",t)},refX:function(t){return void 0===t?this.attr("refX"):this.attr("refX",t)},refY:function(t){return void 0===t?this.attr("refY"):this.attr("refY",t)},markerUnits:function(t){return void 0===t?this.attr("markerUnits"):"userSpaceOnUse"===t||"strokeWidth"===t?this.attr("markerUnits",t):void console.error("Invalid value for markerUnits")},preserveAspectRatio:function(t){return void 0===t?this.attr("preserveAspectRatio"):this.attr("preserveAspectRatio",t)},orient:function(t){return void 0===t?this.attr("orient"):this.attr("orient",t)},viewBox:function(t,e,n,r){return C.viewBox(this,t,e,n,r)}}),s.Title=function(t){var e=C.getOrMake("title",t,"title");this.$=e._$(),this[0]=e.el[0]},h.extend(s.Title.prototype,O,{text:function(t){return C.text(this,t)}}),s.Desc=function(t){var e=C.getOrMake("desc",t,"desc");this.$=e._$(),this[0]=e.el[0]},h.extend(s.Desc.prototype,O,{text:function(t){return C.text(this,t)}}),s.Use=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"use"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Use.prototype,O,I,G,{link:function(t){return t&&"#"!==t.charAt(0)&&(t="#"+t),this.attr("href",t)}}),s.Linear=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,new s.Defs(null,e||s.doc),"linearGradient"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Linear.prototype,O,z,{angle:function(t){var e,n,r,i,o;if(void 0===t){if(n=parseFloat((this.attr("x1")+"").replace("%","")),r=parseFloat((this.attr("y1")+"").replace("%","")),i=parseFloat((this.attr("x2")+"").replace("%","")),o=parseFloat((this.attr("y2")+"").replace("%","")),0!==(e=(t=T.angle(n,r,i,o))%5)){switch(!0){case t>48&&t<84:case t>318:t+=5;break;default:t=(e+"").split(".")[1]<4?t+5:t}t-=e}return t}return(t=T.normalizeAngle(t))>45&&t<135?(n=100,r=100*(t-45)/90):t>=135&&t<=225?(n=100-50*(t-135)/45,r=100):t>225&&t<315?(n=0,r=100-100*(t-225)/90):t>=315&&t<=360?(n=50*(t-315)/45,r=0):t>=0&&t<=45&&(n=50+50*t/45,r=0),i=100-(n=n.toFixed(0)),o=100-(r=r.toFixed(0)),this.attr({x1:n+"%",y1:r+"%",x2:i+"%",y2:o+"%"})}}),s.Radial=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,new s.Defs(null,e||s.doc),"radialGradient"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Radial.prototype,O,z,{radius:function(t){var e,n,r,i;return void 0===t?Number(this.$.attr("r").replace("%","")):(r=this.attr("cx")+"",i=this.attr("cy")+"",e=(this.attr("fx")||r)+"",n=(this.attr("fy")||i)+"",h.attr(this.$,{r:t+"%",fx:e,fy:n,cx:r,cy:i},void 0,this.$))}}),s.Pattern=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,new s.Defs(null,e),"pattern"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Pattern.prototype,O,I,R,P,G,{viewBox:function(t,e,n,r){return C.viewBox(this,t,e,n,r)}}),s.Group=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"g"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Group.prototype,O,I,R,P,G,D,{add:function(t){return this.append(C.getNode(t)),this},ghost:function(){var t=this._childClass(s.CONST.GHOST_CLASS_UNESC);return t.length>0?s.wrap(t.el[0]):null},allGhost:function(){var t=this.$.find(s.CONST.GHOST_CLASS),e=[];return t.each((function(t,n){e.push(s.wrap(n))})),0!==e.length?e:null},makeGhost:function(t,e){var n,r,i,o;return t?"image"===(o=t.type())||"svg"===o?null:((this[0].children?this[0].children.length>1:this._children().length>1)&&(n=this.ghost())&&n.delete(),n=s.wrap(t._clone()),i={fill:"none"===t.style("fill")?"none":"",stroke:"none"===t.style("stroke")?"transparent":""},s.zoom&&(r=new u.Length(u.activePage.scale()/s.zoom.ppu+s.zoom.unit).px(),i["stroke-width"]=s.CONST.GHOST_CONST*r),n[0].setAttribute("class",e||"Ghost.cls"),n[0].setAttribute("display","none"),["id","stroke-dasharray","fill","stroke-width","v:anim","marker-start","marker-mid","marker-end"].forEach((function(t){n[0].removeAttribute(t)})),n._css({fill:i.fill,stroke:i.stroke}),t[0].after?t[0].after(n[0]):t._after(n[0]),n):null},getTextBlock:function(){var t=this._children(".Text\\.cls");return 0===t.length?void 0:s.wrap(t)},makeTextBlock:function(){var t,e,n,r,i=this.getTextBlock(),o={},a=u.activePage.unit(),c={px:"30px",in:"0.3125in",mm:"8mm",cm:"0.8cm",m:"0.008m"};return void 0===i&&(e={x:0,y:0},t=this.sizeU(),s.CONST.COMPASS?(e={x:(r=A.calTextBlock({x:e.x,y:e.y,width:t.width,height:t.height})).x,y:r.y},t={width:r.width,height:r.height}):(0===t.width&&(t.width={px:"50px",in:"0.5in",mm:"13mm",cm:"1.3cm",m:"0.008m"}[a],n=t.height,t.height=c[a],e.y=.5*new u.Length(n).px()-.5*new u.Length(t.height).px()),0===t.height&&(t.height=c[a],e.y=-1*new u.Length(t.height).px())),s.CONST.TEXT_STYLES.forEach((function(t){o[t]=s.style[A.escapeAttr(t)]})),(i=new s.Group(null,this).id(null).move(e.x,e.y))._addClass("Text.cls"),new s.Rect(null,i).id(null).move(0,0).size(t.width,t.height).style({fill:"none",stroke:"none",rx:s.style.txt_rx}),new s.Text(null,i).id(null).style(o)),i},getOrMakeTextBlock:function(){return this.getTextBlock()||this.makeTextBlock()},getText:function(){var t,e=this.getTextBlock(),n=null;return e&&0!==(t=e._children("text")).length&&(n=s.wrap(t)),n},getTextPath:function(){var t=this.getText(),e=t?t.$.children("textPath"):[];return 0===e.length?null:s.wrap(e)},parent:function(){return s.wrap(this[0].parentNode.closest("[id]"))},getName:function(){var t=this.attr("v:name");return t?t.split(".")[0]:null},connects:function(t){var e,n=[];return void 0===t?(this._children(s.CONST.CONN_PT.SELECTOR)._children()._each((function(t){n.push(new u.Connect(t.el[0]))})),n):0===(e=this._children(s.CONST.CONN_PT.SELECTOR)._children("#"+h.escape(t))).length?null:new u.Connect(e.el[0])},alignBox:function(t,e,n,r){var i,o=this;return void 0===t&&void 0===e&&void 0===n&&void 0===r?this.$.hasClass("Group.cls")||this.hasClip()?void 0!==(o=this.json("v:abox")).x&&void 0!==o.y&&void 0!==o.width&&void 0!==o.height||(o=this.box(),this.json("v:abox",o)):o=this.box():(this.$.hasClass("Group.cls")||this.hasClip())&&("object"===_typeof(t)?this.json("v:abox",t):(i=this.json("v:abox"),void 0!==t&&(i.x=t),void 0!==e&&(i.y=e),void 0!==n&&(i.width=n),void 0!==r&&(i.height=r),this.json("v:abox",i))),o},getClipPath:function(){var t,e=this._children("defs"),n=null;return e.length>0&&(t=e._children("clipPath")).length>0&&(n=s.wrap(t)),n},hasClip:function(){var t=this._children("defs"),e=!1;return t.length>0&&t._children("clipPath").length>0&&(e=!0),e},clipAttr:function(t){var e=this._hasClass("Group.cls")?s.wrap(this._childClass("Prim.cls")):this.prim(),n=this._hasClass("Group.cls")?null:this.ghost();return void 0===t?(null!==(t=e.attr("clip-path"))&&t.replace("url(#","").replace(")",""),t):(null===t?(e._removeAttr("clip-path"),n&&n._removeAttr("clip-path")):(e.attr("clip-path","url(#"+t+")"),n&&n.attr("clip-path","url(#"+t+")")),this)},links:function(t){if(void 0===t)return(t=this[0].getAttribute("v:link"))&&(t="["===t.charAt(0)?JSON.parse(t):[{url:t}]),t;null!==t&&t.length>0?(t=JSON.stringify(t),this[0].setAttribute("v:link",t)):this[0].removeAttribute("v:link")}}),s.Filter=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"filter"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Filter.prototype,O,{viewPort:function(t,e,n){var r=new u.Shape(this.closestGroup()),i=r.sizeU(),o=2.5*t+.5*new u.Length(r.strokeWidth()).px();return e=e||0,n=n||0,0===i.height||0===i.width?this.attr({x:0-o+(e<0?e:0),y:0-o+(n<0?n:0),width:2*o+i.width+Math.abs(e),height:2*o+i.height+Math.abs(n),filterUnits:"userSpaceOnUse"}):this.attr({x:100*(0-o+(e<0?e:0))/i.width+"%",y:100*(0-o+(n<0?n:0))/i.height+"%",width:100*(2*o+i.width+Math.abs(e))/i.width+"%",height:100*(2*o+i.height+Math.abs(n))/i.height+"%",filterUnits:null}),this}}),s.Blur=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feGaussianBlur"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Blur.prototype,O,{in:function(t){return this.attr("in",t)},deviation:function(t){return this.attr("stdDeviation",t)}}),s.Merge=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feMerge"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Merge.prototype,O,{add:function(t){var e=$(document.createElementNS(s.CONST.XMLNS,"feMergeNode"));return t&&e.attr("in",t),this.$[0].appendChild(e[0]),this}}),s.Blend=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feBlend"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Blend.prototype,O,{in:function(t){return this.attr("in",t)},in2:function(t){return this.attr("in2",t)},mode:function(t){return this.attr("mode",t)}}),s.Offset=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feOffset"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Offset.prototype,O),s.Composite=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feComposite"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Composite.prototype,O),s.Flood=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feFlood"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Flood.prototype,O),s.Morph=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feMorphology"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Morph.prototype,O,{in:function(t){return this.attr("in",t)},radius:function(t){return this.attr("radius",t)}}),s.Specular=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feSpecularLighting"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Specular.prototype,O,j),s.Diffuse=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"feDiffuseLighting"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Diffuse.prototype,O,j),s.Link=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"a"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Link.prototype,O),s.Anim=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"animate"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.Anim.prototype,O),s.AnimTrans=function(t,e){var n=null==t||"string"==typeof t?C.getOrMake(t,e,"animateTransform"):h(C.getNode(t));this.$=n._$(),this[0]=n.el[0]},h.extend(s.AnimTrans.prototype,O),s.Search=function(t){var e=elasticlunr();t.forEach((function(t){e.addField(t)})),this.lunr=e,this.CONFIG={bool:"OR",expand:!0}},s.Search.prototype={add:function(t){return this.lunr.addDoc(t)},update:function(t){return this.lunr.updateDoc(t)},remove:function(t){return this.lunr.removeDoc(t)},search:function(t){var e={};return this.lunr.search(t,this.CONFIG).forEach((function(t){e[t.ref]=t.doc})),e}};var V;g=s.go,A=s.fn,S=s.fn.path,T=s.math,L=s.formula,v=s.CONST;u.Length=function(t){var e=function(t){var e;return h.isNumeric(t)?{value:Number(t),hasUnit:!1,unit:"px"}:null!==(e=/^([+-]?\d*\.?\d+(?:e-?\d+)?) *([a-z.]*%?)$/i.exec(t))?(e[2]=e[2].replace(".","").toLowerCase(),v.UNITS.indexOf(e[2])>-1||"deg"===e[2]?{value:parseFloat(e[1]),hasUnit:!0,unit:""===e[2]?"px":e[2]}:null):null}(t);this.length=t,this.value=null===e?null:e.value,this.unit=null===e?null:e.unit,this.hasUnit=null!==e&&e.hasUnit,this.resultUnit=null===e?null:"px"===e.unit?"":e.unit},u.Length.prototype=(V={},v.UNITS.forEach((function(t){V[t]=function(e){return function(t,e,n,r){var i;return e===n||"deg"===e?s.fn.formatValue(t,r):void 0!==v.UNIT2TYPE[e]&&void 0!==v.UNIT2TYPE[n]?(i=o(e)*t/o(n),s.fn.formatValue(i,r)):null;function o(t){var e=(s.doc?s.doc.$:h.parseSVG("<svg></svg>").el)[0].createSVGLength();return void 0!==v.TO_SVG_UNIT[t]?(e.newValueSpecifiedUnits(v.UNIT2TYPE[v.TO_SVG_UNIT[t]],1),e.convertToSpecifiedUnits(v.UNIT2TYPE.px),"m"===t?100*e.valueInSpecifiedUnits:e.valueInSpecifiedUnits):(e.newValueSpecifiedUnits(v.UNIT2TYPE[t],1),e.convertToSpecifiedUnits(v.UNIT2TYPE.px),e.valueInSpecifiedUnits)}}(this.value,this.unit,t,e)}})),V.toSvgUnit=function(){var t=v.TO_SVG_UNIT[this.unit];return void 0!==t?this[t]()+t:this.value+this.resultUnit},V);var X,q,W=require("pako/dist/pako.min"),Y=require("fonteditor-core"),Z=Y.TTFReader,K=Y.TTFWriter,Q=Y.woff2ttf,J=Y.woff2tottf,tt=Y.ttf2woff,et=Y.otf2ttfobject,nt=Y.ttf2base64,rt=Y.woff2,it=require("css"),ot={hinting:!0,compound2simple:!0,inflate:W.inflate,deflate:W.deflate},at=["roboto-regular","roboto-italic","roboto-bolditalic","roboto-bold","roboto condensed-regular","roboto condensed-italic","roboto condensed-bolditalic","roboto condensed-bold","open sans-regular","open sans-italic","open sans-bolditalic","open sans-bold","lato-regular","lato-italic","lato-bolditalic","lato-bold","cousine-regular","cousine-italic","cousine-bolditalic","cousine-bold","arial-regular","arial-italic","arial-bolditalic","arial-bold","anonymous pro-regular","anonymous pro-italic","anonymous pro-bolditalic","anonymous pro-bold"];s.CONST.WOFF2WASM="/wasm/woff2.wasm",s.getFonts=function(t,e,n){var r=[];return X=require("fs-extra"),n=void 0===n||n,0===Object.keys(t).length?Promise.resolve(void 0):(!0===q?Promise.resolve():rt.init(s.CONST.WOFF2WASM).then((function(){q=!0}))).then((function(){return new Promise((function(o,a){var c=[];Object.keys(t.subset||{}).forEach((function(a){var u=t.subset[a];t.font_face?o(t.font_face):!1===n&&at.indexOf(a.toLowerCase())>-1?r.push(s.go.ajax.get("/app/fonts/"+a.toLowerCase()+".css","text").then((function(e){t.font_face=t.font_face||"",t.font_face+=e}))):u.urls?u.urls.forEach((function(t){-1===c.indexOf(t)&&(r.push(i(t,u,n)),c.push(t))})):(e||s.go.showMessage(s.lang.ui.loading_fonts,!0),r.push(i("/app/fonts/"+a.toLowerCase()+".woff",u,n)))})),Promise.all(r).then((function(){e||s.go.hideMessage(),o(t.font_face)})).catch(a)}))}));function i(e,n,r){return function(t){return-1===t.indexOf("http")?X.readFile(t).then((function(t){return t.buffer})).catch((function(){return t})):s.go.isbase64(t)?Promise.resolve(t):s.go.ajax.arrayBuffer(t,!0).catch((function(t){"object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage))&&localStorage&&localStorage.removeItem("nano_fonts"),console.error(t)}))}(e).then((function(i){var o,a,c=[],u={},l="normal",f="normal";if(s.go.isbase64(i))a=i;else if(0===i.byteLength&&s.go.isbase64(e))a=e;else{s.fonts.isWoff2(i)&&(i=tt(J(i,ot),ot)),o=s.fonts.readWoff(i),r&&(-1===n.unicodes.indexOf(32)&&n.unicodes.unshift(32),n.unicodes.length!==Object.keys(o.cmap).length&&(c.push(o.glyf[0]),n.unicodes.forEach((function(t){o.cmap[t]&&(u[32]&&o.glyf[o.cmap[t]].unicode.indexOf(32)>-1?u[t]=u[32]:(c.push(o.glyf[o.cmap[t]]),u[t]=c.length-1))})),o.cmap=u,o.glyf=c,o.maxp.numGlyphs=c.length,delete o.GPOS,delete o.kern,delete o.prep));try{a=nt(tt(new K(ot).write(o),ot))}catch(t){console.warn(t),a=nt(tt(i,ot))}o.name.fontSubFamily.split(" ").forEach((function(t){switch(t){case"Bold":l="bold";break;case"Italic":f="italic"}}))}t.font_face=t.font_face||"",t.font_face+=(""===t.font_face?"":" ")+'@font-face{font-family:"'+n.family.split(/ *, */g)[0]+'";src:url('+a.replace("data:font/ttf","data:font/woff").replace("data:font/woff","data:application/font-woff")+') format("woff"); font-weight:'+l+";font-style:"+f+";}"}))}},s.fonts={isWoff:function(t){var e=new Uint8Array(t);return!!t&&("wOFF"===String.fromCharCode(e[0],e[1],e[2],e[3])&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])},isOTF:function(t){var e=new Uint8Array(t);return"OTTO"===String.fromCharCode(e[0],e[1],e[2],e[3])},isWoff2:function(t){var e=new Uint8Array(t);return!!t&&(119===e[0]&&79===e[1]&&70===e[2]&&50===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7])},toWoff:function(t){return new Promise((function(e){s.fonts.isWoff(t)&&e(t),s.fonts.isOTF(t)?e(t=tt(new K(ot).write(et(t)),ot)):e(tt(t,ot))}))},readWoff:function(t){return new Z(ot).read(Q(t,ot))},ttf2base64:function(t){return nt(t).replace("data:font/ttf","data:font/woff").replace("data:font/woff","data:application/font-woff")}},s.gzip={deflate:function(t){return new Blob([W.gzip(t)])},inflate:function(t){return W.ungzip(t,{to:"string"})}},s.parseCSS=it.parse,s.nano=function(){var t,e,r=3,i=["textpath","text","tref","tspan"],o=["animate","animateTransform","animateColor","animateMotion","set"],a=!1,c=["v:json"],l=new RegExp(" ?"+c.join("|")+'*?=".*'),f=0,d={},v=0,p={o:function(t){return t},u:function(t){return a=t.indexOf('xmlns:v="http://vecta.io"')>-1,t},p:function(t){return t.replace(/[\t\n\r]/g," ")},F:function(t){return t.replace(/<!--[^]*?-->/g,"")},O:function(t){return t.replace(/> +</g,"><")},N:function(t){for(var e,n=/<!ENTITY *(\w*) *"(.*?)">/g,r=[],i={};e=n.exec(t);)r.push(e[0]),i[e[1]]=e[2];return r.forEach((function(e){t=t.replace(e,"")})),Object.keys(i).forEach((function(e){t=t.replace('"&'+e+';"','"'+i[e]+'"')})),t},I:function(t){return t.replace(/<!DOCTYPE[^]*?>/g,"")},B:function(t){return e.maintain_events?t:t.replace(/ on\w+=".*?"/g,"")},R:function(t){return t.replace(/<script[^]*?<\/script>/g,"")},P:function(t){return t.replace(/<handler[^]*?<\/handler>/g,"")},D:function(t){return t.indexOf('"javascript:')>-1?t.replace(/ .*?="javascript:.*?"/g,""):t},j:function(t){return t.replace(/<set[^]*?\/>/g,"")},U:function(t){var e,n,r=/( [^]*?)='([^]*?)'/g;return t.indexOf("='")>-1&&(e=t.match(/<[^/].*?>/g))&&e.forEach((function(e){for(var i=e;n=r.exec(e);)i=i.replace(n[0],n[1]+'="'+n[2]+'"');i!==e&&(t=t.replace(e,i))})),t.indexOf("url('")>-1&&(t=t.replace(/="url\('(.*?)'\)"/g,'="url($1)"')),t},G:function(t){for(var e,n=t,r=/<\?([^]+?) [^]*?\?>/g;null!==(e=r.exec(t));)"xml-stylesheet"!==e[1]&&(n=n.replace(e[0],""));return n},X:function(t){return t.replace(/<foreignObject.*?\/foreignObject>/g,"")},W:function(t){var e=t.match(/ style=".*?"/g);return e&&e.forEach((function(e){e.indexOf("'")>-1&&(t=t.replace(e,e.replace(/'/g,"")))})),t},Y:function(t){return t=(t=(t=t.replace(/(<\/*)svg:([\w-]+)/g,"$1$2")).replace(/<(metadata)[^]*?\/\1>|<metadata[^]*?\/[^]*?>/g,"")).replace(/<[\w-]+:[\w-]+[^>]*?\/[^]*?>|<([\w-]+:[\w-]+)[^]*?\/\1>/g,"")},Z:function(t){var e,n,r={},i=[];return(e=t.match(/ [\w-]+:[\w-]+(?:="[^]*?")/g))&&(e.forEach((function(e){void 0===r[e]&&0!==e.indexOf(" xlink:")&&0!==e.indexOf(" xml:")&&((n=e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")).length>1e4?t=t.replace(new RegExp(n,"g"),""):i.push(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")),r[e]=!0)})),i.length>0&&(t=t.replace(new RegExp(i.join("|"),"g"),""))),t},K:function(t){var e,n={},r=[];return(e=t.match(/ data-[\w-]+(?:="[^]*?")/g))&&(e.forEach((function(t){void 0===n[t]&&0!==t.indexOf(" xlink:")&&0!==t.indexOf(" xml:")&&(r.push(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")),n[t]=!0)})),r.length>0&&(t=t.replace(new RegExp(r.join("|"),"g"),""))),t},J:function(t){return t.replace(/font-family="(.*?)"/g,(function(t,e){return t.replace(e,e.replace(/'|&#39;/g,""))}))},compress:function(t){var e,n=t;if(-1===n.indexOf("<svg"))return console.error("Invalid SVG string"),"";for(e in p)"compress"!==e&&(n=p[e](n));return n}},g=function(){return{tt:function(t){var n=[],r=[];return i.forEach((function(e){var n=new RegExp("<"+e+".*?>.*?</"+e+">","g");(t.match(n)||[]).forEach((function(t){var e=t.replace(/<\w+.*?>|<\/\w+>/g,"");e&&e.split("").forEach((function(t){if(-1===r.indexOf(t))try{r.push(encodeURIComponent(t))}catch(t){}}))}))})),r.length&&(r=r.join(""),s.fn.parseWoffURL(t,n),e.font_faces=new Promise((function(i){s.fn.getWoffURL(function(t){var e,n,i,o=[],a=/@import *url\("*(.*?)"*\)/g;for(;e=a.exec(t);)(n=e[1]).indexOf(s.CONST.FONTS.GOOGLE_URL)>-1&&(1===(i=n.split("?")).length?n+="?text="+r:(i[i.length-1]+="&text="+r,n=i.join("?")),n+="&v=24"),o.push(n);return o}(t)).then((function(t){(t||[]).forEach((function(t){s.fn.parseWoffURL(t,n)})),e.font_faces=n,i(e.font_faces)}))}))),t},u:function(t){var e,n=t;return(a=t.indexOf('xmlns:v="http://vecta.io"')>-1)&&(e=/ transform="translate\(0 0\)"/g,n=n.replace(e,""),e=/<g +display="none"[^>]*> *(?:<(?:rect|ellipse|path)[^/]+\/> *)+<\/g>/g,n=n.replace(e,""),e=/<g display="none"[^>]*> *(?:<g[^>]*> *<(?:rect|ellipse|path)[^/]+\/> *<\/g> *)+<\/g>/g,n=n.replace(e,""),e=/(<g[^>]*)(?: data-.+?=".+?")([^>]*>)/g,n=n.replace(e,"$1$2"),e=/class="[^.]+\.lay"/g,n=n.replace(e,""),e=/(<(?:rect|ellipse|path)[^/]+)(transform="[^"]+")([^/]*)\/>/g,n=n.replace(e,"$1 $3 $2/>"),e=/(<text[^>]*)( transform="[^"]+")([^>]*)>/g,n=n.replace(e,"$1$3$2>"),e=/<g> *(<(?:path|ellipse|rect)[^/]+\/>) *<\/g>/g,n=n.replace(e,'<g transform="translate(0 0)">$1</g>'),e=/<g> *(<text.*?<\/text>) *<\/g>/g,n=n.replace(e,"$1"),e=/<g * transform="([^"]+)"> *(<text[^>]+)transform="([^"]+)"> *((?:<tspan[^>]+>.*?<\/tspan> *)+)<\/text> *<\/g>/g,n=n.replace(e,'$2transform="$1 $3">$4</text>'),e=/<g *( transform="[^"]+")> *(<text[^>]+)> *((?:<tspan[^>]+>[^<]+<\/tspan> *)+)<\/text> *<\/g>/g,n=n.replace(e,"$2$1>$3</text>"),e=/<g * transform="([^"]+)"> *(<(?:path|ellipse|rect)[^/]*)transform="([^"]+)"([^/]*)\/> *<\/g>/g,n=r(n=i(n=n.replace(e,'$2transform="$1$3"$4 />'))),n=r(n=i(n)),e=/<(?:rect|ellipse|path)[^/]*(stroke-width="[^"]+")[^/]*\/>(?: *<(?:rect|ellipse|path)[^/]*\1[^/]*\/>)+/g,n=n.replace(e,(function(t,e){return["<g ",e,">",t.replace(new RegExp(e,"g"),""),"</g>"].join("")}))),n;function r(t){return e=/<g +transform="([^"]+)"> *((?:<(?:rect|ellipse|path)[^/]+transform="[^"]+"\/> *)+)<\/g>/g,t=t.replace(e,(function(t,e,n){return n.replace(/(<(?:rect|ellipse|path)[^/]+)transform="([^"]+)"\/>/g,'$1transform="'+e+' $2"/>')}))}function i(t){return e=/(<g[^>]+)(stroke="[^"]+")([^>]*> *(?:<(?:rect|ellipse|path)[^/]+\2[^/]*\/> *)+)(<\/g>)/g,t=t.replace(e,"$1$3$4"),e=/(<g[^>]+)(stroke-opacity="[^"]+")([^>]*> *(?:<(?:rect|ellipse|path)[^/]+\2[^/]*\/> *)+)(<\/g>)/g,t=t.replace(e,"$1$3$4"),e=/(<g[^>]+)(stroke-width="[^"]+")([^>]*> *(?:<(?:rect|ellipse|path)[^/]+\2[^/]*\/> *)+)(<\/g>)/g,t=t.replace(e,"$1$3$4")}},et:function(t){return t.replace(/enable-background=".*?"/g,"")},Y:function(t){return(t=(t=(t=t.replace(/<(metadata)[^]*?\/\1>/g,"")).replace(/<(metadata)[^]*?\/[^]*?>/g,"")).replace(/<([\w-]+:[\w-]+)[^>]*?\/[^]*?>/g,"")).replace(/<([\w-]+:[\w-]+)[^]*?\/\1>/g,"")},Z:function(t){var n,r={},i=t;return n=t.match(/ [\w-]+:[\w-]+(?:="[^]*?")/g),a&&e.maintain_structure&&(n=n.filter((function(t){return!l.test(t)&&!/ ?xmlns:v*?=".*?"/.test(t)}))),n&&n.forEach((function(t){void 0===r[t]&&0!==t.indexOf(" xlink:")&&0!==t.indexOf(" xml:")&&(t=t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),i=i.replace(new RegExp(t,"g"),""),r[t]=!0)})),i},nt:function(t){return t.replace(/ (xmlns|xmlns:xlink)=".*?"/g,"")},rt:function(t){var e=t.match(/<style>.*?<\/style>/g);return e&&e.forEach((function(e){var n,r,i,o,a=/(.*?){.*?}/g,s=/\\(\d\d) /g;for(e=e.replace("<style>","").replace("</style>","").replace("<![CDATA[","").replace("]]","");i=a.exec(e);)for(n=i[1];o=s.exec(i[1]);)r=n.replace(o[0],String.fromCharCode(parseInt(o[1],16))),t=t.replace(n,r),n=r})),t},compactIDs:function(t){var r,i,o,a,s={},c=/<style[^]*?<\/style>/g,u=!1,l=!1;return e.maintain_id?t:(r=t.match(/ id="[^]*?"/g),a=n(t),r&&(r.forEach((function(t,e){var n=t.replace(/ id=|"/g,"");f=e,s[n]={id:n,orphaned:!0,new_id:a+x(e)}})),null!==(o=t.match(c))&&o.forEach((function(t){!1===u&&(u=/#.+[, {>~+]/.test(t))})),/href="#.*?"/.test(t)&&(t=v(t,s,'href="#','"','href="#','"'),l=!0),/url\(.+\)/.test(t)&&((t.match(/url\(&quot;.+&quot;\)/g)||[]).forEach((function(e){t=t.replace(e,e.replace(/&quot;/g,""))})),t=v(t,s,"url\\(#","\\)","url(#",")"),l=!0),/begin="/.test(t)&&(t=d(s,/begin=".*?"/g)),/end="/.test(t)&&(t=d(s,/end=".*?"/g)),u&&l&&(o=t.match(c)),null!==o&&u&&Object.keys(s).forEach((function(e){var n=s[e],r=new RegExp("#"+h.escape(e).replace(/\\/g,"\\\\")+"([,:. {>~+])","g");o.forEach((function(e,i){for(var a,s;a=r.exec(e);)n.orphaned=!1,s=e.replace(a[0],"#"+n.new_id+a[1]),t=t.replace(e,s),e=s,o[i]=s}))})),(i=Object.keys(s).filter((function(t){return!1===s[t].orphaned})).map((function(t){return'id="'+h.escape(t)+'"'}))).length>0&&(t=t.replace(new RegExp(i.join("|"),"g"),(function(t){return'id="'+s[t.replace('id="',"").replace('"',"")].new_id+'"'}))),(i=Object.keys(s).filter((function(t){return s[t].orphaned})).map((function(t){return'id="'+("#"===t.charAt(0)?"#":"")+h.escape(t)+'"'}))).length>0&&(t=t.replace(new RegExp(i.join("|"),"g"),""))),t=t.replace(new RegExp(a,"g"),""));function d(e,n){var r=new RegExp(Object.keys(e).map((function(t){return t+"\\."})).join("|"),"g");return(t.match(n)||[]).forEach((function(n){r.test(n)&&(t=t.replace(n,n.replace(r,(function(t){return e[t.replace(".","")].orphaned=!1,e[t.replace(".","")].new_id+"."}))))})),t}function v(t,e,n,r,i,o){var a={},s=Object.keys(e).map((function(t){return a[[i,t,o].join("")]=e[t],[n,h.escape(t),r].join("")}));return t.replace(new RegExp(s.join("|"),"g"),(function(t){return a[t].orphaned=!1,[i,a[t].new_id,o].join("")}))}},compactClasses:function(r){var i,o,a=0,c={},u={},l={};return e.maintain_class||(i=/ class=".*?"/g,t=n(r),(o=r.match(i))&&(o.forEach((function(e){var n=[];void 0===c[e]&&(e.substring(8,e.length-1).trim().split(" ").forEach((function(e){if(e)if(u[e])n.push(u[e]);else if(l[e]);else if(!1===new RegExp("\\."+f(e)+"[(,|.) {>~+]","g").test(r))l[e]=!0;else{for(;!0===new RegExp("\\."+x(a)+"[, {>~+]","g").test(r);)v++;u[e]=t+x(a),n.push(u[e]),s.last_class=a,a++}})),c[e]=0===n.length?"":' class="'+n.join(" ")+'"')})),Object.keys(c).forEach((function(t){t!==c[t]&&(r=r.replace(new RegExp(t,"g"),c[t]))}))),Object.keys(u).forEach((function(e){r=function(e,r,i){var o,a,s=new RegExp("\\."+f(e)+"([(,|.) {>~+])","g"),c=new RegExp("\\."+r.replace(t,"")+"([(,|.) {>~+])","g");o=i;for(;a=c.exec(i);)o=o.replace(a[0],"."+n(i)+a[1]);i=o;for(;a=s.exec(i);)o=o.replace(a[0],"."+r+a[1]);return o}(e,u[e],r)}))),r;function f(t){return t=h.escape(t).replace("\\","\\\\"),!1===isNaN(t.substr(0,1))&&(t="\\\\3"+t.substr(0,1)+" "+t.substr(1)),t}},compress:function(n){var r,i=n;if(-1===i.indexOf("<svg"))return console.error("Invalid SVG string"),"";for(r in g)"compress"!==r&&(i=g[r](i));return e.xlink=i.indexOf("xlink:")>-1,i=i.replace(new RegExp(t,"g"),"")}};function n(t){for(var e=0,n="_"+e+"_";t.indexOf(n)>-1;)n="_"+ ++e+"_";return n}}(),m=function(){var t=["a","defs","g","marker","mask","pattern","svg","switch","symbol"],l=["x","y","width","height","cx","cy","r","rx","ry","x1","x2","y1","y2","stop-opacity","stroke-opacity","fill-opacity","stroke-width","opacity","stdDeviation","offset","fx","fy","word-spacing","letter-spacing","font-size","flood-opacity"],p=["display","fill","fill-opacity","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","clip-rule","paint-order"],g=["fill","stroke","color","stop-color","flood-color"],y=["circle","ellipse","rect","polyline","polygon","path"],w={"fill-opacity":1,"stroke-opacity":1,"stroke-width":1,"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":4,"stroke-dasharray":"none","stroke-dashoffset":0,fill:"#000",stroke:"none","fill-rule":"nonzero",opacity:1,x:{altGlyph:"none",feBlend:"0%",feColorMatrix:"0%",feComponentTransfer:"0%",feComposite:"0%",feConvolveMatrix:"0%",feDiffuseLighting:"0%",feDisplacementMap:"0%",feDropShadow:"0%",feFlood:"0%",feFuncA:"0%",feFuncB:"0%",feFuncG:"0%",feFuncR:"0%",feGaussianBlur:"0%",feImage:"0%",feMerge:"0%",feMergeNode:"0%",feMorphology:"0%",feOffset:"0%",fePointLight:0,feSpecularLighting:"0%",feSpotLight:0,feTile:"0%",feTurbulence:"0%",filter:"-10%",foreignObject:0,glyphRef:0,image:0,mask:"-10%",pattern:0,rect:0,svg:0,text:0,tref:0,tspan:"none",use:0},y:{altGlyph:"none",feBlend:"0%",feColorMatrix:"0%",feComponentTransfer:"0%",feComposite:"0%",feConvolveMatrix:"0%",feDiffuseLighting:"0%",feDisplacementMap:"0%",feDropShadow:"0%",feFlood:"0%",feFuncA:"0%",feFuncB:"0%",feFuncG:"0%",feFuncR:"0%",feGaussianBlur:"0%",feImage:"0%",feMerge:"0%",feMergeNode:"0%",feMorphology:"0%",feOffset:"0%",fePointLight:0,feSpecularLighting:"0%",feSpotLight:0,feTile:"0%",feTurbulence:"0%",filter:"-10%",foreignObject:0,glyphRef:"none",image:0,mask:"-10%",pattern:0,rect:0,svg:0,text:0,tref:0,tspan:"none",use:0},cx:{circle:0,ellipse:0,radialGradient:"50%"},cy:{circle:0,ellipse:0,radialGradient:"50%"},width:{feBlend:"100%",feColorMatrix:"100%",feComponentTransfer:"100%",feComposite:"100%",feConvolveMatrix:"100%",feDiffuseLighting:"100%",feDisplacementMap:"100%",feDropShadow:"100%",feFlood:"100%",feGaussianBlur:"100%",feImage:"100%",feMerge:"100%",feMorphology:"100%",feOffset:"100%",feSpecularLighting:"100%",feTile:"100%",feTurbulence:"100%",filter:"120%",foreignObject:0,image:"auto",mask:"120%",pattern:0,rect:"auto",svg:"auto",use:"auto"},height:{feBlend:"100%",feColorMatrix:"100%",feComponentTransfer:"100%",feComposite:"100%",feConvolveMatrix:"100%",feDiffuseLighting:"100%",feDisplacementMap:"100%",feDropShadow:"100%",feFlood:"100%",feGaussianBlur:"100%",feImage:"100%",feMerge:"100%",feMorphology:"100%",feOffset:"100%",feSpecularLighting:"100%",feTile:"100%",feTurbulence:"100%",filter:"120%",foreignObject:0,image:"auto",mask:"120%",pattern:0,rect:"auto",svg:"auto",use:"auto"},r:{circle:0,radialGradient:"50%"},rx:{ellipse:"auto",rect:"auto"},ry:{ellipse:"auto",rect:"auto"},offset:0,"stop-opacity":0,"stop-color":"#000","text-anchor":"start","text-rendering":"auto","text-decoration":"none","font-size":"medium","font-size-adjust":"none","font-style":"normal","font-weight":400,"font-variant":"normal","font-stretch":"100%","font-family":"Times New Roman","alignment-baseline":"auto","baseline-shift":"auto",clipPathUnits:"userSpaceOnUse","clip-path":"none","clip-rule":"nonzero","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","color-rendering":"auto","dominant-baseline":"auto",filter:"none",filterUnits:"objectBoundingBox","flood-color":"#000","flood-opacity":0,gradientUnits:"objectBoundingBox","image-rendering":"auto",kerning:"auto","letter-spacing":"none","marker-start":"none","marker-mid":"none","marker-end":"none",markerUnits:"strokeWidth",mask:"none",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",mode:"normal",pathLength:"none",patternContentUnits:"userSpaceOnUse",patternUnits:"objectBoundingBox",primitiveUnits:"userSpaceOnUse","shape-rendering":"auto",spreadMethod:"pad",visibility:"visible"},b={display:{style:"none",text:"block"}},M={color:{none:"none","#000":"#000","#000000":"#000","#fff":"#fff","#ffffff":"#fff","#ff0000":"red","#00ff00":"#0f0","#0000ff":"#00f"},list:{},tran:{},smart:{}},_={};return{it:function(t){var e=t.viewBox();return e.width>1e5&&e.height>1e5?r=1:e.width>1e4&&e.height>1e4&&(r=2),t},u:function(t){return a&&(t._children('[stroke-linecap="round"]')._removeAttr("stroke-linecap"),t._children('[stroke-linejoin="round"]')._removeAttr("stroke-linejoin"),t._children('[fill-opacity="1"]')._removeAttr("fill-opacity"),t._children('[fill="#ffffff"]')._removeAttr("fill")),t},ot:function(t){var e={},n={};return t._findTag("use")._each((function(r){var i=r._attr("xlink:href")||r._attr("href");void 0!==e[i]||(void 0!==n[i]?r._remove():!1===t._exists(i)?(n[i]=!0,r._remove()):e[i]=!0)})),t},st:function(t){return function(t){var e=t._findTag("glyph"),n=[];e.length>0&&(t._findTag(i.join(","))._each((function(t){t._text().split("").forEach((function(t){n.push(s.fn.unicode(t))}))})),e._each((function(t){-1===n.indexOf(s.fn.unicode(t._attr("unicode")))&&t._remove()})))}(t),function(t){t._findTag("glyph")._each((function(e){var n={},r=e._attr("glyph-name");t._findTag("hkern, vkern")._each((function(t){var e=t._attr("g1"),r=t._attr("g2");null!==e&&(n[e]=!0),null!==r&&(n[r]=!0)})),n=Object.keys(n),null!==r&&-1===n.indexOf(r)&&e._removeAttr("glyph-name")}))}(t),t},ct:function(t){return t._findTag("switch")._each((function(t){var e,n=[];1===t._childCount()&&(t._hasAttr("transform")&&(n=[S(t)]),(e=t._children()._eq(0))._hasAttr("transform")&&n.push(S(e)),n.length&&T(e,n),t._replaceWith(e))})),t},ut:function(t){return t._findTag("clipPath")._each((function(t){!1===t._hasAttr("id")&&!1===t._exists("[id]")&&t._remove()})),t},lt:function(t){return t._findTag(["flowRoot","flowRegion","flowRegionExclude","flowDiv","flowPara","flowSpan","flowRegionBreak","flowLine","flowTref","flowImage","flowRef"].join(","))._remove(),t._findTag("title")._each((function(t){"a"!==t._parent().el[0].tagName&&t._remove()})),t._findTag("desc")._remove(),t},ft:function(t){return t._findTag("symbol")._each((function(t){!1===t._hasAttr("id")&&t._remove()})),t},dt:function(t){return t._findTag("circle")._each((function(t){e(t._attr("r"))?t._remove():n(t,["cx","cy","r"])})),t._findTag("rect, image")._each((function(t){if(e(t._attr("width"))||e(t._attr("height")))if("image"===t.el[0].tagName.toLowerCase())e(t._attr("xlink:href"))&&e(t._attr("href"))&&t._remove();else t._remove();else n(t,["x","y","width","height"])})),t._findTag("pattern")._each((function(t){(e(t._attr("width"))||e(t._attr("height")))&&null===t._attr("xlink:href")?t._remove():n(t,["x","y","width","height"])})),t._findTag("ellipse")._each((function(t){e(t._attr("rx"))||e(t._attr("ry"))?t._remove():n(t,["cx","cy","rx","ry"])})),t._findTag("polyline, polygon")._each((function(t){e(t._attr("points"))&&t._remove()})),t._findTag("path")._each((function(t){e(t.el[0].getAttribute("d"))&&t._remove()})),t;function e(t){return null==t||""===t||"0"===t||0===t}function n(t,e){e.forEach((function(e){var n=t._attr(e);null!==n&&0===new u.Length(n).value&&t._attr(e,0)}))}},ht:function(t){return t._findTag("polygon, polyline, rect, line, ellipse")._filter((function(t){return!1===E(t)}))._each((function(r){var i,o,a=s.wrap(r);switch(a.type()){case"polygon":case"polyline":n(a,s.fn.path.poly2List(a),["points"]);break;case"rect":i=a.attr("rx"),o=a.attr("ry"),null!==i&&0!==parseFloat(i)||null!==o&&0!==parseFloat(o)||n(a,s.fn.prim2List(function(e){var n=t.viewBox();return["x","y","width","height"].forEach((function(t){var r=e._hasAttr(t)?e[0].getAttribute(t)+"":"";r.indexOf("%")>-1&&e.attr(t,parseFloat(r.replace("%",""))*("x"===t||"width"===t?n.width:n.height)/100)})),e}(a)),["x","y","width","height","rx","ry"]);break;case"line":n(a,[{type:"M",x:a.x1()||0,y:a.y1()||0},{type:"L",x:a.x2()||0,y:a.y2()||0}],["x1","y1","x2","y2"]);break;case"ellipse":!function(t){var n,r,i=new u.Length(t.attr("rx")).px(),o=new u.Length(t.attr("ry")).px(),a=.001;Math.abs(i-o)<a&&((n=t.attrs(!0)).id=void 0===n.id?null:n.id,n.r=i||o,r=new s.Circle(null,t._parent()),delete n.rx,delete n.ry,r.attr(n),r._append(t._children()),t._replaceWith(r),e(t,r))}(a)}})),t;function e(e,n){var r,i,o,a=t._children("defs"),s="",c=new RegExp("^"+e.type()+"{","g"),u=[];a.length>0&&(r=a._children("style")).length>0&&(1===r.length?s=r._html():(r._each((function(t){s+=t._html()})),a._children("style")._remove(),r=h.parseSVG('<style type="text/css">'+s+"</style>"),a._prepend(r)),(i=s.match(/<!\[CDATA\[([\s\S]*?)]]>/))&&i.length>0?((o=(o=i[0].replace(/\s+/g,"")).replace("<![CDATA[","").replace("]]>","")).split("}").forEach((function(t){u.push(t.replace(c,n.type()+"{"))})),o=u.join("}"),r.el[0].childNodes.forEach((function(t){"#cdata-section"===t.nodeName&&t.replaceData(0,t.length,o)}))):(s=s.replace(c,n.type()+"{"),r._html(s)))}function n(t,n,r){var i,o=t.attrs(!0);o.id=void 0===o.id?null:o.id,o.fill=void 0===o.fill?null:o.fill,o.stroke&&o.stroke.indexOf("url(")>-1&&(n[0].x+=1e-13,n[0].y+=1e-13),r.forEach((function(t){delete o[t]})),N((i=new s.Path(null,t._parent()).attr(o))._eq(0),n),i._append(t._children()),t._replaceWith(i),i[0]._d=n,e(t,i)}},vt:function(t){var r=[],i=[],o={},a=[],c=[],u=[];return t._findTag("style")._each((function(n){s.fn.readStyles(n._text()).forEach((function(n){switch(n.type){case 1:!function(e,n){var r=["animation","animation-name","animation-duration","animation-fill-mode","animation-timing-function","animation-direction","animation-iteration-count","isolation","mix-blend-mode","background","background-color","transform-origin","letter-spacing","white-space","animation-delay"],i={TAG:0,CLASS:1,ID:2,IMPORTANT:4},o=e.selectorText.split(","),a=t._parent()._find(e.selectorText);a.length>0&&(Object.keys(e.style).forEach((function(t){"length"!==t&&isNaN(t)||delete e.style[t]})),h.each(e.style,(function(t,u){var l=t.indexOf("!important")>-1;if(l&&(t=t.replace("!important","").trim()),g.indexOf(u)>-1&&(t=null===(t=G(t))?"none":t),"font-family"===u)t=t.split(/ *, */).map((function(t){return t.replace(/['"]/g,"")})).join(",");else{if("color"===u)return void a._each((function(e){c(e,"style",t),g.forEach((function(n){c(e,n,t)})),s(n,e)}));"display"===u&&"none"===t&&a._attr("display",t)}-1===r.indexOf(u)?("transform"===u&&(t=F(t)),a._each((function(e){var r;l?r=i.IMPORTANT:o.some((function(t){var n=t.split(" ").pop(),o=n.match(/[\.#].*$/g);if("#"===(t=o?o[0].trim():n).charAt(0)&&e.el[0].id===t.slice(1))return r=i.ID,!0;if("."===t.charAt(0)){if(e._hasClass(t.slice(1)))return r=i.CLASS,!0}else if(e.el[0].tagName.toLowerCase()===t)return r=i.TAG,!0})),e.el[0]._CSSOrder=e.el[0]._CSSOrder||{},e.el[0]._CSSOrder[u]=e.el[0]._CSSOrder[u]||0,r>=e.el[0]._CSSOrder[u]&&(e._attr(u,t),e.el[0]._CSSOrder[u]=r,s(n,e))}))):(a._each((function(e){e.el[0]._CSS=e.el[0]._CSS||{},e.el[0]._CSS[u]=t})),l&&(t+=" !important"),n.styles=n.styles||{},n.styles[e.selectorText]=n.styles[e.selectorText]||{},n.styles[e.selectorText][u]=t)})));function s(t,e){t.nodes=t.nodes||[],t.nodes.push(e)}function c(t,e,n){var r,i=t._attr(e);i&&(r=i.replace(/currentColor|currentcolor/g,n))!==i&&t._attr(e,r)}}(n,o);break;case 3:e.mode!==s.CONST.COMPRESS_INLINE&&r.push(n.cssText.replace(/\);$/,")"));break;case 4:u.push(n.cssText);break;case 5:e.mode!==s.CONST.COMPRESS_INLINE&&i.push(n.cssText.replace(/\);$/,")"));break;case 7:c.push(n.cssText)}})),n._remove()})),o.styles?(Object.keys(o.styles).forEach((function(t){a=a.concat(t.split(/[, {>~+]/))})),o.nodes&&o.nodes.forEach((function(t){var e=t._attr("class");e&&(e=e.split(" ")).forEach((function(e){-1===a.indexOf("."+e)&&t._removeClass(e)}))})),!1===h.isEmpty(o.styles)&&t.insertCDATA(o.styles)):o.nodes&&o.nodes.forEach((function(t){t._removeClass()})),function(e){var r,i=e.join(" ");""!==i&&(0===(r=t._children("style")).length&&(r=h.parseHTML("<style></style>"),t._prepend(r)),i=r._text()+i,r._empty(),r._prepend((new n).parseFromString("<svg></svg>","image/svg+xml").createCDATASection(i)))}(u),function(e){var r,i=e.join(" ");""!==i&&0!==(r=t._children("style")).length&&(i=r._text()+i,r._empty(),r._prepend((new n).parseFromString("<svg></svg>","image/svg+xml").createCDATASection(i)))}(c),function(e,n){var r,i="";(e.length||n.length)&&(e.length&&(i+=e.join("; ")+"; "),n.length&&(i+=n.join(" ")),""!==i&&(0===(r=t._findTag("defs")).length&&(r=new s.Defs(null,t)),r._prepend(h.parseHTML("<style>"+i+"</style>"))))}(r,i),t},gt:function(t){var e=["enable-background","isolation","solid-color","solid-opacity","filter-blend-mode","filter-gaussianBlur-deviation","font-variant-east_asian"],n=["line-height","text-indent","text-align","text-decoration-style","text-decoration-color","letter-spacing","word-spacing","text-transform","direction","block-progression","writing-mode","baseline-shift","white-space","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","alignment-baseline","dominant-baseline"];return t._attr("style")&&r(h(t[0])),t._find("[style]")._each((function(t){r(t)})),t;function r(r){var o,a,s=r._attr("style"),c={},u={};s&&(o=r.el[0].tagName.toLowerCase(),a=i.indexOf(o)>-1,s.split(";").forEach((function(i){var s,l;if(i){if(s=(i=i.split(":"))[0].trim(),l=(i[1]||"").trim(),("width"===s||"height"===s)&&"0"===l)return void r._remove();if("clip-path"===s&&r._attr("clip-path")&&t._findID(h.escape(r._attr("clip-path").replace(/url\(#|\)/g,""))).length)return;if(s&&l){if(e.indexOf(s)>-1)return;if(n.indexOf(s)>-1&&!1===a)return;if(0===s.indexOf("-")||"display"===s&&"svg"!==o&&"none"!==l||0===s.indexOf("font-variant")||0===s.indexOf("font-feature")||0===s.indexOf("text-orientation")||0===s.indexOf("shape-padding"))return;if(["mix-blend-mode"].indexOf(s)>-1&&"normal"!==l)return void(u[s]=l);if(["background","background-color"].indexOf(s)>-1&&("#FFF"!==l||"#FFFFFF"!==l))return void(u[s]=l);if(["font-variation-settings"].indexOf(s)>-1){if(!1===a)return;if("normal"!==l)return void(u[s]=l)}if(["text-transform","white-space","transform-box"].indexOf(s)>-1)return void(u[s]=l);"transform"===s&&(l=F(l)),c[s]=l}}})),!1===h.isEmpty(c)&&r._attr(c),h.isEmpty(u)?r._removeAttr("style"):r._attr("style",Object.keys(u).map((function(t){return[t,":",u[t]].join("")})).join(";")))}},yt:function(t){return g.forEach((function(e){t._find("["+e+"=currentColor], ["+e+"=currentcolor]")._each((function(t){t._attr(e,L(t,e))}))})),t._find("[color]")._removeAttr("color"),t},xt:function(t){return t._hasAttr("display")&&"none"!==t._attr("display")&&t._removeAttr("display"),t._find("[display]")._each((function(e){var n,r=e.el[0].tagName.toLowerCase();"none"===e.el[0].getAttribute("display")?-1===["style","defs","clippath"].indexOf(r)&&(e._hasAttr("id")?(n=e.el[0].id,0===t._find("[xlink\\:href], [href]")._matches('[xlink\\:href="#'+n+'"], [href="#'+n+'"]').length&&e._remove()):!1===E(e)&&e._remove()):e._removeAttr("display")})),t},kt:function(t){return t._find("[stroke-width]")._matches('[stroke-width="0"]')._each((function(t){0===t._find("[stroke-width]").length&&(t._attr("stroke","none"),t._removeAttr("stroke-width")._removeAttr("marker-start")._removeAttr("marker-mid")._removeAttr("marker-end"))})),t},wt:function(t){return t._find("[overflow]")._each((function(t){var e=t.el[0].tagName.toLowerCase();-1===["svg","symbol","image","foreignobject","pattern","marker"].indexOf(e)&&t._removeAttr("overflow")})),t},bt:function(t){return t._findTag("tspan")._matches("[dy]")._each((function(t){!1===t.el[0].getAttribute("dy").split(" ").some((function(t){return"0"!==t}))&&t._removeAttr("dy")})),t},Mt:function(t){return t._findTag("g")._filter((function(t){return 1===t._childCount()&&!1===E(t)}))._each((function(t){A(t,_)})),t},_t:function(t){var n={COMMON:["requiredFeatures","requiredExtensions","systemLanguage","id","xml:base","xml:lang","alignment-baseline","baseline-shift","clip","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","dominant-baseline","enable-background","filter","flood-color","flood-opacity","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","unicode-bidi","visibility","word-spacing","writing-mode","class","style","externalResourcesRequired","vector-effect","onfocusin","onfocusout","onactivate","onclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout",""],svg:["x","y","width","height","viewBox","preserveAspectRatio","zoomAndPan","baseProfile","contentScriptType","contentStyleType","xmlns","xmlns:xlink","transform"],g:["transform","transform-origin"],mask:["x","y","width","height","maskUnits","maskContentUnits","mask-type"],defs:["transform","transform-origin"],symbol:["viewBox","preserveAspectRatio"],path:["transform","transform-origin","d","pathLength"],rect:["transform","transform-origin","x","y","width","height","rx","ry"],circle:["transform","transform-origin","cx","cy","r"],ellipse:["transform","transform-origin","cx","cy","rx","ry"],line:["transform","transform-origin","x1","x2","y1","y2"],polygon:["transform","transform-origin","points"],polyline:["transform","transform-origin","points"],pattern:["viewBox","preserveAspectRatio","x","y","width","height","patternUnits","patternContentUnits","patternTransform","xlink:href","href"],style:["media"],stop:["offset"],clippath:["transform","transform-origin","clipPathUnits"],lineargradient:["x1","y1","x2","y2","gradientUnits","gradientTransform","transform-origin","spreadMethod","xlink:href","href"],radialgradient:["cx","cy","r","fx","fy","gradientUnits","gradientTransform","transform-origin","spreadMethod","xlink:href","href"],use:["transform","transform-origin","x","y","width","height","xlink:href","href"],image:["transform","transform-origin","x","y","width","height","xlink:href","href","preserveAspectRatio"],text:["transform","transform-origin","lengthAdjust","x","y","dx","dy","rotate","textLength","xml:space"],tspan:["lengthAdjust","x","y","dx","dy","rotate","textLength","xml:space"],tref:["xlink:href","href"],textpath:["startOffset","method","spacing","xlink:href","href"],marker:["viewBox","refX","refY","markerUnits","markerWidth","markerHeight","orient"],font:["horiz-origin-x","horiz-origin-y","horiz-adv-x","vert-origin-x","vert-origin-y","vert-adv-y"],"font-face":["font-family","font-style","font-variant","font-weight","font-stretch","font-size","unicode-range","units-per-em","panose-1","stemv","stemh","slope","cap-height","x-height","accent-height","ascent","descent","widths","bbox","ideographic","alphabetic","mathematical","hanging","v-ideographic","v-alphabetic","v-mathematical","v-hanging","underline-position","underline-thickness","strikethrough-position","strikethrough-thickness","overline-position","overline-thickness"],filter:["x","y","width","height","filterRes","filterUnits","primitiveUnits","xlink:href"],feblend:["in","in2","mode","x","y","width","height","result"],fecolormatrix:["in","type","values","x","y","width","height","result"],fecomposite:["in","in2","operator","k1","k2","k3","k4","x","y","width","height","result"],feconvolvematrix:["in","order","kernelMatrix","divisor","bias","targetX","targetY","edgeMode","kernelUnitLength","preserveAlpha","x","y","width","height","result"],dediffuselighting:["in","surfaceScale","diffuseConstant","kernelUnitLength","x","y","width","height","result"],fedisplacementmap:["in","in2","scale","xChannelSelector","yChannelSelector","x","y","width","height","result"],feflood:["flood-color","flood-opacity","x","y","width","height","result"],fegaussianblur:["in","stdDeviation","x","y","width","height","result"],feimage:["xlink:href","x","y","width","height","result"],femerge:["x","y","width","height","result"],femorphology:["in","operator","radius","x","y","width","height","result"],feoffset:["in","dx","dy","x","y","width","height","result"],fespecularlighting:["in","surfaceScale","specularConstant","specularExponent","kernelUnitLength","x","y","width","height","result"],fetile:["in","x","y","width","height","result"],feturbulence:["baseFrequency","numOctaves","seed","stitchTiles","type","x","y","width","height","result"]},r={REMOVE:{visibility:["visible"],"color-rendering":["auto"],"image-rendering":["auto"],"shape-rendering":["auto"],"color-interpolation":["sRGB"],"color-interpolation-filters":["linearRGB"],"stop-color":["#000","#000000","black"],patternUnits:["objectBoundingBox"],gradientUnits:["objectBoundingBox"],maskUnits:["objectBoundingBox"],filterUnits:["objectBoundingBox"],clipPathUnits:["userSpaceOnUse"],maskContentUnits:["userSpaceOnUse"],patternContentUnits:["userSpaceOnUse"],marker:["none"],"marker-start":["none"],"marker-mid":["none"],"marker-end":["none"],"text-decoration-line":["none"],"vector-effect":["none"],"stop-opacity":["1"],"font-weight":["normal"],"font-variant":["normal"],"mask-type":["luminance"]},use:{x:"0",y:"0",width:"100%",height:"100%"},feturbulence:{baseFrequency:"0",numOctaves:"1",stitchTiles:"noStitch",type:"turbulence"},fespecularlighting:{surfaceScale:"1",specularConstant:"1",specularExponent:"1"},feoffset:{dx:"0",dy:"0"},femorphology:{operator:"erode"},fegaussianblur:{stdDeviation:"0"},fedisplacementmap:{scale:"0",xChannelSelector:"A",yChannelSelector:"A"},fediffuselighting:{surfaceScale:"1",diffuseConstant:"1"},feconvolvematrix:{order:"3",bias:"0",edgeMode:"duplicate",preserveAlpha:"false"},feblend:{mode:"normal"},fecolormatrix:{type:"matrix"},fecomposite:{operator:"over"}},i=t._eq(0);return e.maintain_attrs&&h.isArray(e.maintain_attrs)&&(n.COMMON=n.COMMON.concat(e.maintain_attrs)),a&&e.maintain_structure&&(n.COMMON=n.COMMON.concat(c)),function t(e,i,o,a){var s=e.el[0].tagName.toLowerCase(),c=n[s],u=L(e,"stroke"),l=n.COMMON.concat(p,n[s],"clip-path");if(i=i||"clippath"===s,o=o||"defs"===s,y.indexOf(s)>-1&&"none"===L(e,"fill")&&"none"===u&&!1===e._hasAttr("id")&&!i&&!o)return void e._remove();["text","tspan"].indexOf(s)>-1&&"none"===u&&e._removeAttr("paint-order");void 0!==c&&function(t,e,n){var a,s,c,u=t.el[0];u.getAttributeNames().filter((function(t){return"id"!==t})).forEach((function(d){-1!==l.indexOf(d)?""!==(a=u.getAttribute(d))?void 0!==r.REMOVE[d]&&r.REMOVE[d].indexOf(a)>-1?"tspan"===e&&n&&"text"===n.el[0].tagName.toLowerCase()?"font-weight"===d&&"normal"===a&&L(n,d)===a&&(c=f(t,d,a,n,c)):c=f(t,d,a,n,c):void 0===r[e]||void 0===r[e][d]||r[e][d]!==a?p.indexOf(d)>-1&&n&&!o&&!1===t._hasAttr("id")&&(s=function(t,e,n,r,i,o){var a,s,c=!1;"opacity"===n&&("opacity"!==n||1!==L(t,"opacity")||void 0!==i&&1!==L(i,"opacity"))||("text"!==e||"fill"!==n||void 0!==i&&"text"===i.el[0].tagName)&&((a=L(t,n))===(s=void 0===i?a:L(i,n))||"stroke-width"===n&&Math.abs(a-s)<.001)&&(c=!0);c&&(o=f(t,n,r,i,o));return{removed:c,_siblings:o}}(t,e,d,a,n,c),c=s._siblings,s.removed)||"clip-rule"!==d||i||(c=f(t,d,void 0,n,c)):c=f(t,d,a,n,c):c=f(t,d,a,n,c):c=f(t,d,void 0,n,c)}))}(e,s,a);function f(t,e,n,r,i){return void 0===r||1===(i=i||r._children()).length?t._removeAttr(e):(e.indexOf(":")>-1&&(e=e.replace(":","\\:")),i._matches(t.el[0].tagName+"["+e+(void 0===n?"":'="'+n+'"')+"]")._removeAttr(e)),i}e._children()._each((function(n){t(n,i,o,e)}))}(i,!1,!1),t},Ft:function(t){return t._find(g.map((function(t){return"["+t+"]"})).join(","))._each((function(t){g.forEach((function(e){var n,r=t._attr(e);null!==r&&(n=G(r))!==r&&t._attr(e,n)}))})),t},Et:function(t){var e=[];return t._findTag("stop")._each((function(t){var n,r=t._prev(),i=t._next(),o={};if(r.length>0&&i.length>0&&(t._attr("stop-color")===r._attr("stop-color")&&t._attr("stop-color")===i._attr("stop-color")&&(o.stop=t._attr("stop-opacity"),o.stop=null===o.stop?1:o.stop,o.prev=r._attr("stop-opacity"),o.prev=null===o.prev?1:o.prev,o.next=i._attr("stop-opacity"),o.next=null===o.next?1:o.next,o.stop===o.prev&&o.stop===o.next&&e.push(t)),t._attr("stop-color")===r._attr("stop-color")&&t._attr("stop-opacity")===r._attr("stop-opacity")&&t._attr("stop-color")===i._attr("stop-color")&&t._attr("stop-opacity")===i._attr("stop-opacity")&&r._attr("offset")-t._attr("offset")<.05&&e.push(t)),r.length>0&&0===i.length)for(n=t._prev();n.length&&t._attr("stop-color")===n._attr("stop-color")&&t._attr("stop-opacity")===n._attr("stop-opacity");)e.push(t),t=n,n=n._prev()})),e.forEach((function(t){t._remove()})),t},At:function(t){return t._findTag("defs")._each((function(t){var e,n=t._parent()._closest("defs");n.length&&(e=t._attr(),t._children()._each((function(t){t._attr(e),n._append(t)})),t._remove())})),t},St:function(t){var e=[];return t._findTag("linearGradient")._each((function(n){(function(e){var n,r=["gradientTransform","x1","y1","x2","y2"],i=e._attr("xlink:href");if(i&&(n=t._findID(i)).length>0){if(e._ancestor=n,"radialgradient"===e._ancestor.el[0].tagName.toLowerCase()&&e._ancestor._hasAttr("gradientTransform"))return!1;if(e._ancestor._hasAttr("gradientTransform")&&1!==s.fn.applyLinearTransform(n,S(n)).confidence)return!1;r.forEach((function(t){!1===e._hasAttr(t)&&e._attr(t,e._ancestor._attr(t))}))}return e._hasAttr("gradientTransform")})(n)&&e.push(n)})),e.forEach((function(t){!function(t){var e=S(t),n=s.fn.applyLinearTransform(t,e);if(void 0===t._ancestor&&!1===t._hasAttr("x1")&&!1===t._hasAttr("y1")&&!1===t._hasAttr("x2")&&!1===t._hasAttr("y2"))return;1===n.confidence&&(t._attr({x1:n.begin.x,y1:n.begin.y,x2:n.end.x,y2:n.end.y}),t._removeAttr("gradientTransform"),delete t.el[0]._tran);t._ancestor&&(t._ancestor._attr("x1")===n.begin.x&&t._removeAttr("x1"),t._ancestor._attr("y1")===n.begin.y&&t._removeAttr("y1"),t._ancestor._attr("x2")===n.end.x&&t._removeAttr("x2"),t._ancestor._attr("y2")===n.end.y&&t._removeAttr("y2"))}(t)})),t},Tt:function(t){return t._findTag("switch")._each((function(t){var e=!1;t._children()._each((function(t){""===t._text()&&0===t._childCount()&&null!==t._attr("requiredFeatures")&&(e=!0)})),e&&t._remove()})),t},Lt:function(t){return function e(n,r){var i,o,a,c,l,f=n.el[0].tagName.toLowerCase();if(r=r||"defs"===f,"lineargradient"!==f&&"radialgradient"!==f&&n._hasAttr("transform")&&(i=S(n))){switch(f){case"path":a=S(n._parent()),!j(t,n,i)||r||null!==a&&Math.abs(a.a)!==Math.abs(a.d)||!1!==E(n)||void 0!==L(n,"transform-origin")||(U(n,i),n._removeAttr("transform"),delete n.el[0]._tran);break;case"g":o=n._children(),!1===E(n)&&0===o._filter((function(t){return E(t)})).length&&(o.length===o._matches("path").length&&0===s.math.deg(Math.atan2(i.b,i.a))?d(t,n,i,o):1===o.length?"svg"!==o.el[0].tagName.toLowerCase()&&("path"===o.el[0].tagName.toLowerCase()&&0!==s.math.deg(Math.atan2(i.b,i.a))||d(t,n,i,o)):i.type===s.CONST.TRANS_TRANSLATE&&0===n._find("[mask]").length&&d(t,n,i,o));break;case"ellipse":case"circle":case"rect":j(t,n,i)&&i.type===s.CONST.TRANS_TRANSLATE&&(c=s.wrap(n),l=c.moveU(),c.move(l.x+i.x,l.y+i.y),n._removeAttr("transform"),delete n.el[0]._tran);break;case"use":!function(t,e){var n;e.type===s.CONST.TRANS_TRANSLATE&&((n=new u.Length(t._attr("x")||0)).px()+e.x!==0||0!==n.px()?t._attr("x",n.px()+e.x):t._removeAttr("y"),(n=new u.Length(t._attr("y")||0)).px()+e.y!==0||0!==n.px()?t._attr("y",n.px()+e.y):t._removeAttr("y"),t._removeAttr("transform"),delete t.el[0]._tran)}(n,i);break;case"text":i.type===s.CONST.TRANS_TRANSLATE&&0!==n._children("textPath").length&&(n._removeAttr("transform"),delete n.el[0]._tran)}n._hasAttr("transform")&&T(n,[i])}function d(t,e,n,r){(function(t,e,n){var r=!0;1!==e._childCount()||-1!==["svg","g","defs","symbols"].indexOf(e.el[0].tagName)||"use"!==e.el[0].childNodes[0].tagName&&"clipPath"!==e.el[0].childNodes[0].tagName?e._findTag("use, clipPath").length>0||e._find('animateTransform[type="rotate"]').length>0?r=!1:(r=j(t,e,n))&&e._find("[fill], [stroke]")._each((function(e){return r=j(t,e,S(e))})):r=!1;return r})(t,e,n)&&(r._each((function(t){var e=[n];t._hasAttr("transform")&&e.push(S(t)),T(t,e)})),e._removeAttr("transform"),delete e.el[0]._tran)}n._children()._each((function(t){e(t,r)}))}(m.removeEmptyContainers(t)._eq(0),!1),t},reduceGroups:function(t){return e.maintain_structure||t._findTag("g")._each((function(t){var e;if("switch"!==t._parent().el[0].tagName.toLowerCase())return 0===t.el[0].getAttributeNames().length?(e=t._children(),void(!1===E(t)&&[null,void 0,"none"].indexOf(L(t,"isolation"))>-1&&(e.el.forEach((function(t){t._disable_cache=!0})),t._before(e),e.el.forEach((function(t){delete t._disable_cache})),t._remove()))):void(1===t._childCount()?A(t,_):!1===t._hasAttr("opacity")&&(e=t._children(),!1===E(t)&&function(t,e){var n=!0;return t.el[0].getAttributeNames().forEach((function(r){-1===r.indexOf(":")&&(["transform","class","clip-path","id","filter","mask"].indexOf(r)>-1?n=!1:e.length===e._matches("["+r+"]").length?t._removeAttr(r):n=!1)})),n}(t,e)&&[null,void 0,"none"].indexOf(L(t,"isolation"))>-1&&(e.el.forEach((function(t){t._disable_cache=!0})),t._before(e),e.el.forEach((function(t){delete t._disable_cache})),t._remove())))})),t},Ct:function(t){var e=["stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"],n={},r=e.map((function(t){return"["+t+"]"})).join(",");return t._find("[xlink\\:href], [href]")._each((function(t){var e=t._attr("xlink:href");"#"===e.charAt(0)&&(n[e.slice(1)]=1)})),t._find(r)._each((function(t){i(t)})),t;function i(t){var r,a,s=t._children(),c=!0,u={};if(0===s.length)"none"===L(t,"stroke")?function(t){var n;e.forEach((function(e){t._hasAttr(e)&&(void 0===n&&(n=t._closest("defs")),0===n.length&&t._removeAttr(e))}))}(t):(r=t.el[0].tagName.toLowerCase(),t._hasAttr("stroke-linecap")&&"none"===L(t,"stroke-dasharray")&&("path"===r?(a=t.el[0].getAttribute("d"),u.m=a.match(/[mM]/g),u.z=a.match(/[zZ]/g),null!==u.m&&null!==u.z&&u.m.length===u.z.length&&t._removeAttr("stroke-linecap")):"use"!==r&&t._removeAttr("stroke-linecap")),!t._hasAttr("stroke-miterlimit")||"circle"!==r&&"ellipse"!==r||t._removeAttr("stroke-miterlimit"));else{if("text"===t.el[0].tagName&&t._text()!==s._text())return;s._each((function(t){(o.indexOf(t.el[0].tagName)>-1||t.el[0].id&&n[t.el[0].id])&&(c=!1)})),c&&e.forEach((function(e){var n;t._hasAttr(e)&&(n=t._attr(e),t._removeAttr(e),s._each((function(t){!1===t._hasAttr(e)&&"defs"!==t.el[0].tagName&&t._attr(e,n),i(t)})))}))}}},Ot:function(t){return["fill-rule","fill-opacity"].forEach((function(e){t._find("["+e+"]")._each((function(t){"none"===L(t,"fill")&&!1===t._exists("[fill]")&&t._removeAttr(e)}))})),t},Nt:function(t){return t._findTag("mask")._each((function(t){null===t._attr("id")&&t._remove()})),t._findTag("mask")._each((function(e){0===t._find("[mask]")._matches('[mask="url(#'+e._attr("id")+')"]').length&&e._remove()})),t},It:function(t){var e,n={},r=["style","font","clippath","pattern"],i=[];return t._findTag("style")._each((function(t){i.push(t._text())})),e=i.join(" "),t._findTag("defs")._each((function(t){t._children()._each((function(t){!1===t._hasAttr("id")&&-1===r.indexOf(t.el[0].tagName.toLowerCase())&&t._remove()}))})),t._find("[xlink\\:href], [href]")._each((function(t){var e=t._attr("xlink:href");0!==e.indexOf("data:")&&(void 0===n[e]&&(n[e]=0),n[e]++)})),t._find("[mask]")._each((function(t){var e=t._attr("mask").replace(/url\((.*?)\)/g,"$1");void 0===n[e]&&(n[e]=0),n[e]++})),function(n){var r=["filter","clippath","mask","font","style","marker"];t._findTag("defs")._each((function(i){i._children()._each((function(o){var a,s=o.el[0].tagName.toLowerCase(),c=o._attr("id");"lineargradient"===s||"radialgradient"===s||"pattern"===s||"g"===s?!1===t._find("[fill], [stroke]").el.some((function(t){return(t.getAttribute("fill")||"").indexOf("url(#"+c+")")>-1||(t.getAttribute("stroke")||"").indexOf("url(#"+c+")")>-1}))&&void 0===n["#"+c]&&-1===e.indexOf("url(#"+c+")")&&(a=o._attr("xlink:href"),"pattern"!==s&&"g"!==s||Object.keys(n).forEach((function(t){var e,n=o._findID(t.slice(1));n.length>0&&(e=n._clone(),i._append(e),n._remove())})),null!==a&&(n[a]--,0===n[a]&&delete n[a]),o._remove(),!0):void 0===n["#"+c]&&-1===r.indexOf(s)&&o._remove()}))}))}(n),t},Bt:function(t){var e=["font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","text-anchor"],n=t._findTag(i.join(",")),r={};return 0===n.length&&(e.forEach((function(t){r[t]=null})),t._find(e.map((function(t){return"["+t+"]"})).join(","))._each((function(t){t._attr(r)})),t._findTag("style")._each((function(t){var n=t._text(),r=new RegExp(e.map((function(t){return" *"+t+" *: *.*?[;}]"})).join("|"),"g");""===(n=n.trim())?t._remove():t._html(n.replace(r,""))})),e.forEach((function(e){null!==t.attr(e)&&t._removeAttr(e)}))),t},Rt:function(t){return e.maintain_structure||t._find("g[transform]")._each((function(e){var n=S(e),r=function(e){var n=null,r=[];if(C(e,"fill"))return n;if(C(e,"stroke"))return n;if(C(e,"clip-path"))return n;if(C(e,"filter"))return n;e._children()._each((function(e){if("path"!==e.el[0].tagName.toLowerCase())return r=[],!1;!1===j(t,e,S(e))&&r.push(e)})),1===r.length&&(n=r[0]);return n}(e);r&&(e._children()._each((function(t){R(e,t),t.el.forEach((function(t){t._disable_cache=!0})),e._before(t),t.el.forEach((function(t){delete t._disable_cache})),t.el[0]!==r.el[0]&&(U(t,n),t._removeAttr("transform"),delete t.el[0]._tran)})),e._remove())})),t},Pt:function(t){var e=t.viewBox();return t._findTag("path, missing-glyph, glyph")._each((function(t){P(t,e)})),t},Dt:function(t){return t._find("stop[offset]")._each((function(t){t._attr("offset",$(t._attr("offset")))})),t},roundLengths:function(t){return function t(e){var n=B(e);Object.keys(n).forEach((function(t){var i,o;l.indexOf(t)>-1&&-1===n[t].toString().indexOf("%")&&(t.indexOf("opacity")>-1?(i=$(i=D(i=k(n[t],r),5.1)),e._attr(t,i)):null!==(o=new u.Length(n[t])).value&&(0!==(i=k(o.value,r))&&(i+=o.resultUnit),i=$(i),e._attr(t,i)))})),e._children()._each((function(e){t(e)}))}(t._eq(0)),t},jt:function(t){return t._findTag("rect")._each((function(t){var e=t._attr("ry");e&&t._attr("rx")===e&&t._removeAttr("ry")})),t},Ut:function(t){function e(t,e){var n;t._removeAttr(e),n=L(t,e),(i.indexOf(t.el[0].tagName.toLowerCase())>-1||0!==n)&&t._attr(e,0)}return t._find('[x="0"]')._each((function(t){-1===["mask","clippath","filter"].indexOf(t.el[0].tagName.toLowerCase())&&e(t,"x")})),t._find('[y="0"]')._each((function(t){-1===["mask","clippath","filter"].indexOf(t.el[0].tagName.toLowerCase())&&e(t,"y")})),0===t.attr("x")&&e(t._eq(0),"x"),0===t.attr("y")&&e(t._eq(0),"y"),t},moveAttrToGroup:function(n){var r=["fill","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-width","text-anchor","text-decoration","text-rendering","clip-rule","transform"];return e.maintain_structure?n:(function e(a){var c={},u={},l=[];a._each((function(a,s){var u,l=a.el[0].tagName.toLowerCase(),f=L(a,"filter"),d=L(a,"mask"),v=d.replace(/url\(#(.*)\)/,"$1"),p=f.replace(/url\(#(.*)\)/,"$1");-1===[null,"none"].indexOf(f)&&-1===[null,"none"].indexOf(L(a,"transform"))&&"userSpaceOnUse"===n._find('[id="'+h.escape(p)+'"]')._attr("filterUnits")||-1===[null,"none"].indexOf(d)&&-1===[null,"none"].indexOf(L(a,"transform"))&&"userSpaceOnUse"===n._find('[id="'+h.escape(v)+'"]')._attr("maskUnits")||(-1===i.indexOf(l)&&-1===o.indexOf(l)&&null===a._attr("id")&&(u=B(a),Object.keys(u).forEach((function(t){var e;r.indexOf(t)>-1&&(e=t+u[t],void 0===c[e]?c[e]={attr:t,val:u[t],_nodes:[a]}:c[e]._nodes.push(a),a.el[0]._index=s)}))),t.indexOf(l)>-1&&e(a._children()))})),h.each(c,(function(t,e){var n,r=0;1===t._nodes.length?delete c[e]:(n=e+r,t._nodes.forEach((function(i,o){var a=i.el[0]._index;0===o?u[n]={attr:t.attr,val:t.val,_nodes:[i],index:a}:a!==u[n].index+1?(r++,u[n=e+r]={attr:t.attr,val:t.val,_nodes:[i],index:a}):(u[n]._nodes.push(i),u[n].index=a)})))})),h.each(u,(function(t,e){t._nodes.length>1&&l.push({p_key:e,index:t._nodes[0].el[0]._index,attr:t.attr,val:t.val})})),l.sort((function(t,e){return t.index-e.index})),l.forEach((function(t){var e,r,i,o,a,c,l=u[t.p_key]._nodes,f=l.length-1;if(l.length>1){for(;f>0;f--)l[f-1]._next().el[0]!==l[f].el[0]&&l.splice(f,l.length-f);a=(r=l[0]._parent())._children(),"g"===r.el[0].tagName.toLowerCase()&&a.length===l.length&&!1===r._hasAttr(t.attr)&&!0!=!(!(c=S(a))||1===c.a&&1===c.d)?(h(l.map((function(t){return t.el[0]})))._removeAttr(t.attr),"transform"===t.attr?(i=r._attr("transform"),r._attr("transform",(null===i?"":i+" ")+t.val),delete r.el[0]._tran,T(r,[S(r)])):r._attr(t.attr,t.val)):((e=new s.Group(null,n).id(null))[0]._disable_cache=!0,l[0]._before(e),delete e[0]._disable_cache,o=h(l.map((function(t){return t.el[0]._disable_cache=!0,t.el[0]}))),e._append(o),o.el.forEach((function(t){delete t._disable_cache})),o._removeAttr(t.attr),e.attr(t.attr,t.val))}}))}(n._children()),n=m.reduceGroups(n))},removeEmptyContainers:function(e){return e._findTag(t.join(","))._each((function(t){var e=t.el[0].tagName.toLowerCase(),n=t._parent(),r=!0;switch(e){case"mask":r=!1;break;case"pattern":case"symbol":r=null===t._attr("xlink:href")}"switch"!==n.el[0].tagName.toLowerCase()&&0===t._childCount()&&r&&(t._remove(),n.length&&"mask"===n.el[0].tagName.toLowerCase()&&0===n._childCount()&&n._remove())})),e},Gt:function(t){var e=["SourceGraphic","SourceAlpha","BackgroundImage","BackgroundAlpha","FillPaint","StrokePaint"];return t._findTag("filter")._each((function(t){var r=0,i={};t._find("[in], [in2], [result]")._each((function(t){var o={in:t._attr("in"),in2:t._attr("in2"),result:t._attr("result")};r=n(i,e,t,r,"in",o),r=n(i,e,t,r,"in2",o),r=n(i,e,t,r,"result",o)}))})),t;function n(t,e,n,r,i,o){return o[i]&&-1===e.indexOf(o[i])&&(void 0===t[o[i]]&&(t[o[i]]=x(r),r++),n._attr(i,t[o[i]])),r}},zt:function(t){return t._findTag("filter")._each((function(t){t._children("[result]")._each((function(t){var e;(e=t._next()).length>0&&(e._attr("in")===t._attr("result")&&e._removeAttr("in"),e._attr("in2")===t._attr("result")&&e._removeAttr("in2"))})),t._children("[result]")._each((function(e){var n=e._attr("result");0===t._find("[in="+n+"], [in2="+n+"]").length&&e._removeAttr("result")}))})),t},$t:function(t){return e.maintain_structure||function e(n){var r={};0===n._closest("defs").length&&n._children()._each((function(n){var i,o,a,c,u,l;"path"===n.el[0].tagName?(i=s.wrap(n),a=0===(o=L(n,"fill")).indexOf("url"),u=0===(c=L(n,"stroke")).indexOf("url"),"non-scaling-stroke"!==i._attr("vector-effect")&&(!a||a&&t._find('[fill="'+o+'"]').length<=1)&&(!u||u&&t._find('[stroke="'+c+'"]').length<=1)&&void 0===L(n,"mix-blend-mode")&&void 0===L(n,"opacity")&&(l=i[0].getAttribute("d"),r[l]?r[l].forEach((function(t,e){var n=!0;void 0===i._attrs&&(i._attrs=i.attrs()),void 0===t._attrs&&(t._attrs=t.attrs()),Object.keys(i._attrs).length===Object.keys(t._attrs).length&&(Object.keys(i._attrs).forEach((function(e){n&&i._attrs[e]!==t._attrs[e]&&(n=!1)})),n&&null===i.id()&&(r[l][e]=i,t._remove()))})):(r[l]=r[l]||[],r[l].push(i)))):n._childCount()>0&&e(s.wrap(n))}))}(t),t},Ht:function(t){var n,i={};return e.maintain_structure||(n=t._findTag("defs"),t._findTag("path")._each((function(e){var n,r,o,a,c,u,l,f,d=s.wrap(e),h=!0;u=!!(c=L(e,"fill"))&&0===c.indexOf("url"),f=!!(l=L(e,"stroke"))&&0===l.indexOf("url"),0===e._closest("defs").length&&0===e._closest("mask").length&&null===e._attr("mask")&&"non-scaling-stroke"!==e._attr("vector-effect")&&(!u||u&&t._find('[fill="'+c+'"]').length<=1)&&(!f||f&&t._find('[stroke="'+l+'"]').length<=1)&&!1===E(e)&&[null,"none",void 0].indexOf(_.mix_blend?L(e,"mix-blend-mode"):null)>-1&&(o=(n=e.el[0].getAttribute("d")).replace(/^[Mm]-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)? ?-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?/,""),a=n.replace(o,""),i[o]=i[o]||{count:0,paths:[],ds:[],xs:[],ys:[],diff_x:[],diff_y:[],start:a},a!==i[o].start&&(o.indexOf("M")>-1&&(h=!1),u&&h&&(h=!1===t._findID(s.fn.url2ID(c))._hasAttr("gradientTransform")),f&&h&&(h=!1===t._findID(s.fn.url2ID(l))._hasAttr("gradientTransform"))),h&&(i[o].count++,i[o].paths.push(d),i[o].ds.push(n),d[0]._list?r=d[0]._list:(r=s.fn.path.str2List(n),d[0]._list=r),i[o].xs.push(r[0].x),i[o].ys.push(r[0].y)))})),Object.keys(i).forEach((function(a){i[a].count>1&&(n=function(n,i){var a,c={},u=0;0===i.length&&(u+="<defs></defs>".length);u+=e.xlink?0:' xmlns:xlink="http://www.w3.org/1999/xlink"'.length,u+=('<path id="A" d="'+n.ds[0]+'"/>').length,u+=' xlink:href="A"'.length*n.count,n.xs.forEach((function(t,e){var i={x:k(n.xs[e]-n.xs[0],r),y:k(n.ys[e]-n.ys[0],r)},o=null!==n.paths[e].attr("clip-path");n.diff_x.push(i.x),n.diff_y.push(i.y),0!==i.x&&(u+=(' x="'+i.x+'"').length),0!==i.y&&(u+=(' y="'+i.y+'"').length),(!o||o&&0===i.x&&0===i.y)&&(u-=(' d="'+n.ds[e]+'"').length)})),(u-=n.count)<0&&n.count+u<=0&&(i=i.length?i:h(new s.Defs(null,t)[0]),f++,a=x(f),new s.Path(null,i.el[0]).id(a).attr("d",n.ds[0]),n.paths.forEach((function(t,e){var r,i=void 0!==t._attrs?t._attrs:t.attrs(),u=L(h(n.paths[e][0]),"clip-path"),l=u&&"none"!==u;(!l||l&&0===n.diff_x[e]&&0===n.diff_y[e])&&(r=new s.Use(null,t._parent()).id(t.id()).attr("xlink:href","#"+a),0!==n.diff_x[e]&&r.attr("x",n.diff_x[e]),0!==n.diff_y[e]&&r.attr("y",n.diff_y[e]),t._after(r),delete i.d,i=o("fill",n,e,i,c),i=o("stroke",n,e,i,c),r.attr(i),t._remove())})));if(i.length)return i}(i[a],n)||n)}))),t;function o(e,n,i,o,a){var c,u,l=L(n.paths[i]._eq(0),e);return null!==l&&0===l.indexOf("url")&&(0===i?a[c=s.fn.url2ID(l)]=!0:void 0===a[c=s.fn.url2ID(L(n.paths[i]._eq(0),e))]&&(u=t._findID(c)).length>0&&(a[c]=!0,function(t,e,n){var i;"lineargradient"===t.el[0].tagName.toLowerCase()&&!1===t._hasAttr("gradientTransform")&&f(t,"gradientUnits")&&(i=k(parseFloat(f(t,"x1")||0)-e.diff_x[n],r),t._attr("x1",i),i=k(parseFloat(f(t,"x2")||0)-e.diff_x[n],r),t._attr("x2",i),i=k(parseFloat(f(t,"y1")||0)-e.diff_y[n],r),t._attr("y1",i),i=k(parseFloat(f(t,"y2")||0)-e.diff_y[n],r),t._attr("y2",i))}(u,n,i),function(t,e,n){var r;"radialgradient"===t.el[0].tagName.toLowerCase()&&t._hasAttr("gradientTransform")&&f(t,"gradientUnits")&&(t._attr("gradientTransform","translate("+-e.diff_x[n]+" "+-e.diff_y[n]+") "+(t._attr("gradientTransform")||"")),delete t.el[0]._tran,1===(r=S(t)).type&&(t._attr("gradientTransform","matrix("+[r.a,r.b,r.c,r.d,r.e,r.f].join(",")+")"),delete t.el[0]._tran))}(u,n,i))),o;function f(e,n){var r=e._attr(n),i=e._attr("xlink:href")||e._attr("href");return null===r&&i&&(r=f(t._findID(i),n)),r}}},Vt:function(t){var n,r,i=[],o=[];return e.maintain_structure||(r=t.viewBox(),t._findTag("path")._each((function(t){void 0===n?(i.push([]),i[i.length-1].push(t),n=t):(t._prev()._is(n)||i.push([]),i[i.length-1].push(t),n=t)})),i.forEach((function(e){if(e.length>1)for(;e.length>0;)a(t,e,o)})),o.forEach((function(t){P(t,r)}))),t;function a(t,e,n){var r=e.shift(),i=r._next(),o={};i.length>0&&"path"===i.el[0].tagName&&O(r,i)&&function(t){var e=!0;(C(t,"fill")||C(t,"stroke")||C(t,"filter"))&&(e=!1);(t._hasAttr("marker-start")||t._hasAttr("marker-mid")||t._hasAttr("marker-end"))&&(e=!1);E(t)&&(e=!1);return e}(r)&&(o.path=I(r),o.path_converted=z(o.path),o.next=I(i),o.next_converted=z(o.next),!1===function(t,e,n,r){var i,o,a,c,u,l=0,f=0,d=.01,v=!1;if(t._segs=i=t._segs||s.fn.path.segmentize(n),e._segs=o=e._segs||s.fn.path.segmentize(r),i.length*o.length>1e5)return!0;for(;l<i.length;l++){for(a=i[l],f=0;f<o.length&&(c=o[f],u=s.math.intersect(a,c),h.each(u.pts,(function(t){var e;if(Math.abs(t.x-a[0].x)<d&&Math.abs(t.y-a[0].y)<d||Math.abs(t.x-a[1].x)<d&&Math.abs(t.y-a[1].y)<d||Math.abs(t.x-c[0].x)<d&&Math.abs(t.y-c[0].y)<d||Math.abs(t.x-c[1].x)<d&&Math.abs(t.y-c[1].y)<d?(e=s.math.getPointOnSegment(c,.5),s.math.isPointInPath(e.x,e.y,n)?v=!0:(e=s.math.getPointOnSegment(a,.5),s.math.isPointInPath(e.x,e.y,r)&&(v=!0))):v=!0,v)return!1})),!v);f++);if(v)break}return v}(r,i,o.path_converted,o.next_converted)&&!1===function(t){var e=!1;n(t.next_converted)&&t.path_converted.filter((function(t){return void 0!==t.x&&void 0!==t.y})).some((function(e){return s.math.isPointInPath(e.x,e.y,t.next_converted)}))&&(e=!0);!1===e&&n(t.path_converted)&&t.next_converted.filter((function(t){return void 0!==t.x&&void 0!==t.y})).some((function(e){return s.math.isPointInPath(e.x,e.y,t.path_converted)}))&&(e=!0);return e;function n(t){return"Z"===t[t.length-1].type}}(o)&&!1===s.fn.path.isInside(o.path_converted,o.next_converted)&&!1===s.fn.path.isInside(o.next_converted,o.path_converted)&&!1===function(t,e,n){if("none"===L(t,"fill")&&"none"===L(e,"fill"))return!1;if("Z"===n.path_converted[n.path_converted.length-1].type&&"Z"===n.next_converted[n.next_converted.length-1].type)return!1;if(n.path_converted.push({type:"Z"}),s.math.isPointInPath(n.next_converted[0].x,n.next_converted[0].y,n.path_converted))return!0;return n.next_converted.push({type:"Z"}),s.math.isPointInPath(n.path_converted[0].x,n.path_converted[0].y,n.next_converted)}(r,i,o)&&(!function(t,e){for(var n=0;n<t.length;n++)if(t[n]._is(e)){t.splice(n,1);break}}(e,i),N(r,o.path.concat(o.next)),i._remove(),-1===n.indexOf(r)&&n.push(r),e.unshift(r),r._segs=void 0))}},Xt:function(t){var e={};return t._findTag("filter")._each((function(t){var n;n=h.serialize(t.el[0]).replace(/ id=".*?"/,""),e[n]=e[n]||[],e[n].push(t)})),Object.keys(e).forEach((function(n){var r;if(e[n].length>1)for(r=1;r<e[n].length;r++)t._find('[filter="url(#'+e[n][r]._attr("id")+')"]')._attr("filter","url(#"+e[n][0]._attr("id")+")"),e[n][r]._remove()})),t},qt:function(t){var e,n=function(t){var e,n=h.serialize(t[0]),r=["alignment-baseline","baseline-shift","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","display","dominant-baseline","enable-background","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","unicode-bidi","visibility","word-spacing","writing-mode"],i={};(e=n.match(/ [\w:-]*=".*?"/g))&&e.forEach((function(t){var e,n="";e=(t=t.trim()).split("="),r.indexOf(e[0])>-1&&(e[1]=e[1].slice(1,e[1].length-1),"font-size"!==e[0]&&"word-spacing"!==e[0]||!h.isNumeric(e[1])?"font-weight"===e[0]&&"normal"===e[1]&&(t=t.replace("normal","400")):n="px",'fill="freeze"'!==t&&'fill="remove"'!==t&&(i[t]=i[t]||{key:t,attr:e[0],count:0,class:"{"+e[0]+":"+t.replace(e[0]+'="',"").replace('"',"")+n+"}"},i[t].count++))}));return Object.keys(i).map((function(t){var e=i[t],n=e;return(1===e.count||e.key.length*e.count<=e.class.length+'class="A"'.length*e.count)&&(n=null),null===n&&delete i[t],n})).filter((function(t){return null!==t})).sort((function(t,e){return e.count-t.count}))}(t),r={};return e=n.reduce((function(t,e){return t+(e.key.length-'class="A"'.length)*e.count-3-e.class.length}),0),(e-="<style><![CDATA[]]></style>".length)>0&&(s.last_class=s.last_class||0,s.last_class++,n.forEach((function(e){var n=x(s.last_class);t._find("["+e.key+"]")._removeAttr(e.attr)._addClass(n),r["."+n]=e.class,s.last_class++})),!1===h.isEmpty(r)&&t.insertCDATA(r)),t},Wt:function(t){var e=s.fn.readStyles(t._text());return function t(n){n._children("g")._each((function(n){var r,i={};t(n),r=n._children(),n._exists("[class]")&&r.length===n._children("[class]").length&&r._each((function(t){var e=t._attr("class");e&&void 0===L(t,"mix-blend-mode")&&e.split(" ").forEach((function(t){i[t]=i[t]||0,i[t]++}))})),Object.keys(i).forEach((function(t){var o=!0;e.forEach((function(e){e.selectorText==="."+t&&("opacity"===e.style[0]&&(o=!1),"clip-path"===e.style[0]&&(o=!1),"filter"===e.style[0]&&(o=!1))})),o&&i[t]===r.length&&(r._each((function(e){e._attr("class")===t?e._removeAttr("class"):e._removeClass(t)})),n._addClass(t))}))}))}(t._eq(0)),t},Yt:function(t){var e=t.viewBox();return t._findTag("text, tspan")._each((function(t){t._attr("x",n(t._attr("x"),e.width)),t._attr("y",n(t._attr("y"),e.height))})),t;function n(t,e){return null!==t&&"string"==typeof t&&"%"!==t[t.length-1]&&(t=t.match(/-?(?:\d+\.?\d*|\d*\.+\d+)(?:e-?\d+)?(em|px|pt|cm|mm|in|%|)/g).map((function(t){var n=parseFloat(t),i=t.replace(n+"","");return D(k(n,r),e)+i})).join(" ")),t}},Zt:function(t){return t._findTag("text")._each((function(t){var n,i,o=t._children("tspan"),a=t._text();t._children().length===o.length&&o.length>0&&0===o._filter((function(t){var e=t._attr("x")||"",n=t._attr("y")||"";return n+="",(e+="").match(/[ ,]/g)||n.match(/[ ,]/g)})).length&&a===o._text()&&t._children("[x]").length===o.length&&t._children("[y]").length===o.length&&((n=S(t))&&n.type===s.CONST.TRANS_TRANSLATE&&function(t){var e=!0;return t._each((function(t){return t._find("tspan").length>0||!1===t._hasAttr("x")||!1===t._hasAttr("y")?(e=!1,!1):void 0})),e}(o)&&(o._each((function(t){!function(t,n,i){var o=e(t._attr("x"),i.x,r),a=e(t._attr("y"),i.y,r);o=isNaN(o)?null:o,a=isNaN(a)?null:a,t._attr("x",o),t._attr("y",a)}(t,0,n)})),t._removeAttr("transform"),delete t.el[0]._tran),(i=t._prev())&&i.length>0&&"text"===i.el[0].tagName.toLowerCase()&&O(t,i)&&(i._append(t._children()),t._remove())),0===t._childCount()&&(n=S(t))&&n.type===s.CONST.TRANS_TRANSLATE&&t._hasAttr("x")&&t._hasAttr("y")&&(t._attr("x",e(t._attr("x"),n.e,r)),t._attr("y",e(t._attr("y"),n.f,r)),t._removeAttr("transform"),delete t.el[0]._tran)})),t;function e(t,e,n){return(t+"").trim().split(/[, ]+/).map((function(t){return k(parseFloat(t)+e,n)})).join(" ")}},Kt:function(t){return t._findTag("tspan")._each((function(t){var e,n=t._children(),r=t._children("tspan");r.length>0&&n.length===r.length&&!1===r.el.some((function(t){return t.attributes.length>0}))&&((e=s.wrap(t)).text(e.text()),r._remove())})),t},Qt:function(t){return e("fill"),e("stroke"),e("stroke-width"),t;function e(e){t._find("g["+e+"]")._each((function(t){t._children("["+e+"]").length===t._children().length&&t._removeAttr(e)}))}},Jt:function(t){return e.maintain_structure||function t(e){function n(t,e){t._attr("class")===e?t._removeAttr("class"):t._removeClass(e)}e._children("g")._each((function(e){t(e),1===e.el[0].getAttributeNames().length&&e._hasAttr("class")&&!1===E(e)&&function(t){for(var e,r=t._next(),i=t._attr("class");r.length>0&&r._hasClass(i)&&"multiply"!==L(r,"mix-blend-mode");)if("g"!==r.el[0].tagName.toLowerCase())n(r,i),t._append(r),r=t._next();else{if(1!==r.el[0].getAttributeNames().length||!r._hasAttr("class"))break;r._attr("class")===i?(e=r._children(),L(r,"opacity")||e._each((function(t){n(t,i)})),t._append(e),r._remove()):("use"!==r.el[0].tagName&&r._removeClass(i),t._append(r)),r=t._next()}}(e)}))}(t._eq(0)),t},te:function(t){var e={};return t._findTag("linearGradient, radialGradient")._each((function(t){var n;n=h.serialize(t.el[0]).replace(/ id=".*?"/,""),e[n]=e[n]||[],e[n].push(t._attr("id"))})),Object.keys(e).forEach((function(r){var i;if(e[r].length>1)for(i=1;i<e[r].length;i++)t._find('[fill="url(#'+e[r][i]+')"]')._each((function(t){n(t,"fill",e[r][0],e[r][i])})),t._find('[stroke="url(#'+e[r][i]+')"]')._each((function(t){n(t,"stroke",e[r][0],e[r][i])}))})),t;function n(e,n,r,i){e._attr(n,"url(#"+r+")"),t._find("#"+i)._remove()}},ne:function(t){var e={},n="";return t._findTag("style")._each((function(t){n+=t._text()})),t._findTag("linearGradient, radialGradient")._each((function(t){var n=t._attr("xlink:href");null!==n&&(e[n]=e[n]||[],e[n].push(t))})),Object.keys(e).forEach((function(r){var i,o={},a=t._findID(r);a.length>0&&(e[r].forEach((function(t){!function(t,e,n){var r=["x1","y1","x2","y2","fy","fx","r","cx","cy","gradientUnits","spreadMethod","gradientTransform"],i=B(e);Object.keys(i).forEach((function(o){r.indexOf(o)>-1&&(i[o]==t._attr(o)?e._removeAttr(o):(n[o]=n[o]||0,n[o]++))}))}(a,t,o)})),Object.keys(o).forEach((function(n){o[n]===e[r].length&&!1===t._exists('[fill="url(#'+a.el[0].id+')"], [stroke="url(#'+a.el[0].id+')"]')&&-1===t._findTag("style")._text().indexOf("url(#"+a.el[0].id+")")&&a._removeAttr(n)})),o.gradientUnits&&o.gradientUnits===e[r].length&&(a._attr("gradientUnits",e[r][0]._attr("gradientUnits")),e[r].forEach((function(t){t._removeAttr("gradientUnits")})))),1===e[r].length&&!1===t._exists('[fill="url('+r+')"], [stroke="url('+r+')"]')&&-1===n.indexOf("url("+r+")")&&(i=e[r][0],a.length>0?(0===i._children().length&&i._append(a._children()),i._removeAttr("xlink:href"),o=B(a),Object.keys(o).forEach((function(t){null===i._attr(t)&&i._attr(t,o[t])})),a._remove()):i._removeAttr("xlink:href"))})),t},re:function(t){var e,n,r=t._findTag("defs"),i=0;return r.length>0&&(i-=(n=r._find('[gradientUnits="userSpaceOnUse"]')._filter((function(t){return null===t._attr("xlink:href")}))).length*(' gradientUnits="userSpaceOnUse"'.length-' xlink:href="A"'.length),(i+='<linearGradient gradientUnits="userSpaceOnUse" id="A"></linearGradient>'.length)<0&&n.length>0&&(n._removeAttr("gradientUnits"),e=x(++f),new s.Linear(null,t).id(e).attr("gradientUnits","userSpaceOnUse"),n._attr("xlink:href","#"+e))),t},ie:function(t){var e;return 1===t[0].childNodes.length&&"g"===(e=s.wrap(t[0].childNodes[0])).type()&&!1===e._hasAttr("transform")&&0===e._children("animateTransform").length&&(t._append(e._children()),t.attr(e.attrs()),e._remove()),m.reduceGroups(t)},oe:function(t){return t._findTag("text")._each((function(t){0===t._children().length&&""===t._text()&&t._remove()})),t},ae:function(t){return 0===t._find(i.join(",")).length&&["font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","text-anchor","text-decoration","text-rendering"].forEach((function(e){t._removeAttr(e)})),t},se:function(t){return t._findTag("pattern")._each((function(t){null===t._attr("id")&&t._remove()})),t},ce:function(t){var e,n=[];return t._findTag("defs")._each((function(t){var r=t._next();void 0===e&&(e=t),r.length>0&&"defs"===r.el[0].tagName?(e._append(r._children()),n.push(r)):e=void 0})),n.forEach((function(t){t._remove()})),t},ue:function(t){return t._findTag("defs")._each((function(e){var n={};e._children("path")._each((function(e){var r,i=s.wrap(e),o=i.attrs(),a=i.type()+JSON.stringify(o);void 0===n[a]?n[a]=i.id():(r=i.id(),t._find('[xlink\\:href="#'+r+'"], [href="#'+r+'"]')._each((function(t){null===t._attr("href")?t._attr("xlink:href","#"+n[a]):t._attr("href","#"+n[a])})),i._remove())}))})),t},compress:function(t,n){var r,i,a=new s.Svg(h.parseSVG(t).el[0]).insertNS(),c={vt:1,gt:1};if(i=s.doc,s.doc=a,_.animate=o.some((function(e){return t.indexOf("<"+e)>-1})),_.mask=t.indexOf("<mask")>-1,_.clip=t.indexOf("clipPath")>-1,_.filter=t.indexOf("filter")>-1,_.mix_blend=t.indexOf("mix-blend-mode=")>-1,_.isolation=t.indexOf("isolation=")>-1,!1!==e.compress)for(r in m)n?c[r]&&(a=u(r,a)):"compress"!==r&&(a=u(r,a));return s.doc=i,f=0,s.last_class=0,v=0,d={},a;function u(t,e){return e=m[t](e)}}};function F(t){var e,n={},r={};return t.indexOf("translate")>-1&&(r=s.fn.getTranslate(t),t=(t=t.replace(/(translate|translateX|translateY)\((.*?)\)/,"translate("+r.x+","+r.y+")")).replace(/(translateX|translateY)\((.*?)\)/g,"").trim()),t.indexOf("scale")>-1&&(t.match(/(scaleY|scaleX)(.*?)\)/g).forEach((function(t){0===t.indexOf("scaleX")&&(n.x=t.replace(/scaleX\(|\)/g,"")),0===t.indexOf("scaleY")&&(n.y=t.replace(/scaleY\(|\)/g,""))})),t=t.replace(/(scaleY|scaleX)\((.*?)\)/g,"scale("+(n.x||1)+","+(n.y||1)+")").trim()),t.indexOf("rotate")>-1&&((e=t.replace(/(rotate)\(/,"").replace(/\)/,"")).indexOf("deg")>-1?e=e.replace("deg",""):e.indexOf("grad")>-1?e=180*(e=e.replace("grad",""))/200:e.indexOf("rad")>-1?(e=e.replace("rad",""),e=s.math.deg(e)):(e=e.replace("turn",""),e*=360),t=t.replace(/(rotate)\((.*?)\)/,"rotate("+e+")")),t}function E(t){var e;return void 0!==t.el[0]._anim?e=t.el[0]._anim:(!1===(e=_.animate&&t._exists(o.join(",")))&&(e=void 0!==L(t,"animation")),t.el[0]._anim=e),e}function A(t,e){var n=t._children()._eq(0),i=[null,void 0,"none"];if(!1===n._hasAttr("id")&&"svg"!==n.el[0].tagName&&!1===E(t)&&i.indexOf(e.mask?L(t,"mask"):null)>-1&&i.indexOf(e.clip?L(t,"clip-path"):null)>-1&&i.indexOf(e.filter?L(t,"filter"):null)>-1&&(!1===e.mix_blend||"multiply"!==L(n,"mix-blend-mode"))&&i.indexOf(e.isolation?L(t,"isolation"):null)>-1){if(!1===n._hasAttr("opacity")&&1!==L(n,"opacity"))return;R(t,n),n._hasAttr("opacity")&&n._attr("opacity",$(k(n._attr("opacity"),r))),n.el[0]._disable_cache=!0,t._before(n),delete n.el[0]._disable_cache,t._remove()}}function S(t){var e,n,i,o=t.el[0].tagName.toLowerCase(),a="lineargradient"===o||"radialgradient"===o?"gradientTransform":"transform",c={matrix:s.CONST.TRANS_MATRIX,translate:s.CONST.TRANS_TRANSLATE,scale:s.CONST.TRANS_SCALE,rotate:s.CONST.TRANS_ROTATE,skewX:s.CONST.TRANS_SKEWX,skewY:s.CONST.TRANS_SKEWY},u={a:1,b:0,c:0,d:1,e:0,f:0};if(void 0!==t.el[0]._tran)return t.el[0]._tran;if(!1===t._hasAttr(a))return t.el[0]._tran=null,null;for(e=t.el[0].getAttribute(a),i=/ *(translate|rotate|scale|skewX|skewY|matrix) *\( *(-?(?:\d+\.?\d*|\d*\.+\d+)(?:[eE][-+]?\d+)?)[ ,]*(-?(?:\d+\.?\d*|\d*\.+\d+)(?:[eE][-+]?\d+)?)?[ ,]*(-?(?:\d+\.?\d*|\d*\.+\d+)(?:[eE][-+]?\d+)?)?[ ,]*(-?(?:\d+\.?\d*|\d*\.+\d+)(?:[eE][-+]?\d+)?)?[ ,]*(-?(?:\d+\.?\d*|\d*\.+\d+)(?:[eE][-+]?\d+)?)?[ ,]*(-?(?:\d+\.?\d*|\d*\.+\d+)(?:[eE][-+]?\d+)?)?/g;n=i.exec(e);)switch(void 0===u.type?u.type=c[n[1]]:u.type!==c[n[1]]&&(u.type=s.CONST.TRANS_MATRIX),n[1]){case"translate":l(u,n);break;case"rotate":f(u,n);break;case"scale":d(u,n);break;case"skewX":h(u,n);break;case"skewY":v(u,n);break;case"matrix":p(u,n)}return t.el[0]._tran=u,u;function l(t,e){(t=s.math.matrix.multiply(t,{a:1,b:0,c:0,d:1,e:parseFloat(e[2]||"0"),f:parseFloat(e[3]||"0")})).type===s.CONST.TRANS_TRANSLATE&&(t.x=t.e,t.y=t.f)}function f(t,e){var n=parseFloat(e[2]),r=s.math.rad(n),i=Math.cos(r),o=Math.sin(r),a=parseFloat(e[3]||"0"),c=parseFloat(e[4]||"0"),u=0!==a||0!==c;u&&(t=s.math.matrix.multiply(t,{a:1,b:0,c:0,d:1,e:a,f:c})),t=s.math.matrix.multiply(t,{a:i,b:o,c:-o,d:i,e:0,f:0}),u&&(t=s.math.matrix.multiply(t,{a:1,b:0,c:0,d:1,e:-a,f:-c})),t.type===s.CONST.TRANS_ROTATE&&(t.angle=n,t.x=a,t.y=c)}function d(t,e){var n=parseFloat(e[2]||"1"),r=parseFloat(e[3]||e[2]||"1");(t=s.math.matrix.multiply(t,{a:n,b:0,c:0,d:r,e:0,f:0})).scale=!0,t.type===s.CONST.TRANS_SCALE&&(t.x=t.a,t.y=t.d)}function h(t,e){var n=parseFloat(e[2]||"0");(t=s.math.matrix.multiply(t,{a:1,b:0,c:Math.tan(s.math.rad(n)),d:1,e:0,f:0})).skew=!0,t.type===s.CONST.TRANS_SKEWX&&(t.x=n)}function v(t,e){var n=parseFloat(e[2]||"0");(t=s.math.matrix.multiply(t,{a:1,b:Math.tan(s.math.rad(n)),c:0,d:1,e:0,f:0})).skew=!0,t.type===s.CONST.TRANS_SKEWY&&(t.y=n)}function p(t,e){!function(t){1===t.a&&0===t.b&&0===t.c&&1===t.d?(t.type=s.CONST.TRANS_TRANSLATE,t.x=t.e,t.y=t.f):0===t.e&&0===t.f&&0===k(t.a,r)&&-1===k(t.b,r)&&1===k(t.c,r)&&0===k(t.d,r)?(t.type=s.CONST.TRANS_ROTATE,t.angle=s.math.deg(Math.asin(t.b)),t.x=0,t.y=0):0===t.e&&0===t.f&&0===t.b&&0===t.c&&(t.type=s.CONST.TRANS_SCALE,t.x=t.a,t.y=t.d)}(t=s.math.matrix.multiply(t,{a:k(parseFloat(e[2]),4),b:parseFloat(e[3]),c:parseFloat(e[4]),d:k(parseFloat(e[5]),4),e:parseFloat(e[6]),f:parseFloat(e[7])}))}}function T(t,e){var n=[],i=t.el[0].tagName.toLowerCase();"lineargradient"!==i&&"radialgradient"!==i&&(e.forEach((function(t){var e;switch(t.type){case s.CONST.TRANS_SKEWY:0!==t.y&&(e="skewY(",e+=$(t.y));break;case s.CONST.TRANS_SKEWX:0!==t.x&&(e="skewX(",e+=$(t.x));break;case s.CONST.TRANS_ROTATE:t.x=k(t.x,r),t.y=k(t.y,r),t.angle=k(s.math.normalizeAngle(t.angle),r),0!==t.angle&&(e="rotate(",e+=t.angle,0===t.x&&0===t.y||(e+=" "+$(t.x||0)+" "+$(t.y||0)));break;case s.CONST.TRANS_SCALE:1===t.x&&1===t.y||(e="scale(",e+=$(t.x),t.x!==t.y&&(e+=" "+$(t.y)));break;case s.CONST.TRANS_MATRIX:e="matrix(",e+=$(k(t.a,2*r)),e+=" "+$(k(t.b,2*r)),e+=" "+$(k(t.c,2*r)),e+=" "+$(k(t.d,2*r)),e+=" "+$(k(t.e,2*r)),e+=" "+$(k(t.f,2*r));break;case s.CONST.TRANS_TRANSLATE:"lineargradient"!==i&&"radialgradient"!==i&&(t.x=k(t.x,r),t.y=k(t.y,r)),0===t.x&&0===t.y||(e="translate(",e+=$(t.x),0!==t.y&&(e+=" "+$(t.y)))}void 0!==e&&(e+=")",n.push(e))})),n.length>0?t.el[0].setAttribute("transform",n.join(" ")):t._removeAttr("transform"),delete t.el[0]._tran)}function L(t,e){var n,r;if(t.el[0]._CSS&&void 0!==t.el[0]._CSS[e])return t.el[0]._CSS[e];if(t.el[0]._css&&void 0!==t.el[0]._css[e])return t.el[0]._css[e];if("currentColor"===(n=t._attr(e))||"currentcolor"===n?n=t._attr("color")||"#000":null!==n||(n=Object.keys(b).indexOf(e)>-1?b[e][t.el[0].tagName.toLowerCase()]||"inline":(r=t._parent()).el[0]&&1===r.el[0].nodeType?L(r,e):["x","y","cx","cy","width","height","r","rx","ry"].indexOf(e)>-1?w[e][t.el[0].tagName.toLowerCase()]:w[e]),g.indexOf(e)>-1)n=G(n);else switch(e){case"font-size":n&&!1===h.isNumeric(n)&&-1===n.indexOf("%")&&(n=new u.Length(n).px()||n);break;case"stroke-width":!1===h.isNumeric(n)&&(n=new u.Length(n).px());break;case"font-weight":"normal"===n&&(n=400);break;case"font-stretch":"normal"===n&&(n="100%")}return t.el[0]._css=t.el[0]._css||{},t.el[0]._css[e]=n,n}function C(t,e){var n=L(t,e);return null!=n&&0===n.indexOf("url(")}function O(t,e){var n=!0,r={},i={src:t.el[0].getAttributeNames(),tgt:e.el[0].getAttributeNames()},o=0;if(i.src.length!==i.tgt.length)n=!1;else for(;o<i.src.length&&("d"===i.src[o]||(r.src=t.el[0].getAttribute(i.src[o]),r.tgt=e.el[0].getAttribute(i.src[o]),h.isNumeric(r.src)&&h.isNumeric(r.tgt)?Math.abs(parseFloat(r.tgt)-parseFloat(r.src))>.001&&(n=!1):r.tgt!==r.src&&(n=!1),!1!==n));o++);return n}function N(t,e){t.el[0].setAttribute("d",s.fn.path.list2Str(e))}function I(t){var e,n,r=t.el[0];return void 0!==r._d?n=r._d:t._hasAttr("d")?(e=r.getAttribute("d"),n=s.fn.path.str2List(e,null,null,!1),0===e.indexOf("M 1e-13 1e-13")&&(n[0].x=1e-13,n[0].y=1e-13)):n=null,n}function B(t){var e={};return t.el[0].getAttributeNames().forEach((function(n){e[n]=t.el[0].getAttribute(n)})),e}function R(t,e){var n,r=t.el[0],i=e.el[0];r.getAttributeNames().forEach((function(t){switch(t){case"class":e._addClass(r.getAttribute(t));break;case"transform":e._hasAttr("transform")?(i.setAttribute("transform",r.getAttribute(t)+" "+i.getAttribute("transform")),delete i._tran):(i.setAttribute("transform",r.getAttribute(t)),delete i._tran),(n=S(e))&&T(e,[n]);break;case"opacity":e._hasAttr(t)?i.setAttribute(t,parseFloat(r.getAttribute(t))*parseFloat(i.getAttribute(t))):i.setAttribute(t,r.getAttribute(t));break;default:!1===e._hasAttr(t)&&i.setAttribute(t,r.getAttribute(t))}}))}function P(t,e){var n,i,o=I(t);function a(t,e,n){return t.d="",e.d="","l"===e.seg.type&&(t.seg.y===t.last.y||0===e.seg.y?(e.seg.type="h",t.seg.type="H"):t.seg.x!==t.last.x&&0!==e.seg.x||(e.seg.type="v",t.seg.type="V")),t.last.command=t.seg.type!==t.last.type,t.last.command&&(t.d+=t.seg.type),e.last.command=e.seg.type!==e.last.type,e.last.command&&(e.d+=e.seg.type),{m:["x","y"],l:["x","y"],h:["x"],v:["y"],s:["x2","y2","x","y"],c:["x1","y1","x2","y2","x","y"],q:["x1","y1","x","y"],a:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],z:[]}[e.seg.type].forEach((function(n,r){var i,o=t.seg[n];null!==o&&(i=$(o),t.num_sep=0===r&&t.last.command||"-"===i[0]||t.last.decimal&&"."===i[0]?"":" ",t.d+=t.num_sep+i,t.last.decimal=i.indexOf(".")>-1,i=$(e.seg[n]),e.num_sep=0===r&&e.last.command||"-"===i[0]||e.last.decimal&&"."===i[0]?"":" ",e.d+=e.num_sep+i,e.last.decimal=i.indexOf(".")>-1)})),t.last.type=t.d.length<e.d.length?t.seg.type:e.seg.type,e.last.type=t.last.type,t.last.x=t.seg.x,t.last.y=t.seg.y,e.last.x=e.seg.x,e.last.y=e.seg.y,n||t.d.length<e.d.length?t.d:e.d}function c(t){var e,n=[],r={type:"m",x:0,y:0};return t.forEach((function(t){switch(t.type){case"M":case"m":n.push(f(t,r)),e=t;break;case"L":case"S":case"C":case"Q":case"A":case"H":case"V":n.push(f(t,r));break;case"l":n.push({type:"l",x:t.x,y:t.y});break;case"s":n.push({type:"s",x2:t.x2,y2:t.y2,x:t.x,y:t.y});break;case"c":n.push({type:"c",x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,x:t.x,y:t.y});break;case"q":n.push({type:"q",x1:t.x1,y1:t.y1,x:t.x,y:t.y});break;case"a":n.push({type:"a",rx:t.rx,ry:t.ry,xAxisRotation:t.xAxisRotation,largeArcFlag:t.largeArcFlag,sweepFlag:t.sweepFlag,x:t.x,y:t.y});break;case"z":case"Z":n.push({type:"z"})}r="z"===t.type||"Z"===t.type?e:t})),n}function u(t){return Object.keys(t).forEach((function(n){var r;switch(n){case"x":case"x1":case"x2":r=e.width;break;case"y":case"y1":case"y2":r=e.height}"number"==typeof t[n]&&(t[n]=D(t[n],r))})),t}function l(t){var e,n,i,o,a,c,u,l=[],f=.001/Math.pow(10,r>=3?r-3:0),d=.05,h=.02/Math.pow(10,r>=3?r-3:0);for(u=0,e=void 0;u<t.length;u++){if(n=t[u],i=t[u+1],"C"===n.type){if(Math.abs(e.x-n.x)<f&&Math.abs(e.y-n.y)<f&&Math.abs(e.x-n.x1)<f&&Math.abs(e.y-n.y1)<f&&Math.abs(e.x-n.x2)<f&&Math.abs(e.y-n.y2)<f)continue;if(s.math.length(e.x,e.y,n.x,n.y)<h&&s.math.length(e.x,e.y,n.x1,n.y1)<h&&s.math.length(e.x,e.y,n.x2,n.y2)<h)continue;if(o=k(Math.atan2(n.y-e.y,n.x-e.x),r),a=k(Math.atan2(n.y2-e.y,n.x2-e.x),r),c=k(Math.atan2(n.y1-e.y,n.x1-e.x),r),s.math.length(e.x,e.y,n.x,n.y)>10&&(d=.015),(Math.abs(o-a)<d||n.y2-e.y==0&&n.x2-e.x==0)&&(Math.abs(o-c)<d||n.y1-e.y==0&&n.x1-e.x==0)){e=v({type:"L",x:n.x,y:n.y});continue}}e=v(n)}for(t=l,l=[],u=0,e=void 0;u<t.length;u++)if(n=t[u],i=t[u+1],!n.skip){if("L"===n.type&&i&&"L"===i.type&&(o=k(Math.atan2(n.y-e.y,n.x-e.x),r))===(a=k(Math.atan2(i.y-e.y,i.x-e.x),r))&&void 0===t[u+2]){if(s.math.length(i.x,i.y,e.x,e.y)>s.math.length(n.x,n.y,e.x,e.y))continue;i.skip=!0}e=v(n)}for(t=l,l=[],u=0,e=void 0;u<t.length;u++)n=t[u],e&&"M"===n.type&&"M"===e.type?(e.x=n.x,e.y=n.y):e=v(n);return l;function v(t){return l.push(t),t}}function f(t,e){var n={type:t.type.toLowerCase()};return void 0!==t.x&&(n.x=t.x-e.x,n.y=t.y-e.y),void 0!==t.x1&&(n.x1=t.x1-e.x,n.y1=t.y1-e.y),void 0!==t.x2&&(n.x2=t.x2-e.x,n.y2=t.y2-e.y),void 0!==t.rx&&(n.rx=t.rx,n.ry=t.ry,n.xAxisRotation=t.xAxisRotation,n.largeArcFlag=t.largeArcFlag,n.sweepFlag=t.sweepFlag),n}null!==o&&(t._hasAttr("marker-mid")||(t._hasAttr("transform")&&(o=z(o)),n=(C(t,"fill")||C(t,"stroke"))&&o[0].x===s.CONST.MINISCULE&&o[0].y===s.CONST.MINISCULE,o=function(t){var e,n,i;return t.forEach((function(o,a){if(void 0===e)e=o;else{if("C"===o.type&&function(t,e){var n,r=s.math.intersect([{type:"M",x:e.x,y:e.y},{type:"L",x:t.x2,y:t.y2}],[{type:"M",x:t.x1,y:t.y1},{type:"L",x:t.x,y:t.y}]),i=!1;r.pts.length>0&&(n=r.pts[0],i=t.x2<n.x==n.x<e.x&&t.y2<n.y==n.y<e.y&&t.x<n.x==n.x<t.x1&&t.y<n.y==n.y<t.y1);return i}(o,e)&&(n=function(t,e){var n,i,o,a,c=s.math.getPointOnSegment([e,t],.5),u=s.math.getPointOnSegment([{type:"M",x:e.x,y:e.y},{type:"L",x:c.x,y:c.y}],.5),l=s.math.getPointOnSegment([{type:"M",x:t.x,y:t.y},{type:"L",x:c.x,y:c.y}],.5),f=2.5,d=.5,h=1/Math.pow(10,r),v=function(t,e,n,r){var i,o=t.x-r.x,a=t.y-r.y,s=e.x-r.x,c=e.y-r.y,u=n.x-r.x,l=n.y-r.y,f=o,d=a,h=-o*o-a*a,v=s-u,p=c-l,g=-s*s-c*c+s*u+c*l,m=f*p-v*d;if(!m)return;if(i={x:r.x+(d*g-p*h)/m,y:r.y+(f*g-v*h)/-m},!isNaN(i.x)&&!isNaN(i.y)&&isFinite(i.x)&&isFinite(i.y))return i}(u,l,c,e);v&&(n=k(s.math.length(e.x,e.y,v.x,v.y),0===r?0:r-1),i=Math.min(f*h,d*n/100),o=s.math.getPointOnSegment([e,t],.25),Math.abs(s.math.length(o.x,o.y,v.x,v.y)-n)<=i&&(o=s.math.getPointOnSegment([e,t],.75),Math.abs(s.math.length(o.x,o.y,v.x,v.y)-n)<=i&&(a={cen:v,rad:n})));return a}(o,e),n&&n.rad<1e4))return i={type:"A",rx:n.rad,ry:n.rad,xAxisRotation:0,largeArcFlag:0,sweepFlag:(o.y-e.y)*(o.x1-e.x)-(o.x-e.x)*(o.y1-e.y)>0?1:0,x:o.x,y:o.y,cx:n.cen.x,cy:n.cen.y},t[a]=i,e=i,!1;e=o}})),t}(o=l(o)),o=function(t){for(var e,n,r,i,o=0,a=[],c=.001;o<t.length;o++)"A"===(n=t[o]).type&&Math.abs(n.rx-n.ry)<c&&(i=t[o+1])&&"A"===i.type&&n.sweepFlag===i.sweepFlag&&n.xAxisRotation===i.xAxisRotation&&Math.abs(i.rx-i.ry)<c&&Math.abs(n.rx-i.rx)<c&&Math.abs(n.ry-i.ry)<c&&!(Math.abs(i.x-e.x)<.025&&Math.abs(i.y-e.y)<.025)&&(d(e,n,i),f(n,i)&&u(e,n,i)&&o++),e=n,a.push(n);return a;function u(t,e,n){var r,i,o=s.math.mergeBoxes([l(t,e),l(e,n)]),a=h.extend({},e),c=!1;return a.x=n.x,a.y=n.y,r=l(t,a),a.largeArcFlag=0===a.largeArcFlag?1:0,i=function(t,e,n,r){var i=s(t,e),o=s(t,n),a={};return a.flag=i.sum<o.sum?r:0===r?1:0,a.tolerance=function(t,e){var n=1;if(100*t.w/e.width>n)return!1;if(100*t.h/e.height>n)return!1;if(100*t.x/e.x>n)return!1;if(100*t.y/e.y>n)return!1;return!0}(i.sum<o.sum?i:o,t),a;function s(t,e){var n={};return n.w=Math.abs(t.width-e.width),n.h=Math.abs(t.height-e.height),n.x=Math.abs(t.x-e.x),n.y=Math.abs(t.y-e.y),n.sum=n.w+n.h+n.x+n.y,n}}(o,r,l(t,a),0===a.largeArcFlag?1:0),i.tolerance&&(e.x=n.x,e.y=n.y,e.largeArcFlag=i.flag,c=!0),c}function l(t,e){return s.math.getPathBox([{type:"M",x:t.x,y:t.y}].concat(s.math.arc2Cubic(t,e)))}function f(t,e){return Math.abs(100*(t.cx-e.cx)/t.cx)<.1&&Math.abs(100*(t.cy-e.cy)/t.cy)<.1}function d(t,e,n){void 0===e.cx&&(r=s.math.arcCenter(t,e),e.cx=r.x,e.cy=r.y),void 0===n.cx&&(r=s.math.arcCenter(e,n),n.cx=r.x,n.cy=r.y)}}(o),1!==(o=l(o=function(t){return t.forEach((function(e,n){var r=t[n-1];"C"===e.type&&("C"===r.type||"S"===r.type?Math.abs(r.x-r.x2-(e.x1-r.x))<.005&&Math.abs(r.y-r.y2-(e.y1-r.y))<.005&&(t[n]={type:"S",x2:e.x2,y2:e.y2,x:e.x,y:e.y}):e.x1===r.x&&e.y1===r.y&&(t[n]={type:"S",x2:e.x2,y2:e.y2,x:e.x,y:e.y}))})),t}(o))).length||"M"!==o[0].type&&"M"!==o[0].type?-1===L(t,"stroke").indexOf("url(")&&(i=function(t,e){for(var n={list:t,last:{}},i={list:c(t),last:{}},o="",s=0;s<t.length;s++)n.seg=n.list[s],i.seg=i.list[s],e||(n.seg=k(n.seg,r),i.seg=k(i.seg,r)),-1===["a","A"].indexOf(n.seg.type)&&(n.seg=u(n.seg),i.seg=u(i.seg)),o+=a(n,i,0===s),"H"!==n.seg.type&&"V"!==n.seg.type||(n.seg.type="L");return o}(o,n),i.length<t.el[0].getAttribute("d").length&&(t._attr("d",i),void 0!==t.el[0]._d&&delete t.el[0]._d)):t._remove()))}function D(t,e){var n,i,o,a,c=t+"",u="",l=1/Math.pow(10,r);return n=c.indexOf("."),a=c.slice(-1),n>-1&&("1"===a||"9"===a)&&((u=1/Math.pow(10,c.length-n-1))<l||1===r)&&(u="1"===a?0-u:u,t<0&&(u=0-u),i=s.math.round(t+u,c.length-n-2),o=Math.abs(100*(t-i)/e),0!==i&&o<.2&&(t=i)),t}function j(t,e,n){var i,o,a,c,l=!0;return void 0!==e.el[0]._can_transform?e.el[0]._can_transform:(e._hasAttr("clip-path")&&(l=!1),l&&_.mask&&e._closest("mask").length>0&&(l=!1),l&&(o=L(e,"fill"),a=L(e,"stroke"),c=_.mask?L(e,"mask"):null,(i=e.el[0].getAttribute("d"))&&i.indexOf("M 1e-13 1e-13")>-1&&(o&&0===o.indexOf("url(")||a&&0===a.indexOf("url("))&&(l=!1)),l&&(l=f(o,n)),l&&(l=f(a,n)),l&&c&&(l=f(c,n)),l&&(l=function(t,e,n){var i,o=!0,a=[{type:"M",x:0,y:0},{type:"L",x:10,y:0},{type:"L",x:10,y:10},{type:"L",x:0,y:10}];e&&1===e.type&&k(e.b,r)+k(e.c,r)===0&&k(e.a,r)-k(e.d,r)==0||e&&2===e.type||"none"!==n&&e&&0!==new u.Length(L(t,"stroke-width")||1).px()&&((i=s.math.matrix.list(a,e))[0].y===i[1].y&&i[1].x===i[2].x&&i[2].y===i[3].y&&i[3].x===i[0].x||(o=!1));return o}(e,n,a)),l&&_.filter&&(l="none"===L(e,"filter")),e.el[0]._can_transform=l,l);function f(e,n){var r,i,o,a=!0;return e&&0===e.indexOf("url(")&&(r=e.replace(/"/g,""),(o=t._findID(s.fn.url2ID(r))).length>0&&("lineargradient"!==(i=o.el[0].tagName.toLowerCase())&&"radialgradient"!==i&&"pattern"!==i&&"mask"!==i||(a=!1,function e(n){var r,i;if("userSpaceOnUse"===n._attr("gradientUnits")||"userSpaceOnUse"===n._attr("patternUnits")||"userSpaceOnUse"===n._attr("maskUnits"))return!1;return n._attr("href")?!((r=t._findID(s.fn.url2ID(n._attr("href")))).length>0)||("lineargradient"!==(i=r.el[0].tagName.toLowerCase())&&"radialgradient"!==i&&"pattern"!==i||e(r)):"userSpaceOnUse"!==n._attr("gradientUnits")}(o)&&n&&n.type===s.CONST.TRANS_TRANSLATE&&(a=!0),"pattern"===i&&o._attr("patternTransform")&&(a=!1)))),a}}function U(t,e){var n,i=s.math.matrix.list(z(I(t)),e);N(t,i),t.el[0]._d=i,"none"!==L(t,"stroke")&&(n=function(t,e){var n,i,o,a,c=s.math.rad(45);if(e.type===s.CONST.TRANS_TRANSLATE||e.type===s.CONST.TRANS_ROTATE)return null;if(0===(n=k(L(t,"stroke-width"),r)))return null;i=s.math.matrix.point({x:0,y:0},e),e.scale&&e.a!==e.d&&(c=Math.atan2(e.d,e.a));return o=s.math.matrix.point({x:n*Math.cos(c),y:n*Math.sin(c)},e),(a=k(s.math.length(i.x,i.y,o.x,o.y),r))!==n?a:null}(t,e),n&&(t._removeAttr("stroke-width"),t.el[0]._css["stroke-width"]=void 0,k(new u.Length(L(t,"stroke-width")).px(),r)!==n&&(t._attr("stroke-width",n),t.el[0]._css["stroke-width"]=n)))}function G(t){var e;return(t=t.trim()).indexOf("url(")>-1?t=t.replace(/"/g,""):(t=t.toLowerCase(),void 0!==M.color[t]?M.color[t]:t.indexOf("#")>-1&&7===t.length?n(t,t):t.indexOf("#")>-1&&4===t.length?n(t,"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]):t.indexOf("rgba")>-1||t.indexOf("hsla")>-1?t:t.indexOf("rgb")>-1?n(t,s.fn.hex6(t)):t.indexOf("hsl")>-1?(e=(e=t.replace(/hsl\(|\)|%/g,"")).split(/[, ]/).filter((function(t){return Number(String(t).trim())})),n(t,s.fn.hsl2Hex({h:e[0],s:e[1]/100,l:e[2]/100}))):void 0!==s.CONST.VALID_COLORS[t]?n(t,s.CONST.VALID_COLORS[t]):t);function n(t,e){var n,r=e,i=function(t){var e=t,n=t.replace("#","").toLowerCase();n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&(e="#"+n[0]+n[2]+n[4]);return e}(e);return i.length<r.length&&(r=i),n=function(t){var e=t;return h.each(s.CONST.VALID_COLORS,(function(n,r){if(t===n)return e=r,!1})),e}(e),n.length<r.length&&(r=n),M.color[t]=r,r}}function z(t){for(var e=0,n=[];e<t.length;e++)"a"===t[e].type||"A"===t[e].type?n=n.concat(s.math.arc2Cubic(t[e-1],t[e])):n.push(t[e]);return n}function $(t){return"-"===(t+="")[0]?"0"===t[1]&&"."===t[2]&&(t="-"+t.slice(2)):"0"===t[0]&&"."===t[1]&&(t=t.slice(1)),t}}(),y=function(){return{le:function(e){var n,r=e._findTag(i.join(",")),o=s.utils.readFontFaces(e._find("defs > style")._text());return r.length>0&&(n=function(t){var e=t._findTag("style"),n={};e.length>0&&s.fn.readStyles(e._text()).forEach((function(t){var e=0;if(1===t.type)for(;e<t.style.length;e++)"font-family"!==t.style[e]&&"font-weight"!==t.style[e]&&"font-style"!==t.style[e]||(n[t.selectorText.replace(".","")]={attr:t.style[e],value:t.style[t.style[e]]})}));return n}(e),r._each((function(r){var i,a=r._text();void 0!==a&&(""!==(a=(a||"").trim())?(i=function(e,n,r){var i={"font-family":null,"font-weight":null,"font-style":null};i["font-family"]=o(e,"font-family",n)||"",r[i["font-family"]]?(i["font-weight"]="normal",i["font-style"]="normal"):(i["font-weight"]=o(e,"font-weight",n)||"normal",i["font-weight"]=t(i["font-weight"]),i["font-style"]=o(e,"font-style",n)||"normal");return i;function o(t,e,n){var r,i=t._attr("class"),a=t._parent();switch(i&&(i=i.split(" ")).forEach((function(t){n[t]&&n[t].attr===e&&(r=n[t].value)})),r||(r=t._attr(e)),r||a.el[0]&&1===a.el[0].nodeType&&(r=o(a,e,n)),!r&&n.svg&&n.svg.attr===e&&(r=n.svg.value),e){case"font-size":r&&!1===h.isNumeric(r)&&-1===r.indexOf("%")&&(r=new u.Length(r).px());break;case"font-weight":"normal"!==r&&500!==r||(r=400)}return r}}(r,n,o),s.utils.subset(e.fonts,i["font-family"].replace(/['"]/g,""),i["font-weight"],i["font-style"],a)):r._remove())}))),e},compress:function(n){return n.fonts={},n.font_faces=[],h.each(y,(function(t,e){"compress"!==e&&"embed"!==e&&(n=t(n))})),(r=e,r.font_faces instanceof Promise?r.font_faces:Promise.resolve(r.font_faces)).then((function(r){var i=[];return r?(h.each(n.fonts.subset,(function(o,a){n.fonts.subset[a].urls=[],r=r.filter((function(e){return function(e,r,i){return!((r.family||"").split(/ *, */g).indexOf(e["font-family"])>-1)||(s.CONST.FONTS.DEFAULT.indexOf(r.family)>-1&&(void 0!==t(e["font-weight"])&&t(e["font-weight"])!==t(r.weight)||void 0!==e["font-style"]&&e["font-style"]!==r.style)||e.src&&n.fonts.subset[i].urls.push(e.src),!1)}(e,o,a)})),e.local_fonts[o.family]&&n.fonts.subset[a].urls.push(e.local_fonts[o.family]),!n.fonts.subset[a].urls.length&&o.family&&(a!==o.family+"-regular"&&n.fonts.subset[o.family+"-regular"]?function(t,e){var r=n.fonts.subset[t+"-regular"];n.fonts.subset[e].unicodes.forEach((function(t){-1===r.unicodes.indexOf(t)&&r.unicodes.push(t)})),r.unicodes=r.unicodes.sort((function(t,e){return t-e})),delete n.fonts.subset[e]}(o.family,a):o.family.split(/ *, */g).forEach((function(t){i.push(function(t,e,n,r,i){var o=s.CONST.FONTS.GOOGLE_URL+"/css",a={normal:400,bold:700},c=[];o+="?family="+e.replace(/ {2,}/g," ").replace(/ /g,"+"),n&&(o+=":"+(a[n]||n));"italic"===r&&(o+="i");return o+="&text="+i.reduce((function(t,e){var n=String.fromCharCode(e);try{t.push(encodeURIComponent(n))}catch(t){}return t}),[]).join(""),o+="&v=24",s.fn.getWoffURL([o]).then((function(e){return e.forEach((function(t){s.fn.parseWoffURL(t,c)})),{name:t,import:o,urls:c.map((function(t){return t.src}))}}))}(a,t,o.weight,o.style,o.unicodes))})))})),Promise.all(i).then((function(t){return t.forEach((function(t){n.fonts.subset[t.name].urls=n.fonts.subset[t.name].urls.concat(t.urls)})),s.getFonts(n.fonts,!0,e.subset).then((function(t){return delete n.fonts,n.embed=t||"",n.embed_size=0,e.embed_fonts&&n.embed&&(n=y.embed(n)),n})).catch((function(t){return console.error(t),n.font_error=!0,n.embed_size=0,n}))}))):n}));var r},embed:function(t,e){var n,r,i=s.fn.getFontNode(t),o=!0,a=s.fn.readStyles(i._text());e||(e=t.embed);0===i.length&&(o=!1,i=h.parseHTML("<style></style>"),0===(r=t._findTag("defs")).length&&(r=h.parseHTML("<defs></defs>"),t._prepend(r)),r._eq(0)._prepend(i));(a||[]).forEach((function(t){switch(t.type){case 1:case 4:case 7:e=(e||"")+" "+t.cssText}})),e?(n=i._text(),i._empty()._text(e),t.embed_size=e.length-n.length,t.embed_size<0&&(t.embed_size=0)):!1===o&&(r=i._parent(),i._remove(),0===r._children().length&&r._remove());return t}};function t(t){return{400:"normal",700:"bold"}[t]||t}}();return{compare:function(t,e,n,r){return Promise.all([s.fn.image.replaceBase64(t).then((function(t){return s.go.getBlob(t,{width:n,height:r},"png")})),s.fn.image.replaceBase64(e).then((function(t){return s.go.getBlob(t,{width:n,height:r},"png")}))]).then((function(t){return new Promise((function(e){(function(t){var e,n,r,i=1,o={red:255,green:0,blue:255,alpha:128},a={r:0,g:0,b:0,a:0},c={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},u={flat:function(t,e){t[e]=o.red,t[e+1]=o.green,t[e+2]=o.blue,t[e+3]=o.alpha},movement:function(t,e,n,r){t[e]=(r.r*(o.red/255)+o.red)/2,t[e+1]=(r.g*(o.green/255)+o.green)/2,t[e+2]=(r.b*(o.blue/255)+o.blue)/2,t[e+3]=r.a},flatDifferenceIntensity:function(t,e,n,r){t[e]=o.red,t[e+1]=o.green,t[e+2]=o.blue,t[e+3]=x(n,r)},movementDifferenceIntensity:function(t,e,n,r){var i=x(n,r)/255*.8;t[e]=(1-i)*(r.r*(o.red/255))+i*o.red,t[e+1]=(1-i)*(r.g*(o.green/255))+i*o.green,t[e+2]=(1-i)*(r.b*(o.blue/255))+i*o.blue,t[e+3]=r.a},diffOnly:function(t,e,n,r){t[e]=r.r,t[e+1]=r.g,t[e+2]=r.b,t[e+3]=r.a}},l=u.flat,f=0,d=!0,h={},v=[],p=[],g=!0,m=!1,y=!1;function x(t,e){return(Math.abs(t.r-e.r)+Math.abs(t.g-e.g)+Math.abs(t.b-e.b))/3}function k(t,e,n,r,i){return t>(i.left||0)&&t<(i.right||n)&&e>(i.top||0)&&e<(i.bottom||r)}function w(t,e,i,o){var a=!0;return void 0===n||k(t,e,i,o,n)||(a=!1),void 0!==r&&k(t,e,i,o,r)&&(a=!1),a}function b(){var t,e=p.length;for(t=0;t<e;t++)"function"==typeof p[t]&&p[t](h)}function M(t,e,n){var r,i;for(r=0;r<t;r++)for(i=0;i<e;i++)n(r,i)}function _(t,e,n){var r=0,i=0,o=0,a=0,s=0,c=0,u=0,l=0;M(e,n,(function(n,f){var d=4*(f*e+n),h=t[d],v=t[d+1],p=t[d+2],g=t[d+3],m=S(h,v,p);h===v&&h===p&&g&&(0===h?l++:255===h&&u++),r++,i+=h/255*100,o+=v/255*100,a+=p/255*100,s+=(255-g)/255*100,c+=m/255*100})),h.red=Math.floor(i/r),h.green=Math.floor(o/r),h.blue=Math.floor(a/r),h.alpha=Math.floor(s/r),h.brightness=Math.floor(c/r),h.white=Math.floor(u/r*100),h.black=Math.floor(l/r*100),b()}function F(t,e){var n=new Image;n.setAttribute||(n.setAttribute=function(){}),d&&n.setAttribute("crossorigin","anonymous"),n.onerror=function(t){n.onload=null,n.onerror=null,v.push({error:t?t+"":"Image load error."}),e()},n.onload=function(){n.onload=null,n.onerror=null;var t,r=document.createElement("canvas"),i=n.width,o=n.height;y&&1===v.length&&(i=v[0].width,o=v[0].height),r.width=i,r.height=o,r.getContext("2d").drawImage(n,0,0,i,o),t=r.getContext("2d").getImageData(0,0,i,o),v.push(t),e(t,i,o)},"string"==typeof t?(n.src=t,n.complete&&n.naturalWidth>0&&n.onload()):void 0!==t.data&&"number"==typeof t.width&&"number"==typeof t.height?(v.push(t),e(t,t.width,t.height)):"undefined"!=typeof Buffer&&t instanceof Buffer?n.src=t:s.utils.readFile(t,"dataURL").then((function(t){n.src=t.result}))}function E(t,e,n){var r=Math.abs(t-e);return void 0!==t&&void 0!==e&&(t===e||r<c[n])}function A(t,e){var n=E(t.a,e.a,"alpha");return E(t.brightness,e.brightness,"minBrightness")&&n}function S(t,e,n){return.3*t+.59*e+.11*n}function T(t,e){var n=t.r===e.r,r=t.g===e.g,i=t.b===e.b;return n&&r&&i}function L(t,e){var n=E(t.r,e.r,"red"),r=E(t.g,e.g,"green"),i=E(t.b,e.b,"blue"),o=E(t.a,e.a,"alpha");return n&&r&&i&&o}function C(t,e){return Math.abs(t.brightness-e.brightness)>c.maxBrightness}function O(t,e,n){var r,i,o=t/255,a=e/255,s=n/255,c=Math.max(o,a,s),u=Math.min(o,a,s);if(c===u)r=0;else switch(i=c-u,c){case o:r=(a-s)/i+(a<s?6:0);break;case a:r=(s-o)/i+2;break;case s:r=(o-a)/i+4;break;default:r/=6}return r}function N(t,e,n,r,i,o){var s,c,u=1,l=0,f=0,d=0;for(D(t),s=-1*u;s<=u;s++)for(c=-1*u;c<=u;c++)if(0===s&&0===c);else{if(!R(a,e,4*((r+c)*o+(i+s)),n))continue;if(P(a),D(a),C(t,a)&&l++,T(t,a)&&d++,Math.abs(a.h-t.h)>.3&&f++,f>1||l>1)return!0}return d<2}function I(t,n,r){"diffOnly"!==e&&(t[n]=r.r,t[n+1]=r.g,t[n+2]=r.b,t[n+3]=r.a*i)}function B(t,n,r){"diffOnly"!==e&&(t[n]=r.brightness,t[n+1]=r.brightness,t[n+2]=r.brightness,t[n+3]=r.a*i)}function R(t,e,n){return e.length>n&&(t.r=e[n],t.g=e[n+1],t.b=e[n+2],t.a=e[n+3],!0)}function P(t){t.brightness=S(t.r,t.g,t.b)}function D(t){t.h=O(t.r,t.g,t.b)}function j(t,e,n,r){var i=document.createElement("canvas"),o=t.data,a=e.data;i.width=n,i.height=r;var s,c=i.getContext("2d"),u=c.createImageData(n,r),d=u.data,v=0,p={top:r,left:n,bottom:0,right:0},y=function(t,e){p.left=Math.min(t,p.left),p.right=Math.max(t,p.right),p.top=Math.min(e,p.top),p.bottom=Math.max(e,p.bottom)},x=Date.now();f&&g&&(n>f||r>f)&&(s=6);var k={r:0,g:0,b:0,a:0},b={r:0,g:0,b:0,a:0};M(n,r,(function(t,e){if(!s||e%s!=0&&t%s!=0){var i=4*(e*n+t),c=w(t,e,n,r);if(R(k,o,i,1)&&R(b,a,i,2))return m?(P(k),P(b),void(A(k,b)||!c?B(d,i,b):(l(d,i,k,b),v++,y(t,e)))):void(L(k,b)||!c?I(d,i,k):g&&(P(k),P(b),N(k,o,1,e,t,n)||N(b,a,2,e,t,n))&&(A(k,b)||!c)?B(d,i,b):(l(d,i,k,b),v++,y(t,e)))}})),h.rawMisMatchPercentage=v/(r*n)*100,h.misMatchPercentage=h.rawMisMatchPercentage.toFixed(2),h.diffBounds=p,h.analysisTime=Date.now()-x,h.getImageDataUrl=function(t){var e=0;return t&&(e=U(t,c,i)),c.putImageData(u,0,e),i.toDataURL("image/png")},i.toBuffer&&(h.getBuffer=function(n){if(n){var r=i.width+2;i.width=3*r,c.putImageData(t,0,0),c.putImageData(e,r,0),c.putImageData(u,2*r,0)}else c.putImageData(u,0,0);return i.toBuffer()})}function U(t,e,n){var r=2,i=e.measureText(t).width+2*r,o=22;return e.font="12px sans-serif",i>n.width&&(n.width=i),n.height+=o,e.fillStyle="#666",e.fillRect(0,0,n.width,o-4),e.fillStyle="#fff",e.fillRect(0,o-4,n.width,4),e.fillStyle="#fff",e.textBaseline="top",e.font="12px sans-serif",e.fillText(t,r,1),o}function G(t,e,n){var r,i;return t.height<n||t.width<e?((r=document.createElement("canvas")).width=e,r.height=n,(i=r.getContext("2d")).putImageData(t,0,0),i.getImageData(0,0,e,n)):t}function z(t){var a;if(t.errorColor)for(a in t.errorColor)t.hasOwnProperty(a)&&(o[a]=void 0===t.errorColor[a]?o[a]:t.errorColor[a]);t.errorType&&u[t.errorType]&&(l=u[t.errorType],e=t.errorType),t.errorPixel&&"function"==typeof t.errorPixel&&(l=t.errorPixel),i=isNaN(Number(t.transparency))?i:t.transparency,void 0!==t.largeImageThreshold&&(f=t.largeImageThreshold),void 0!==t.useCrossOrigin&&(d=t.useCrossOrigin),void 0!==t.boundingBox&&(n=t.boundingBox),void 0!==t.ignoredBox&&(r=t.ignoredBox)}function $(t,e){function n(){var t,e;if(2===v.length){if(v[0].error||v[1].error)return(h={}).error=v[0].error?v[0].error:v[1].error,void b();t=v[0].width>v[1].width?v[0].width:v[1].width,e=v[0].height>v[1].height?v[0].height:v[1].height,v[0].width===v[1].width&&v[0].height===v[1].height?h.isSameDimensions=!0:h.isSameDimensions=!1,h.dimensionDifference={width:v[0].width-v[1].width,height:v[0].height-v[1].height},j(G(v[0],t,e),G(v[1],t,e),t,e),b()}}v=[],F(t,n),F(e,n)}function H(e){var n,r="function"==typeof e;r||(n=e);var i={scaleToSameSize:function(){return y=!0,r&&e(),i},useOriginalSize:function(){return y=!1,r&&e(),i},ignoreNothing:function(){return c.red=0,c.green=0,c.blue=0,c.alpha=0,c.minBrightness=0,c.maxBrightness=255,g=!1,m=!1,r&&e(),i},ignoreLess:function(){return c.red=16,c.green=16,c.blue=16,c.alpha=16,c.minBrightness=16,c.maxBrightness=240,g=!1,m=!1,r&&e(),i},ignoreAntialiasing:function(){return c.red=32,c.green=32,c.blue=32,c.alpha=32,c.minBrightness=64,c.maxBrightness=96,g=!0,m=!1,r&&e(),i},ignoreColors:function(){return c.alpha=16,c.minBrightness=16,c.maxBrightness=240,g=!1,m=!0,r&&e(),i},ignoreAlpha:function(){return c.red=16,c.green=16,c.blue=16,c.alpha=255,c.minBrightness=16,c.maxBrightness=240,g=!1,m=!1,r&&e(),i},repaint:function(){return r&&e(),i},outputSettings:function(t){return z(t),i},onComplete:function(e){function r(){$(t,n)}return p.push(e),r(),H(r)}};return i}var V={onComplete:function(e){p.push(e),F(t,(function(t,e,n){_(t.data,e,n)}))},compareTo:function(t){return H(t)},outputSettings:function(t){return z(t),V}};return V})(t[0].blob).compareTo(t[1].blob).onComplete((function(n){n.ori=t[0].b64,n.nano=t[1].b64,e(n)}))}))})).catch((function(t){console.error(t)}))},stringify:function(t,e){var n;return 0===t.attr("x")&&t.attr("x",null),0===t.attr("y")&&t.attr("y",null),function(t,e){return n(i(t),e),t._findTag("svg")._each((function(t){null!==t._attr("width")&&null!==t._attr("height")&&n(i(s.wrap(t)),e)})),t;function n(t,e){var n=t.attr("width"),r=t.attr("height"),i=t.viewBox();e===s.CONST.COMPRESS_IMG?(null!==n&&null!==r&&0===i.x&&0===i.y&&i.width===n&&i.height===r&&t._removeAttr("viewBox"),0===i.x&&0===i.y&&300===i.width&&150===i.height&&t._removeAttr("viewBox")):null===i.width&&null===i.height&&t.viewBox(0,0,n,r)}function i(t){var e,n=function(t){return{width:new u.Length(t.attr("width")||300).px(),height:new u.Length(t.attr("height")||150).px()}}(t);return null!==n.width&&-1===((t.attr("width")||"")+"").indexOf("%")&&(h.isNumeric(n.width)&&(n.width=s.math.round(n.width,r)),t.attr("width",n.width)),null!==n.height&&-1===((t.attr("height")||"")+"").indexOf("%")&&(h.isNumeric(n.height)&&(n.height=s.math.round(n.height,r)),t.attr("height",n.height)),null!==(e=t.viewBox())&&(e.x=k(e.x,r),e.y=k(e.y,r),e.width=k(e.width,r),e.height=k(e.height,r),null===e.width&&null===e.height||t.viewBox(e.x,e.y,e.width,e.height)),t}}(t,e=e||s.CONST.COMPRESS_IMG),300==t.attr("width")&&150==t.attr("height")&&(t._removeAttr("width"),t._removeAttr("height")),n=(n=h.serialize(t[0]).replace(/ >/g,">")).replace(/^<svg/,'<svg xmlns="'+s.CONST.XMLNS+'"'+(n.indexOf("xlink:")>-1?' xmlns:xlink="'+s.CONST.XLINK+'"':"")+(l.test(n)?' xmlns:v="'+s.CONST.VNS+'"':"")),n=g.compactIDs(n)},clean:function(t){return e=t,p.compress(t.str)},compress:function(t,n){var i;return(e=h.extend({},t)).mode=e.mode||s.CONST.COMPRESS_IMG,r=t.precision?parseInt(t.precision):3,e.mode!==s.CONST.COMPRESS_IMG?e.embed_fonts=0:void 0!==t.embed_fonts?e.embed_fonts=t.embed_fonts?1:0:e.embed_fonts=1,d=[],e.maintain_class=t.maintain_class||0,e.maintain_id=t.maintain_id||0,e.maintain_structure=t.maintain_structure||0,e.maintain_events=t.maintain_events||0,e.maintain_attrs=t.maintain_attrs||[],e.local_fonts=t.local_fonts||{},""!==(i=g.compress(e.str))?e.embed_fonts?y.compress(m.compress(i,n)):Promise.resolve(m.compress(i,n)):Promise.resolve(null)},embed:function(t,e){return y.embed(t,e)}};function x(t){return e.mode===s.CONST.COMPRESS_INLINE?function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=4,r=0,i="";if(d[t])i=d[t];else{for(;r<n;r++)i+=e.charAt(Math.floor(Math.random()*(0===r?52:62)));d[t]=i}return i}(t):(t+=v)<52?n(t):t<2704?[n(Math.floor(t/52)-1),n(t%52)].join(""):[n(Math.floor(t/2704)-1),n(Math.floor(t%2704/52)),n(t%52)].join("");function n(t){return String.fromCharCode((t<26?65:71)+t)}}function k(t,e){return e=void 0===e?4:e,e=Math.pow(10,e),"object"===_typeof(t)&&null!==t?Object.keys(t).forEach((function(n){h.isNumeric(t[n])&&(t[n]=Math.round(t[n]*e)/e)})):t=Math.round(t*e)/e,t}}();v=s.CONST,m=s.utils;var st=s.settings;T=s.math,L=s.formula,g=s.go,A=s.fn;return{v:s,_:h,Vecta:u}}(),_milnis=function(){var t=require("path"),e=require("fs-extra"),n=require("glob-promise"),r=require("he"),i=require("zlib"),o=b0w4l.v;return function(a,s,c){return c=Object.assign({fonts:!0,classes:!1,ids:!1,structure:!1,events:!1,precision:3,silent:!1,wordpress:!1,react:!1},c),a?void 0!==c.font_path?function(t){var e={};return n(t+"/*.*(TTF|ttf|woff|WOFF)").then((function(t){return t.forEach((function(t){var n=t.split("/"),r=n[n.length-1].replace(/.(TTF|ttf|woff|WOFF)/g,"");e[r]=t})),e}))}(c.font_path).then((function(t){return c.local_fonts=t,u(a,s,c)})):u(a,s,c):Promise.resolve();function u(a,s,c){return c.cli&&Object.keys(c).forEach((function(t){"true"===c[t]&&(c[t]=!0),"false"===c[t]&&(c[t]=!1)})),void 0!==c.br&&isNaN(parseInt(c.br))&&(console.log("Brotli compression: Invalid number for quality. Defaults to 11"),c.br=11),Buffer.isBuffer(a)?u(a.toString("utf8"),Buffer.byteLength(a),null,c):n(a).then((function(n){return function(t,e,n){var r=[];if(0===t.length)return Promise.resolve();return n?(t.forEach((function(t,n){r.push(e(t,n))})),Promise.all(r)):i(0,t,e);function i(t,e,n){var r=n(e[t],t);return r instanceof Promise?r.then((function(){if(t<e.length-1)return i(t+1,e,n)})):t<e.length-1?i(t+1,e,n):void 0}}(n,(function(n){return function(n,r,i){var a=t.extname(n).toLowerCase();return".svg"!==a&&".dxf"!==a?(console.error(n,": is not a valid SVG/DXF file."),Promise.resolve()):e.stat(n).then((function(s){return e.readFile(n,"utf8").then((function(c){var l=t.basename(n);return".dxf"===a&&(c=o.utils.dxf2svg(c,{dxf_dimensions:1,dxf_layers:0,dxf_stroke:.5,string:!0}),l=l.replace(a,".svg")),u(c,s.size,l,r).then((function(n){return r.react&&(l=l.replace(a,".jsx")),r.gzip||r.br||(n=n.toString("utf8")),e.outputFile(t.join(i,l),n)}))}))}))}(n,c,s)}))}));function u(t,e,n,a){var s={embed_fonts:a.fonts,maintain_class:a.classes,maintain_id:a.ids,maintain_structure:a.structure,maintain_events:a.events,maintain_attrs:a.attrs,precision:a.precision,local_fonts:a.local_fonts,type:"image/svg+xml"},c=process.hrtime();return s.str=t,s.str=o.nano.clean(s),o.nano.compress(s).then((function(t){var s,u,l,f;if(u=a.react?function(t,e){var n="    ",i=c(t),a={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"};return e._find("style, text tspan")._each((function(t){t._html("{'"+r.decode(t._html()).replace(/<!\[CDATA\[([\s\S]*?)]]>/,"$1").replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/</g,"\\x3c").replace(/>/g,"\\x3e").replace(/&/g,"\\x26")+"'}")})),'import * as React from "react"\n\nfunction '+i+"(props) {\n"+n+"return (\n"+n+n+s(o.nano.stringify(e).replace(/(<svg.+?)>/,"$1 {...props}>").replace(new RegExp("<[^/].+?(?:"+Object.keys(a).join("|")+")=.+?>","g"),(function(t){return t.replace(new RegExp("(.+?)("+Object.keys(a).join("|")+')(=".*?")',"g"),(function(t,e,n,r){return e+a[n]+r}))})).replace(/<[^\/].+?="\d*?\.?\d+?".*?>/g,(function(t){return t.replace(/(.+?=)"(\d*?\.?\d+?)"/g,"$1{$2}")})))+"\n"+n+")\n}\n\nexport default "+i;function s(t){var e=n+n,r="";return t.split(/>\s*</).forEach((function(t){"/"===t.charAt(0)&&(e=e.substring(n.length)),r+=e+"<"+t+">\n",t.indexOf("</")<0&&"!"!==t.charAt(0)&&"/"!==t.charAt(0)&&"/"!==t.charAt(t.length-1)&&(e+=n)})),r.substring(2*n.length+1,r.length-2)}function c(t){var e=!1;return(t.match(/[a-z]+|[0-9]+/gi)||["Nano"]).filter((function(t){if(isNaN(t)||e)return e=!0,!0})).map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join("")+"Svg"}}(n.slice(0,-4),t):a.wordpress?'<?xml version="1.0" encoding="utf-8"?>'+o.nano.stringify(t):o.nano.stringify(t),f=parseInt(process.hrtime(c)[1]/1e6+""),f,s=Buffer.from(u,"utf-8"),a.gzip)s=i.gzipSync(s,{});else if(a.br){var d;s=Buffer.from(i.brotliCompressSync(s,{params:(d={},_defineProperty(d,i.constants.BROTLI_PARAM_MODE,i.constants.BROTLI_MODE_TEXT),_defineProperty(d,i.constants.BROTLI_PARAM_QUALITY,a.br),d)}))}return a.silent||(l=Buffer.byteLength(s),console.log("[37m%s[92m%s[0m",(n||"Compression time")+" : ",f+"ms"),console.log("[37m%s[91m%s[0m",(e/1024).toFixed(1)+"KB -> "+(l/1024).toFixed(1)+"KB, ",((e-l)/e*100).toFixed(1)+"% saved\n")),s})).catch((function(t){console.error(s,t)}))}}}}(),_fs=require("fs-extra"),_path=require("path"),_request=require("request"),_isOnline=require("is-online"),_env_path=require("env-paths")("nano"),machine_id=require("node-machine-id").machineIdSync(),_nanofy=_milnis,LANG={no_serial:"Serial key is not provided. To obtain one, visit https://vecta.io/nano",invalid_serial:"Serial key is invalid. To obtain one, visit https://vecta.io/nano",cli_not_activated:"Product is not activated. Obtain serial key at https://vecta.io/nano and nanosvg --activate <YOUR SERIAL KEY> to activate",cli_activated:"Device activated, You can now use nanosvg to compress",device_limit:"Device limit for license reached. Please contact us to deactivate your devices",offline:"Please connect to internet to activate"},URL="https://us-central1-vecta-260bd.cloudfunctions.net/license/";module.exports=function(t,e,n){var r,i=_path.join(_env_path.data,".li");return r=(n=n||{}).cli?n.activate:n.key,_fs.readFile(i,"utf8").then((function(a){var s,c=a.split("|"),u=c[0],l=parseInt(o(c[1],machine_id)),f=parseFloat(o(c[2],machine_id)),d=Math.floor(6*Math.random()),h=Date.now(),v=!0;return r&&r!==u?_fs.remove(i).then((function(){return Promise.reject()})):((h<=f||"Invalid Date"===new Date(f).toString()||Object.is(l,NaN)||l<=0||0===d)&&(v=!1),(s=Math.floor((h-f)/864e5))>l&&(v=!1),v?(l-=s,_fs.outputFile(i,c[0]+"|"+o(l,machine_id)+"|"+o(h,machine_id)).then((function(){return _nanofy(t,e,n)}))):_fs.remove(i).then((function(){return r||(r=u),Promise.reject()})))})).catch((function(){return n.cli&&!r?Promise.reject({error:LANG.cli_not_activated}):function(t){return new Promise((function(e,n){_isOnline().then((function(r){if(r)if(t){if("string"==typeof t&&32===t.length)return _request({method:"POST",url:URL+"activate",body:{serial:t,device:machine_id},json:!0},(function(r,a,s){r?n(r):200===a.statusCode&&s.success&&s.left?_fs.outputFile(i,t+"|"+s.left+"|"+o(Date.now(),machine_id)).then((function(){e()})):200===a.statusCode&&s.device_limit?n({error:LANG.device_limit}):n({error:s.message})}));n({error:LANG.invalid_serial})}else n({error:LANG.no_serial});else n({error:LANG.offline})}))}))}(r).then((function(){if(!n.cli||!n.activate)return _nanofy(t,e,n);console.log(LANG.cli_activated)}))}));function o(t,e){var n,r,i,o="",a=0;for(n=(t+="").length,r=(e+="").length,e=e.toUpperCase(),i=0;i<n;i++)o+=s(t.substr(i,1),e.substr(a,1)),(a+=1)>=r&&(a=0);return o;function s(t,e){var n,r,i,o,a=t.charCodeAt(0),s=e.charCodeAt(0);return o=(i=(r=73-(n=a<=57?a-48:a-55)-(73-n<65?7:0)-(73-n<55?-43:0))+(s<=57?s-48:s-55))+(r<=57&&r>=48?(i>57?7:0)+(i>83?-43:0):(i>90?-43:0)+(i>100?7:0)),String.fromCharCode(o)}}};